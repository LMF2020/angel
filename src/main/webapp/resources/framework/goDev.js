!function(window){function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function w(a){return function(){return this[a]}}function ca(a){return function(){return a}}function ga(a,b,c){y.lc(this),this.aA=a,this.Gb=b,this.fF=c}function sa(){this.$z=[],this.KH=0,this.MH="  "}function Ca(){}function Da(a){this.key=-1,this.value=a}function Ea(a){this.jf=a,this.bn=q,this.reset()}function Ga(a){this.jf=a,this.reset()}function F(a){y.lc(this),this.$a=s,this.n=[],this.Lb=0,this.ax=this.Lg=q,a===f||a===q?this.Y=q:"string"==typeof a?"object"===a||"string"===a||"number"===a||"boolean"===a||"function"===a?this.Y=a:y.ka(a,"the string 'object', 'number', 'string', 'boolean', or 'function'","List constructor: type"):"function"==typeof a?this.Y=a===Object?"object":a===String?"string":a===Number?"number":a===Boolean?"boolean":a===Function?"function":a:y.ka(a,"null, a primitive type name, or a class type","List constructor: type")}function Ha(a){this.q=a,this.reset()}function na(a){y.lc(this),this.$a=s,a===f||a===q?this.Y=q:"string"==typeof a?"object"===a||"string"===a||"number"===a?this.Y=a:y.ka(a,"the string 'object', 'number' or 'string'","Set constructor: type"):"function"==typeof a?this.Y=a===Object?"object":a===String?"string":a===Number?"number":a:y.ka(a,"null, a primitive type name, or a class type","Set constructor: type"),this.Fc={},this.Fd=0,this.Lg=q,this.Lb=0,this.Ng=this.le=q}function Ja(a){this.Hc=a,this.reset()}function Ka(a){y.lc(this),this.Hc=a}function Ia(a,b){this.key=a,this.value=b,this.cn=this.Li=q}function Ma(a){this.Hc=a,this.reset()}function ma(a,b){y.lc(this),this.$a=s,a===f||a===q?this.Mg=q:"string"==typeof a?"object"===a||"string"===a||"number"===a?this.Mg=a:y.ka(a,"the string 'object', 'number' or 'string'","Map constructor: keytype"):"function"==typeof a?this.Mg=a===Object?"object":a===String?"string":a===Number?"number":a:y.ka(a,"null, a primitive type name, or a class type","Map constructor: keytype"),b===f||b===q?this.Vh=q:"string"==typeof b?"object"===b||"string"===b||"boolean"===b||"number"===b||"function"===b?this.Vh=b:y.ka(b,"the string 'object', 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):"function"==typeof b?this.Vh=b===Object?"object":b===String?"string":b===Number?"number":b===Boolean?"boolean":b===Function?"function":b:y.ka(b,"null, a primitive type name, or a class type","Map constructor: valtype"),this.Fc={},this.Fd=0,this.Lg=q,this.Lb=0,this.Ng=this.le=q}function Na(a,b){a.Mg!==q&&("string"==typeof a.Mg?(typeof b!==a.Mg||b===q)&&y.Kb(b,a.Mg):b instanceof a.Mg||y.Kb(b,a.Mg))}function A(a,b){a===f||b===f?this.y=this.x=0:!x||"number"==typeof a&&"number"==typeof b?(this.x=a,this.y=b):y.m("Invalid arguments to Point constructor")}function Ra(a,b){if(0===a)return b>0?90:0>b?270:0;if(0===b)return a>0?0:180;if(isNaN(a)||isNaN(b))return 0;var c=180*Math.atan(Math.abs(b/a))/Math.PI;return 0>a?c=0>b?c+180:180-c:0>b&&(c=360-c),c}function Ta(a,b){return x&&y.l(b,ka,A,"transformInverted:t"),b.gi(a),a}function ha(a,b){a===f||b===f?this.height=this.width=0:!x||"number"==typeof a&&(a>=0||isNaN(a))&&"number"==typeof b&&(b>=0||isNaN(b))?(this.width=a,this.height=b):y.m("Invalid arguments to Size constructor")}function B(a,b,c,d){a===f?this.height=this.width=this.y=this.x=0:a instanceof A?b instanceof A?(this.x=Math.min(a.x,b.x),this.y=Math.min(a.y,b.y),this.width=Math.abs(a.x-b.x),this.height=Math.abs(a.y-b.y)):b instanceof ha?(this.x=a.x,this.y=a.y,this.width=b.width,this.height=b.height):y.m("Incorrect arguments supplied"):!x||"number"==typeof a&&"number"==typeof b&&"number"==typeof c&&(c>=0||isNaN(c))&&"number"==typeof d&&(d>=0||isNaN(d))?(this.x=a,this.y=b,this.width=c,this.height=d):y.m("Invalid arguments to Rect constructor")}function Za(a,b,c){a.width=b,a.height=c}function $a(a,b,c,d,e){y.K(a);var f=a.width;return-f>=c+e?(a.x+=f/2,a.width=0):(a.x-=e,a.width+=c+e),c=a.height,-c>=b+d?(a.y+=c/2,a.height=0):(a.y-=b,a.height+=b+d),a}function bb(a,b,c,d,e){y.K(a);var f=Math.max(a.x,b),g=Math.max(a.y,c);return b=Math.min(a.x+a.width,b+d),c=Math.min(a.y+a.height,c+e),a.x=f,a.y=g,a.width=Math.max(0,b-f),a.height=Math.max(0,c-g),a}function cb(a,b){var c=a.width,d=b.width+10+10,e=a.x,f=b.x-10;return e>d+f||f>c+e?s:(c=a.height,d=b.height+10+10,e=a.y,f=b.y-10,e>d+f||f>c+e?s:h)}function ib(a,b,c,d,e){var f=Math.min(a.x,b),g=Math.min(a.y,c);return b=Math.max(a.x+a.width,b+d),c=Math.max(a.y+a.height,c+e),a.x=f,a.y=g,a.width=b-f,a.height=c-g,a}function ab(a,b,c,d){a===f?this.left=this.bottom=this.right=this.top=0:b===f?this.left=this.bottom=this.right=this.top=a:c===f?(d=b,this.top=a,this.right=b,this.bottom=a,this.left=d):d!==f?(this.top=a,this.right=b,this.bottom=c,this.left=d):y.m("Invalid arguments to Margin constructor")}function ka(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}function J(a,b,c,d){a===f?this.offsetY=this.offsetX=this.y=this.x=0:(b===f&&(b=0),c===f&&(c=0),d===f&&(d=0),this.x=a,this.y=b,this.offsetX=c,this.offsetY=d)}function nb(a,b){return a.x=0/0,a.y=0/0,a.offsetX=b,a}function lb(a,b){(isNaN(a)||a>1||0>a)&&y.ka(a,"0 <= "+b+" <= 1",J,b)}function mb(a,b){(isNaN(a)||1/0===a||-1/0===a)&&y.ka(a,"real number, not NaN or Infinity",J,b)}function yb(a){return!isNaN(a.x)&&!isNaN(a.y)}function Cb(a){return isNaN(a.x)||isNaN(a.y)}function Bb(a){return Cb(a)&&1===a.offsetX&&0!==a.offsetY}function Db(a){return isNaN(a.x)&&isNaN(a.y)&&-1===a.offsetX&&0===a.offsetY}function nc(a){1<arguments.length&&y.m("Geometry constructor can take at most one optional argument, the Geometry type."),y.lc(this),a===f?a=oc:x&&y.rb(a,nc,nc,"constructor:type"),this.Y=a,this.cd=this.Vc=this.$b=this.Rb=0,this.Uj=new F(pc),this.Zs=this.Uj.Lb,this.Ls=(new B).freeze(),this.Ua=h,this.Qh=Mb,this.Rh=Zb,this.jt=this.kt=0/0,this.Hd=H.ws,this.ec=qc}function Dc(a,b){if(a.type!==wc||b.type!==oc)return s;if(1===b.fb.count){var c=b.fb.sa(0);if(1===c.Ca.count&&H.I(a.ha,c.ha)&&H.I(a.ia,c.ia)&&(c=c.Ca.sa(0),c.type===Ec&&H.I(a.D,c.D)&&H.I(a.F,c.F)))return h}return s}function Uc(a,b){var c,d,e,f;for(c=a.length,d=y.M(),e=0;c>e;e++)f=a[e],d.x=f.x1,d.y=f.y1,b.Qa(d),f.x1=d.x,f.y1=d.y,d.x=f.x2,d.y=f.y2,b.Qa(d),f.x2=d.x,f.y2=d.y,d.x=f.Bd,d.y=f.Cd,b.Qa(d),f.Bd=d.x,f.Cd=d.y,d.x=f.Db,d.y=f.Eb,b.Qa(d),f.Db=d.x,f.Eb=d.y;y.B(d)}function Vc(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o;switch(a.type){case wc:case xc:case yc:c?b.q(a.Rb,a.$b,0,0):ib(b,a.Rb,a.$b,0,0),ib(b,a.Vc,a.cd,0,0);break;case oc:for(a=a.fb,d=a.length,e=0;d>e;e++)for(f=a.n[e],c&&0===e?b.q(f.ha,f.ia,0,0):ib(b,f.ha,f.ia,0,0),g=f.Ca,h=g.length,i=f.ha,j=f.ia,k=0;h>k;k++)switch(l=g.n[k],l.type){case Ec:case Wc:i=l.D,j=l.F,ib(b,i,j,0,0);break;case Xc:H.Dn(i,j,l.ib,l.Ab,l.Rd,l.Sd,l.D,l.F,.5,b),i=l.D,j=l.F;break;case cd:H.fz(i,j,l.ib,l.Ab,l.D,l.F,.5,b),i=l.D,j=l.F;break;case dd:case ed:for(l=l.type===dd?fd(l,f):gd(l,f,i,j),m=l.length,n=q,o=0;m>o;o++)n=l[o],H.Dn(n.x1,n.y1,n.x2,n.y2,n.Bd,n.Cd,n.Db,n.Eb,.5,b);n!==q&&(i=n.Db,j=n.Eb);break;default:y.m("Unknown Segment type: "+l.type)}break;default:y.m("Unknown Geometry type: "+a.type)}}function id(a,b,c,d,e,f,g,i){var j,k;if(H.jd(e,f,g,i,.05,a,b))return h;if(j=(a-c)*(f-i),0===j)return 0;if(k=((a*d-b*c)*(e-g)-(a-c)*(e*i-f*g))/j,b=(a*d-b*c)*(f-i)/j,k>=a)return 0;if((f>i?f-i:i-f)>(e>g?e-g:g-e)){if(i>f?(a=f,e=i):(a=i,e=f),a>b||b>e)return 0}else if(g>e?(a=e,e=g):a=g,a>k||k>e)return 0;return j>0?1:-1}function jd(a,b,c,d){for(var e=a.fb.length,f=0;e>f;f++)if(a.fb.n[f].Ea(b,c,d))return h;return s}function pc(a,b,c){y.lc(this),c===f&&(c=h),this.bl=c,this.Mm=h,a!==f?(x&&y.p(a,pc,"sx"),this.Rb=a):this.Rb=0,b!==f?(x&&y.p(b,pc,"sy"),this.$b=b):this.$b=0,this.Fq=new F(hd),this.Wt=this.Fq.Lb,this.Ua=h}function hd(a,b,c,d,e,g,i,j){y.lc(this),a===f?a=Ec:x&&y.rb(a,hd,hd,"constructor:type"),this.Y=a,a===dd?(b!==f?(x&&y.p(b,hd,"ex"),this.Zd=b):this.Zd=0,c!==f?(x&&y.p(c,hd,"ey"),this.$d=c):this.$d=0,d!==f&&(x&&y.p(d,hd,"x1"),this.nm=d),e!==f&&(x&&y.p(e,hd,"y1"),this.om=e),g!==f&&(x&&y.p(g,hd,"x2"),this.Oi=Math.max(g||0,0)),i!==f&&"number"==typeof i?(x&&y.p(i,hd,"y2"),this.Pi=Math.max(i||0,0)):this.Pi=this.Oi):a===ed?(b!==f&&x&&y.p(b,hd,"ex"),c!==f&&x&&y.p(c,hd,"ey"),d!==f&&x&&y.p(d,hd,"x1"),e!==f&&x&&y.p(e,hd,"y1"),this.Xd=b||0,this.Yd=c||0,this.Oi=Math.max(d||0,0),this.Pi=Math.max(e||0,0),this.Zd=i?1:0,this.$d=j?1:0,a=(g||0)%360,0>a&&(a+=360),this.sn=a):(b!==f?(x&&y.p(b,hd,"ex"),this.Xd=b):this.Xd=0,c!==f?(x&&y.p(c,hd,"ey"),this.Yd=c):this.Yd=0,d!==f&&(x&&y.p(d,hd,"x1"),this.lg=d),e!==f&&(x&&y.p(e,hd,"y1"),this.mg=e),g!==f&&(x&&y.p(g,hd,"x2"),this.jk=g),i!==f&&"number"==typeof i&&(x&&y.p(i,hd,"y2"),this.kk=i)),this.Ua=h,this.Kg=s,this.oi=q}function fd(a,b){var c,d,e,g,h,i,j,k;if(a.oi!==q&&b.Ua===s)return a.oi;if(c=a.radiusX,d=a.radiusY,d===f&&(d=c),e=H.VB(a.nm,a.om,d>c?c:d,a.Vf,a.Vf+a.nh),c!==d){for(g=y.xg(),g.reset(),d>c?g.scale(1,d/c):g.scale(c/d,1),c=e.length,d=y.M(),h=0,i=0,j=0;c>j;j++)k=e[j],0===j&&(h=k.x1,i=k.y1),k.x1-=h,k.y1-=i,k.x2-=h,k.y2-=i,k.Bd-=h,k.Cd-=i,k.Db-=h,k.Eb-=i;for(j=0;c>j;j++)k=e[j],d.x=k.x1,d.y=k.y1,g.Qa(d),k.x1=d.x+h,k.y1=d.y+i,d.x=k.x2,d.y=k.y2,g.Qa(d),k.x2=d.x+h,k.y2=d.y+i,d.x=k.Bd,d.y=k.Cd,g.Qa(d),k.Bd=d.x+h,k.Cd=d.y+i,d.x=k.Db,d.y=k.Eb,g.Qa(d),k.Db=d.x+h,k.Eb=d.y+i;y.B(d),y.ye(g)}return a.oi=e,a.oi}function gd(a,b,c,d){function e(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(f(a,b))}function f(a,b){return(a[0]*b[0]+a[1]*b[1])/(Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))*Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)))}if(a.oi!==q&&b.Ua===s)return a.oi;b=a.Oi;var g=a.Pi,i=a.sn*(Math.PI/180),j=a.Vf,k=a.$d,l=a.Xd,m=a.Yd,n=Math.cos(i)*(c-l)/2+Math.sin(i)*(d-m)/2,o=-Math.sin(i)*(c-l)/2+Math.cos(i)*(d-m)/2,p=Math.pow(n,2)/Math.pow(b,2)+Math.pow(o,2)/Math.pow(g,2);return p>1&&(b*=Math.sqrt(p),g*=Math.sqrt(p)),p=(j===k?-1:1)*Math.sqrt((Math.pow(b,2)*Math.pow(g,2)-Math.pow(b,2)*Math.pow(o,2)-Math.pow(g,2)*Math.pow(n,2))/(Math.pow(b,2)*Math.pow(o,2)+Math.pow(g,2)*Math.pow(n,2))),isNaN(p)&&(p=0),j=p*b*o/g,p=p*-g*n/b,isNaN(j)&&(j=0),isNaN(p)&&(p=0),c=(c+l)/2+Math.cos(i)*j-Math.sin(i)*p,d=(d+m)/2+Math.sin(i)*j+Math.cos(i)*p,i=e([1,0],[(n-j)/b,(o-p)/g]),m=[(n-j)/b,(o-p)/g],o=[(-n-j)/b,(-o-p)/g],n=e(m,o),-1>=f(m,o)&&(n=Math.PI),1<=f(m,o)&&(n=0),0===k&&n>0&&(n-=2*Math.PI),1===k&&0>n&&(n+=2*Math.PI),k=b>g?1:b/g,o=b>g?g/b:1,b=H.VB(0,0,b>g?b:g,i,i+n,h),g=y.xg(),g.reset(),g.translate(c,d),g.rotate(a.sn,0,0),g.scale(k,o),Uc(b,g),y.ye(g),a.oi=b,a.oi}function kd(){this.ca=q,this.Ux=new A(0,0).freeze(),this.Cw=new A(0,0).freeze(),this.Hs=this.zt=0,this.nt="",this.iu=this.Vs=s,this.Ts=this.Ks=0,this.pi=this.ct=s,this.lp=q,this.gu=0,this.Cf=this.eu=q}function ld(){this.ca=q,this.Gb="",this.Ot=this.au=q,this.Is=s}function md(){this.clear()}function G(a){1<arguments.length&&y.m("Model constructor can only take one optional argument, the Array of node data."),y.lc(this),this.ww=this.Gb="",this.ak=s,this.lf=[],this.mc=new ma(q,Object),this.ll="key",this.Os=this.rt=q,this.iq="category",this.cg=new ma(q,na),this.Ii=q,this.Ph=s,this.Tx=q,this.va=new wd,a!==f&&(this.Pf=a)}function yd(a,b){var c,d,e,f,g,i;if(y.isArray(b))for(c=y.Sb(b),d=0;c>d;d++)e=y.Hb(b,d),y.sb(e)&&y.EB(b,d,yd(a,e));else if(y.sb(b)){for(d in b)if(e=b[d],y.sb(e)&&(e=yd(a,e),b[d]=e,"points"===d&&Array.isArray(e))){for(f=h,g=0;g<e.length;g++)if("number"!=typeof e[g]){f=s;break}if(f){for(f=new F(A),g=0;g<e.length/2;g++)i=new A(e[2*g],e[2*g+1]),f.add(i);f.freeze(),b[d]=f}}if("object"!=typeof b)c=b;else{if(d=b,e=b["class"],"NaN"===e)d=0/0;else if("go.Point"===e)d=new A(Ad(b.x),Ad(b.y));else if("go.Size"===e)d=new ha(Ad(b.width),Ad(b.height));else if("go.Rect"===e)d=new B(Ad(b.x),Ad(b.y),Ad(b.width),Ad(b.height));else if("go.Margin"===e)d=new ab(Ad(b.top),Ad(b.right),Ad(b.bottom),Ad(b.left));else if("go.Spot"===e)d="string"==typeof b["enum"]?vb(b["enum"]):new J(Ad(b.x),Ad(b.y),Ad(b.offsetX),Ad(b.offsetY));else if("go.Brush"===e){if(d=new Hd,d.type=y.Il(Hd,b.type),b.start instanceof J&&(d.start=b.start),b.end instanceof J&&(d.end=b.end),"number"==typeof b.startRadius&&(d.Co=Ad(b.startRadius)),"number"==typeof b.endRadius&&(d.Ln=Ad(b.endRadius)),e=b.colorStops)for(c in e)d.addColorStop(parseFloat(c),e[c])}else"go.Geometry"===e&&(d="string"==typeof b.path?Lc(b.path):new nc,d.type=y.Il(nc,b.type),"number"==typeof b.startX&&(d.ha=Ad(b.startX)),"number"==typeof b.startY&&(d.ia=Ad(b.startY)),"number"==typeof b.endX&&(d.D=Ad(b.endX)),"number"==typeof b.endY&&(d.F=Ad(b.endY)),b.spot1 instanceof J&&(d.G=b.spot1),b.spot2 instanceof J&&(d.H=b.spot2));c=d}return c}return b}function xd(a,b,c){var g,h,d=y.Sb(b),e="[ ";for(c&&d>1&&(e+="\n"),g=0;d>g;g++)h=y.Hb(b,g),h!==f&&(g>0&&(e+=",",c&&(e+="\n")),e+=a.Hv(h));return c&&d>1&&(e+="\n"),e+" ]"}function Id(a){return isNaN(a)?"NaN":1/0===a?"9e9999":-1/0===a?"-9e9999":a}function Ad(a){return"number"==typeof a?a:"NaN"===a?0/0:"9e9999"===a?1/0:"-9e9999"===a?-1/0:parseFloat(a)}function Md(a,b,c,d,e,g,h,i,j){i===f&&(i=q),j===f&&(j=q);var k=new md;k.fa=a,k.Yc=c,k.Ye=b,k.propertyName=d,k.object=e,k.oldValue=g,k.tf=i,k.newValue=h,k.rf=j,a.xu(k)}function Nd(a,b,c){"string"!=typeof a&&"function"!=typeof a&&y.Kb(a,"string or function",b,c)}function Od(a){return"number"==typeof a||"string"==typeof a}function Zd(a,b,c){if(b!==f){var d=a.cg.wa(b);d===q&&(d=new na,a.cg.add(b,d)),d.add(c)}}function $d(a,b,c){if(b!==f){var d=a.cg.wa(b);d instanceof na&&(c===f||c===q?a.cg.remove(b):(d.remove(c),0===d.count&&a.cg.remove(b)))}}function Yd(a,b){if(b===f)return q;var c=a.cg.wa(b);return c instanceof na?c:q}function O(a,b){2<arguments.length&&y.m("GraphLinksModel constructor can only take two optional arguments, the Array of node data and the Array of link data."),G.call(this),this.ck=[],this.Vm=new na(Object),this.Nj=this.Ns=q,this.Fi="from",this.Hi="to",this.Rp=this.Pp="",this.Mp="category",this.Pg=this.Ft="",this.Et="isGroup",this.Mi="group",a!==f&&(this.Pf=a),b!==f&&(this.rg=b)}function ae(a,b){var d,e,f,c=a.Ll(b);for(c=a.Tl(c),a.Te(c)===q&&Zd(a,c,b),c=a.Ml(b),c=a.Tl(c),a.Te(c)===q&&Zd(a,c,b),d=a.Ak(b),e=y.Sb(d),f=0;e>f;f++)c=y.Hb(d,f),a.Te(c)===q&&Zd(a,c,b)}function zd(a){1<arguments.length&&y.m("TreeModel constructor can only take one optional argument, the Array of node data."),G.call(this),this.Ni="parent",this.mq="parentLinkCategory",a!==f&&(this.Pf=a)}function be(a,b,c){y.lc(this),a===f?a="":y.j(a,"string",be,"constructor:targetprop"),b===f?b=a:y.j(b,"string",be,"constructor:sourceprop"),c===f?c=q:c!==q&&y.j(c,"function",be,"constructor:conv"),this.iB="",this.Cf=q,this.fu=a,this.du=this.Jx=0,this.bB=q,this.Zt=b,this.tw=c,this.hx=le,this.ow=q}function ne(){this.SE=new F(md).freeze(),this.Gb="",this.AA=s}function wd(){this.ix=new na(G),this.Dh=s,this.VE=new F(ne).freeze(),this.Yj=-1,this.IA=999,this.Eh=s,this.Ss=q,this.nk=0,this.pw=s,x&&(this.pw=h),this.kg=new F("string").freeze(),this.Zm=new F("number"),this.Jw=h}function oe(a,b,c){var d,e,f;if(a.cb)return s;if(a.my&&1>a.Pk&&y.trace("Ending transaction without having started a transaction: "+c),d=1===a.Pk,d&&b&&a.isEnabled&&a.xc("CommittingTransaction",c,a.wk),e=0,0<a.Pk&&(a.nk--,a.isEnabled)&&(f=a.kg.count,f>0&&(""===c&&(c=a.kg.sa(0)),a.kg.Pa(),a.kg.kd(f-1),a.kg.freeze()),f=a.Zm.count,f>0&&(e=a.Zm.sa(f-1),a.Zm.kd(f-1))),f=a.wk,d){if(b){if(a.isEnabled&&f!==q){for(b=f,b.Xn=h,b.name=c,d=a.history,d.Pa(),e=d.count-1;e>a.sj;e--)f=d.sa(e),f!==q&&f.clear(),d.kd(e);e=a.Ty,0===e&&(e=1),e>0&&d.count>=e&&(f=d.sa(0),f!==q&&f.clear(),d.kd(0),a.Yj--),d.add(b),a.Yj++,d.freeze(),f=b}a.xc("CommittedTransaction",c,f)}else{a.Eh=h;try{a.isEnabled&&f!==q&&(f.Xn=h,f.undo())}finally{a.xc("RolledBackTransaction",c,f),a.Eh=s}f!==q&&f.clear()}return a.Ss=q,h}if(a.isEnabled&&!b&&f!==q){for(a=e,c=f.$g,b=c.count-1;b>=a;b--)d=c.sa(b),d!==q&&d.undo(),c.Pa(),c.kd(b);c.freeze()}return s}function pa(){0<arguments.length&&y.m("CommandHandler constructor cannot take any arguments."),this.ca=q,this.mA=this.fA=s,this.fk=this.Zz=q,this.sB=1.05,this.bx=0/0,this.FA=q,this.tB=0/0}function Fe(a,b,c,d,e){var g,h,i,j;if(!(a.contains(b)||(e===f&&(e=q),e!==q&&!e(b)||b instanceof Ge)))if(a.add(b),b instanceof T){if(c&&b instanceof He)for(g=b.Dc;g.next();)h=g.value,Fe(a,h,c,d,e);for(h=b.Qd;h.next();)g=h.value,a.contains(g)||(i=g.da,j=g.ja,i!==q&&a.contains(i)&&j!==q&&a.contains(j)?Fe(a,g,c,d,e):(i===q||j===q)&&Fe(a,g,c,d,e));if(d>1)for(b=b.kC();b.next();)h=b.value,Fe(a,h,c,d-1,e)}else if(b instanceof U)for(h=b.tj;h.next();)Fe(a,h.value,c,d,e)}function Ie(a,b,c,d,e){var f,g,h,i;if(b===q||e&&!b.canCopy())return q;if(d.contains(b))return a=d.wa(b),a instanceof R?a:q;if(f=q,g=b.data,g!==q&&c!==q?(h=c.fa,b instanceof U?h instanceof O&&(g=h.SB(g),y.sb(g)&&(h.yB(g),f=c.pf(g))):(g=h.jj(g),y.sb(g)&&(h.fr(g),f=c.pj(g)))):(Je(b),f=b.copy(),c!==q&&f instanceof R&&c.add(f)),!(f instanceof R))return q;if(f.Wa=s,d.add(b,f),b instanceof T){for(h=b.Qd;h.next();)g=h.value,g.da===b&&(i=d.wa(g),i!==q&&(i.da=f)),g.ja===b&&(i=d.wa(g),i!==q&&(i.ja=f));if(b instanceof He&&f instanceof He)for(b=b.Dc;b.next();)h=Ie(a,b.value,c,d,e),!(h instanceof U)&&h!==q&&(h.bb=f)}else if(b instanceof U)for(h=b.da,h!==q&&(h=d.wa(h),h!==q&&(f.da=h)),h=b.ja,h!==q&&(h=d.wa(h),h!==q&&(f.ja=h)),b=b.tj;b.next();)h=Ie(a,b.value,c,d,e),h!==q&&(h.hd=f);return f}function Me(a){var c,d,e,f,g,b=y.tb();for(a=a.k;a.next();)c=a.value,c instanceof U||b.push(c);for(a=new na(R),c=b.length,d=0;c>d;d++){for(e=b[d],f=h,g=0;c>g;g++)if(e.Jr(b[g])){f=s;break}f&&a.add(e)}return y.ya(b),a}function Pe(){0<arguments.length&&y.m("Tool constructor cannot take any arguments."),y.lc(this),this.ca=q,this.Gb="",this.Dh=h,this.yA=s,this.qB=q,this.mu=-1}function Qe(a,b,c){var e,d=0;if(b.left?d=1===b.ce?1:2===b.ce?2:1:b.right&&1===b.ce&&(d=3),e="",a!==q){switch(d){case 1:e="ObjectSingleClicked";break;case 2:e="ObjectDoubleClicked";break;case 3:e="ObjectContextClicked"}0!==d&&c.Fa(e,a)}else{switch(d){case 1:e="BackgroundSingleClicked";break;case 2:e="BackgroundDoubleClicked";break;case 3:e="BackgroundContextClicked"}0!==d&&c.Fa(e)}if(a!==q)for(;a!==q;){switch(e=q,d){case 1:e=a.click;break;case 2:e=a.Fl?a.Fl:a.click;break;case 3:e=a.qr}if(e!==q&&(e(b,a),b.ee))break;a=a.ga}else{switch(e=q,d){case 1:e=c.click;break;case 2:e=c.Fl?c.Fl:c.click;break;case 3:e=c.qr}e!==q&&e(b)}}function af(){0<arguments.length&&y.m("DraggingTool constructor cannot take any arguments."),Pe.call(this),this.name="Dragging",this.eA=h,this.cl=this.rA=s,this.Tw=h,this.Mw=new ha(0/0,0/0).freeze(),this.Nw=Mb,this.Ow=new A(0/0,0/0).freeze(),this.qA=s,this.oA=this.dA=this.pA=this.hA=q,this.hp=this.BA=s,this.ln=new A(0/0,0/0),this.Sh=new A,this.bu=s,this.Yt=h,this.zm=100,this.Xk=this.Qt=q}function bf(a,b){if(a.Gl){var c=a.h;c!==q&&c.dj&&(1===b.count?(c=b.k,c.next(),a.fc=c.value,a.fc!==q&&a.fc.canRelinkFrom()&&a.fc.canRelinkTo()&&a.fc.be()):a.fc=q)}}function gf(a){return a===f?{point:H.Aj,Ax:H.Aj}:{point:a.copy(),Ax:H.Aj}}function ff(a,b,c,d){var e,f,g,h;if(!b.contains(c)&&(!d||c.canMove()||c.canCopy()))if(c instanceof T){if(b.add(c,gf(c.location)),c instanceof He)for(e=c.Dc;e.next();)f=e.value,ff(a,b,f,d);for(f=c.Qd;f.next();)e=f.value,b.contains(e)||(g=e.da,h=e.ja,g!==q&&b.contains(g)&&h!==q&&b.contains(h)&&ff(a,b,e,d));if(a.hC)for(c=c.kC();c.next();)f=c.value,ff(a,b,f,d)}else if(c instanceof U)for(e=c,b.add(e,gf()),f=e.tj;f.next();)ff(a,b,f.value,d);else c instanceof Ge||b.add(c,gf(c.location))}function jf(a){var c,d,e,f,b=a.h;if(b!==q){for(c=b.Wb,b.Wb=h,d=b.Q,e=a.Xk;e!==q&&(f=e.Vy,f===q||(f(d,e,q),!d.ee));)e=e.ga;b.Wb=c}a.Qt=q,a.Xk=q}function cf(a,b){var c,d;if(b!==q)for(a.bu=h,c=b.k;c.next();)d=c.key,d instanceof U&&(d.rs=h)}function kf(a,b){var c,d;if(b!==q&&a.bu){for(c=b.k;c.next();)d=c.key,d instanceof U&&(d.rs=s,d.jh===xf?d.Ub():d.aa());a.bu=s}}function yf(a,b){var c,d,e,f,g,h,i;for(c=1/0,d=1/0,e=-1/0,f=-1/0,g=a.k;g.next();)h=g.value,h.Pd()&&(i=h.location,h=i.x,i=i.y,!isNaN(h)&&!isNaN(i)&&(c>h&&(c=h),d>i&&(d=i),h>e&&(e=h),i>f&&(f=i)));1/0===c?b.q(0,0,0,0):b.q(c,d,e-c,f-d)}function zf(a,b){var c,d,e,f;if(a.Zc===q&&(c=a.h,c!==q&&!c.Za&&!c.Be&&a.gc!==q)){for(nf(a),c.Wb=!b,c.hr=!b,a.Sh.set(c.uc.T),c=a.QB?c.copyParts(a.gc.Ok(),c,h):c.copyParts(c.selection,c,h),d=c.k;d.next();)d.value.location=d.key.location;for(d=y.df(),yf(c,d),y.Bc(d),d=new ma(R,Object),e=a.gc.k;e.next();)f=e.key,f.Pd()&&f.canCopy()&&(f=c.wa(f),f!==q&&(f.ci(),d.add(f,gf(f.location))));for(c=c.k;c.next();)e=c.value,e instanceof U&&e.canCopy()&&d.add(e,gf());a.Zc=d,bf(a,d.Ok()),a.fc!==q&&(c=a.fc,d=c.Ai(),c.Ek(a.Sh.x-(d.x+d.width/2),a.Sh.y-(d.y+d.height/2)))}}function mf(a){var b=a.h;b!==q&&(a.Zc!==q&&(b.mz(a.Zc.Ok(),s),a.Zc=q),b.Wb=s,b.hr=s,a.Sh.set(b.uc.T))}function Af(a,b,c){var e,f,d=a.h;d!==q&&(e=a.Sh,f=y.M(),f.assign(d.Q.T),a.moveParts(b,f.qs(e),c),y.B(f))}function Bf(a,b,c){if(b=b.bb,b!==q){if(a=Bf(a,b,c),a!==q)return a;if(a=c.wa(b),a!==q)return a}return q}function nf(a){var b,c,d,e;if(a.gc!==q){for(b=a.h,c=a.gc.k;c.next();)d=c.key,d.Pd()&&(d.location=c.value.point);for(c=a.gc.k;c.next();)d=c.key,d instanceof U&&d.rs&&(e=c.value.point,a.gc.add(d,gf()),d.Ek(-e.x,-e.y));b.oc()}}function Cf(a,b){if(b===q)return h;var c=b.W;return c===q||c.Wa||c instanceof Ge||c.layer.bc||a.gc&&a.gc.contains(c)||a.Zc&&a.Zc.contains(c)?h:s}function Df(a,b,c,d){var f,g,i,j,k,l,m,e=a.h;if(e!==q){if(a.Gl&&a.fc!==q&&(f=a.h.fa,f instanceof O&&(a.fc.da!==q&&f.vv(a.fc.data,""),a.fc.ja!==q&&f.wv(a.fc.data,""))),f=s,a.Yt===s&&(f=e.Wb,e.Wb=h),g=s,i=Ef(e,b,q,function(b){return!Cf(a,b)}),j=e.Q,j.zd=i,k=e.Wb,e.Wb=h,i!==a.Xk){for(l=a.Xk,a.Qt=l,a.Xk=i;l!==q;){if(m=l.Vy,m!==q){if(i===l)break;if(i!==q&&i.hi(l))break;if(m(j,l,i),g=h,j.ee)break}l=l.ga}for(l=a.Qt;i!==q;){if(m=i.fD,m!==q){if(l===i)break;if(l!==q&&l.hi(i))break;if(m(j,i,l),g=h,j.ee)break}i=i.ga}i=a.Xk}i===q&&(m=e.gD,m!==q&&(m(j),g=h)),a.doDragOver(b,i),e.Wb=k,g&&e.li(),a.Yt===s&&(e.Wb=f),(e.Ne||e.Oe)&&(c||d)&&Ff(e,b)}}function Gf(a,b){var d,e,f,g,c=a.h;if(c!==q&&c.fa!==q){if(jf(a),d=Ef(c,b,q,function(b){return!Cf(a,b)}),e=c.Q,e.zd=d,d!==q)for(f=d;f!==q&&(g=f.Qr,g===q||(g(e,f),!e.ee));)f=f.ga;else g=c.Qr,g!==q&&g(e);for(a.doDropOnto(b,d),d=c.selection.k;d.next();)e=d.value,e instanceof T&&Hf(c,e.ua)}}function If(a,b,c){var d,e,f,g,i,j,k;if(a.Zc===q&&(d=a.h,d!==q&&!d.Za&&!d.Be&&d.fa!==q)){for(d.Wb=!c,d.hr=!c,a.Sh.set(d.Q.T),d=d.copyParts(b,d,h),c=y.df(),yf(b,c),e=c.x+c.width/2,f=c.y+c.height/2,y.Bc(c),g=a.Sh,c=new ma(R,Object),i=y.M(),b=b.k;b.next();)j=b.value,j.Pd()&&j.canCopy()&&(k=j.location,j=d.wa(j),i.q(g.x-(e-k.x),g.y-(f-k.y)),j.location=i,j.ci(),c.add(j,gf(i)));for(y.B(i),d=d.k;d.next();)e=d.value,e instanceof U&&e.canCopy()&&c.add(e,gf());a.Zc=c,bf(a,c.Ok()),a.fc!==q&&(c=a.fc,d=c.Ai(),c.Ek(a.Sh.x-(d.x+d.width/2),a.Sh.y-(d.y+d.height/2)))}}function Jf(){var a,b;0<arguments.length&&y.m("LinkingBaseTool constructor cannot take any arguments."),Pe.call(this),this.ux=100,this.Zw=s,a=new U,a.ks="PATH",b=new V,b.ji=h,b.name="PATH",b.stroke="blue",a.add(b),b=new V,b.bm="Standard",b.fill="blue",a.add(b),a.ge="Tool",this.Px=a,a=new T,b=new V,b.Td="",b.wb="Rectangle",b.fill=q,b.stroke="magenta",b.jb=2,b.Aa=H.Xv,a.add(b),a.Jk=s,a.ge="Tool",this.Nx=a,this.Ox=b,a=new T,b=new V,b.Td="",b.wb="Rectangle",b.fill=q,b.stroke="magenta",b.jb=2,b.Aa=H.Xv,a.add(b),a.Jk=s,a.ge="Tool",this.Qx=a,this.Rx=b,this.tx=this.sx=this.mx=this.lx=this.nx=q,this.vp=h,this.eF=new ma(P,"boolean"),this.WA=this.HA=this.Kx=q}function Kf(a,b,c){var d,e;return b===q?s:(d=b.hd,d===q?s:d===c?h:(e=new na(T),e.add(b),Mf(a,d,c,e)))}function Mf(a,b,c,d){if(b===c)return h;var e=b.da;return e!==q&&e.ii&&(d.add(e),Mf(a,e.hd,c,d))?h:(b=b.ja,b!==q&&b.ii&&(d.add(b),Mf(a,b.hd,c,d))?h:s)}function Lf(a,b,c,d){var e,f;if(b===q||c===q)return s;if(e=a.h.wE,e!==Nf){if(e===Of){if(d!==q&&!d.hc)return h;for(e=c.Qd;e.next();)if(f=e.value,f!==d&&f.hc&&f.ja===c)return s;return!Pf(a,b,c,d,h)}if(e===Qf){if(d!==q&&!d.hc)return h;for(e=b.Qd;e.next();)if(f=e.value,f!==d&&f.hc&&f.da===b)return s;return!Pf(a,b,c,d,h)}if(e===$f)return b===c?a=h:(e=new na(T),e.add(c),a=ag(a,e,b,c,d)),!a;if(e===bg)return!Pf(a,b,c,d,s);if(e===cg)return b===c?a=h:(e=new na(T),e.add(c),a=dg(a,e,b,c,d)),!a}return h}function Pf(a,b,c,d,e){var f,g;if(b===c)return h;if(b===q||c===q)return s;for(f=b.Qd;f.next();)if(g=f.value,g!==d&&(!e||g.hc)&&g.ja===b&&(g=g.da,g!==b&&Pf(a,g,c,d,e)))return h;return s}function ag(a,b,c,d,e){var f,g;if(c===d)return h;if(c===q||d===q||b.contains(c))return s;for(b.add(c),f=c.Qd;f.next();)if(g=f.value,g!==e&&g.ja===c&&(g=g.da,g!==c&&ag(a,b,g,d,e)))return h;return s}function dg(a,b,c,d,e){var f,g,i;if(c===d)return h;if(c===q||d===q||b.contains(c))return s;for(b.add(c),f=c.Qd;f.next();)if(g=f.value,g!==e&&(i=g.da,g=g.ja,i=i===c?g:i,i!==c&&dg(a,b,i,d,e)))return h;return s}function qa(){0<arguments.length&&y.m("LinkingTool constructor cannot take any arguments."),Jf.call(this),this.name="Linking",this.mw={},this.lw=q,this.ma=eg,this.Fx=this.Ex=q}function hg(){0<arguments.length&&y.m("RelinkingTool constructor cannot take any arguments."),Jf.call(this),this.name="Relinking";var a=new V;a.wb="Diamond",a.Aa=H.Lz,a.fill="cyan",a.cursor="pointer",a.af=0,this.vA=a,a=new V,a.wb="Diamond",a.Aa=H.Lz,a.fill="cyan",a.cursor="pointer",a.af=-1,this.mB=a,this.Mb=q,this.UA=new B}function kg(){0<arguments.length&&y.m("LinkReshapingTool constructor cannot take any arguments."),Pe.call(this),this.name="LinkReshaping";var a=new V;a.wb="Rectangle",a.Aa=H.fm,a.fill="cyan",this.Wj=a,a=new V,a.wb="Diamond",a.Aa=H.fm,a.fill="cyan",this.JA=a,this.YA=3,this.jw=this.Mb=q,this.VA=new A,this.px=q}function wg(a,b,c,d,e,f){return f?Math.abs(b.y-c.y)<a.ih&&Math.abs(c.y-d.y)<a.ih&&Math.abs(d.y-e.y)<a.ih:Math.abs(b.x-c.x)<a.ih&&Math.abs(c.x-d.x)<a.ih&&Math.abs(d.x-e.x)<a.ih}function xg(){0<arguments.length&&y.m("ResizingTool constructor cannot take any arguments."),Pe.call(this),this.name="Resizing",this.Hd=new ha(1,1).freeze(),this.Ki=new ha(9999,9999).freeze(),this.qi=new ha(0/0,0/0).freeze(),this.cl=s,this.La=q;var a=new V;a.bj=Sb,a.wb="Rectangle",a.Aa=H.fm,a.fill="cyan",a.stroke="black",a.jb=1,a.cursor="pointer",this.Wj=a,this.Mb=q,this.$m=0,this.YE=new B,this.Mt=new ha,this.ox=new A,this.Iw=new ha(0,0),this.Hw=new ha(1/0,1/0),this.Gw=new ha(1,1)}function yg(a,b,c){if(b!==q)if(Db(b.alignment)||""===b.cursor){if(b instanceof D)for(b=b.elements;b.next();)yg(a,b.value,c)}else a:{if(a=b.alignment,Cb(a)&&(a=Sb),0>=a.x)c=0>=a.y?c+225:1<=a.y?c+135:c+180;else if(1<=a.x)0>=a.y?c+=315:1<=a.y&&(c+=45);else if(0>=a.y)c+=270;else{if(!(1<=a.y))break a;c+=90}0>c?c+=360:c>=360&&(c-=360),b.cursor=22.5>c?"e-resize":67.5>c?"se-resize":112.5>c?"s-resize":157.5>c?"sw-resize":202.5>c?"w-resize":247.5>c?"nw-resize":292.5>c?"n-resize":337.5>c?"ne-resize":"e-resize"}}function Eg(){0<arguments.length&&y.m("RotatingTool constructor cannot take any arguments."),Pe.call(this),this.name="Rotating",this.Dx=45,this.Cx=2,this.La=q;var a=new V;a.wb="Ellipse",a.Aa=H.fm,a.fill="yellow",a.stroke="black",a.jb=1,a.cursor="pointer",this.Wj=a,this.Mb=q,this.$m=0,this.ZA=new A}function Gg(){0<arguments.length&&y.m("ClickSelectingTool constructor cannot take any arguments."),Pe.call(this),this.name="ClickSelecting"}function Hg(){0<arguments.length&&y.m("ActionTool constructor cannot take any arguments."),Pe.call(this),this.name="Action",this.im=q}function ra(){0<arguments.length&&y.m("ClickCreatingTool constructor cannot take any arguments."),Pe.call(this),this.name="ClickCreating",this.Nj=q,this.Sw=h,this.uA=new A(0,0)}function Ig(){var a,b,c,d;0<arguments.length&&y.m("ContextMenuTool constructor cannot take any arguments."),Pe.call(this),this.name="ContextMenu",this.gA=q,this.MA=new A,this.ym=q,y.zz===h&&(this.ym=new Ge,this.xw=q,a=this,this.nB=function(){a.stopTool()},y.XB===s&&(b=document.createElement("div"),c=document.createElement("div"),b.style.cssText="top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",c.style.cssText="z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;-moz-opacity: 0.8;opacity:.80;filter: alpha(opacity=80);",d=document.createElement("style"),document.getElementsByTagName("head")[0].appendChild(d),d.sheet.insertRule(".defaultCXul { list-style: none; }",0),d.sheet.insertRule(".defaultCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),d.sheet.insertRule(".defaultCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),b.addEventListener("contextmenu",function(a){return a.preventDefault(),s},s),b.addEventListener("selectstart",function(a){return a.preventDefault(),s},s),c.addEventListener("contextmenu",function(a){return a.preventDefault(),s},s),document.body&&(document.body.appendChild(b),document.body.appendChild(c)),y.pr=b,y.or=c,y.XB=h))}function Oe(a,b,c){a.la=h,b&&a.standardMouseSelect(),a.standardMouseClick(),c===f&&(c=a.findObjectWithContextMenu()),c!==q?(b=c.contextMenu,b!==q?a.showContextMenu(b,c instanceof P?c:q):a.showDefaultContextMenu()):a.showDefaultContextMenu()}function Og(){var a,b;0<arguments.length&&y.m("DragSelectingTool constructor cannot take any arguments."),Pe.call(this),this.name="DragSelecting",this.zm=175,this.DA=s,a=new R,a.ge="Tool",a.Jk=s,b=new V,b.name="SHAPE",b.wb="Rectangle",b.fill=q,b.stroke="magenta",a.add(b),this.mm=a}function Qg(){0<arguments.length&&y.m("PanningTool constructor cannot take any arguments."),Pe.call(this),this.name="Panning",this.qx=new A,this.pi=s;var a=this;this.dB=function(){document.removeEventListener("scroll",a.dB,s),a.stopTool()}}function Rg(){0<arguments.length&&y.m("TextEditingTool constructor cannot take any arguments."),Pe.call(this),this.name="TextEditing",this.yw=this.iA=this.Sx=this.kB=q,this.Gx=Sg,this.Vi=q,this.Ya=Tg,this.hk=q}function eh(a){if(a.Yf!==q&&a.og!==q){var b=a.Yf,c=a.Yf.text,d=a.og.value,e="",e="function"==typeof d?d():d;if(!a.isValidText(a.Yf,c,e))return a.Ya=Zg,b.tr!==q&&b.tr(a,c,e),a.hk===q&&(a.hk=a.og.style.border,a.og.style.border="3px solid red"),a.og.focus(),void 0;a.Ya=bh,c!==e&&(a.Yf.text=e),a.Fe=a.name,b=a.h,b!==q&&b.Fa("TextEdited",a.Yf,c),a.stopTool(),b!==q&&b.focus()}a.hk!==q&&(a.og.style.border=a.hk,a.hk=q)}function Ee(){Pe.call(this),this.name="ToolManager",this.NA=new F(Pe),this.OA=new F(Pe),this.PA=new F(Pe),this.wA=this.xA=1e3,this.nA=new ha(2,2).Ja(),this.Rs=this.vw=q,this.QA=$e}function fh(a,b,c,d){y.j(b,"string",Ee,"replaceStandardTool:name"),y.l(d,F,Ee,"replaceStandardTool:list"),c!==q&&(y.l(c,Pe,Ee,"replaceStandardTool:newtool"),c.h&&c.h!==a.h&&y.m("Cannot share tools between Diagrams: "+c.toString()),c.name=b,c.ie(a.h)),a.findTool(b)?a.replaceTool(b,c):c!==q&&d.add(c)}function pe(){1<arguments.length&&y.m("Layer constructor cannot take any arguments."),y.lc(this),this.ca=q,this.lb=new F(R),this.Gb="",this.mf=1,this.Yw=s,this.ik=this.Wx=this.Kj=this.Jj=this.Ij=this.Hj=this.Fj=this.Gj=this.Ej=this.Mj=this.Dj=this.Lj=this.Cj=this.Bj=h,this.Nt=[]}function jh(a,b,c,d){var e,f,g,i,j,k,m,l,n,o,p,q,r,t;if(a.visible){for(b.globalAlpha=a.mf,e=a.lb,a=a.Nt,a.length=0,f=c.scale,g=e.length,i=d.length,j=0;g>j;j++)if(k=e.n[j],gh(k)){if(k instanceof U&&(k.Jb&&a.push(k),k.Yg===s))continue;l=kh(k,k.ua);a:{for(m=l,n=d,o=i,p=2/f,q=4/f,r=0;o>r;r++)if(t=n[r],0!==t[2]&&0!==t[3]&&m.IC(t[0]-p,t[1]-p,t[2]+q,t[3]+q)){m=h;break a}m=s}m&&(1<l.width*f||1<l.height*f?k.we(b,c):ih(k,b))}b.globalAlpha=1}}function E(a){function b(){document.removeEventListener("DOMContentLoaded",b,s),lh(c)}var c,d;1<arguments.length&&y.m("Diagram constructor can only take one optional argument, the DIV HTML element or its id."),y.lc(this),y.eC=[],this.Yb=h,this.Le=17,c=this,document.body!==q?lh(this):document.addEventListener("DOMContentLoaded",b,s),this.zb=new F(pe),this.XA=this.fB=this.eB=this.hB=this.gB=this.qb=this.si=this.Da=q,this.nb=new A(0/0,0/0).freeze(),this.Qb=1,this.Qw=new A(0/0,0/0).freeze(),this.Rw=0/0,this.xt=1e-4,this.ut=100,this.Xc=new ka,this.nu=new A(0/0,0/0).freeze(),this.$s=new B(0/0,0/0,0/0,0/0).freeze(),this.Rk=Le,this.Vk=Ib,this.Zj=Le,this.Im=Ib,this.it=this.ht=Mb,this.xf=new na(P),this.me=h,this.Am=new ma(U,B),this.Ws=h,this.RE=250,this.QE=1e3,this.zg=q,this.Gs=new ab(16,16,16,16).freeze(),this.ju=this.Ef=s,this.mp=h,this.eg=new kd,this.Jc=new kd,this.Zb=new kd,this.ri=q,this.cu=-1,this.Ix=s,this.Bw=new ma("string",F),this.Aw=new ma("string","string"),mh(this),this.Ht=new na(T),this.mk=new na(He),this.qt=new na(U),this.lb=new na(R),this.mt=h,this.zA=s,this.ku=Nf,this.uw=this.zw=this.hu=q,this.Qs="",this.fp="auto",this.wh=this.Th=this.Gh=this.At=this.Hh=this.Ih=this.Jh=this.vh=this.zh=this.uh=q,this.Ch=h,this.jx=this.kw=s,this.rw=q,this.Bx=this.Ph=this.Yz=s,this.EA=h,this.od=s,this.Jd=q,d=this,this.KA=function(a){if(a.fa===d.fa&&d.Ra){d.Ra=s;
try{var b=a.Yc;""===a.Ye&&b===sd&&nh(d,a.object,a.propertyName)}finally{d.Ra=h}}},this.LA=function(a){oh(d,a)},this.xh=new ma(Object,R),this.Sj=new ma(Object,U),this.gl=new ma(Object,Array),this.ak=s,this.Cj=this.Bj=this.xs=this.Dh=h,this.zs=this.ys=s,this.Es=this.Cs=this.Kj=this.Jj=this.Ij=this.Hj=this.Fj=this.Gj=this.Ej=this.Bs=this.Mj=this.Dj=this.Lj=h,this.Lm=this.CA=s,this.Ds=this.As=this.et=this.dt=h,this.Ut=this.Tt=16,this.xx=this.St=s,this.zx=this.yx=this.Ri=this.Qi=q,this.ne=new ab(5).freeze(),this.Xt=new na(R).freeze(),this.vt=999999999,this.$j=this.Di=this.Ci=h,this.al=this.$k=s,this.gt=this.ft=0,this.qd=q,this.Fs=h,this.fg=s,this.sd=q,this.Lt=1,this.Kw=s,this.cB=0,this.rB=new B(0/0,0/0,0/0,0/0).freeze(),this.Us=new B(0/0,0/0,0/0,0/0).freeze(),this.an=new na,ph(this),this.pt=this.bt=this.Gt=this.kA=this.jA=this.lA=this.Gi=this.Vj=this.Kh=q,qh(this),this.Gc=q,this.at=s,this.Hn=this.ez=q,this.pb=new Ee,this.pb.initializeStandardTools(),this.Ma=this.Gu=this.pb,this.Pe=new pa,this.fa=new O,this.Ph=h,this.Nb=new rh,this.Ph=s,a===f&&(a=document.createElement("div")),this.sA=this.Dw=q,this.Vx=h,this.wx=s,this.ui=q,this.Xj=new sh,th(this,a),this.Qm=1,this.ot=0,this.GA=new A,this.pB=500,this.Lq=q,this.Km=s,window.navigator&&0<window.navigator.userAgent.indexOf("534.30")&&0<window.navigator.userAgent.indexOf("Android")&&(this.Km=h),this.Uw=s,window.navigator&&0<window.navigator.userAgent.indexOf("MSIE 10.0")&&(this.Uw=h),this.Yb=s}function qh(a){var b,c,d;a.Kh=new ma("string",R),b=new T,c=new oa,c.bind(new be("text","",vd)),b.add(c),a.lA=b,a.Kh.add("",b),b=new T,c=new oa,c.stroke="brown",c.bind(new be("text","",vd)),b.add(c),a.Kh.add("Comment",b),b=new T,b.Jk=s,b.jy=s,c=new V,c.wb="Ellipse",c.fill="black",c.stroke=q,c.Aa=new ha(3,3).Ja(),b.add(c),a.Kh.add("LinkLabel",b),a.Vj=new ma("string",He),b=new He,b.ks="GROUPPANEL",b.type=uh,c=new oa,c.font="bold 12pt sans-serif",c.bind(new be("text","",vd)),b.add(c),c=new D(Ch),c.name="GROUPPANEL",d=new V,d.wb="Rectangle",d.fill="rgba(128,128,128,0.2)",d.stroke="black",c.add(d),d=new Ag,d.padding=new ab(5,5,5,5).Ja(),c.add(d),b.add(c),a.jA=b,a.Vj.add("",b),a.Gi=new ma("string",U),b=new U,c=new V,c.ji=h,b.add(c),c=new V,c.bm="Standard",c.fill="black",c.stroke=q,c.jb=0,b.add(c),a.kA=b,a.Gi.add("",b),b=new U,c=new V,c.ji=h,c.stroke="brown",b.add(c),a.Gi.add("Comment",b),b=new Ge,b.type=Ch,c=new V,c.fill=q,c.stroke="magenta",c.jb=2,b.add(c),c=new Ag,c.margin=new ab(1,1,1,1).Ja(),b.add(c),a.Gt=b,a.bt=b,b=new Ge,b.type=ig,c=new V,c.ji=h,c.fill=q,c.stroke="magenta",c.jb=0,b.add(c),a.pt=b}function lh(a){var c,d,b=document.createElement("p");b.style.width="100%",b.style.height="200px",c=document.createElement("div"),c.style.position="absolute",c.style.visibility="hidden",c.style.width="200px",c.style.height="150px",c.style.overflow="hidden",c.appendChild(b),document.body.appendChild(c),d=b.offsetWidth,c.style.overflow="scroll",b=b.offsetWidth,d===b&&(b=c.clientWidth),document.body.removeChild(c),a.Le=d-b}function sh(){var a,b,d,e,g,i,j;if(this.LH=218,this.dF="63ad05bbe23a1786468a4c741b6d2",this.dF===this._tk)this.vi=h;else{if(a="p",b=window[y.Sa("76a715b2f73f148a")][y.Sa("72ba13b5")],y.Sa("77bb5bb2f32603de")===window[y.Sa("76a715b2f73f148a")][y.Sa("6aba19a7ec351488")])try{if(this.vi=!window[y.Sa("4da118b7ec2108")]([y.Sa("5bb806bfea351a904a84515e1b6d38b6")])([y.Sa("49bc19a1e6")])([y.Sa("59bd04a1e6380fa5539b")])([y.Sa("7bb8069ae7")]===y.Sa(y.by)),this.vi===s)return;if(this.vi=!window[y.Sa("4da118b7ec2108")]([y.Sa("5bb806bfea351a904a84515e1b6d38b6")])([y.Sa("49bc19a1e6")])([y.Sa("59bd04a1e6380fa5539b6c7a197c31bb4cfd3e")])([y.Sa("7bb8069ae7")]===y.Sa(y.by)),this.vi===s)return}catch(c){}for(d=b[y.Sa("76ad18b4f73e")],e=b[y.Sa("73a612b6fb191d")](y.Sa("35e7"))+2;d>e;e++)a+=b[e];if(d=a[y.Sa("73a612b6fb191d")](y.Sa(y.by)),this.vi=!(d>0&&d<a[y.Sa("73a612b6fb191d")](y.Sa("35"))))for(a=document[y.Sa("69bc0fbfe6051381469f4c")],d=a.length,e=0;d>e;e++){b=q;try{b=a[e][y.Sa("79bb0581f63a1e97")]}catch(f){}if(b!==q){for(g=b.length,i=0;g>i;i++)if(b[i][y.Sa("69ad1ab6e0221496778e4767")]===y.Sa("02cncncn")){if(j=b[i][y.Sa("69bc0fbfe6")][y.Sa("78a704b7e6242f8b53a8507f1b7b")],!j)return;if(-1!==j.indexOf(y.Sa(y.KF))&&-1!==j.indexOf(y.Sa(y.LF))){this.vi=s;break}}if(this.vi===s)break}}}}function th(a,b){var c,d,e,g,i;(b===f||b===q)&&y.m("Diagram setup requires an argument DIV."),a.qb!==q&&y.m("Diagram has already completed setup."),"string"==typeof b?a.qb=document.getElementById(b):b instanceof HTMLDivElement?a.qb=b:y.m("No DIV or DIV id supplied: "+b),a.qb===q&&y.m("Invalid DIV id; could not get element with id: "+b),a.qb.ca!==f&&y.m("Invalid div id; div already has a Diagram associated with it."),"static"===window.getComputedStyle(a.qb,q).position&&(a.qb.style.position="relative"),a.qb.style["-webkit-tap-highlight-color"]="rgba(255, 255, 255, 0)",a.qb.style["-ms-touch-action"]="none",a.qb.innerHTML="",a.qb.ca=a,c=document.createElement("canvas"),c.getContext&&c.getContext("2d")?(c.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",c.style!==f&&(c.style.position="absolute",c.style.top="0px",c.style.left="0px",c.style.zIndex="2",c.style.zJ="none",c.style.webkitUserSelect="none",c.style.MozUserSelect="none"),c.width=a.qb.clientWidth||1,c.height=a.qb.clientHeight||1,c.style!==f&&document.defaultView&&document.defaultView.getComputedStyle&&(a.gB=parseInt(document.defaultView.getComputedStyle(c,q).paddingLeft,10)||0,a.hB=parseInt(document.defaultView.getComputedStyle(c,q).paddingTop,10)||0,a.eB=parseInt(document.defaultView.getComputedStyle(c,q).borderLeftWidth,10)||0,a.fB=parseInt(document.defaultView.getComputedStyle(c,q).borderTopWidth,10)||0),d=document.createElement("canvas"),e=d.getContext("2d"),d.width=1,d.height=1,a.Dw=d,a.sA=e,a.gt=0,a.ft=0,document.body?(d=document.body.parentNode,a.gt=d.offsetTop||0,a.ft=d.offsetLeft||0):document.addEventListener("load",function(){if(document.body){var b=document.body.parentNode;a.gt=b.offsetTop||0,a.ft=b.offsetLeft||0}},s),c.ca=a,a.Da=c,a.si=c.getContext("2d"),e=a.si,a.PE=e[y.Sa("69ad0287f137159745844d7e")][y.Sa("78a118b7")](e,1,0,0,1,0,0),a.iw=e[y.Sa("7eba17a4ca3b1a8346")][y.Sa("78a118b7")](e,y.Qk,4,4),a.qb.insertBefore(c,a.qb.firstChild),d=document.createElement("div"),e=document.createElement("div"),g=document.createElement("div"),i=document.createElement("div"),d.style.position="absolute",d.style.overflow="auto",d.style.width=a.Da.width+"px",d.style.height=a.Da.height+"px",d.style.zIndex="1",e.style.position="absolute",e.style.overflow="auto",e.style.width=a.Da.width+"px",e.style.height=a.Da.height+"px",e.style.zIndex="1",g.style.position="absolute",g.style.width="1px",g.style.height="1px",i.style.position="absolute",i.style.width="1px",i.style.height="1px",a.qb.appendChild(d),a.qb.appendChild(e),d.appendChild(g),e.appendChild(i),d.onscroll=a.SA,d.onmousedown=a.TA,d.ca=a,d.$A=h,e.onscroll=a.SA,e.onmousedown=a.TA,e.ca=a,e.aB=h,a.Qi=d,a.Ri=e,a.yx=g,a.zx=i,a.preventDefault=function(a){return a.preventDefault(),s},a.mo=function(b){if(a.isEnabled){a.Lm=h;var c=a.Jc;a.Km&&c.bv?(b.preventDefault(),b.simulated=h,a.Lq=b):(a.Jc=a.Zb,a.Zb=c,Dh(a,b,c,h),a.XD(b,new A,b.target.ca)||(a.Ma.doMouseMove(),a.Ma.isBeyondDragSize()&&Eh(a)))}},a.lo=function(b){if(a.isEnabled){a.Lm=h;var c=a.Jc;if(a.Km&&a.Lq!==q)a.Lq=b,b.preventDefault();else if(a.Jc=a.Zb,a.Zb=c,Dh(a,b,c,h),c.mj=h,c.ce=b.detail,a.eg=c.copy(),c.lp.simulated===h)b.preventDefault(),b.simulated=h;else if(x&&x.kD&&(window.kD=a.On(c.T)),df=q,a.Ma.doMouseDown(),1===b.button)return b.preventDefault(),s}},a.oo=function(b){if(a.isEnabled){a.Lm=h;var c=a.Jc;a.Km&&a.Lq!==q?(a.Lq=q,b.preventDefault()):(a.Jc=a.Zb,a.Zb=c,Dh(a,b,c,h),c.ni=h,c.ce=b.detail,a.Uw&&(b.timeStamp-a.ot<a.pB&&!a.Ma.isBeyondDragSize()?a.Qm++:a.Qm=1,a.ot=b.timeStamp,c.ce=a.Qm),c.bubbles=b.bubbles,b.target.ca&&(c.Wf=b.target.ca),a.YD(b,q,new A,c.Wf)||(a.Ma.doMouseUp(),hf(a),Fh(a,c,b)))}},a.ug=function(b){if(a.isEnabled){var c=a.Jc;a.Jc=a.Zb,a.Zb=c,Dh(a,b,c,h),c.bubbles=h,c.lj=b.wheelDelta!==f?b.wheelDelta:-40*b.detail,a.Ma.doMouseWheel(),Fh(a,c,b)}},a.no=function(){if(a.isEnabled){a.Lm=s;var b=a.Ma;b.cancelWaitAfter(),b instanceof Ee&&b.hideToolTip()}},a.Uy=function(){var c,d,e,b=a.Da;b!==q&&(c=a.qb,d=0,a.al&&(d=a.Le),e=0,a.$k&&(e=a.Le),0!==c.clientWidth&&0!==c.clientHeight&&(c.clientWidth!==b.width+d||c.clientHeight!==b.height+e)&&(a.Di=h,a.me=h,b=a.Nb,b!==q&&b.Lr&&b.J(),a.od||a.jc()))},a.lE=function(b){if(a.isEnabled){if(a.Ix=s,1<b.touches.length){if(a.Ma.doCancel(),a.Ch&&y.eE)return b.preventDefault(),b.cancelBubble=h,s;if(a.Ch){a.Kw=h,a.Lt=a.scale;var c=a.Da,d=c.getBoundingClientRect(),e=b.targetTouches[0],f=e.clientX-d.left*(c.width/d.width),g=e.clientY-d.top*(c.height/d.height),e=b.targetTouches[1],f=e.clientX-d.left*(c.width/d.width)-f,c=e.clientY-d.top*(c.height/d.height)-g,c=Math.sqrt(f*f+c*c);return a.cB=c,b.preventDefault(),b.cancelBubble=h,s}return Eh(a),b.cancelBubble=s,h}c=a.Jc,a.Jc=a.Zb,a.Zb=c,c.h=a,d=a.Ig(b.targetTouches[0]),c.Rc=a.Do(d),c.T=d,c.hh=0,c.button=0,c.mj=h,c.ni=s,c.ce=1,c.lj=0,c.ee=s,c.bubbles=s,c.event=b,c.timestamp=Date.now(),c.Wf=b.target.ca?b.target.ca:q,c.zd=q,a.eg=c.copy(),df=q,a.Ma.doMouseDown(),Gh(a,c),Fh(a,c,b)}},a.kE=function(b){if(a.isEnabled){if(1<b.touches.length){if(a.Ma.doCancel(),Eh(a),a.Ch&&y.eE)return b.preventDefault(),b.cancelBubble=h,s;if(a.Ch&&a.Kw&&1<b.targetTouches.length){var c=a.Da,d=c.getBoundingClientRect(),e=b.targetTouches[0],f=e.clientX-d.left*(c.width/d.width),g=e.clientY-d.top*(c.height/d.height),e=b.targetTouches[1],i=e.clientX-d.left*(c.width/d.width),e=e.clientY-d.top*(c.height/d.height),c=i-f,d=e-g,c=Math.sqrt(c*c+d*d)/a.cB,e=new A(Math.min(i,f)+Math.max(i,f)/2,Math.min(e,g)+Math.max(e,g)/2),f=a.Lt*c,g=a.Pe;return(f>a.scale&&g.canIncreaseZoom()||f<a.scale&&g.canDecreaseZoom())&&(g=a.qh,a.qh=e,a.scale=f,a.qh=g),b.preventDefault(),b.cancelBubble=h,s}return b.cancelBubble=s,h}f=a.Jc,a.Jc=a.Zb,a.Zb=f,e=g=q,0<b.changedTouches.length?e=b.changedTouches[0]:0<b.targetTouches.length&&(e=b.targetTouches[0]),f.h=a,e?((g=document.elementFromPoint(e.clientX,e.clientY))&&g.ca?(i=g.ca.Ig(e),c=g.ca):(i=a.Ig(b.changedTouches[0]),c=a),f.T=i,f.Rc=c.Do(i)):a.Jc!==q?(f.T=a.Jc.T,f.Rc=a.Jc.Rc,g=a.Jc.Wf):a.eg!==q&&(f.T=a.eg.T,f.Rc=a.eg.Rc,g=a.eg.Wf),f.hh=0,f.button=0,f.mj=s,f.ni=s,f.ce=1,f.lj=0,f.ee=s,f.bubbles=s,f.event=b,f.timestamp=Date.now(),f.Wf=g===q?b.target.ca:g.ca?g.ca:q,f.zd=q,a.Ma.isBeyondDragSize()&&Eh(a),a.XD(e?e:b,new A,f.Wf)||(a.Ma.doMouseMove(),Fh(a,f,b))}},a.jE=function(b){var c,e,d,f,g;if(a.isEnabled){if(Eh(a),a.Ix)return b.preventDefault(),s;c=a.Jc,a.Jc=a.Zb,a.Zb=c,1<b.touches.length?a.Ch&&(a.Kw=s):(d=q,f=q,0<b.changedTouches.length?f=b.changedTouches[0]:0<b.targetTouches.length&&(f=b.targetTouches[0]),c.h=a,c.ce=1,f?(d=document.elementFromPoint(f.clientX,f.clientY),d&&d.ca?(e=d.ca.Ig(f),g=d.ca):(e=a.Ig(b.changedTouches[0]),g=a),c.T=e,c.Rc=g.Do(e),e=new A(f.screenX,f.screenY),g=a.GA,b.timeStamp-a.ot<a.pB&&!(25<Math.abs(g.x-e.x)||25<Math.abs(g.y-e.y))?a.Qm++:a.Qm=1,c.ce=a.Qm,a.ot=b.timeStamp,a.GA=e):a.Jc!==q?(c.T=a.Jc.T,c.Rc=a.Jc.Rc,d=a.Jc.Wf):a.eg!==q&&(c.T=a.eg.T,c.Rc=a.eg.Rc,d=a.eg.Wf),c.hh=0,c.button=0,c.mj=s,c.ni=h,c.lj=0,c.ee=s,c.bubbles=s,c.event=b,c.timestamp=Date.now(),c.Wf=d===q?b.target.ca:d.ca?d.ca:q,c.zd=q,a.YD(f?f:b,q,new A,c.Wf)||(a.Ma.doMouseUp(),Fh(a,c,b)))}},c.addEventListener("touchstart",a.lE,s),c.addEventListener("touchmove",a.kE,s),c.addEventListener("touchend",a.jE,s),c.addEventListener("gesturestart",function(){a.Ch!==s&&(a.Lt=a.scale,a.Ma.doCancel())},s),c.addEventListener("gesturechange",function(b){var c,d,e;a.Ch!==s&&(c=a.Da,d=c.getBoundingClientRect(),c=new A(b.pageX-window.scrollX-d.left*(c.width/d.width),b.pageY-window.scrollY-d.top*(c.height/d.height)),d=a.qh,b=a.Lt*b.scale,e=a.Pe,(b>a.scale&&e.canIncreaseZoom()||b<a.scale&&e.canDecreaseZoom())&&(a.qh=c,a.scale=b,a.qh=d))},s),c.addEventListener("mousemove",a.mo,s),c.addEventListener("mousedown",a.lo,s),c.addEventListener("mouseup",a.oo,s),c.addEventListener("mousewheel",a.ug,s),c.addEventListener("DOMMouseScroll",a.ug,s),c.addEventListener("mouseout",a.no,s),c.addEventListener("keydown",a.RG,s),c.addEventListener("keyup",a.SG,s),c.addEventListener("selectstart",function(a){return a.preventDefault(),s},s),c.addEventListener("contextmenu",function(a){return a.preventDefault(),s},s),window.addEventListener("resize",a.Uy,s),c.tabIndex=0,Hh(a)):a.qb.innerHTML="This text is displayed if your browser does not support the Canvas HTML element."}function Hh(a,b){b===f&&(b=a.si),b.hw="",b.hm="",b.gm=""}function ph(a){var b=new pe;b.name="Background",a.er(b),b=new pe,b.name="",a.er(b),b=new pe,b.name="Foreground",a.er(b),b=new pe,b.name="Adornment",b.bc=h,a.er(b),b=new pe,b.name="Tool",b.bc=h,a.er(b),b=new pe,b.name="Grid",b.pe=s,b.$e=s,b.bc=h,a.jF(b,a.ur("Background"))}function Ih(a){a.Gc=new D(Jh),a.Gc.name="GRID";var b=new V;b.wb="LineH",b.stroke="lightgray",b.jb=.5,b.fi=1,a.Gc.add(b),b=new V,b.wb="LineH",b.stroke="gray",b.jb=.5,b.fi=5,a.Gc.add(b),b=new V,b.wb="LineH",b.stroke="gray",b.jb=1,b.fi=10,a.Gc.add(b),b=new V,b.wb="LineV",b.stroke="lightgray",b.jb=.5,b.fi=1,a.Gc.add(b),b=new V,b.wb="LineV",b.stroke="gray",b.jb=.5,b.fi=5,a.Gc.add(b),b=new V,b.wb="LineV",b.stroke="gray",b.jb=1,b.fi=10,a.Gc.add(b),b=new R,b.add(a.Gc),b.ge="Grid",b.Jy=s,b.$e=s,b.fv="GRID",a.add(b),a.lb.remove(b),a.Gc.visible=s}function Nh(a){var b,c,d,e,f,g,i,j,k;if(a.yy.V())return b=a.yy.copy(),b.ou(a.padding),b;for(c=h,d=a.zb.n,e=d.length,f=0;e>f;f++)if(g=d[f],g.visible&&!g.bc)for(g=g.lb.n,i=g.length,j=0;i>j;j++)k=g[j],k.Jy&&k.xb()&&(k=k.ua,k.V()&&(c?(c=s,b=k.copy()):b.zj(k)));return c&&(b=new B(0,0,0,0)),b.ou(a.padding),b}function Oh(a,b){var c,d,e,f,g;(b||a.fg)&&!a.Yb&&a.fd.V()&&a.Da!==q&&(a.Yb=h,c=a.Rk,b&&a.Zj!==Le&&(c=a.Zj),d=c!==Le?Ph(a,c):a.scale,c=a.eb.copy(),e=a.Da.width/d,f=a.Da.height/d,a.position.Pa(),g=a.Vk,b&&yb(a.Im)&&(g=a.Im),Qh(a,a.nb,a.fd,e,f,g),a.position.freeze(),a.scale=d,a.Yb=s,d=a.eb,d.di(c)||a.Zr(c,d))}function Ph(a,b){var c,d,e,f,g,h,i;return a.Da!==q?(a.Ci&&Rh(a,a.Qe()),c=a.fd,c.V()?(d=c.width,c=c.height,e=a.Da.width,f=a.Da.height,g=e/d,h=f/c,i=1,b===Sh?(i=Math.min(h,g),i>1&&(i=1),i<a.Nf&&(i=a.Nf),i>a.Mf&&(i=a.Mf),i):b===Th?(i=h>g?(f-a.Le)/c:(e-a.Le)/d,i>1&&(i=1),i<a.Nf&&(i=a.Nf),i>a.Mf&&(i=a.Mf),i):a.scale):1):void 0}function Qh(a,b,c,d,e,f){yb(f)&&(d>c.width&&(b.x=c.x+(f.x*c.width+f.offsetX)-(f.x*d-f.offsetX)),e>c.height&&(b.y=c.y+(f.y*c.height+f.offsetY)-(f.y*e-f.offsetY))),d<c.width?(f=b.x+d/2,f=Math.min(f,c.right-d/2),f=Math.max(f,c.left+d/2),b.x=f-d/2):b.x>c.left?b.x=c.left:b.x<c.right-d&&(b.x=c.right-d),e<c.height?(d=b.y+e/2,d=Math.min(d,c.bottom-e/2),d=Math.max(d,c.top+e/2),b.y=d-e/2):b.y>c.top?b.y=c.top:b.y<c.bottom-e&&(b.y=c.bottom-e),isFinite(b.x)||(b.x=-a.padding.left),isFinite(b.y)||(b.y=-a.padding.top)}function Ef(a,b,c,d){c===f&&(c=q),d===f&&(d=q);var e=a.zb.Rl;for(Mh(a);e.next();)if(a=e.value,a.visible&&!a.bc&&(a=a.vd(b,c,d),a!==q))return a;return q}function Eh(a){-1!==a.cu&&(clearTimeout(a.cu),a.cu=-1)}function Gh(a,b){var c=b.copy();a.cu=setTimeout(function(){c.button=2,a.Q=c,a.Ix=h,a.Ma.doMouseUp()},850)}function Dh(a,b,c,d){c.h=a,d?(d=a.Ig(b),c.Rc=a.Do(d),c.T=d):(c.Rc=a.Zb.Rc,c.T=a.Zb.T),a=0,b.ctrlKey&&(a+=1),b.altKey&&(a+=2),b.shiftKey&&(a+=4),c.hh=a,c.button=b.button,c.mj=s,c.ni=s,c.ce=1,c.lj=0,c.ee=s,c.bubbles=s,c.event=b,c.timestamp=Date.now(),c.Wf=b.target.ca?b.target.ca:q,c.zd=q}function Fh(a,b,c){return b.bubbles?(x&&x.trace&&x.yC&&x.trace("NOT handled "+c.type+" "+b.toString()),h):(x&&x.trace&&x.yC&&x.trace("handled "+c.type+" "+a.Ma.name+" "+b.toString()),c.stopPropagation!==f&&c.stopPropagation(),c.preventDefault!==f&&c.preventDefault(),c.cancelBubble=h,s)}function Uh(a){for(a.od||Mh(a),a.Ci&&Rh(a,a.Qe()),Oh(a),a=a.an.k;a.next();)Uh(a.value)}function Wh(a){var b,c,d,e;a.od||(a.Ef=s,a.qb===q)||(a.od=h,a.Uy(),!a.Yb&&a.Di&&(Lh(a)||Lh(a)),a.Gc!==q&&(a.Gc.visible&&!a.at&&(Xh(a),a.at=h),!a.Gc.visible&&a.at&&(a.at=s)),Mh(a),b=s,(!a.fg||a.Fs)&&(a.fg?Yh(a,!a.ju):Yh(a,s),a.ju=s,b=h),Mh(a),a.Bx||Uh(a),b&&(a.fg||(a.Zj!==Le?a.scale=Ph(a,a.Zj):a.Rk!==Le?a.scale=Ph(a,a.Rk):(c=a.FC,isFinite(c)&&c>0&&(a.scale=c)),a.Ci&&Rh(a,a.Qe()),c=a.EC,c.V()?a.position=c:(c=y.M(),c.ls(a.fd,a.DC),d=a.eb,d=y.xj(0,0,d.width,d.height),e=y.M(),e.ls(d,a.GC),a.position=new A(c.x-e.x,c.y-e.y),y.Bc(d),y.B(e),y.B(c),Oh(a,h)),a.Fa("InitialLayoutCompleted"),c=a.va,c!==q&&c.clear(),Xh(a)),a.Fa("LayoutCompleted")),Zh(a),Mh(a),!a.Yb&&a.Di&&!Lh(a)&&(Lh(a),Mh(a)),b&&!a.fg&&(a.fg=h),a.we(),a.od=s)}function Mh(a){var b,c,d,e,f;if(0!==a.xf.count)for(b=0;23>b&&(c=a.xf.k,c!==q&&0!==a.xf.count);b++){for(a.xf=new na(P),d=a,e=a.xf,c.reset();c.next();)f=c.value,f.Pd()&&!(f instanceof He)&&(f.Bk()?(ch(f,1/0,1/0),f.tc()):e.add(f));for(c.reset();c.next();)f=c.value,f instanceof He&&$h(d,f);for(c.reset();c.next();)d=c.value,d instanceof U&&(d.Bk()?(ch(d,1/0,1/0),d.tc(),d.gv()):e.add(d));for(c.reset();c.next();)d=c.value,d instanceof Ge&&(d.Bk()?(ch(d,1/0,1/0),d.tc()):e.add(d))}}function $h(a,b){var c,d,e,f;for(c=b.Dc,d=y.tb();c.next();)e=c.value,e instanceof He?(ai(e)||bi(e)||ci(e))&&$h(a,e):e instanceof U?d.push(e):(ch(e,1/0,1/0),e.tc());for(c=d.length,e=0;c>e;e++)f=d[e],ch(f,1/0,1/0),f.tc();y.ya(d),ch(b,1/0,1/0),b.tc()}function fi(a,b,c,d,e){var f,g,h,i;if(a.qb===q&&y.m("No div specified"),f=a.Da,f===q&&y.m("No canvas specified"),g=a.si,a.me){for(a.Km?(f.width=f.width,Hh(a,g)):(g.setTransform(1,0,0,1,0,0),g.clearRect(0,0,f.width,f.height)),g.DE=s,g.CC=s,g.drawImage(a.Dw,d>0?0:Math.round(-d),e>0?0:Math.round(-e)),e=a.nb,f=a.Qb,h=Math.round(e.x*f)/f,i=Math.round(e.y*f)/f,d=a.Xc,d.reset(),1!==f&&d.scale(f),(0!==e.x||0!==e.y)&&d.translate(-h,-i),g.save(),g.beginPath(),e=c.length,f=0;e>f;f++)h=c[f],0===h[2]||0===h[3]||g.rect(Math.floor(h[0]),Math.floor(h[1]),Math.ceil(h[2]),Math.ceil(h[3]));for(g.clip(),g.setTransform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy),x&&x.ky&&x.kG(a,g),c=a.zb.n,e=c.length,a.uf(c,e,a),ei(a,g),f=0;e>f;f++)jh(c[f],g,a,b);g.restore(),Hh(a),a.Xj?a.Xj.Qk(a)&&a.iw():a.Ig=aa(),a.$j=s,a.me=s}}function gi(a,b,c,d,e,g,i,j,k,l){var m,n,o,p,r,t;if(a.qb===q&&y.m("No div specified"),a.Da===q&&y.m("No canvas specified"),Hh(a),Kh(a),m=f,g&&d&&e&&(m=new B(g.x,g.y,d.width/e,d.height/e)),n=m.copy(),n.ou(c),Xh(a,n),Mh(a),n=a.zb.n,o=n.length,a.uf(n,o,a,m),b.setTransform(1,0,0,1,0,0),b.clearRect(0,0,d.width,d.height),j&&(b.fillStyle=j,b.fillRect(0,0,d.width,d.height)),d=y.xg(),d.reset(),d.translate(c.left,c.top),d.scale(e),(0!==g.x||0!==g.y)&&d.translate(-g.x,-g.y),b.setTransform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy),y.ye(d),ei(a,b),i){for(p=new na,c=i.k,c.reset();c.next();)e=c.value.W,l===s&&"Grid"===e.layer.name||e!==q&&p.add(e);c=function(c){var e,g,i,j,l,d=k;if(c.visible&&(d===f&&(d=h),d||!c.bc)){for(b.globalAlpha=c.mf,d=c.lb,c=c.Nt,c.length=0,e=a.scale,g=d.length,i=0;g>i;i++)if(j=d.n[i],gh(j)&&p.contains(j)){if(j instanceof U&&(j.Jb&&c.push(j),j.Yg===s))continue;l=j.ua,1<l.width*e||1<l.height*e?j.we(b,a):ih(j,b)}b.globalAlpha=1}}}else!k&&l?(r=a.Wn.W,t=r.layer,c=function(c){c===t?r.we(b,a):c.we(b,a,m,k,l)}):c=function(c){c.we(b,a,m,k,l)};for(e=0;o>e;e++)c(n[e]);a.Xj?a.Xj.Qk(a)&&a.iw():a.Ig=aa(),Hh(a),Kh(a),a.uf(n,o,a),Xh(a)}function ei(a,b){var c=a.yD;c!==q&&c.imageSmoothingEnabled!==f&&(c=!!c.imageSmoothingEnabled,b.CC=c,b.DE=c,b.hJ=c)}function Zh(a){if(0<a.Am.count){for(var b=a.Am.k;b.next();)jg(b.key,b.value);a.Am.clear()}}function hi(a,b,c,d,e){var f,g,i,j,k;for(b=Math.floor(b),c=Math.floor(c),d=Math.ceil(d),e=Math.ceil(e),f=a.ui,g=f.length,i=0;g>i;i++){if(j=f[i],b>=j[0]&&c>=j[1]&&b+d<=j[0]+j[2]&&c+e<=j[1]+j[3])return s;b<=j[0]&&c<=j[1]&&b+d>=j[0]+j[2]&&c+e>=j[1]+j[3]?(f[i][2]=0,f[i][3]=0):b>=j[0]&&b<j[0]+j[2]&&c>=j[1]&&c+e<=j[1]+j[3]?(d=b+d-(j[0]+j[2]),b=j[0]+j[2],i=-1):b+d>j[0]&&b+d<=j[0]+j[2]&&c>=j[1]&&c+e<=j[1]+j[3]?(d=j[0]-b,i=-1):b>=j[0]&&b+d<=j[0]+j[2]&&c>=j[1]&&c<j[1]+j[3]?(e=c+e-(j[1]+j[3]),c=j[1]+j[3],i=-1):b>=j[0]&&b+d<=j[0]+j[2]&&c+e>j[1]&&c+e<=j[1]+j[3]?(e=j[1]-c,i=-1):f[i][0]>=b&&f[i][0]<b+d&&f[i][1]>=c&&f[i][1]+f[i][3]<=c+e?(f[i][2]-=b+d-f[i][0],f[i][0]=b+d,i=-1):f[i][0]+f[i][2]>b&&f[i][0]+f[i][2]<=b+d&&f[i][1]>=c&&f[i][1]+f[i][3]<=c+e?(f[i][2]=b-f[i][0],i=-1):f[i][0]>=b&&f[i][0]+f[i][2]<=b+d&&f[i][1]>=c&&f[i][1]<c+e?(f[i][3]-=c+e-f[i][1],f[i][1]=c+e,i=-1):f[i][0]>=b&&f[i][0]+f[i][2]<=b+d&&f[i][1]+f[i][3]>c&&f[i][1]+f[i][3]<=c+e&&(f[i][3]=c-f[i][1],i=-1)}for(i=0;g>i;i++)if(j=f[i],d>0&&e>0&&0<j[2]&&0<j[3]&&(Math.max(b+d,j[0]+j[2])-Math.min(b,j[0]))*(Math.max(c+e,j[1]+j[3])-Math.min(c,j[1]))<d*e+j[2]*j[3]+50)return g=Math.min(j[0],b),k=Math.min(j[1],c),b=Math.max(b+d,j[0]+j[2])-Math.min(j[0],b),c=Math.max(c+e,j[1]+j[3])-Math.min(j[1],c),f[i][2]=0,f[i][3]=0,hi(a,g,k,b,c);return f.push([b,c,d,e]),h}function ii(a,b,c){var d,e,f,g,i,j,k,l,m,n,o;if(a.me!==h)for(a.me=h,a instanceof ji?ki(a):a.Vx===h&&c.width===b.width&&c.height===b.height?(d=a.scale,e=y.df(),f=Math.max(b.x,c.x),g=Math.max(b.y,c.y),i=Math.min(b.x+b.width,c.x+c.width),j=Math.min(b.y+b.height,c.y+c.height),e.x=f,e.y=g,e.width=Math.max(0,i-f)*d,e.height=Math.max(0,j-g)*d,0<e.width&&0<e.height?a.od||(a.Ef=s,a.qb===q||(a.od=h,Zh(a),Mh(a),a.fd.V()||Rh(a,a.Qe()),i=a.Da,i===q))||(f=i.width,g=i.height,j=a.scale,d=Math.round(Math.round(c.x*j)-Math.round(b.x*j)),b=Math.round(Math.round(c.y*j)-Math.round(b.y*j)),c=a.Dw,j=a.sA,c.width=f,c.height=g,k=Math.max(d,0),c=Math.max(b,0),l=f-k,m=g-c,j.DE=s,j.CC=s,j.drawImage(i,k,c,l,m,0,0,l,m),a.Xj.Qk(a)&&j.clearRect(0,0,190,70),i=y.tb(),j=y.tb(),m=Math.abs(d),l=Math.abs(b),n=0===k?0:f-m,k=y.dc(n,0),m=y.dc(m+n,g),j.push([Math.min(k.x,m.x),Math.min(k.y,m.y),Math.abs(k.x-m.x),Math.abs(k.y-m.y)]),o=a.Xc,o.reset(),1!==a.Qb&&o.scale(a.Qb),n=a.nb,(0!==n.x||0!==n.y)&&isFinite(n.x)&&isFinite(n.y)&&o.translate(-n.x,-n.y),Ta(k,o),Ta(m,o),i.push([Math.min(k.x,m.x),Math.min(k.y,m.y),Math.abs(k.x-m.x),Math.abs(k.y-m.y)]),n=0===c?0:g-l,k.q(0,n),m.q(f,l+n),j.push([Math.min(k.x,m.x),Math.min(k.y,m.y),Math.abs(k.x-m.x),Math.abs(k.y-m.y)]),Ta(k,o),Ta(m,o),i.push([Math.min(k.x,m.x),Math.min(k.y,m.y),Math.abs(k.x-m.x),Math.abs(k.y-m.y)]),a.Xj.Qk(a)&&(f=d>0?0:-d,g=b>0?0:-b,k.q(f,g),m.q(190+f,70+g),j.push([Math.min(k.x,m.x),Math.min(k.y,m.y),Math.abs(k.x-m.x),Math.abs(k.y-m.y)]),Ta(k,o),Ta(m,o),i.push([Math.min(k.x,m.x),Math.min(k.y,m.y),Math.abs(k.x-m.x),Math.abs(k.y-m.y)])),y.B(k),y.B(m),!a.Yb&&a.Di&&(Lh(a)||Lh(a)),fi(a,i,j,d,b),y.ya(i),y.ya(j),a.od=s):a.jc(),y.Bc(e)):a.li(),a=a.an.k;a.next();)ii(a.value)}function Vh(a){a.Di===s&&(a.Di=h)}function Kh(a){a.$j===s&&(a.$j=h)}function Lh(a){var c,d,e,g,i,j,k,l,m,n,o,p,r,t,u,v,w,x,y,z,A,b=a.Da;if(b!==q){if(c=a.qb,d=b.width,e=b.height,g=a.rB.copy(),i=s,j=a.al?a.Le:0,k=a.$k?a.Le:0,l=c.clientWidth||b.width+j,c=c.clientHeight||b.height+k,(l!==b.width+j||c!==b.height+k)&&(a.al=s,a.$k=s,b.width=l,b.height=c,i=h),a.Di=s,!a.St)return m=a.eb,n=a.fd,j=n.width,k=n.height,o=m.width,p=m.height,r=n.x,t=m.x,u=n.right,v=m.right,w=n.y,x=m.y,y=n.bottom,z=m.bottom,n=m="1px",A=a.scale,l/A>j&&c/A>k||(a.zC&&a.Ne&&(j>o+1?(m=(j-o)*A+b.width+"px",a.Qi.scrollLeft=(a.position.x-r)*A):t>r+1?(m=(t-r)*A+b.width+"px",a.Qi.scrollLeft=a.Qi.scrollWidth-a.Qi.clientWidth):u>v+1&&(m=(u-v)*A+b.width+"px",a.Qi.scrollLeft=a.position.x*A)),a.AC&&a.Oe&&(k>p+1?(n=(k-p)*A+b.height+"px",a.Ri.scrollTop=(a.position.y-w)*A):x>w+1?(n=(x-w)*A+b.height+"px",a.Ri.scrollTop=a.Ri.scrollHeight-a.Ri.clientHeight):y>z+1&&(n=(y-z)*A+b.height+"px",a.Ri.scrollTop=a.position.y*A))),l="1px"!==m,c="1px"!==n,l!==a.$k&&(b.height="1px"===m?b.height+a.Le:Math.max(b.height-a.Le,1),i=h),a.$k=l,a.yx.style.width=m,c!==a.al&&(b.width="1px"===n?b.width+a.Le:Math.max(b.width-a.Le,1),i=h),a.al=c,a.zx.style.height=n,i&&Hh(a),l=b.width,c=b.height,a.Ri.style.height=c+"px",a.Ri.style.width=l+(a.al?a.Le:0)+"px",a.Qi.style.width=l+"px",a.Qi.style.height=c+(a.$k?a.Le:0)+"px",a.xx=s,d!==l||e!==c?(m=a.eb,a.Zr(g,m,i?h:f),s):h;(d!==b.width||e!==b.height)&&a.li()}}function ti(a,b){for(var c=a.zb,d=c.count,e=0;d>e;e++)c.sa(e).name===b&&y.m("Cannot add layer with the name '"+b+"', a layer of the same name is already present in this diagram.")}function Ai(a,b,c){y.l(b,pe,E,"addLayer:layer"),ti(a,b.name),b.ie(a),a.zb.wd(c,b),a.Jd!==q&&a.Qc(td,"layers",a,q,b,q,c),a.oc()}function Xh(a,b){var d,e,f,g,h,i,j,c=a.Gc;if(c!==q&&c.visible){for(d=y.Nk(),e=1,f=1,g=c.za.length,h=0;g>h;h++)i=c.za.n[h],j=i.fi,2>j||("LineV"===i.wb?f=f*j/H.qC(f,j):e=e*j/H.qC(e,j));if(g=c.Br,d.q(f*g.width,e*g.height),b)h=b.width,i=b.height,f=b.x,g=b.y;else{for(e=y.df(),f=a.eb,e.q(f.x,f.y,f.width,f.height),g=a.an.k;g.next();)f=g.value.eb,ib(e,f.x,f.y,f.width,f.height);if(h=e.width,i=e.height,f=e.x,g=e.y,!e.V())return}c.width=h+2*d.width,c.height=i+2*d.height,e=y.M(),H.wy(f,g,0,0,d.width,d.height,e),e.offset(-d.width,-d.height),y.qj(d),c.W.location=e,y.B(e)}}function Ke(a){if(a=a.selection,0<a.count){for(var b=a.Ee(),c=b.length,d=0;c>d;d++)b[d].Wa=s;a.Pa(),a.clear(),a.freeze()}}function di(a,b){var c=a.Xc,d=b[0],e=b[1],f=d+b[2],g=e+b[3],h=c.m11,i=c.m12,j=c.m21,k=c.m22,l=c.dx,m=c.dy,n=d*h+e*j+l,o=d*i+e*k+m,c=f*h+e*j+l,e=f*i+e*k+m,p=d*h+g*j+l,d=d*i+g*k+m,h=f*h+g*j+l,f=f*i+g*k+m,g=n,i=o,n=Math.min(n,c),g=Math.max(g,c),i=Math.min(i,e),o=Math.max(o,e),n=Math.min(n,p),g=Math.max(g,p),i=Math.min(i,d),o=Math.max(o,d),n=Math.min(n,h),g=Math.max(g,h),i=Math.min(i,f),o=Math.max(o,f);return[n,i,g-n,o-i]}function oh(a,b){var c,d,e,g,i,j,k,l,m,n,o,p,r,t,u,v,w,x,z,A,B,C,D,E,F,G,H;if(b.fa===a.fa&&a.Ra){a.Ra=s;try{if(c=b.Yc,d=b.Ye,""!==d)if(c===sd){if("linkFromKey"===d)e=b.object,g=a.pf(e),g!==q&&(i=b.newValue,j=a.Jf(i),g.da=j);else if("linkToKey"===d)e=b.object,g=a.pf(e),g!==q&&(i=b.newValue,j=a.Jf(i),g.ja=j);else if("linkFromPortId"===d)e=b.object,g=a.pf(e),g!==q&&(k=b.newValue,"string"==typeof k&&(g.Kf=k));else if("linkToPortId"===d)e=b.object,g=a.pf(e),g!==q&&(k=b.newValue,"string"==typeof k&&(g.yg=k));else if("nodeGroupKey"===d)e=b.object,l=a.pj(e),l!==q&&(m=b.newValue,m!==f?(n=a.Jf(m),l.bb=n instanceof He?n:q):l.bb=q);else if("linkLabelKeys"===d){if(e=b.object,g=a.pf(e),g!==q){if(o=b.oldValue,p=b.newValue,y.isArray(o))for(r=y.Sb(o),t=0;r>t;t++)u=y.Hb(o,t),j=a.Jf(u),j!==q&&(j.hd=q);if(y.isArray(p))for(r=y.Sb(p),t=0;r>t;t++)u=y.Hb(p,t),j=a.Jf(u),j!==q&&(j.hd=g)}}else"nodeParentKey"===d?(v=b.object,w=a.Jf(b.newValue),x=a.vr(v),x!==q&&(z=x.yr(),z!==q?w===q?a.remove(z):a.Pc?z.da=w:z.ja=w:Ei(a,w,x))):"parentLinkCategory"===d?(v=b.object,x=a.vr(v),A=b.newValue,x!==q&&"string"==typeof A&&(z=x.yr(),z!==q&&(z.Ac=A))):"nodeCategory"===d?(e=b.object,B=a.pj(e),A=b.newValue,B!==q&&"string"==typeof A&&(B.Ac=A)):"linkCategory"===d?(e=b.object,C=a.pf(e),A=b.newValue,C!==q&&"string"==typeof A&&(C.Ac=A)):"nodeDataArray"===d?(a.ta(),D=b.oldValue,Bi(a,D),E=b.newValue,Ci(a,E)):"linkDataArray"===d&&(a.ta(),D=b.oldValue,Bi(a,D),E=b.newValue,Di(a,E));a.Pl=h}else c===td?(E=b.newValue,"nodeDataArray"===d&&y.sb(E)?Fi(a,E):"linkDataArray"===d&&y.sb(E)?Gi(a,E):"linkLabelKeys"===d&&Od(E)&&(g=a.pf(b.object),j=a.Jf(E),g!==q&&j!==q&&(j.hd=g)),a.Pl=h):c===ud?(D=b.oldValue,"nodeDataArray"===d&&y.sb(D)?Hi(a,D):"linkDataArray"===d&&y.sb(D)?Hi(a,D):"linkLabelKeys"===d&&Od(D)&&(j=a.Jf(D),j!==q&&(j.hd=q)),a.Pl=h):c===nd&&"SourceChanged"===d&&(l=a.pj(b.object),F=b.propertyName,l!==q&&"string"==typeof F&&(l.yb(F),a.fa instanceof zd&&(g=a.pf(b.object),g!==q&&g.yb(F))));else c===sd?(G=b.propertyName,e=b.object,e===a.fa?("nodeKeyProperty"===G||"nodeCategoryProperty"===G||"linkFromKeyProperty"===G||"linkToKeyProperty"===G||"linkFromPortIdProperty"===G||"linkToPortIdProperty"===G||"nodeIsLinkLabelProperty"===G||"linkLabelKeysProperty"===G||"nodeIsGroupProperty"===G||"nodeGroupKeyProperty"===G||"nodeParentKeyProperty"===G||"linkCategoryProperty"===G)&&(a.va.cb||a.Wl()):nh(a,e,G),a.Pl=h):c===td||c===ud?(Ii(a,b),a.Pl=h):c===nd&&(H=b.propertyName,"S"!==H[0]?("CommittingTransaction"===H||"FinishedUndo"!==H&&"FinishedRedo"!==H||(a.va.Eh=h,Mh(a),a.va.Eh=s),a.ju=h,a.li(),!a.jx&&"CommittedTransaction"===H&&(a.jx=h,setTimeout(function(){a.Ma.standardMouseOver(),a.jx=s},10))):"StartingFirstTransaction"===H&&!a.od&&!a.fg&&(a.ju=h,a.mp&&(a.Ef=h)))}finally{a.Ra=h}}}function nh(a,b,c){var e,f,g,d=a.pj(b);if(d!==q&&"string"==typeof c)d.yb(c),a.fa instanceof zd&&(b=a.pf(b),b!==q&&b.yb(c));else if("string"==typeof c){for(d=q,a=a.gl.k;a.next();){for(e=a.value,f=0;f<e.length;f++)g=e[f],g.yf!==q&&(g=g.yf.wa(b),g!==q&&(d===q&&(d=y.tb()),d.push(g)));if(d!==q)break}if(b=d,b!==q){for(d=0;d<b.length;d++)b[d].yb(c);y.ya(b)}}}function Ii(a,b){var g,h,c=b.Yc===td,d=c?b.rf:b.tf,e=c?b.newValue:b.oldValue,f=a.gl.wa(b.object);if(Array.isArray(f))for(g=0;g<f.length;g++)h=f[g],"number"==typeof d&&((h.type===zg||h.type===Ch)&&d++,c?y.sb(e)&&(Ji(h,e,d),Ki(h,h)):(h.ze(d),Ki(h,h)))}function wi(a,b){var d,c=b.bk;if(y.isArray(c))if(d=a.gl.wa(c),d===q)a.gl.add(c,[b]);else{for(c=0;c<d.length;c++)if(d[c]===b)return;d.push(b)}}function yi(a,b){var d,e,c=b.bk;if(y.isArray(c)&&(d=a.gl.wa(c),d!==q))for(e=0;e<d.length;e++)if(d[e]===b){d.splice(e,1),0===d.length&&a.gl.remove(c);break}}function Ci(a,b){var c,d,e,f;if(b!==q){for(c=a.fa,d=y.Sb(b),e=0;d>e;e++)f=y.Hb(b,e),c.te(f)?Fi(a,f,s):c instanceof O&&Gi(a,f);if(c instanceof O||c instanceof zd){for(e=0;d>e;e++)f=y.Hb(b,e),c.te(f)&&Li(a,f);if(c instanceof O)for(c=a.links;c.next();)Mi(c.value)}Ni(a,s)}}function Fi(a,b,c){if(b!==f&&b!==q&&!a.va.cb&&!a.xh.contains(b)){c===f&&(c=h);var d=a.getCategoryForNodeData(b),e=a.findTemplateForNodeData(b,d);e instanceof R&&(Je(e),e=e.copy(),e instanceof R&&(e.Bg=d,a.add(e),e.data=b,c&&Li(a,b)))}}function Li(a,b){var d,e,g,h,i,j,c=a.fa;if((c instanceof O||c instanceof zd)&&(d=c.Cb(b),d!==f)){if(e=Yd(c,d),g=a.vr(b),e!==q&&g!==q){for(e=e.k;e.next();)if(h=e.value,c instanceof O){if(c.te(h))g instanceof He&&c.Tn(h)===d&&(i=a.pj(h),i!==q&&(i.bb=g));else if(i=a.pf(h),i!==q)for(c.Ll(h)===d&&(i.da=g),c.Ml(h)===d&&(i.ja=g),h=c.Ak(h),j=0;j<h.length;j++)if(h[j]===d){g.hd=i;break}}else c instanceof zd&&c.te(h)&&c.Vn(h)===d&&(i=a.vr(h),Ei(a,g,i));$d(c,d)}c instanceof O?(c=c.Tn(b),c!==f&&(c=a.Jf(c),c instanceof He&&(g.bb=c))):c instanceof zd&&(c=c.Vn(b),c!==f&&(c=a.Jf(c),Ei(a,c,g)))}}function Ei(a,b,c){var d,e,f,g;if(b!==q&&c!==q){if(d=a.pb.Sy,e=b,f=c,a.Pc){for(b=f.Qd;b.next();)if(g=b.value,g.ja===f)return}else for(e=c,f=b,b=e.Qd;b.next();)if(g=b.value,g.da===e)return;d!==q&&Pf(d,e,f,q,h)||(d=a.getCategoryForLinkData(c.data),b=a.findTemplateForLinkData(c.data,d),b instanceof U&&(Je(b),b=b.copy(),b instanceof U&&(b.Bg=d,b.da=e,b.ja=f,a.add(b),b.data=c.data)))}}function Di(a,b){if(b!==q){for(var c=y.Sb(b),d=0;c>d;d++)Gi(a,y.Hb(b,d));Ni(a,s)}}function Gi(a,b){var c,d,e,g,h;if(b!==f&&b!==q&&!a.va.cb&&!a.Sj.contains(b)&&(c=a.getCategoryForLinkData(b),d=a.findTemplateForLinkData(b,c),d instanceof U&&(Je(d),d=d.copy(),d instanceof U))){if(d.Bg=c,c=a.fa,e=c.vG(b),""!==e&&(d.Kf=e),e=c.Ll(b),e!==f&&(e=a.Jf(e),e instanceof T&&(d.da=e)),e=c.yG(b),""!==e&&(d.yg=e),e=c.Ml(b),e!==f&&(e=a.Jf(e),e instanceof T&&(d.ja=e)),c=c.Ak(b),y.isArray(c))for(e=y.Sb(c),g=0;e>g;g++)h=a.Jf(y.Hb(c,g)),h!==q&&(h.hd=d);a.add(d),d.data=b}}function Bi(a,b){for(var c=y.Sb(b),d=0;c>d;d++)Hi(a,y.Hb(b,d))}function Hi(a,b){var c,d,e,g,h,i,j;if(b!==f&&b!==q&&(c=a.pj(b),c instanceof R&&(c.Wa=s,d=c.layer,d!==q&&d.h===a))){if(e=a.fa,e instanceof O&&c instanceof T){if(g=e.Cb(c.data),g!==f){for(h=c.Qd;h.next();)i=h.value.data,Zd(e,g,i);if(c.ii&&(h=c.hd,h!==q&&(i=h.data,Zd(e,g,i))),c instanceof He)for(h=c.Dc;h.next();)i=h.value.data,e.te(i)&&Zd(e,g,i)}}else if(e instanceof zd&&c instanceof T)for(h=a.pf(c.data),h!==q&&(h.Wa=s,i=h.layer,i!==q)&&(j=i.ze(-1,h),j>=0&&a.Qc(ud,"parts",i,h,q,j,q),j=h.bo,j!==q&&j(h,i,q)),h=a.Pc,i=c.Qd;i.next();)j=i.value,j=(h?j.ja:j.da).data,e.te(j)&&Zd(e,g,j);e=d.ze(-1,c),e>=0&&a.Qc(ud,"parts",d,c,q,e,q),e=c.bo,e!==q&&e(c,d,q)}}function Rh(a,b){var c=a.Us;c.L(b)||(b=b.U(),a.Us=b,a.Ci=s,a.ui=q,Oh(a),a.Fa("DocumentBoundsChanged",q,c.copy()),Vh(a))}function Ni(a,b){for(var c=a.mk.k;c.next();)Oi(a,c.value,b);a.Nb!==q&&(b?a.Nb.Ve=s:a.Nb.J())}function Oi(a,b,c){if(b!==q){for(var d=b.Ym.k;d.next();)Oi(a,d.value,c);b.Nb!==q&&(c?b.Nb.Ve=s:b.Nb.J())}}function Yh(a,b){for(var c=a.mk.k;c.next();)Pi(a,c.value,b);
if(c=a.Nb,c!==q&&!c.Ve){if(b&&!c.Ny)return;c.doLayout(a),Mh(a),c.Ve=h}a.Fs=s}function Pi(a,b,c){if(b!==q){for(var d=b.Ym.k;d.next();)Pi(a,d.value,c);d=b.Nb,d===q||d.Ve||c&&!d.Ny||(b.RA=!b.location.V(),d.doLayout(b),b.J(Qi),d.Ve=h,$h(a,b))}}function mh(a){function b(a){var b=a.toLowerCase(),e=new F("function");c.add(a,e),c.add(b,e),d.add(a,a),d.add(b,a)}var c=new ma("string",F),d=new ma("string","string");b("BackgroundSingleClicked"),b("BackgroundDoubleClicked"),b("BackgroundContextClicked"),b("ClipboardChanged"),b("ClipboardPasted"),b("DocumentBoundsChanged"),b("ExternalObjectsDropped"),b("InitialLayoutCompleted"),b("LayoutCompleted"),b("LinkDrawn"),b("LinkRelinked"),b("LinkReshaped"),b("ObjectSingleClicked"),b("ObjectDoubleClicked"),b("ObjectContextClicked"),b("PartCreated"),b("PartResized"),b("PartRotated"),b("SelectionMoved"),b("SelectionCopied"),b("SelectionDeleting"),b("SelectionDeleted"),b("SelectionGrouped"),b("SelectionUngrouped"),b("ChangingSelection"),b("ChangedSelection"),b("SubGraphCollapsed"),b("SubGraphExpanded"),b("TextEdited"),b("TreeCollapsed"),b("TreeExpanded"),b("ViewportBoundsChanged"),a.Bw=c,a.Aw=d}function Si(a,b){var c=a.Bw.wa(b);return c!==q?c:(c=a.Bw.wa(b.toLowerCase()),c!==q?c:(y.m("Unknown DiagramEvent name: "+b),q))}function Hf(a,b){var d,c=s;if(a.eb.ij(b)&&(c=h),c=a.xy(b,function(a){return a.W},function(a){return a instanceof U},h,function(a){return a instanceof U},c),0!==c.count)for(c=c.k;c.next();)d=c.value,d.jh===xf&&d.Ub()}function Ti(a,b,c,d){var e,f,g,h;if(b!==c)if(b.canAvoid()){for(c=b.uG(d),d=a.sd.yl,b=a.sd.xl,e=c.x+c.width,f=c.y+c.height,g=c.x;e>g;g+=d){for(h=c.y;f>h;h+=b)Ui(a.sd,g,h);Ui(a.sd,g,f)}for(h=c.y;f>h;h+=b)Ui(a.sd,e,h);Ui(a.sd,e,f)}else if(b instanceof He)for(b=b.Dc;b.next();)e=b.value,e instanceof T&&Ti(a,e,c,d)}function Vi(a,b){a.sd===q||a.sd.Gr||b!==q&&!b.canAvoid()||(a.sd.Gr=h)}function Ff(a,b){a.nw=a.Do(b),Wi(a,a.nw).di(a.position)?hf(a):Xi(a)}function Xi(a){var b,c;a.zg===q&&(a.zg={},b=a.Ma!==a.pb.ve?a.QE:a.RE,a.zg.isEnabled=h,c=setInterval(function(){var b=c;a.zg!==q&&a.zg.isEnabled&&(a.zg=q,clearInterval(b),b=Wi(a,a.nw),b.di(a.position)||(a.position=b,a.Q.T=a.pE(a.nw),a.Ma.doMouseMove(),a.Ci=h,Rh(a,a.Qe()),a.me=h,a.li(),Xi(a)))},b),a.zg.id=c)}function hf(a){a.zg!==q&&(a.zg.isEnabled&&clearInterval(a.zg.id),a.zg=q)}function Wi(a,b){var e,f,g,h,c=a.position,d=a.GB;return 0>=d.top&&0>=d.left&&0>=d.right&&0>=d.bottom?c:(e=a.eb,f=a.scale,e=y.xj(0,0,e.width*f,e.height*f),g=y.dc(0,0),b.x>=e.x&&b.x<e.x+d.left?(h=Math.max(a.fs,1),h=0|h,g.x-=h,b.x<e.x+d.left/2&&(g.x-=h),b.x<e.x+d.left/4&&(g.x-=4*h)):b.x<=e.x+e.width&&b.x>e.x+e.width-d.right&&(h=Math.max(a.fs,1),h|=0,g.x+=h,b.x>e.x+e.width-d.right/2&&(g.x+=h),b.x>e.x+e.width-d.right/4&&(g.x+=4*h)),b.y>=e.y&&b.y<e.y+d.top?(h=Math.max(a.gs,1),h|=0,g.y-=h,b.y<e.y+d.top/2&&(g.y-=h),b.y<e.y+d.top/4&&(g.y-=4*h)):b.y<=e.y+e.height&&b.y>e.y+e.height-d.bottom&&(h=Math.max(a.gs,1),h|=0,g.y+=h,b.y>e.y+e.height-d.bottom/2&&(g.y+=h),b.y>e.y+e.height-d.bottom/4&&(g.y+=4*h)),g.di(H.Aj)||(c=new A(c.x+g.x/f,c.y+g.y/f)),y.Bc(e),y.B(g),c)}function Yi(a){1<arguments.length&&y.m("Palette constructor can only take one optional argument, the DIV HTML element or its id."),E.call(this,a),this.su=h,this.sk=s,this.Za=h,this.Cu=Ob,this.Nb=new Zi}function ji(a){var b,c,d;1<arguments.length&&y.m("Overview constructor can only take one optional argument, the DIV HTML element or its id."),E.call(this,a),this.Yb=h,this.Lh=q,this.Xs=h,b=new R,c=new V,c.stroke="magenta",c.jb=2,c.fill=q,c.name="BOXSHAPE",b.ks="BOXSHAPE",b.fv="BOXSHAPE",b.add(c),this.mm=b,this.Lx=document.createElement("canvas"),this.cF=this.Lx.getContext("2d"),b=new $i,b.ie(this),this.pb.Ze.wd(0,b),d=this,this.nD=function(){aj(d)},this.mD=function(){d.Lh!==q&&(d.oc(),d.ta())},this.Za=h,this.pe=s,this.wl=Sh,this.pb.Ul=Re,this.Yb=s}function ki(a){!a.Yb&&!a.od&&a.Ef===s&&(a.Ef=h,requestAnimationFrame(function(){var b,c,d;if(a.Ef&&!a.od&&(a.Ef=s,a.qb!==q)){if(a.od=h,Mh(a),a.fd.V()||Rh(a,a.Qe()),a.qb===q&&y.m("No div specified"),a.Da===q&&y.m("No canvas specified"),a.me&&a.Lh!==q){for(b=a.si,c=a.Lx,b.setTransform(1,0,0,1,0,0),b.clearRect(0,0,a.Da.width,a.Da.height),b.drawImage(c,0,0),c=a.Xc,c.reset(),1!==a.Qb&&c.scale(a.scale),(0!==a.position.x||0!==a.position.y)&&c.translate(-a.nb.x,-a.nb.y),b.setTransform(c.m11,c.m12,c.m21,c.m22,c.dx,c.dy),c=a.zb.length,d=0;c>d;d++)a.zb.n[d].we(b,a);a.$j=s,a.me=s}a.od=s}}))}function aj(a){var c,d,e,b=a.Hf;b!==q&&(c=a.Lh,c!==q&&(a.me=h,c=c.eb,d=b.js,e=y.Nk(),e.q(c.width,c.height),d.Aa=e,y.qj(e),a=2/a.scale,d instanceof V&&(d.jb=a),b.location=new A(c.x-a/2,c.y-a/2)))}function $i(){Pe.call(this),this.name="MoveBox"}function Hd(a){1<arguments.length&&y.m("Brush constructor can take at most one optional argument, the Brush type."),y.lc(this),this.$a=s,a===f?(this.Y=Jd,this.pm="black"):"string"==typeof a?(this.Y=Jd,this.pm=a):(x&&y.rb(a,Hd,Hd,"constructor:type"),this.Y=a,this.pm="black");var b=this.Y;b===Kd?(this.kn=Ob,this.Cm=Wb):this.Cm=this.kn=b===Ld?Sb:Hb,this.$t=0,this.Ys=0/0,this.bA=this.cA=this.bg=this.Pt=this.ag=q}function P(){y.lc(this),this.na=30723,this.Nh=q,this.Gb="",this.Ge=this.Uc=q,this.nb=new A(0/0,0/0).freeze(),this.He=new ha(0/0,0/0).freeze(),this.Hd=H.ws,this.Ki=H.NE,this.Xc=new ka,this.km=new ka,this.dk=new ka,this.Qb=1,this.lm=0,this.Ug=Bg,this.Up=H.Ko,this.wc=new B(0/0,0/0,0/0,0/0).freeze(),this.Ob=new B(0/0,0/0,0/0,0/0).freeze(),this.Ic=new B(0,0,0/0,0/0).freeze(),this.Uq=this.np=this.P=this.oq=this.Kd=q,this.Vq=this.op=1/0,this.Qo=this.Ud=Ib,this.zq=0,this.lk=1,this.Wo=0,this.Pj=1,this.Cq=-1/0,this.Bq=0,this.Dq=H.Aj,this.Eq=cj,this.bp="",this.nl=this.Oj=this.Wk=this.rc=this.O=q}function gj(a){a.O={uh:q,zh:q,vh:q,eq:q,fq:q,Jh:q,Ih:q,Hh:q,cq:q,dq:q,Gh:q,Mo:q,No:q,Oo:q,Lo:q,Th:q,wh:q}}function ij(a,b,c,d,e,f,g){var k,l,m,n,o,i=.001,j=f.length;for(a.moveTo(b,c),d-=b,i=e-c,0===d&&(d=.001),e=i/d,k=Math.sqrt(d*d+i*i),l=0,m=h,n=0===g?s:h;k>=.1;){if(n){for(i=f[l++%j],i-=g;0>i;)i+=f[l++%j],m=!m;n=s}else i=f[l++%j];i>k&&(i=k),o=Math.sqrt(i*i/(1+e*e)),0>d&&(o=-o),b+=o,c+=e*o,m?a.lineTo(b,c):a.moveTo(b,c),k-=i,m=!m}}function jj(a,b,c,d,e){var f=a.wc,g=a.dk;g.reset(),kj(a,g,b,c,d,e),a.dk=g,f.x=b,f.y=c,f.width=d,f.height=e,g.Ir()||g.oE(f)}function lj(a,b,c,d){return a.$e===s?s:(d.multiply(a.transform),c?a.qf(b,d):a.Bl(b,d))}function ch(a,b,c,d,e){var f,g,h,i;if(ai(a)!==s){switch(f=a.margin,g=f.top+f.bottom,b=Math.max(b-(f.right+f.left),0),c=Math.max(c-g,0),f=a.Aa,g=0,a.jb&&(g=a.jb),b=isFinite(f.width)?f.width+g:b,c=isFinite(f.height)?f.height+g:c,f=d||0,g=e||0,h=a instanceof D,mj(a)){case dj:g=f=0,h&&(c=b=1/0);break;case qc:isFinite(b)&&b>d&&(f=b),isFinite(c)&&c>e&&(g=c);break;case fj:isFinite(b)&&b>d&&(f=b),g=0,h&&(c=1/0);break;case ej:isFinite(c)&&c>e&&(g=c),f=0,h&&(b=1/0)}h=a.he,i=a.Ce,f>h.width&&i.width<h.width&&(f=h.width),g>h.height&&i.height<h.height&&(g=h.height),d=Math.max(f/a.scale,i.width),e=Math.max(g/a.scale,i.height),h.width<d&&(d=Math.min(i.width,d)),h.height<e&&(e=Math.min(i.height,e)),b=Math.min(h.width,b),c=Math.min(h.height,c),b=Math.max(d,b),c=Math.max(e,c),f=a.angle,(90===f||270===f)&&(f=b,b=c,c=f,f=d,d=e,e=f),a.wc.Pa(),a.Nr(b,c,d,e),a.wc.freeze(),a.wc.V()||y.m("Non-real measuredBounds has been set. Object "+a+", measuredBounds: "+a.wc.toString()),nj(a,s)}}function Aj(a,b,c,d,e){var g,f=a.ua;if(f.x=b,f.y=c,f.width=d,f.height=e,!a.Aa.V())switch(f=a.wc,c=a.margin,b=c.right+c.left,g=c.top+c.bottom,c=f.width+b,f=f.height+g,d+=b,e+=g,b=mj(a),c===d&&f===e&&(b=dj),b){case dj:(c>d||f>e)&&(nj(a,h),ch(a,c>d?d:c,f>e?e:f));break;case qc:nj(a,h),ch(a,d,e,0,0);break;case fj:nj(a,h),ch(a,d,f,0,0);break;case ej:nj(a,h),ch(a,c,e,0,0)}}function rj(a,b,c){var d,e,f,g,i,j,k,l;Bj(a,s),d=a.W,d!==q&&(e=d.h,e!==q&&(Cj(d),a instanceof R?(f=s,d=b.V(),e.Ci===s&&(g=e.fd,i=e.padding,j=g.x+i.left,k=g.y+i.top,l=g.width-2*i.right,g=g.height-2*i.bottom,d&&b.x>j&&b.y>k&&b.right<l&&b.bottom<g&&c.x>j&&c.y>k&&c.right<l&&c.bottom<g&&(f=h)),(0!==(65536&a.Z)===h||!b.L(c))&&xi(a,f,e),e.wx&&e.ui!==q?(f=q,d&&(f=y.df(),kh(a,b,f)),e.ta(c.V()?kh(a,c):q,f),f!==q&&y.Bc(f)):e.ta()):(Dj(a,d),a.ta(),b=a.W,b!==q&&(b.js===a||b.DD===a||b.JD===a)&&Ej(b,h))))}function Dj(a,b){if(a.Td!==q&&Ej(b,h),a instanceof D)for(var c=a.za,d=c.length,e=0;d>e;e++)Dj(c.n[e],b)}function Hj(a,b,c,d,e){var f,g,h,i,j,k,l;if(c!==q)if("string"==typeof c)d?b.gm!==c&&(b.fillStyle=c,b.gm=c):b.hm!==c&&(b.strokeStyle=c,b.hm=c);else if(c.type===Jd)c=c.color,d?b.gm!==c&&(b.fillStyle=c,b.gm=c):b.hm!==c&&(b.strokeStyle=c,b.hm=c);else{if(g=a.Ta,h=g.width,g=g.height,e&&(i=a.ua,h=i.width,g=i.height),c.bg&&c.type===bj||c.cA===h&&c.bA===g)f=c.bg;else{if(l=k=0,e&&(i=a.ua,h=i.width,g=i.height,k=i.x,l=i.y),c.start instanceof A?(a=c.start.x,e=c.start.y):c.start instanceof J?(a=c.start.x*h,e=c.start.y*g):(a=Sb.x*h,e=Sb.y*g),c.end instanceof A?(i=c.end.x,j=c.end.y):c.end instanceof J?(i=c.end.x*h,j=c.end.y*g):c.type===Kd?(i=Wb.x*h,j=Wb.y*g):(i=Sb.x*h,j=Sb.y*g),a+=k,i+=k,e+=l,j+=l,c.type===Kd?f=b.createLinearGradient(a,e,i,j):c.type===Ld?(k=isNaN(c.Ln)?Math.max(h,g)/2:c.Ln,isNaN(c.Co)?(f=0,k=Math.max(h,g)/2):f=c.Co,f=b.createRadialGradient(a,e,f,i,j,k)):c.type===bj?f=b.createPattern(c.pattern,"repeat"):y.Kb(c.type,"Brush type"),c.type!==bj&&(k=c.Fn))for(k=k.k;k.next();)f.addColorStop(k.key,k.value);c.bg=f,c.cA=h,c.bA=g}d?b.gm!==f&&(b.fillStyle=f,b.gm=f):b.hm!==f&&(b.strokeStyle=f,b.hm=f)}}function Ij(a){var b,c;if(0!==(2048&a.na)===h){if(b=a.Xc,b.reset(),!a.Ob.V()||!a.wc.V())return Jj(a,s),void 0;b.translate(a.Ob.x,a.Ob.y),b.translate(-a.Ba.x,-a.Ba.y),c=a.Ta,kj(a,b,c.x,c.y,c.width,c.height),Jj(a,s),Kj(a,h)}0!==(4096&a.na)===h&&(a.ga===q?(a.km.set(a.Xc),Kj(a,s)):a.ga.oe!==q&&(b=a.km,b.reset(),b.multiply(a.ga.km),b.multiply(a.Xc),Kj(a,s)))}function kj(a,b,c,d,e,f){var g,h;if(1!==a.scale&&b.scale(a.scale),0!==a.angle){if(g=Sb,a.We&&yb(a.We)&&(g=a.We),h=y.M(),a instanceof R&&a.Vb!==a)for(c=a.Vb,d=c.Ta,h.ms(d.x,d.y,d.width,d.height,g),c.dk.Qa(h),h.offset(-c.Ba.x,-c.Ba.y),g=c.ga;g!==q&&g!==a;)g.dk.Qa(h),h.offset(-g.Ba.x,-g.Ba.y),g=g.ga;else h.ms(c,d,e,f,g);b.rotate(a.angle,h.x,h.y),y.B(h)}}function Nj(a){if(ai(a)===s&&(nj(a,h),Bj(a,h),a instanceof D)){a=a.za.n;for(var b=a.length,c=0;b>c;c++)Nj(a[c])}}function Lj(a){if(bi(a)===s){if(a.ga!==q)a.ga.aa();else{var b=a.h;b!==q&&(b.xf.add(a),a instanceof T&&a.qg(),b.jc())}Bj(a,h)}}function oj(a){if(0!==(2048&a.na)===s&&(Jj(a,h),Kj(a,h),a instanceof D))for(a=a.elements;a.next();)Oj(a.value)}function Oj(a){if(Kj(a,h),a instanceof D)for(a=a.elements;a.next();)Oj(a.value)}function mj(a){var d,e,b=a.mh,c=a.ga;return c&&c.Y===Pj?Qj(a,c.Od(a.qc),c.Nd(a.column)):c&&c.Y===Ch&&(c.Ui===q&&(d=c.za,e=d.length,Mj(c,d,e)),c.Ui===a)?qc:b===Bg?c?(c.Y===zg&&c.Ui===q&&(d=c.za,e=d.length,Mj(c,d,e)),c.Ui===a?qc:(a=c.sy,a===Bg?dj:a)):dj:b}function Qj(a,b,c){var e,d=a.mh;if(d!==Bg)return d;switch(e=d=f,b.mh){case ej:e=h;break;case qc:e=h}switch(c.mh){case fj:d=h;break;case qc:d=h}return a=a.ga.sy,d=d!==f||a!==fj&&a!==qc?s:h,e=e!==f||a!==ej&&a!==qc?s:h,d===h&&e===h?qc:d===h?fj:e===h?ej:dj}function Uj(a,b){a.na=b?1024|a.na:-1025&a.na}function Jj(a,b){a.na=b?2048|a.na:-2049&a.na}function Kj(a,b){a.na=b?4096|a.na:-4097&a.na}function ai(a){return 0!==(8192&a.na)}function nj(a,b){a.na=b?8192|a.na:-8193&a.na}function bi(a){return 0!==(16384&a.na)}function Bj(a,b){a.na=b?16384|a.na:-16385&a.na}function ak(a){var b={value:q};return bk(a,b),b.value}function bk(a,b){var c=a.ga;return c===q||!bk(c,b)&&a.visible?(b.value=a,s):h}function Tj(a){var b=a.W;b instanceof T&&(a=a.h)&&!a.va.cb&&b.qg()}function D(a){P.call(this),a===f?0===arguments.length?this.Y=Fg:y.m("invalid argument to Panel constructor: undefined"):(y.rb(a,D,D,"type"),this.Y=a),this.za=new F(P),this.ne=H.Ko,this.gg=s,this.Y===Jh&&(this.gg=h),this.mf=1,this.ep=Ib,this.ec=Bg,this.Y===Pj&&Ok(this),this.rn=Cg,this.sp=new ha(10,10).freeze(),this.tp=H.Aj,this.Sk=this.rm=q,this.$w="",this.hg=this.bk=q,this.Om="category",this.yf=q,this.Uh=new B(0/0,0/0,0/0,0/0),this.Ui=q,this.Bi=s}function Ok(a){a.ti=H.Ko,a.Fg=1,a.yh=q,a.Zk=q,a.Eg=1,a.Dg=q,a.Yk=q,a.Kc=[],a.Ec=[],a.ol=Pk,a.Uk=Pk,a.$i=0,a.Ei=0}function Sk(a,b,c,d){var g,e,i,j,k,l,m,n,o,p;for(e=d.length,i=a.ua,j=c?a.Od(0):a.Nd(0),k=0;e>k;k++)g=d[k],g!==f&&g!==j&&0!==g.Bb&&(l=g.Yl,isNaN(l)&&(l=c?a.Fg:a.Eg),m=g.Xl,m===q&&(m=c?a.yh:a.Dg),0!==l&&m!==q&&(Hj(a,b,m,s),m=s,n=g.TD,n!==q&&(o=m=h,b.setLineDash!==f?(b.setLineDash(n),b.lineDashOffset=a.Lc):b.webkitLineDash!==f?(b.webkitLineDash=n,b.webkitLineDashOffset=a.Lc):b.mozDash!==f?(b.mozDash=n,b.mozDashOffset=a.Lc):o=s),b.beginPath(),p=g.position+l,c?p>i.height&&(l-=p-i.height):p>i.width&&(l-=p-i.width),g=g.position+l/2,b.lineWidth=l,p=a.padding,c?(g+=p.top,l=p.left,p=i.width-p.right,m&&!o?ij(b,l,g,p,g,n,0):(b.moveTo(l,g),b.lineTo(p,g))):(g+=p.left,l=p.top,p=i.height-p.bottom,m&&!o?ij(b,g,l,g,p,n,0):(b.moveTo(g,l),b.lineTo(g,p))),b.stroke(),m&&(b.setLineDash!==f?(b.setLineDash(y.rh),b.lineDashOffset=0):b.webkitLineDash!==f?(b.webkitLineDash=y.rh,b.webkitLineDashOffset=0):b.mozDash!==f&&(b.mozDash=q,b.mozDashOffset=0))))}function Rk(a,b,c,d,e){var i,g,j,k,l,m,n,o;for(g=d.length,j=a.ua,k=0;g>k;k++)i=d[k],i!==f&&i.background!==q&&i.Eu!==e&&0!==i.Bb&&(l=c?j.height:j.width,i.position>l||(m=Tk(i),n=i.Yl,isNaN(n)&&(n=c?a.Fg:a.Eg),o=i.Xl,o===q&&(o=c?a.yh:a.Dg),o===q&&(n=0),m-=n,n=i.position+n,m+=i.Bb,n+m>l&&(m=l-n),0>=m||(l=a.padding,Hj(a,b,i.background,h),c?b.fillRect(l.left,n+l.top,j.width-(l.left+l.right),m):b.fillRect(n+l.left,l.top,m,j.height-(l.top+l.bottom)))))}function Qk(a,b,c){if(0!==a%b)return s;b=c.length;for(var d=0;b>d;d++)if(0===a%c[d])return s;return h}function Mj(a,b,c){var d,e;for(d=0;c>d;d++)if(e=b.n[d],e.ji===h)return a.Ui=e;return b=b.n[0],a.Ui=b}function bl(a,b,c){if(c(a,b),b instanceof D)for(b=b.elements;b.next();)bl(a,b.value,c)}function vi(a,b){cl(a,a,b)}function cl(a,b,c){for(c(b),b=b.elements;b.next();){var d=b.value;d instanceof D&&cl(a,d,c)}}function dl(a,b,c){if(c(b))return b;if(b instanceof D)for(b=b.elements;b.next();){var d=dl(a,b.value,c);if(d!==q)return b.dg(),d}return q}function Ne(a,b){return b(a)?a:el(a,b)}function el(a,b){var c,d;for(c=a.elements;c.next();){if(d=c.value,b(d))return d;if(d instanceof D&&(d=el(d,b),d!==q))return d}return q}function fl(a){var b,c,d,e;for(a=a.za.n,b=a.length,c=0,d=0;b>d;d++)if(e=a[d],e instanceof D)c=Math.max(c,fl(e));else if(e instanceof V){a:{if(!e.ng)switch(e.Dm){case"None":case"Square":case"Ellipse":case"Circle":case"LineH":case"LineV":case"FramedRectangle":case"RoundedRectangle":case"Line1":case"Line2":case"Border":case"Cube1":case"Cube2":case"Junction":case"Cylinder1":case"Cylinder2":case"Cylinder3":case"Cylinder4":case"PlusLine":case"XLine":case"ThinCross":case"ThickCross":e=0;break a}e=e.Vg/2*e.rl*e.rj()}c=Math.max(c,e)}return c}function gl(a,b,c,d){var e,f,g,h;for(e=a.za.length;e--;)f=a.za.n[e],f.visible&&(g=f.ua,h=a.Ta,g.x>h.width||g.y>h.height||0>g.x+g.width||0>g.y+g.height||(f instanceof D&&gl(f,b,c,d),b!==q&&(f=b(f)),f&&(c===q||c(f))&&d.add(f)))}function Uk(a){var b=a.G;return(b===f||b===Ib)&&(b=q),b===q&&a instanceof V&&(a=a.Na,a!==q&&(b=a.G)),b===q&&(b=Mb),b}function Vk(a){var b=a.H;return(b===f||b===Ib)&&(b=q),b===q&&a instanceof V&&(a=a.Na,a!==q&&(b=a.H)),b===q&&(b=Zb),b}function ck(a){return a=a.Sk,a!==q&&a.$a}function Je(a){var c,d,e,g,i,b=a.Sk;if(b===q)a.data!==q&&y.m("Template cannot have .data be non-null: "+a),a.Sk=b=new F(be);else if(b.$a)return;for(c=new F(P),bl(a,a,function(a,d){var g,i,j,k,l,e=d.rc;if(e!==q)for(Uj(d,s),g=e.k;g.next();)e=g.value,e.mode===me&&Uj(d,h),i=e.ps,i!==q&&(j=a,""!==i&&(j=a.xe(i)),j!==q&&(c.add(j),j.Pq===f&&(j.Pq=new F(be)),j.Pq.add(e))),b.add(e);if(d instanceof D&&d.type===Pj){if(0<d.Kc.length)for(g=d.Kc,i=g.length,j=0;i>j;j++)if(k=g[j],k!==f&&k.rc!==q)for(l=k.rc.k;l.next();)e=l.value,e.Cf=k,e.Jx=2,e.du=k.index,b.add(e);if(0<d.Ec.length)for(g=d.Ec,i=g.length,j=0;i>j;j++)if(k=g[j],k!==f&&k.rc!==q)for(l=k.rc.k;l.next();)e=l.value,e.Cf=k,e.Jx=1,e.du=k.index,b.add(e)}}),d=c.k;d.next();){if(e=d.value,e.Pq!==f)for(Uj(e,h),g=e.Pq.k;g.next();)i=g.value,e.rc===q&&(e.rc=new F(be)),e.rc.add(i);delete e.Pq}for(d=b.k;d.next();)e=d.value,g=e.Cf,g!==q&&(e.Cf=q,g===a?e.Zl="":(g instanceof hk&&(g=g.ga),e.Zl=""!==g.name?g.name:g.name="_"+y.ac(g)));b.freeze(),a instanceof R&&a.Pd()&&(ch(a,1/0,1/0),a.tc())}function Ji(a,b,c){if(b!==f&&b!==q){var d=a.getCategoryForItemData(b),e=a.findTemplateForItemData(b,d);e instanceof D&&(Je(e),e=e.copy(),"object"==typeof b&&(a.yf===q&&(a.yf=new ma(Object,D)),a.yf.add(b,e)),"number"==typeof c?((a.type===zg||a.type===Ch)&&c++,a.wd(c,e),kl(e,c),Ki(a,c)):(a.add(e),kl(e,a.za.count-1)),e.$w=d,e.data=b)}}function Ki(a,b){var c,d,e;for(c=a.za,d=b+1;d<c.length;)e=c.sa(d),e instanceof D&&kl(e,d),d++}function kl(a,b){a.type===Fj?a.qc=b:a.type===Gj&&(a.column=b)}function hk(){y.lc(this),this.Nh=q,this.dl=h,this.Vd=0,this.nf=0/0,this.jl=0,this.il=1/0,this.Ud=Ib,this.nb=this.ub=0,this.rc=q,this.Mq=ll,this.Ug=Bg,this.Jq=this.Si=q,this.Kq=0/0,this.Uc=this.Qg=q,this.ap=s}function Xk(a,b){a.ub=isNaN(a.nf)?Math.max(Math.min(a.il,b),a.jl):Math.max(Math.min(a.il,a.nf),a.jl)}function al(a){var d,b=a.Nh,c=a.Xl;return c===q&&(c=a.eh?b.yh:b.Dg),d=a.Yl,isNaN(d)&&(d=a.eh?b.Fg:b.Eg),d=c!==q?d:0,0===a.index&&(d=0),c=a.qz,c===q&&(c=b.ti),d+(a.eh?c.top:c.left)}function Tk(a){var d,b=a.Nh,c=a.Xl;return c===q&&(c=a.eh?b.yh:b.Dg),d=a.Yl,isNaN(d)&&(d=a.eh?b.Fg:b.Eg),d=c!==q?d:0,0===a.index&&(d=0),c=a.qz,c===q&&(c=b.ti),d+(a.eh?c.top+c.bottom:c.left+c.right)}function Yk(a){if(a.ns===ll){var b=a.Nh;return a.eh?b.MD:b.NB}return a.ns}function V(){P.call(this),this.Na=q,this.Dm="None",this.ng=s,this.qp=Bg,this.Qj=q,this.nc=this.Je="black",this.Vg=1,this.mn="butt",this.nn="miter",this.rl=10,this.ql=q,this.Lc=0,this.Rh=this.Qh=Ib,this.lq=this.kq=0,this.wp=s,this.Bp=h,this.nq=q,this.Fm=this.on="None",this.up=1}function ml(a,b,c,d){var i,j,k,l,m,n,o,p,q,r,t,u,v,e=.001,f=d.Ba,g=f.width;if(f=f.height,l=c.length,!(2>l)){for(i=c[0][0],j=c[0][1],q=0,r=y.tb(),t=1;l>t;t++)m=c[t],e=m[0],k=m[1],m=e-i,i=k-j,0===m&&(m=.001),n=i/m,p=Math.atan2(i,m),i=Math.sqrt(m*m+i*i),r.push([m,p,n,i]),q+=i,i=e,j=k;for(i=c[0][0],j=c[0][1],c=0,e=g,l=g/2,t=0===l?s:h,k=0,o=r[k],m=o[0],p=o[1],n=o[2],o=o[3],u=0;q>=.1;){if(0===u&&(t?(e=g,c++,e-=l,q-=l,t=s):(e=g,c++),0===e&&(e=1)),e>q)return y.ya(r),void 0;if(e>o?(u=e-o,e=o):u=0,v=Math.sqrt(e*e/(1+n*n)),0>m&&(v=-v),i+=v,j+=n*v,a.translate(i,j),a.rotate(p),a.translate(-(g/2),-(f/2)),0===u&&d.Hl(a,b),a.translate(g/2,f/2),a.rotate(-p),a.translate(-i,-j),q-=e,o-=e,0!==u){if(k++,k===r.length)return y.ya(r),void 0;o=r[k],m=o[0],p=o[1],n=o[2],o=o[3],e=u}}y.ya(r)}}function nl(a,b,c,d){var g,i,j,l,m,n,o,p,q,r,t,e=.001,f=c.length,k=b.length;if(!(2>k))if(g=b[0][0],i=b[0][1],2===k)ij(a,g,i,b[1][0],b[1][1],c,d);else{for(a.moveTo(g,i),o=0,p=y.tb(),q=1;k>q;q++)l=b[q],e=l[0],j=l[1],l=e-g,g=j-i,0===l&&(l=.001),m=g/l,g=Math.sqrt(l*l+g*g),p.push([l,m,g]),o+=g,g=e,i=j;for(g=b[0][0],i=b[0][1],b=0,k=h,e=c[b%f],q=0!==d,j=0,n=p[j],l=n[0],m=n[1],n=n[2],r=0;o>=.1;)if(0===r&&(e=c[b%f],b++,q&&(d%=e,e-=d,q=s)),e>o&&(e=o),e>n?(r=e-n,e=n):r=0,t=Math.sqrt(e*e/(1+m*m)),0>l&&(t=-t),g+=t,i+=m*t,k?a.lineTo(g,i):a.moveTo(g,i),o-=e,n-=e,0!==r){if(j++,j===p.length)return y.ya(p),void 0;n=p[j],l=n[0],m=n[1],n=n[2],e=r}else k=!k;y.ya(p)}}function $k(a,b,c){var d,e;ai(a)!==s&&(a.wc.Pa(),d=a.Vg,0===d&&(e=a.W,e instanceof Ge&&e.type===ig&&e.zc instanceof V&&(d=e.zc.jb)),d*=a.Qb,jj(a,-(d/2),-(d/2),b+d,c+d),b=a.wc,c=a.he,d=a.Ce,b.width=Math.min(c.width,b.width),b.height=Math.min(c.height,b.height),b.width=Math.max(d.width,b.width),b.height=Math.max(d.height,b.height),a.wc.freeze(),a.wc.V()||y.m("Non-real measuredBounds has been set. Object "+a+", measuredBounds: "+a.wc.toString()),nj(a,s))}function Wk(a){var b=a.Su;return a.ng?b===Bg?qc:b:b===Bg?H.dz[a.wb].ec:b}function pl(a,b,c,d,e){return a=c.x-a,b=c.y-b,b=a*a+b*b,d>b?(e.x=c.x,e.y=c.y,b):d}function ol(a,b,c,d,e,f,g,i,j){var k=s,l=(e-g)*(b-d)-(f-i)*(a-c);return 0===l?s:(j.x=((e*i-f*g)*(a-c)-(e-g)*(a*d-b*c))/l,j.y=((e*i-f*g)*(b-d)-(f-i)*(a*d-b*c))/l,(b>d?b-d:d-b)>(a>c?a-c:c-a)?(e=d>b?b:d,a=d>b?d:b,(j.y>e||H.Ha(j.y,e))&&(j.y<a||H.Ha(j.y,a))&&(k=h)):(e=c>a?a:c,a=c>a?c:a,(j.x>e||H.Ha(j.x,e))&&(j.x<a||H.Ha(j.x,a))&&(k=h)),k)}function ql(a,b,c,d){var e,f,g;return a.Un(b,c,d)?(a=b.x,b=b.y,e=c.x,f=c.y,c=d.x,d=d.y,a===e?(f>b?(g=b,a=f):(g=f,a=b),d>=g&&a>=d):(e>a?(g=a,a=e):g=e,c>=g&&a>=c)):s}function rl(a,b){var c=a.h;if(c===q||!c.va.cb){switch(a.is=sl,c=bc,b){case"halfarrowtop":c=Zb;break;case"halftriangletop":c=Zb;break;case"openrighttriangletop":c=Zb;break;case"opentriangletop":c=Zb}"None"!==a.on?(a.af=-1,a.bj=c):"None"!==a.Fm&&(a.af=0,a.bj=new J(1-c.x,c.y))}}function oa(){P.call(this),this.Ld="",this.nc="black",this.Bh="13px sans-serif",this.td="start",this.yp=h,this.el=this.fl=s,this.sl=tl,this.tt=this.Kp=0,this.Em=this.ex=this.gx=q,this.Lp={},this.jp=s,this.Ie=this.Vi=this.Tq=q}function wl(a,b,c,d){var g,e,h,i,j,k,l;if(b=b.replace(/^\s+|\s+$/g,""),c.ki===f&&(c.ki=0),c.fj===f&&(c.fj=[]),c.Cn===f&&(c.Cn=[]),e=0,h=a.Bh,a.sl===ul)return c.ph=1,c.ki=zl(b,h),c.fj.push(c.ki),c.Cn.push(b),new ha(c.ki,dh(a));for(a=dh(a),i=b,j=0,0===i.length&&(j=1,c.fj.push(0),c.Cn.push(i));0<i.length;){for(k=Al(i),i=i.substr(k.length);zl(k,h)>d;){for(l=1,b=zl(k.substr(0,l),h),g=0;d>=b;)l++,g=b,b=zl(k.substr(0,l),h);1===l?(c.fj[j]=b,e=Math.max(e,b)):(c.fj[j]=g,e=Math.max(e,g)),l--,1>l&&(l=1),c.Cn[j]=k.substr(0,l),j++,k=k.substr(l)}for(g=Al(i),b=zl(k+g,h);0<g.length&&d>=b;)k+=g,i=i.substr(g.length),g=Al(i),b=zl((k+g).replace(/^\s+|\s+$/g,""),h);k=k.replace(/^\s+|\s+$/g,""),""!==k&&(0===g.length?(c.fj.push(b),e=Math.max(e,b)):(g=zl(k,h),c.fj.push(g),e=Math.max(e,g)),c.Cn.push(k),j++)}return c.ph=j,c.ki=Math.max(c.ki,e),new ha(c.ki,a*c.ph)}function Al(a){for(var b=a.length,c=0;b>c&&" "!==a.charAt(c);)c++;for(;b>c&&" "===a.charAt(c);)c++;return c>=b?a:a.substr(0,c)}function zl(a,b){return y.yv!==b&&(y.xv.font=b,y.yv=b),y.xv.measureText(a).width}function dh(a){var b,c;return a.Em!==q?a.Em:(b=a.Bh,y.yv!==b&&(y.xv.font=b,y.yv=b),c=0,y.zy[b]!==f&&5e3>y.mC?c=y.zy[b]:(c=1.3*y.xv.measureText("M").width,y.zy[b]=c,y.mC++),a.Em=c)}function yl(a,b,c){c.ph===f&&(c.ph=0);var d=a.indexOf("\r",b);return-1===d&&(d=a.indexOf("\n",b)),d>=0&&(c.ph="\r"===a[d]&&d+1<a.length&&"\n"===a[d+1]?d+2:d+1),d}function xl(a,b,c){var f,g,i,j,k,l,d=a.Ld,e=dh(a);if(0===d.length)return c.ki=0,a.Kp=1,e;for(a.av||(f=yl(d,0,{}),f>=0&&(d=d.substr(0,f))),g=f=0,i=0,j=-1,k={ph:0},l=s;!l;)j=yl(d,i,k),-1===j&&(j=d.length,l=h),j>=i&&(i=d.substr(i,j-i),a.sl!==ul?(c.ph=0,i=wl(a,i,c,b),f+=i.height,g+=c.ph):(wl(a,i,c,1/0),f+=e,g++)),i=k.ph;return a.Kp=g,a.tt=f}function gk(){P.call(this),this.Gg=q,this.Oq="",this.Ti=new B(0/0,0/0,0/0,0/0).freeze(),this.Hm=qc,this.Rq=this.Ie=q,this.lt=this.Wm=s}function la(){this.s=new nc,this.Fb=q}function M(a,b,c,d,e,g){a.s===q&&y.m("StreamGeometryContext has been closed"),e!==f&&e===h?(a.Fb===q&&y.m("Need to call beginFigure first"),d=new hd(Wc),d.D=b,d.F=c,a.Fb.Ca.add(d)):(a.Fb=new pc,a.Fb.ha=b,a.Fb.ia=c,a.Fb.Yn=d,a.s.fb.add(a.Fb)),g!==f&&(a.Fb.Mm=g)}function Rc(a){a.s===q&&y.m("StreamGeometryContext has been closed"),a.Fb===q&&y.m("Need to call beginFigure first");var b=a.Fb.Ca.length;b>0&&a.Fb.Ca.n[b-1].close()}function Sc(a){a.s===q&&y.m("StreamGeometryContext has been closed"),a.Fb===q&&y.m("Need to call beginFigure first"),0<a.Fb.Ca.length&&(a.Fb.Yn=h)}function Tc(a){a.s===q&&y.m("StreamGeometryContext has been closed"),a.Fb===q&&y.m("Need to call beginFigure first"),a.Fb.Ck=s}function N(a,b,c,d,e,f,g,h){a.s===q&&y.m("StreamGeometryContext has been closed"),a.Fb===q&&y.m("Need to call beginFigure first");var i=new hd(Xc);i.ib=b,i.Ab=c,i.Rd=d,i.Sd=e,i.D=f,i.F=g,h&&i.close(),a.Fb.Ca.add(i)}function Pc(a,b,c,d,e){a.s===q&&y.m("StreamGeometryContext has been closed"),a.Fb===q&&y.m("Need to call beginFigure first");var f=new hd(cd);f.ib=b,f.Ab=c,f.D=d,f.F=e,a.Fb.Ca.add(f)}function Qc(a,b,c,d,e,f,g,h){a.s===q&&y.m("StreamGeometryContext has been closed"),a.Fb===q&&y.m("Need to call beginFigure first"),b=new hd(ed,g,h,b,c,d,e,f),a.Fb.Ca.add(b)}function R(a){0===arguments.length?D.call(this):D.call(this,a),this.Z=49663,this.Sm=this.Bg="",this.xq=this.uq=this.Gq=this.Ip=q,this.Iq="",this.sh=this.Hq=this.pl=q,this.wq="",this.dn=q,this.vq=new ha(0/0,0/0).freeze(),this.yq="",this.en=q,this.Ld="",this.Rm=this.Zo=this.Rj=q,this.Fh=new A(0/0,0/0).freeze(),this.Sp="",this.ek=q,this.Tp=Mb,this.bq=H.JE,this.Vp=H.IE,this.gp=q,this.Jp=Cl,this.jn=new A(6,6).freeze(),this.hn="gray",this.gn=4,this.XE=-1,this.UE=new B,this.gk=q,this.Ji=0/0}function Dl(a){var b=a.h;b!==q&&(Kh(b),0!==(16384&a.Z)!==h&&(a.Z|=16384,a.ta(),b.xf.add(a),b.jc()))}function hh(a){0!==(16384&a.Z)!==s&&(a.updateAdornments(),a.Z&=-16385,a=a.h,a!==q&&(a.me=h))}function Vj(a){if(ci(a)===s){var b=a.h;b!==q&&(b.xf.add(a),a instanceof T&&!b.va.cb&&a.qg(),b.jc()),El(a,h)}}function Wj(a){var b,c,d;ci(a)!==s&&(b=a.position,c=a.location,c.V()&&b.V()||(Fl(a,b,c),oj(a)),b=a.nb,c=a.Ob,d=c.copy(),c.Pa(),c.x=b.x,c.y=b.y,c.freeze(),rj(a,d,c),El(a,s))}function Gl(a,b){var d,c=a.da;if(c!==q)if(d=c.hd,d!==q)b[y.ac(c)]||(b[y.ac(c)]=h,Gl(d,b));else if(Hl(c)===q)return s;if(c=a.ja,c!==q)if(d=c.hd,d!==q)b[y.ac(c)]||(b[y.ac(c)]=h,Gl(d,b));else if(Hl(c)===q)return s;return h}function Il(a,b,c,d){d===f&&(d=new A),Cb(c)&&(c=Sb);var e=b.Ta;if(d.q(e.width*c.x+c.offsetX,e.height*c.y+c.offsetY),b===q||b===a)return d;for(b.transform.Qa(d),b=b.ga;b!==q&&b!==a;)b.transform.Qa(d),b=b.ga;return a.dk.Qa(d),d.offset(-a.wc.x,-a.wc.y),d}function kh(a,b,c){var d,e,g,h;return c=c===f?a.UE:c,isNaN(a.Ji)&&(a.Ji=fl(a)),d=a.Ji,e=2*d,a.Ck?(d=b.x,e=b.y,g=b.width,b=b.height,h=a.shadowBlur,a=a.WD,g+=h,b+=h,d-=h/2,e-=h/2,0<a.x?g+=a.x:(d+=a.x,g-=a.x),0<a.y?b+=a.y:(e+=a.y,b-=a.y),c.q(d-1,e-1,g+2,b+2),c):(c.q(b.x-1-d,b.y-1-d,b.width+2+e,b.height+2+e),c)}function Fl(a,b,c){var g,d=0/0,e=0/0,f=y.M();if(e=a.We,d=a.Vb,Cb(e)&&y.m("Spot must be real: "+e.toString()),g=d.Ta,f.ms(0,0,g.width,g.height,e),d!==a)for(d.transform.Qa(f),d.jb&&(e=d.Vg/2,f.offset(-e,-e)),d=d.ga;d!==q&&d!==a;)d.transform.Qa(f),d=d.ga;a.dk.Qa(f),f.offset(-a.wc.x,-a.wc.y),c.V()?(d=c.x-f.x,e=c.y-f.y,b.q(d,e)):b.V()&&(d=b.x,e=b.y,c.q(d+f.x,e+f.y)),y.B(f)}function xi(a,b,c){Ej(a,s),a instanceof T&&Vi(c,a),!a.layer.bc&&!b&&c.oc(),b=a.Ob;var d=c.eb;d.V()?(gh(a)?cb(b,d)||(a.uf(s),Dl(a)):b.qf(d)&&a.uf(h),a.updateAdornments()):c.$j=h}function ih(a,b){var c,d,e,f;a.visible&&(c=a.Ob,0===c.width||0===c.height||isNaN(c.x)||isNaN(c.y)||(d=a.transform,e=a.ga,f=a.km,f.reset(),e!==q&&(e.mi()?f.multiply(e.oe):e.ga!==q&&f.multiply(e.ga.oe)),f.multiply(a.Xc),a.Ge!==q&&(Hj(a,b,a.Ge,h,h),b.fillRect(c.x,c.y,c.width,c.height)),a.Ge===q&&a.Uc===q&&(b.fillStyle="rgba(0,0,0,0.4)",b.fillRect(c.x,c.y,c.width,c.height)),a.Uc!==q&&(d.Ir()||b.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy),e=a.Ta,c=e.width,e=e.height,Hj(a,b,a.Uc,h),b.fillRect(0,0,c+0,e+0),d.Ir()||(c=1/(d.m11*d.m22-d.m12*d.m21),b.transform(d.m22*c,-d.m12*c,-d.m21*c,d.m11*c,c*(d.m21*d.dy-d.m22*d.dx),c*(d.m12*d.dx-d.m11*d.dy))))))}function Jl(a,b,c,d){var e,f,g,i,j;b.constructor!==a.constructor&&!y.xE&&(y.xE=h,y.trace('Should not change the class of the Part when changing category from "'+c+'" to "'+d+'"'),y.trace("  Old class: "+y.bh(a)+", new class: "+y.bh(b)+", part: "+a.toString())),a.be(),e=a.data,c=a.ge,f=a.Wa,g=h,i=h,j=s,a instanceof T&&(g=a.fh,i=a.Cc,j=a.dm),b.ah(a),b.cloneProtected(a),a.Bg=d,a.aa(),a.ta(),b=a.h,d=h,b!==q&&(d=b.Wb,b.Wb=h),a.rm=e,e!==q&&a.yb(),b!==q&&(b.Wb=d),e=a.ge,e!==c&&(a.Sm=c,a.ge=e),a instanceof T&&(a.fh=g,a.Cc=i,a.dm=j),a.Wa=f}function ci(a){return 0!==(32768&a.Z)}function El(a,b){a.Z=b?32768|a.Z:-32769&a.Z}function Ej(a,b){a.Z=b?65536|a.Z:-65537&a.Z}function gh(a){return 0!==(131072&a.Z)}function Cj(a){a=a.bb,a!==q&&(a.aa(),a.mb!==q&&a.mb.aa(),a.qg())}function Ml(a,b){var c=b.bb;return c!==q?Ml(a,c):b instanceof T&&(c=b.hd,c!==q)?Ml(a,c):b}function Nl(a,b,c){if(b===c||c===q)return s;var d=b.bb;return d===q||d!==c&&!Nl(a,d,c)?b instanceof T&&(b=b.hd,b!==q)?Nl(a,b,c):s:h}function Ol(a,b,c){var d,e;return b===q||c===q?q:(d=b.bb,d===q?q:b===c?d:(e=c.bb,e===q?q:d===e?e:Nl(a,c,d)?d:Nl(a,b,e)?e:Ol(a,d,e)))}function Ge(a){0===arguments.length?R.call(this,Fg):R.call(this,a),this.ge="Adornment",this.La=q,this.Z&=-257,this.Fh=new A(0/0,0/0),this.th=new F(B),this.mb=q,this.Xw=s}function T(a){0===arguments.length?R.call(this,Fg):R.call(this,a),this.Pb=new F(U),this.Pm=this.Op=this.Np=q,this.Dp=h,this.br=s,this.Xq=q,this.Uo=this.Ep=h,this.Vo=H.ME,this.dd=this.Ag=q,this.Xg=s}function Rl(a,b){b!==q&&(a.Ag===q&&(a.Ag=new na(Sl)),a.Ag.add(b))}function Hl(a){for(;a!==q&&!a.xb();)a=a.bb;return a}function Tl(a,b,c){var d,e,f;a.Pb.contains(b)||(a.Pb.add(b),d=a.UC,d!==q&&(e=h,f=a.h,f!==q&&(e=f.Ra,f.Ra=h),d(a,b,c),f!==q&&(f.Ra=e)),b.hc&&(c=b.da,b=b.ja,c!==q&&b!==q&&c!==b&&(d=h,f=a.h,f!==q&&(d=f.Pc),a=d?b:c,e=d?c:b,a.Xg||(a.Xg=e),e.fh&&!(f!==q&&f.va.cb)&&(d?c===e&&(e.fh=s):b===e&&(e.fh=s)))))}function Ul(a,b,c){var d,e,f;a.Pb.remove(b)&&(d=a.VC,e=a.h,d!==q&&(f=h,e!==q&&(f=e.Ra,e.Ra=h),d(a,b,c),e!==q&&(e.Ra=f)),b.hc&&(c=h,e!==q&&(c=e.Pc),a=c?b.ja:b.da,b=c?b.da:b.ja,a!==q&&(a.Xg=s),b!==q&&!b.fh&&(0===b.Pb.count?(b.Xg=q,e!==q&&e.va.cb||(b.fh=h)):Ri(b))))}function Ri(a){var b,c,d;if(a.Xg=s,0!==a.Pb.count&&(b=h,c=a.h,c===q||!c.va.cb)){for(c!==q&&(b=c.Pc),c=a.Pb.k;c.next();)if(d=c.value,d.hc)if(b){if(d.da===a)return a.fh=s,void 0}else if(d.ja===a)return a.fh=s,void 0;a.fh=h}}function Yj(a){a.dd!==q&&a.dd.clear(),bl(a,a,function(a,b){Zj(a,b)})}function Zj(a,b){var c=b.Td;c!==q&&(a.dd===q&&(a.dd=new ma("string",P)),a.dd.add(c,b))}function Xj(a,b,c){var d=b.Td;if(d!==q&&(a.dd!==q&&a.dd.remove(d),b=a.h,b!==q&&c)){for(c=q,a=a.pG(d);a.next();)c===q&&(c=y.tb()),c.push(a.value);if(c!==q){for(a=0;a<c.length;a++)b.remove(c[a]);y.ya(c)}}}function Wl(a,b,c,d,e){if(d>1)for(e=c?a.Nu():a.If();e.next();){var f=e.value;f.hc&&(f=f.Cy(a),f!==q&&f!==a&&!b.contains(f)&&(b.add(f),Wl(f,b,c,d-1,f.Cc)))}else Xl(a,b,c,e)}function Xl(a,b,c,d){var e,f;for(a.Cc=s,e=c?a.Nu():a.If();e.next();)f=e.value,d&&f.be(),f.hc&&(f=f.Cy(a),f!==q&&f!==a&&!b.contains(f)&&(b.add(f),d&&(f.ta(),f.be(),Cj(f),f.J(Sj)),f.Cc&&(f.dm=f.Cc,Xl(f,b,c,f.dm))))}function Yl(a,b,c,d,e){var f,g;for(a.Cc=h,f=c?a.Nu():a.If();f.next();)g=f.value,g.hc&&(e||g.updateAdornments(),g=g.Cy(a),g!==q&&g!==a&&!b.contains(g)&&(b.add(g),e||(g.ta(),g.updateAdornments(),Cj(g),g.J(Rj)),d>2||g.dm))&&(g.dm=s,Yl(g,b,c,d-1,g.Cc))}function U(){R.call(this,ig),this.wf=q,this.Hg="",this.Df=this.pp=q,this.Wg="",this.Wq=q,this.tq=this.sq=this.rq=s,this.Fp=h,this.Po=cj,this.$o=0,this.cp=cj,this.dp=0/0,this.fn=ok,this.Nq=.5,this.Oh=this.Ke=q,this.sc=new F(A).freeze(),this.Wd=q,this.Yg=s,this.vx=q,this.Hx=s,this.Tk=this.Ah=this.Na=q,this.ke=0,this.th=new F(B),this.Mx=new A,this.lB=this.jB=q,this.sw=s,this.P=q}function Mi(a){var b=a.da,c=a.ja;b!==q&&c!==q?hm(a,b.oG(c)):hm(a,q)}function hm(a,b){var d,e,f,c=a.Rj;c!==b&&(c!==q&&Kl(c,a),a.Rj=b,b!==q&&Ll(b,a),d=a.py,d!==q&&(e=h,f=a.h,f!==q&&(e=f.Ra,f.Ra=h),d(a,c,b),f!==q&&(f.Ra=e)),a.Yg&&(a.jB===c||a.lB===c)&&a.Ub())}function Vl(a,b){a.Ke===q&&(a.Ke=new na(T)),a.Ke.add(b),a.aa()}function jm(a){0===a.sc.count?a.Yg=s:(a.Yg=h,km(a,s))}function nm(a,b){return Math.abs(b.x-a.x)>Math.abs(b.y-a.y)?(b.x=b.x>=a.x?a.x+9e9:a.x-9e9,b.y=a.y):(b.y=b.y>=a.y?a.y+9e9:a.y-9e9,b.x=a.x),b}function om(a,b){var c=a.Kd;return c===q&&(c=new pm,c.port=a,c.vc=a.W,a.Kd=c),qm(c,b)}function lm(a,b){var c=a.gb;return Db(c)&&(b===f&&(b=a.Nc),b!==q&&(c=b.gb)),c===Ib?Hb:c}function mm(a,b){var c=a.kb;return Db(c)&&(b===f&&(b=a.Ad),b!==q&&(c=b.kb)),c===Ib?Hb:c}function rm(a){var b=a.Ru;return isNaN(b)&&(a=a.Nc,a!==q&&(b=a.Ru)),isNaN(b)?0:b}function sm(a){var b=a.Ev;return isNaN(b)&&(a=a.Ad,a!==q&&(b=a.Ev)),isNaN(b)?0:b}function zm(a,b,c,d,e,f){var g=b.yl,h=b.xl,i=xm(b,c,d),j=c,k=d;for(0===e?j+=g:90===e?k+=h:180===e?j-=g:k-=h;i>Am&&xm(b,j,k)===i-Bm;)c=j,d=k,0===e?j+=g:90===e?k+=h:180===e?j-=g:k-=h,i-=Bm;f?i>Am&&(180===e||0===e?c=Math.floor(c/g)*g+g/2:(90===e||270===e)&&(d=Math.floor(d/h)*h+h/2)):(c=Math.floor(c/g)*g+g/2,d=Math.floor(d/h)*h+h/2),i>Am&&(f=e,j=c,k=d,0===e?(f=90,k+=h):90===e?(f=180,j-=g):180===e?(f=270,k-=h):270===e&&(f=0,j+=g),xm(b,j,k)===i-Bm?zm(a,b,j,k,f,s):(j=c,k=d,0===e?(f=270,k-=h):90===e?(f=0,j+=g):180===e?(f=90,k+=h):270===e&&(f=180,j-=g),xm(b,j,k)===i-Bm&&zm(a,b,j,k,f,s))),a.pk(c,d)
}function Em(a,b,c,d){return a=c-a,isNaN(a)||1/0===a||-1/0===a?0/0:(0>a&&(a=-a),b=d-b,isNaN(b)||1/0===b||-1/0===b?0/0:(0>b&&(b=-b),H.Ha(a,0)?b:H.Ha(b,0)?a:Math.sqrt(a*a+b*b)))}function Cm(a,b,c,d){var f,e=a.qa;2>e||(c?(f=a.o(1),c=f.x-d.x,d=f.y-d.y,f=Em(b.x,b.y,c,d),0!==f&&(e=2===e?.5*f:f,a=rm(a),a>e&&(a=e),c=a*(c-b.x)/f,a=a*(d-b.y)/f,b.x+=c,b.y+=a)):(f=a.o(e-2),c=f.x-d.x,d=f.y-d.y,f=Em(b.x,b.y,c,d),0!==f&&(e=2===e?.5*f:f,a=sm(a),a>e&&(a=e),c=a*(b.x-c)/f,a=a*(b.y-d)/f,b.x-=c,b.y-=a)))}function Dm(a,b,c,d){var e,f,g;for(e=a.qa,f=b;H.Ha(b.x,f.x)&&H.Ha(b.y,f.y);){if(c>=e)return e-1;f=a.o(c++)}if(!H.Ha(b.x,f.x)&&!H.Ha(b.y,f.y))return c-1;for(g=f;H.Ha(b.x,f.x)&&H.Ha(f.x,g.x)&&(!d||(b.y>=f.y?f.y>=g.y:f.y<=g.y))||H.Ha(b.y,f.y)&&H.Ha(f.y,g.y)&&(!d||(b.x>=f.x?f.x>=g.x:f.x<=g.x));){if(c>=e)return e-1;g=a.o(c++)}return c-2}function Fm(a,b,c,d,e,f){var g,h,i,j,k,l,m;if(im(a)&&(g=new F("number"),h=Gm(a,e,f,g),i=e.x,i=e.y,h>0))if(H.I(e.y,f.y))if(e.x<f.x)for(j=0;h>j;){for(k=Math.max(e.x,Math.min(g.n[j++]-5,f.x-10)),b.lineTo(k+c,f.y+d),i=k+c,l=Math.min(k+10,f.x);h>j&&(m=g.n[j],l+10>m);)j++,l=Math.min(m+5,f.x);m=(k+l)/2+c,m=f.y-10+d,k=l+c,l=f.y+d,a.Se===jk?M(b,k,l,s,s):N(b,i,m,k,m,k,l)}else for(j=h-1;j>=0;){for(k=Math.min(e.x,Math.max(g.n[j--]+5,f.x+10)),b.lineTo(k+c,f.y+d),i=k+c,l=Math.max(k-10,f.x);j>=0&&(m=g.n[j],m>l-10);)j--,l=Math.max(m-5,f.x);m=f.y-10+d,k=l+c,l=f.y+d,a.Se===jk?M(b,k,l,s,s):N(b,i,m,k,m,k,l)}else if(H.I(e.x,f.x))if(e.y<f.y)for(j=0;h>j;){for(k=Math.max(e.y,Math.min(g.n[j++]-5,f.y-10)),b.lineTo(f.x+c,k+d),i=k+d,l=Math.min(k+10,f.y);h>j&&(m=g.n[j],l+10>m);)j++,l=Math.min(m+5,f.y);m=f.x-10+c,k=f.x+c,l+=d,a.Se===jk?M(b,k,l,s,s):N(b,m,i,m,l,k,l)}else for(j=h-1;j>=0;){for(k=Math.min(e.y,Math.max(g.n[j--]+5,f.y+10)),b.lineTo(f.x+c,k+d),i=k+d,l=Math.max(k-10,f.y);j>=0&&(m=g.n[j],m>l-10);)j--,l=Math.max(m-5,f.y);m=f.x-10+c,k=f.x+c,l+=d,a.Se===jk?M(b,k,l,s,s):N(b,m,i,m,l,k,l)}b.lineTo(f.x+c,f.y+d)}function Gm(a,b,c,d){var f,g,h,i,j,e=a.h;if(e===q)return 0;for(Math.min(b.x,c.x),Math.min(b.y,c.y),Math.max(b.x,c.x),Math.max(b.y,c.y),e=e.dv;e.next();)if(f=e.value,f!==q&&f.visible)for(f=f.lb.n,g=f.length,h=0;g>h;h++){if(i=f[h],i===a)return 0<d.length&&d.sort(function(a,b){return a-b}),d.length;i instanceof U&&a.xb()&&i.xb()&&im(i)&&(j=i.Ai(),j.V()&&a.Ai().qf(j)&&!a.usesSamePort(i)&&(j=i.path,j!==q&&j.Dk()&&Hm(b,c,d,i)))}return 0<d.length&&d.sort(function(a,b){return a-b}),d.length}function Hm(a,b,c,d){var e,f,k,g,i,j,l,m;for(e=d.qa,f=1;e>f;f++){g=d.o(f-1),i=d.o(f),j=y.M();a:{if(k=a,l=b,m=j,H.I(k.x,l.x)){if(H.I(g.y,i.y)&&Math.min(k.y,l.y)<=g.y&&Math.max(k.y,l.y)>=g.y&&Math.min(g.x,i.x)<=k.x&&Math.max(g.x,i.x)>=k.x&&!H.I(g.x,i.x)){m.x=k.x,m.y=g.y,k=h;break a}}else if(H.I(g.x,i.x)&&Math.min(k.x,l.x)<=g.x&&Math.max(k.x,l.x)>=g.x&&Math.min(g.y,i.y)<=k.y&&Math.max(g.y,i.y)>=k.y&&!H.I(g.y,i.y)){m.x=g.x,m.y=k.y,k=h;break a}m.x=0,m.y=0,k=s}k&&(H.I(a.y,b.y)?c.add(j.x):c.add(j.y)),y.B(j)}}function im(a){return a=a.Se,a===kk||a===jk}function km(a,b){if(b||im(a)){var c=a.h;c!==q&&!c.Am.contains(a)&&a.vx!==q&&c.Am.add(a,a.vx)}}function jg(a,b){var d,e,f,g,i,j,k,c=a.layer;if(c!==q&&c.visible&&!c.bc&&(d=c.h,d!==q))for(e=s,d=d.dv;d.next();)if(f=d.value,f.visible)if(f===c)for(e=h,g=s,f=f.lb.n,i=f.length,j=0;i>j;j++)k=f[j],k instanceof U&&(k===a?g=h:g&&Im(a,k,b));else if(e)for(f=f.lb.n,i=f.length,j=0;i>j;j++)k=f[j],k instanceof U&&Im(a,k,b)}function Im(a,b,c){if(b!==q&&im(b)&&b.Na!==q){var d=b.Ai();d.V()&&(a.Ai().qf(d)||c.qf(d))&&(a.usesSamePort(b)||b.Lf())}}function gm(a){var c,d,e,f,g,h,i,j,k,b=a.wf;if(b!==q&&(c=a.Df,c!==q)){d=a.Hg,a=a.Wg;a:{if(c!==q&&b.Ag!==q)for(e=b.Ag.k;e.next();)if(f=e.value,f.po===b&&f.Wr===c&&f.kv===d&&f.lv===a||f.po===c&&f.Wr===b&&f.kv===a&&f.lv===d){e=f;break a}e=q}for(g=f=q,h=b.Pb.n,i=h.length,j=0;i>j;j++)k=h[j],(k.wf===b&&k.Hg===d&&k.Df===c&&k.Wg===a||k.wf===c&&k.Hg===a&&k.Df===b&&k.Wg===d)&&(g===q?g=k:(f===q&&(f=new F(U),f.add(g)),f.add(k)));if(f!==q)for(e===q&&(e=new Sl,e.po=b,e.kv=d,e.Wr=c,e.lv=a,Rl(b,e),Rl(c,e)),e.links=f,j=0;j<f.count;j++)if(k=f.n[j],0===k.ke){for(b=1,c=0;c<f.count;c++)Math.abs(f.n[c].ke)===b&&(b++,c=-1);k.Tk=e,k.ke=k.da===e.po?b:-b,k.Ub()}}}function fm(a){var c,d,e,f,b=a.Tk;if(b!==q)if(c=a.ke,a.Tk=q,a.ke=0,a.Ub(),b.links.remove(a),2>b.links.count)1===b.links.count&&(c=b.links.n[0],c.Tk=q,c.ke=0,c.Ub()),c=b.po,b!==q&&c.Ag!==q&&c.Ag.remove(b),c=b.Wr,b!==q&&c.Ag!==q&&c.Ag.remove(b);else for(c=Math.abs(c),a=0===c%2,b=b.links.k;b.next();)d=b.value,e=Math.abs(d.ke),f=0===e%2,e>c&&a===f&&(d.ke=0<d.ke?d.ke-2:d.ke+2,d.Ub())}function Sl(){y.lc(this),this.links=this.lv=this.Wr=this.kv=this.po=q,this.spacing=10}function tm(){y.lc(this),this.group=q,this.Gr=h,this.abort=s,this.Af=this.zf=1,this.Xp=this.Wp=-1,this.Ed=this.Dd=8,this.Xb=q,this.EE=s,this.ZD=22,this.QC=111}function Km(a,b,c){return a.zf<=b&&b<=a.Wp&&a.Af<=c&&c<=a.Xp}function xm(a,b,c){return Km(a,b,c)?(b-=a.zf,b/=a.Dd,c-=a.Af,c/=a.Ed,a.Xb[0|b][0|c]):0}function Ui(a,b,c){Km(a,b,c)&&(b-=a.zf,b/=a.Dd,c-=a.Af,c/=a.Ed,a.Xb[0|b][0|c]=0)}function um(a){var b,c;if(a.Xb!==q)for(b=0;b<=a.pn;b++)for(c=0;c<=a.qn;c++)a.Xb[b][c]>=Am&&(a.Xb[b][c]|=ym)}function vm(a,b,c,d,e){if(b>a.Wp||b+d<a.zf||c>a.Xp||c+e<a.Af)return h;b=0|(b-a.zf)/a.Dd,c=0|(c-a.Af)/a.Ed,d=0|Math.max(0,d)/a.Dd+1;var f=0|Math.max(0,e)/a.Ed+1;if(0>b&&(d+=b,b=0),0>c&&(f+=c,c=0),0>d||0>f)return h;for(e=0|Math.min(b+d-1,a.pn),d=0|Math.min(c+f-1,a.qn);e>=b;b++)for(f=c;d>=f;f++)if(0===a.Xb[b][f])return s;return h}function Lm(a,b,c,d,e,f,g,h,i){var j,k,l;if(!(f>b||b>g||h>c||c>i)){if(j=0|b,k=0|c,l=a.Xb[j][k],l>=Am&&ym>l)for(e?k+=d:j+=d,l+=Bm;j>=f&&g>=j&&k>=h&&i>=k&&!(l>=a.Xb[j][k]);)a.Xb[j][k]=l,l+=Bm,e?k+=d:j+=d;if(j=e?k:j,e)if(d>0)for(c+=d;j>c;c+=d)Lm(a,b,c,1,!e,f,g,h,i),Lm(a,b,c,-1,!e,f,g,h,i);else for(c+=d;c>j;c+=d)Lm(a,b,c,1,!e,f,g,h,i),Lm(a,b,c,-1,!e,f,g,h,i);else if(d>0)for(b+=d;j>b;b+=d)Lm(a,b,c,1,!e,f,g,h,i),Lm(a,b,c,-1,!e,f,g,h,i);else for(b+=d;b>j;b+=d)Lm(a,b,c,1,!e,f,g,h,i),Lm(a,b,c,-1,!e,f,g,h,i)}}function Mm(a,b,c,d,e,f,g,i,j,k,l){for(var m=0|b,n=0|c,o=a.Xb[m][n];0===o&&m>i&&j>m&&n>k&&l>n;)if(g?n+=f:m+=f,o=a.Xb[m][n],1>=Math.abs(m-d)&&1>=Math.abs(n-e))return a.abort=h,0;for(m=0|b,n=0|c,o=a.Xb[m][n],b=Am,a.Xb[m][n]=b;0===o&&m>i&&j>m&&n>k&&l>n;)g?n+=f:m+=f,o=a.Xb[m][n],a.Xb[m][n]=b,b+=Bm;return g?n:m}function wm(a,b,c,d,e,f){var g,i,j,k,l,m,n,o,p,r;if(a.Xb!==q&&(a.abort=s,g=b.x,i=b.y,Km(a,g,i)&&(g-=a.zf,g/=a.Dd,i-=a.Af,i/=a.Ed,j=d.x,k=d.y,Km(a,j,k))))if(j-=a.zf,j/=a.Dd,k-=a.Af,k/=a.Ed,1>=Math.abs(g-j)&&1>=Math.abs(i-k))a.abort=h;else if(l=f.x,b=f.y,d=f.x+f.width,m=f.y+f.height,l-=a.zf,l/=a.Dd,b-=a.Af,b/=a.Ed,d-=a.zf,d/=a.Dd,m-=a.Af,m/=a.Ed,f=Math.max(0,Math.min(a.pn,0|l)),d=Math.min(a.pn,Math.max(0,0|d)),b=Math.max(0,Math.min(a.qn,0|b)),m=Math.min(a.qn,Math.max(0,0|m)),g=0|g,i=0|i,j=0|j,k=0|k,l=g,n=i,o=0===c||90===c?1:-1,(c=90===c||270===c)?n=Mm(a,g,i,j,k,o,c,f,d,b,m):l=Mm(a,g,i,j,k,o,c,f,d,b,m),!a.abort){a:{for(c=0===e||90===e?1:-1,e=90===e||270===e,o=0|j,p=0|k,r=a.Xb[o][p];0===r&&o>f&&d>o&&p>b&&m>p;)if(e?p+=c:o+=c,r=a.Xb[o][p],1>=Math.abs(o-g)&&1>=Math.abs(p-i)){a.abort=h;break a}for(o=0|j,p=0|k,r=a.Xb[o][p],a.Xb[o][p]=Jm;0===r&&o>f&&d>o&&p>b&&m>p;)e?p+=c:o+=c,r=a.Xb[o][p],a.Xb[o][p]=Jm}a.abort||(Lm(a,l,n,1,s,f,d,b,m),Lm(a,l,n,-1,s,f,d,b,m),Lm(a,l,n,1,h,f,d,b,m),Lm(a,l,n,-1,h,f,d,b,m))}}function pm(){y.lc(this),this.port=this.vc=q,this.Of=[],this.Ur=s}function Nm(a,b,c,d){switch(b=b.offsetY){case y.$c:return 90;case y.Sc:return 180;case y.ld:return 270;case y.ad:return 0}switch(b){case y.$c|y.ld:return c>180?270:90;case y.Sc|y.ad:return c>90&&270>=c?180:0}switch(a=180*Math.atan2(a.height,a.width)/Math.PI,b){case y.Sc|y.ld:return c>a&&180+a>=c?180:270;case y.ld|y.ad:return c>180-a&&360-a>=c?270:0;case y.ad|y.$c:return c>a&&180+a>=c?90:0;case y.$c|y.Sc:return c>180-a&&360-a>=c?180:90;case y.Sc|y.ld|y.ad:return c>90&&180+a>=c?180:c>180+a&&360-a>=c?270:0;case y.ld|y.ad|y.$c:return c>180&&360-a>=c?270:c>a&&180>=c?90:0;case y.ad|y.$c|y.Sc:return c>a&&180-a>=c?90:c>180-a&&270>=c?180:0;case y.$c|y.Sc|y.ld:return c>180-a&&180+a>=c?180:c>180+a?270:90}return d&&b!==(y.Sc|y.ld|y.ad|y.$c)&&(c-=15,0>c&&(c+=360)),c>a&&180-a>c?90:c>=180-a&&180+a>=c?180:c>180+a&&360-a>c?270:0}function qm(a,b){var d,e,f,g,i,j,k,l,m,n,c=a.Of;if(0===c.length){if(!a.Ur){for(c=a.Ur,a.Ur=h,d=a.vc.Qd,e=a.Of.length=0,f=a.port.hb(Mb,y.M()),g=a.port.hb(Zb,y.M()),i=y.xj(f.x,f.y,0,0),i.yj(g),y.B(f),y.B(g),f=y.dc(i.x+i.width/2,i.y+i.height/2),g=y.M(),d=d.k;d.next();)j=d.value,j.xb()&&(k=Hb,k=j.Nc===a.port?lm(j,a.port):mm(j,a.port),Bb(k)&&(l=j.Nc===a.port?j.Ad:j.Nc,l!==q&&l.W!==q&&(m=l.hb(Sb,g),l=l.Kd,l=l!==q?qm(l,j):q,l!==q&&(m=l.io),l=f.ai(m),k=Nm(i,k,l,j.Jb),0===k?(n=y.ad,l>180&&(l-=360)):n=90===k?y.$c:180===k?y.Sc:y.ld,(k=a.Of[e])?(k.link=j,k.angle=l,k.je=n):(k=new Om(j,l,n),a.Of[e]=k),k.jv.set(m),e++)));for(y.B(f),y.B(g),a.Of.sort(pm.prototype.ZG),f=a.Of.length,g=-1,e=d=0;f>e;e++)k=a.Of[e],k!==q&&(k.je!==g&&(g=k.je,d=0),k.Nl=d,d++);for(g=-1,d=0,e=f-1;e>=0;e--)k=a.Of[e],k!==q&&(k.je!==g&&(g=k.je,d=k.Nl+1),k.rr=d);for(e=a.Of,f=0;f<e.length;f++)if(g=e[f],g!==q){switch(j=g,m=a.port,g=y.M(),d=y.M(),j.je){case y.$c:m.hb(Zb,g),m.hb(Vb,d);break;case y.Sc:m.hb(Vb,g),m.hb(Mb,d);break;case y.ld:m.hb(Mb,g),m.hb(Rb,d);break;default:case y.ad:m.hb(Rb,g),m.hb(Zb,d)}m=d.y-g.y,k=(j.Nl+1)/(j.rr+1),j=j.io,j.x=g.x+(d.x-g.x)*k,j.y=g.y+m*k,y.B(g),y.B(d)}for(e=a.Of,f=0;f<e.length;f++)g=e[f],g!==q&&(g.Ku=a.computeEndSegmentLength(g));a.Ur=c,y.Bc(i)}c=a.Of}for(i=0;i<c.length;i++)if(e=c[i],e!==q&&e.link===b)return e;return q}function Om(a,b,c){this.link=a,this.angle=b,this.je=c,this.jv=new A,this.Nl=this.rr=this.Nl=0,this.io=new A,this.Ku=0}function He(a){0===arguments.length?T.call(this,Fg):T.call(this,a),this.Zp=new na(R),this.Ym=new na(He),this.fk=this.$p=this.Yp=q,this.$q=s,this.Cp=h,this.ar=s,this.mb=this.Qq=q,this.Yo=s,this.qd=new rh,this.qd.group=this}function Ll(a,b){var c,d,e;a.Zp.add(b)&&(b instanceof He&&a.Ym.add(b),c=a.aD,c!==q&&(d=h,e=a.h,e!==q&&(d=e.Ra,e.Ra=h),c(a,b),e!==q&&(e.Ra=d))),c=a.mb,c===q&&(c=a),c.aa()}function Kl(a,b){var c,d,e;a.Zp.remove(b)&&(b instanceof He&&a.Ym.remove(b),c=a.bD,c!==q&&(d=h,e=a.h,e!==q&&(d=e.Ra,e.Ra=h),c(a,b),e!==q&&(e.Ra=d))),c=a.mb,c===q&&(c=a),c.aa()}function Pm(a,b){var c,d;for(a.Ue=s,c=a.Dc;c.next();)if(d=c.value,d.aa(),d.J(Sj),d.be(),d instanceof He&&(d.Gv=d.Ue,Pm(d,b)),d instanceof T)d.qg(b);else if(d instanceof U)for(d=d.tj;d.next();)d.value.qg(b)}function Qm(a,b){var c,d;for(a.Ue=h,c=a.Dc;c.next();)if(d=c.value,d.aa(),d.J(Rj),d.updateAdornments(),d instanceof He&&d.Gv&&Qm(d,b),d instanceof T)d.qg(b);else if(d instanceof U)for(d=d.tj;d.next();)d.value.qg(b)}function Ag(){P.call(this),this.ne=H.Ko,this.Aq=new B(0/0,0/0,0/0,0/0)}function rh(){0<arguments.length&&y.m("Layout constructor cannot take any arguments."),y.lc(this),this.Pw=this.ca=q,this.xp=this.zp=h,this.Gp=this.Nm=s,this.Ro=new A(0,0).freeze(),this.Ww=h,this.kx=q,this.Ap=h}function Tm(a,b,c,d,e,f,g,h){for(c=c.k;c.next();){var i=c.value;(!d||i.$n)&&(!e||e(i))&&i.canLayout()&&(f&&i instanceof T?i.ii||(i instanceof He&&i.Nb===q?Tm(a,b,i.Dc,s,e,f,g,h):b.add(i)):g&&i instanceof U?b.add(i):h&&i.Pd()&&!(i instanceof T)&&b.add(i))}}function Um(a,b){var d,e,c=a.group;return c!==q?(d=c.location,isNaN(d.x)||isNaN(d.y)?b:(e=c.placeholder,e!==q?(d=e.hb(Mb),d.x+=e.padding.left,d.y+=e.padding.top):d=c.position.copy(),d)):b}function Rm(){y.lc(this),this.qd=q,this.clear()}function Sm(a,b){x&&b!==q&&y.l(b,rh,Rm,"setLayout"),a.qd=b}function Xm(a,b){if(b===q)return s;var c=a.vertexes.remove(b);return c&&(a.az.remove(b.vc),b.network=q),c}function Ym(a,b){b!==q&&a.edges.remove(b)&&(a.Qy.remove(b.link),b.network=q)}function Zm(a){var b,c,d;for(b=y.tb(),c=a.edges.k;c.next();)d=c.value,(d.fromVertex===q||d.toVertex===q)&&b.push(d);for(c=b.length,d=0;c>d;d++)a.Jn(b[d]);y.ya(b)}function $m(a,b,c){var d,e;if(c!==q&&c.network!==b){for(Xm(a,c),b.qk(c),d=c.cc;d.next();)e=d.value,e.network!==b&&(Ym(a,e),b.tn(e),$m(a,b,e.fromVertex));for(d=c.Tb;d.next();)e=d.value,e.network!==b&&(Ym(a,e),b.tn(e),$m(a,b,e.toVertex))}}function Vm(){y.lc(this),this.network=q,this.S=new B(0,0,10,10).freeze(),this.N=new A(5,5).freeze(),this.clear()}function Wm(){y.lc(this),this.network=q,this.clear()}function Zi(){0<arguments.length&&y.m("GridLayout constructor cannot take any arguments."),rh.call(this),this.Lr=h,this.cr=this.dr=0/0,this.qi=new ha(0/0,0/0).freeze(),this.Tg=new ha(10,10).freeze(),this.Ud=wk,this.Tc=uk,this.Sg=qk,this.Cg=bn}function yk(){0<arguments.length&&y.m("CircularLayout constructor cannot take any arguments."),rh.call(this),this.Fw=this.Bm=this.bd=0,this.ip=360,this.Ew=Kk,this.Tj=0,this.tA=Kk,this.Ms=this.Gf=this.oB=0,this.lu=new cn,this.Ps=this.ml=0,this.$E=600,this.pq=0/0,this.To=1,this.Zd=0,this.$d=360,this.Tc=Kk,this.ma=Gk,this.Sg=Dk,this.Cg=an,this.Tg=6,this.jq=Nk}function nn(a,b,c,d,e){var h,i,j,k,l,f=a.ip,g=a.bd;for(a=a.Gf,d=d*Math.PI/180,c=c*Math.PI/180,h=b.length,i=0;h>i;i++)j=d+(e===Gk?i*c/(f>=360?h:h-1):-(i*c)/h),k=b.sa(i),l=g*Math.tan(j)/a,l=Math.sqrt((g*g+a*a*l*l)/(1+l*l)),k.xa=l*Math.cos(j),k.Ga=l*Math.sin(j),k.actualAngle=180*j/Math.PI}function mn(a,b,c,d){var h,i,j,k,l,e=a.bd,f=a.Gf,g=a.Tj;for(c=c*Math.PI/180,h=b.length,i=0;h>i;i++)j=b.sa(i),k=b.sa(i===h-1?0:i+1),l=f*Math.sin(c),j.xa=e*Math.cos(c),j.Ga=l,j.actualAngle=180*c/Math.PI,isNaN(j.diameter)&&fn(j,0),isNaN(k.diameter)&&fn(k,0),j=kn(a,e,f,d===Gk?c:-c,(j.diameter+k.diameter)/2+g),c+=d===Gk?j:-j}function ln(a,b,c,d){var h,i,j,e=a.bd,f=a.Gf,g=a.Ms;for(c=c*Math.PI/180,h=b.length,i=0;h>i;i++)j=b.sa(i),j.xa=e*Math.cos(c),j.Ga=f*Math.sin(c),j.actualAngle=180*c/Math.PI,j=kn(a,e,f,d===Gk?c:-c,g),c+=d===Gk?j:-j}function jn(a,b,c,d,e){var f=a.Ps,f=a.ip;if(a.ml=0,a.lu=new cn,360>c){for(f=d+(e===Gk?f:-f);0>f;)f+=360;f%=360,f>180&&(f-=360),f*=Math.PI/180,a.Ps=f,on(a,b,c,d,e)}else pn(a,b,c,d,e);a.lu.commit(b)}function pn(a,b,c,d,e){var m,n,f=a.bd,g=a.Gf,h=a.Tj,i=a.Bm,j=f*Math.cos(d*Math.PI/180),k=g*Math.sin(d*Math.PI/180),l=b.Ee();if(3===l.length)l[0].xa=f*Math.cos(0),l[0].Ga=g*Math.sin(0),l[1].xa=l[0].xa-l[0].width/2-l[1].width/2-h,l[1].y=l[0].y,l[2].xa=(l[0].xa+l[1].xa)/2,l[2].y=l[0].y-l[2].height-h;else if(4===l.length)l[0].xa=f*Math.cos(0),l[0].Ga=g*Math.sin(0),l[2].xa=-l[0].xa,l[2].Ga=l[0].Ga,l[1].xa=0,l[1].y=Math.min(l[0].y,l[2].y)-l[1].height-h,l[3].xa=0,l[3].y=Math.max(l[0].y+l[0].height+h,l[2].y+l[2].height+h);else{for(f=0;f<l.length&&(l[f].xa=j,l[f].Ga=k,!(f>=l.length-1));f++)g=qn(a,j,k,l,f,e),g[0]||(g=rn(a,j,k,l,f,e)),j=g[1],k=g[2];if(a.ml++,!(23<a.ml)){if(j=l[0].xa,k=l[0].Ga,f=l[l.length-1].xa,g=l[l.length-1].Ga,m=Math.abs(j-f)-((l[0].width+l[l.length-1].width)/2+h),n=Math.abs(k-g)-((l[0].height+l[l.length-1].height)/2+h),h=0,1>Math.abs(n)?Math.abs(j-f)<(l[0].width+l[l.length-1].width)/2&&(h=0):h=n>0?n:1>Math.abs(m)?0:m,m=s,m=Math.abs(f)>Math.abs(g)?f>0!=k>g:g>0!=f>j,(m=e===Gk?m:!m)&&(h=-Math.abs(h),h=Math.min(h,-l[l.length-1].width),h=Math.min(h,-l[l.length-1].height)),j=a.lu,h>0&&0>j.Sn||Math.abs(h)<Math.abs(j.Sn)&&!(0>h&&0<j.Sn))for(j.Sn=h,j.em=[],j.Fo=[],k=0;k<l.length;k++)j.em[k]=l[k].Ib.x,j.Fo[k]=l[k].Ib.y;1<Math.abs(h)&&(a.bd=8>a.ml?a.bd-h/(2*Math.PI):5>l.length&&h>10?a.bd/2:a.bd-(h>0?1.7:-2.3),a.Gf=a.bd*i,pn(a,b,c,d,e))}}}function on(a,b,c,d,e){var f,g,h,i,j,k,l,m;for(f=a.bd,g=a.Gf,h=a.Bm,i=f*Math.cos(d*Math.PI/180),j=g*Math.sin(d*Math.PI/180),k=b.Ee(),l=0;l<k.length&&(k[l].xa=i,k[l].Ga=j,!(l>=k.length-1));l++)m=qn(a,i,j,k,l,e),m[0]||(m=rn(a,i,j,k,l,e)),i=m[1],j=m[2];if(a.ml++,!(23<a.ml)){if(i=Math.atan2(j,i),i=e===Gk?a.Ps-i:i-a.Ps,i=Math.abs(i)<Math.abs(i-2*Math.PI)?i:i-2*Math.PI,f=i*(f+g)/2,g=a.lu,Math.abs(f)<Math.abs(g.Sn))for(g.Sn=f,g.em=[],g.Fo=[],i=0;i<k.length;i++)g.em[i]=k[i].Ib.x,g.Fo[i]=k[i].Ib.y;1<Math.abs(f)&&(a.bd=8>a.ml?a.bd-f/(2*Math.PI):a.bd-(f>0?1.7:-2.3),a.Gf=a.bd*h,on(a,b,c,d,e))}}function qn(a,b,c,d,e,f){var l,g=a.bd,i=a.Gf,j=0,k=0;if(a=(d[e].width+d[e+1].width)/2+a.Tj,l=s,c>=0!=(f===Gk)){if(j=b+a,j>g){if(j=b-a,-g>j)return b=[s],b[1]=j,b[2]=k,b;l=h}}else if(j=b-a,-g>j){if(j=b+a,j>g)return b=[s],b[1]=j,b[2]=k,b;l=h}return k=Math.sqrt(1-Math.min(1,j*j/(g*g)))*i,0>c!==l&&(k=-k),b=Math.abs(c-k)>(d[e].height+d[e+1].height)/2?[s]:[h],b[1]=j,b[2]=k,b}function rn(a,b,c,d,e,f){var l,g=a.bd,i=a.Gf,j=0,k=0;if(a=(d[e].height+d[e+1].height)/2+a.Tj,l=s,b>=0!=(f===Gk)){if(k=c-a,-i>k){if(k=c+a,k>i)return b=[s],b[1]=j,b[2]=k,b;l=h}}else if(k=c+a,k>i){if(k=c-a,-i>k)return b=[s],b[1]=j,b[2]=k,b;l=h}return j=Math.sqrt(1-Math.min(1,k*k/(i*i)))*g,0>b!==l&&(j=-j),b=Math.abs(b-j)>(d[e].width+d[e+1].width)/2?[s]:[h],b[1]=j,b[2]=k,b}function cn(){this.Sn=-1/0,this.Fo=this.em=q}function hn(a,b,c,d,e){var i,h,j,k,g=a.$E;if(.001>Math.abs(a.Bm-1))return d!==f&&e!==f?e*b:2*Math.PI*b;for(a=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,h=0,i=d!==f&&e!==f?e/(g+1):Math.PI/(2*(g+1)),j=0;g>=j;j++)k=Math.sin(d!==f&&e!==f?d+j*e/g:j*Math.PI/(2*g)),h+=Math.sqrt(1-a*a*k*k)*i;return d!==f&&e!==f?(b>c?b:c)*h:4*(b>c?b:c)*h}function gn(a,b,c,d,e){return a=d!==f&&e!==f?hn(a,1,c,d,e):hn(a,1,c),b/a}function kn(a,b,c,d,e){var f,g,h,i;if(.001>Math.abs(a.Bm-1))return e/b;for(f=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,g=0,a=2*Math.PI/(700*a.network.vertexes.count),b>c&&(d+=Math.PI/2),h=0;;h++)if(i=Math.sin(d+h*a),g+=(b>c?b:c)*Math.sqrt(1-f*f*i*i)*a,g>=e)return h*a;return 0}function dn(){Rm.call(this)}function en(){Vm.call(this),this.actualAngle=this.diameter=0/0}function fn(a,b){var d,c=a.network;if(c===q)return 0/0;if(c=c.Nb,c===q)return 0/0;if(c.qe===Lk)if(c.Xr===Mk)a.diameter=Math.max(a.width,a.height);else{if(c=Math.abs(Math.sin(b)),d=Math.abs(Math.cos(b)),0===c)return a.width;if(0===d)return a.height;a.diameter=Math.min(a.height/c,a.width/d)}else a.diameter=c.Xr===Mk?Math.max(a.width,a.height):Math.sqrt(a.width*a.width+a.height*a.height);return a.diameter}function sn(){Wm.call(this)}function tn(){0<arguments.length&&y.m("ForceDirectedLayout constructor cannot take any arguments."),rh.call(this),this.Ff=q,this.Hp=0,this.vf=new ha(100,100).freeze(),this.So=s,this.Xo=this.Rg=h,this.Xm=100,this.kp=1,this.Jg=1e3,this.xm=.05,this.wm=50,this.um=150,this.vm=0,this.tm=20,this.sm=25}function yn(a,b,c){return x&&(y.p(b,tn,"computeClusterLayoutIterations:level"),y.p(c,tn,"computeClusterLayoutIterations:maxiter")),Math.max(Math.min(a.network.vertexes.count,c*(b+1)/11),10)}function vn(a,b,c){var d,e,f;if(x&&(y.p(b,tn,"layoutClusters:level"),y.p(c,tn,"layoutClusters:maxiter")),zn(a,b)){for(d=a.Jg,a.Jg*=1+1/(b+1),e=An(a,b),f=Math.max(0,yn(a,b,c)),a.hv+=f,vn(a,b+1,c),xn(a,f),Bn(a,e,b),c=a.Ff,c===q?c=new F(Cn):c.clear(),c.Me(e.vertexes),c.sort(function(a,b){return a===q||b===q||a===b?0:b.sf-a.sf}),e=c.k;e.next();)Dn(a,e.value,b);a.Jg=d}}function zn(a,b){var c,d;if(x&&y.p(b,tn,"hasClusters:level"),b>10||3>a.network.vertexes.count)return s;for(a.Ff===q?a.Ff=new F(Cn):a.Ff.clear(),a.Ff.Me(a.network.vertexes),c=a.Ff,c.sort(function(a,b){return a===q||b===q||a===b?0:b.sf-a.sf}),d=c.count-1;d>=0&&1>=c.n[d].sf;)d--;return 1<c.count-d}function An(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o;for(x&&y.p(b,tn,"pushSubNetwork:level"),c=a.network,d=new un,e=a.Ff.k;e.next()&&(f=e.value,1<f.sf);)d.qk(f),g={Pz:f.sf,Rz:f.width,Oz:f.height,GE:f.N.x,HE:f.N.y},f.wg===q&&(f.wg=new F),f.wg.add(g),f.oz=f.wg.count-1;for(h=c.edges.k;h.next();)i=h.value,i.fromVertex.network===d&&i.toVertex.network===d?d.tn(i):i.fromVertex.network===d?(j=i.fromVertex.Al,j===q&&(j=new F(Cn),i.fromVertex.Al=j),j.add(i.toVertex),i.fromVertex.sf--,i.fromVertex.vj+=i.toVertex.vj):i.toVertex.network===d&&(j=i.toVertex.Al,j===q&&(j=new F(Cn),i.toVertex.Al=j),j.add(i.fromVertex),i.toVertex.sf--,i.toVertex.vj+=i.fromVertex.vj);for(h=d.edges.k;h.next();)i=h.value,i.length*=Math.max(1,H.sqrt((i.fromVertex.vj+i.toVertex.vj)/(4*b+1)));for(e=d.vertexes.k;e.next();)if(f=e.value,j=f.Al,j!==q&&0<j.count&&(g=f.wg.n[f.wg.count-1],g=g.Pz-f.sf,!(0>=g))){for(k=0,l=0,m=j.count-g;m<j.count;m++){for(n=j.n[m],i=q,h=n.edges.k;h.next();)if(o=h.value,o.wG(n)===f){i=o;break}i!==q&&(l+=i.length,k+=n.width*n.height)}j=f.xa,h=f.Ga,i=f.width,m=f.height,n=f.N,o=i*m,1>o&&(o=1),k=H.sqrt((k+o+4*l*l/(g*g))/o),g=(k-1)*i/2,k=(k-1)*m/2,f.Ib=new B(j-n.x-g,h-n.y-k,i+2*g,m+2*k),f.focus=new A(n.x+g,n.y+k)}return a.network=d,c}function Bn(a,b,c){var d,e,f,g;for(x&&(y.l(b,un,tn,"popNetwork:oldnet"),y.p(c,tn,"popNetwork:level")),c=a.network.vertexes.k;c.next();)d=c.value,d.network=b,d.wg!==q&&(e=d.wg.n[d.oz],d.sf=e.Pz,f=e.GE,g=e.HE,d.Ib=new B(d.xa-f,d.Ga-g,e.Rz,e.Oz),d.focus=new A(f,g),d.oz--);for(c=a.network.edges.k;c.next();)c.value.network=b;a.network=b}function Dn(a,b,c){var d,e,f,g,i,j,k,l,m,n;if(x&&(y.l(b,Cn,tn,"surroundNode:oldnet"),y.p(c,tn,"surroundNode:level")),d=b.Al,d!==q&&0!==d.count){for(c=b.xa,e=b.Ga,f=b.width,g=b.height,b.wg!==q&&0<b.wg.count&&(g=b.wg.n[0],f=g.Rz,g=g.Oz),f=H.sqrt(f*f+g*g)/2,i=s,j=g=0,k=0,l=b.vertexes.k;l.next();)m=l.value,1>=m.sf?j++:(i=h,k++,g+=Math.atan2(b.Ga-m.Ga,b.xa-m.xa));if(0!==j)for(k>0&&(g/=k),k=b=0,b=i?2*Math.PI/(j+1):2*Math.PI/j,0===j%2&&(k=b/2),1<d.count&&d.sort(function(a,b){return a===q||b===q||a===b?0:b.width*b.height-a.width*a.height}),i=0===j%2?0:1,l=d.k;l.next();)if(m=l.value,!(1<m.sf||a.isFixed(m))){for(d=q,j=m.edges.k;j.next();){d=j.value;break}j=m.width,n=m.height,j=H.sqrt(j*j+n*n)/2,d=f+d.length+j,j=g+(b*(i/2>>1)+k)*(0==i%2?1:-1),m.xa=c+d*Math.cos(j),m.Ga=e+d*Math.sin(j),i++}}}function wn(a,b,c,d,e,f,g){var k,l,m,h=9e19,i=-1,j=0;a:for(;b>j;j++)if(k=a[j],l=k.x-c,m=k.y-d,l=l*l+m*m,h>l){for(m=j-1;m>=0;m--)if(a[m].y>k.y&&a[m].x-k.x<e+g.width)continue a;for(m=j+1;b>m;m++)if(a[m].x>k.x&&a[m].y-k.y<f+g.height)continue a;i=j,h=l}return i}function En(a,b){x&&(y.l(a,Cn,tn,"getNodeDistance:vertexA"),y.l(b,Cn,tn,"getNodeDistance:vertexB"));var c=a.S,d=c.x,e=c.y,f=c.width,c=c.height,g=b.S,h=g.x,i=g.y,j=g.width,g=g.height;return h>d+f?e>i+g?(d=d+f-h,e=e-i-g,H.sqrt(d*d+e*e)):i>e+c?(d=d+f-h,e=e+c-i,H.sqrt(d*d+e*e)):h-(d+f):d>h+j?e>i+g?(d=d-h-j,e=e-i-g,H.sqrt(d*d+e*e)):i>e+c?(d=d-h-j,e=e+c-i,H.sqrt(d*d+e*e)):d-(h+j):e>i+g?e-(i+g):i>e+c?i-(e+c):.1}function xn(a,b){x&&y.p(b,tn,"performIterations:num"),a.Ff=q;for(var c=a.Hp+b;a.Hp<c&&(a.Hp++,!!Fn(a)););a.Ff=q}function Fn(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;if(a.Ff===q&&(a.Ff=new F(Cn),a.Ff.Me(a.network.vertexes)),b=a.Ff,0>=b.count)return s;for(c=b.n[0],c.forceX=0,c.forceY=0,d=c.xa,e=d,f=c.Ga,g=f,c=1;c<b.count;c++)h=b.n[c],h.forceX=0,h.forceY=0,i=h.xa,h=h.Ga,d=Math.min(d,i),e=Math.max(e,i),f=Math.min(f,h),g=Math.max(g,h);for((g=e-d>g-f)?b.sort(function(a,b){return a===q||b===q||a===b?0:a.xa-b.xa}):b.sort(function(a,b){return a===q||b===q||a===b?0:a.Ga-b.Ga}),j=0,k=i=0,c=0;c<b.count;c++)for(h=b.n[c],d=h.xa,e=h.Ga,i=h.charge*a.electricalFieldX(d,e),k=h.charge*a.electricalFieldY(d,e),h.forceX+=i,h.forceY+=k,i=h.mass*a.gravitationalFieldX(d,e),k=h.mass*a.gravitationalFieldY(d,e),h.forceX+=i,h.forceY+=k,l=a.Jg,m=c+1;m<b.count;m++)if(f=b.n[m],f!==h)if(k=f.xa,n=f.Ga,Math.abs(d-k)>l){if(g)break}else if(Math.abs(e-n)>l){if(!g)break}else o=En(h,f),1>o?(d>k?(i=Math.abs(f.S.right-h.S.x),i=Gn(1+i)):k>d?(i=Math.abs(f.S.x-h.S.right),i=-Gn(1+i)):(i=Math.max(f.width,h.width),i=Gn(1+i)-i/2),e>n?(k=Math.abs(f.S.bottom-h.S.y),k=Gn(1+k)):k>d?(k=Math.abs(f.S.y-h.S.bottom),k=-Gn(1+k)):(k=Math.max(f.height,h.height),k=Gn(1+k)-k/2)):(j=-(h.charge*f.charge)/(o*o),i=j*((k-d)/o),k=j*((n-e)/o)),h.forceX+=i,h.forceY+=k,f.forceX-=i,f.forceY-=k;for(c=a.network.edges.k;c.next();)g=c.value,h=g.fromVertex,f=g.toVertex,d=h.xa,e=h.Ga,k=f.xa,n=f.Ga,o=En(h,f),1>o?(i=(d>k?1:-1)*Gn(1+Math.max(f.width,h.width)),k=(e>n?1:-1)*Gn(1+Math.max(f.height,h.height))):(j=g.stiffness*(o-g.length),i=j*((k-d)/o),k=j*((n-e)/o)),h.forceX+=i,h.forceY+=k,f.forceX-=i,f.forceY-=k;for(c=0,d=Math.max(a.Jg/20,50),e=0;e<b.count;e++)h=b.n[e],a.isFixed(h)||(f=h.forceX,g=h.forceY,-d>f?f=-d:f>d&&(f=d),-d>g?g=-d:g>d&&(g=d),h.xa+=f,h.Ga+=g,c=Math.max(c,f*f+g*g));return c>a.uy*a.uy}function Gn(a){return Math.floor(a*Math.random())}function un(){Rm.call(this)}function Cn(){Vm.call(this),this.isFixed=s,this.mass=this.charge=0/0,this.vj=this.sf=this.forceY=this.forceX=0,this.wg=this.Al=q,this.oz=0}function Hn(){Wm.call(this),this.length=this.stiffness=0/0}function pk(){0<arguments.length&&y.m("LayeredDigraphLayout constructor cannot take any arguments."),rh.call(this),this.md=this.Tm=25,this.ma=0,this.qm=In,this.Um=Jn,this.Jm=Kn,this.hl=4,this.jm=Ln,this.Mh=Mn,this.Rg=h,this.Qp=4,this.vb=this.st=this.ab=-1,this.kf=this.aq=0,this.pd=this.hf=this.ig=this.Og=this.nd=q,this.gq=0,this.Bt=this.kl=q,this.Bf=0,this.hq=q,this.jg=[],this.jg.length=100}function co(a){var b=a.toVertex,c=0;for(a=a.fromVertex.Tb;a.next();)a.value.toVertex===b&&c++;return c>1?2:1}function ko(a){var b=a.fromVertex.Wc;return a=a.toVertex.Wc,b===q&&a===q?8:b===q||a===q?4:1}function lo(a,b,c){return b.Wc===q?0:90===a.ma||270===a.ma?c?b.N.y+10:b.S.height-b.N.y+10:c?b.N.x+10:b.S.width-b.N.x+10}function Wn(a,b,c){if(b.Wc===q)return 0;var d=c?b.$y:b.Zy;return d!==f?d:(d=a.ma,90===d||270===d?c?b.$y=0|b.N.x/a.md+1:b.Zy=0|(b.S.width-b.N.x)/a.md+1:c?b.$y=0|b.N.y/a.md+1:b.Zy=0|(b.S.height-b.N.y)/a.md+1)}function mo(a){a.kl===q&&(a.kl=[]);for(var d,b=0,c=a.network.vertexes.k;c.next();)d=c.value,a.kl[b]=d.layer,b++,a.kl[b]=d.column,b++,a.kl[b]=d.index,b++;return a.kl}function no(a,b){for(var e,c=0,d=a.network.vertexes.k;d.next();)e=d.value,e.layer=b[c],c++,e.column=b[c],c++,e.index=b[c],c++}function oo(a,b,c){var d,e,g,f,h,k,l,i,j,m,n,o,p,r,s,t,u;for(x&&(y.p(b,pk,"crossingMatrix:unfixedLayer"),y.p(c,pk,"crossingMatrix:direction")),d=Vn(a,b),e=a.nd[b],a.Bt||(a.Bt=[]),f=a.Bt,h=0;e>h;h++){if(g=0,i=d[h],j=i.near,j!==q&&j.layer===i.layer)if(i=j.index,i>h)for(l=h+1;i>l;l++)k=d[l],(k.near!==j||k.vl!==j.vl)&&g++;else for(l=h-1;l>i;l--)k=d[l],(k.near!==j||k.vl!==j.vl)&&g++;if(c>=0)for(i=d[h].De,j=0;j<i.count;j++)if(m=i.n[j],m.valid&&m.fromVertex.layer!==b)for(k=m.fromVertex.index,l=m.portToPos,m=m.portFromPos,n=j+1;n<i.count;n++)o=i.n[n],o.valid&&o.fromVertex.layer!==b&&(p=o.fromVertex.index,r=o.portToPos,o=o.portFromPos,r>l&&(k>p||k===p&&m>o)&&g++,l>r&&(p>k||p===k&&o>m)&&g++);if(0>=c)for(i=d[h].ue,j=0;j<i.count;j++)if(m=i.n[j],m.valid&&m.toVertex.layer!==b)for(k=m.toVertex.index,l=m.portToPos,m=m.portFromPos,n=j+1;n<i.count;n++)o=i.n[n],o.valid&&o.toVertex.layer!==b&&(p=o.toVertex.index,r=o.portToPos,o=o.portFromPos,o>m&&(k>p||k===p&&l>r)&&g++,m>o&&(p>k||p===k&&r>l)&&g++);for(f[h*e+h]=g,i=h+1;e>i;i++){if(t=0,u=0,c>=0)for(g=d[h].De,s=d[i].De,j=0;j<g.count;j++)if(m=g.n[j],m.valid&&m.fromVertex.layer!==b)for(k=m.fromVertex.index,m=m.portFromPos,n=0;n<s.count;n++)o=s.n[n],o.valid&&o.fromVertex.layer!==b&&(p=o.fromVertex.index,o=o.portFromPos,(p>k||k===p&&o>m)&&u++,(k>p||p===k&&m>o)&&t++);if(0>=c)for(g=d[h].ue,s=d[i].ue,j=0;j<g.count;j++)if(m=g.n[j],m.valid&&m.toVertex.layer!==b)for(k=m.toVertex.index,l=m.portToPos,n=0;n<s.count;n++)o=s.n[n],o.valid&&o.toVertex.layer!==b&&(p=o.toVertex.index,r=o.portToPos,(p>k||k===p&&r>l)&&u++,(k>p||p===k&&l>r)&&t++);f[h*e+i]=t,f[i*e+h]=u}}return Xn(a,b,d),f}function po(a){var b,c,d,e,g,h,i,j,l,m,n,k,o;for(b=0,c=0;c<=a.ab;c++){for(d=a,e=c,g=Vn(d,e),h=d.nd[e],i=0,j=f,j=0;h>j;j++)if(k=g[j].ue,"undefined"!=typeof k)for(o=0;o<k.count;o++)l=k.n[o],l.valid&&l.toVertex.layer!==e&&(m=l.fromVertex.column+l.portFromColOffset,n=l.toVertex.column+l.portToColOffset,i+=(Math.abs(m-n)+1)*ko(l));Xn(d,e,g),b+=i}return b}function qo(a,b,c){var g,d,e,f,h,i,j,k,l,m,n;for(x&&(y.p(b,pk,"barycenters:unfixedLayer"),y.p(c,pk,"barycenters:direction")),d=Vn(a,b),e=a.nd[b],f=[],g=0;e>g;g++){if(h=d[g],i=q,0>=c&&(i=h.De),j=q,c>=0&&(j=h.ue),k=0,l=0,m=h.near,m!==q&&m.layer===h.layer&&(k+=m.column-1,l++),i!==q)for(m=0;m<i.count;m++)h=i.n[m],n=h.fromVertex,h.valid&&!h.rev&&n.layer!==b&&(k+=n.column+h.portFromColOffset,l++);if(j!==q)for(i=0;i<j.count;i++)h=j.n[i],m=h.toVertex,h.valid&&!h.rev&&m.layer!==b&&(k+=m.column+h.portToColOffset,l++);f[g]=0===l?-1:k/l}return Xn(a,b,d),f}function ro(a,b,c){var d,e,f,g,h,i,j,k,l,m,n;for(x&&(y.p(b,pk,"medians:unfixedLayer"),y.p(c,pk,"medians:direction")),d=Vn(a,b),e=a.nd[b],f=[],g=0;e>g;g++){if(h=d[g],i=q,0>=c&&(i=h.De),j=q,c>=0&&(j=h.ue),k=0,l=[],m=h.near,m!==q&&m.layer===h.layer&&(l[k]=m.column-1,k++),i!==q)for(m=0;m<i.count;m++)h=i.n[m],n=h.fromVertex,h.valid&&!h.rev&&n.layer!==b&&(l[k]=n.column+h.portFromColOffset,k++);if(j!==q)for(i=0;i<j.count;i++)h=j.n[i],m=h.toVertex,h.valid&&!h.rev&&m.layer!==b&&(l[k]=m.column+h.portToColOffset,k++);0===k?f[g]=-1:(l.sort(function(a,b){return a-b}),j=k>>1,f[g]=1&k?l[j]:l[j-1]+l[j]>>1)}return Xn(a,b,d),f}function so(a,b,c,d,e,f){var g,h,i,j;if(b.component===d){if(b.component=c,e)for(i=b.Tb;i.next();)j=i.value.toVertex,g=b.layer-j.layer,h=co(i.value),g===h&&so(a,j,c,d,e,f);if(f)for(i=b.cc;i.next();)j=i.value.fromVertex,g=j.layer-b.layer,h=co(i.value),g===h&&so(a,j,c,d,e,f)}}function to(a,b,c,d,e,f){if(b.component===d){if(b.component=c,e)for(var h,g=b.Tb;g.next();)h=g.value.toVertex,to(a,h,c,d,e,f);if(f)for(b=b.cc;b.next();)g=b.value.fromVertex,to(a,g,c,d,e,f)}}function Pn(a){for(a=a.vertexes.k;a.next();){var b=a.value;if(b.valid)return b}return q}function Qn(a){var b,c,d;for(a=a.vertexes.k;a.next();)if(b=a.value,b.valid){for(c=h,d=b.Tb;d.next();)if(d.value.toVertex.valid){c=s;break}if(c)return b}return q}function Rn(a){var b,c,d;for(a=a.vertexes.k;a.next();)if(b=a.value,b.valid){for(c=h,d=b.cc;d.next();)if(d.value.fromVertex.valid){c=s;break}if(c)return b}return q}function Sn(a,b){var c,d,e;for(b.Kn=a.gq,a.gq++,c=b.Tb;c.next();)d=c.value,e=d.toVertex,-1===e.Kn&&(d.forest=h,Sn(a,e));b.finish=a.gq,a.gq++}function vo(a){var b,c;for(b=a.network.vertexes.k;b.next();)c=zo(a,b.value),a.ab=Math.max(c,a.ab)}function zo(a,b){var d,e,f,c=0;if(-1===b.layer){for(d=b.Tb;d.next();)e=d.value,f=co(e),c=Math.max(c,zo(a,e.toVertex)+f);b.layer=c}else c=b.layer;return c}function xo(a,b){var d,e,f,c=0;if(-1===b.layer){for(f=b.cc;f.next();)e=f.value,d=co(e),c=Math.max(c,xo(a,e.fromVertex)+d);b.layer=c}else c=b.layer;return c}function yo(a,b){var c,d,e,f,g,i,j,k,l,m,n,o,p,r;if(!b.valid){for(b.valid=h,c=b.Tb;c.next();)yo(a,c.value.toVertex);for(c=a.network.vertexes.k;c.next();)c.value.component=-1;for(d=b.De.n,e=d.length,f=0;e>f;f++)g=d[f],i=co(g),g.fromVertex.layer-g.toVertex.layer>i&&so(a,g.fromVertex,0,-1,h,s);for(so(a,b,1,-1,h,h);0!==b.component;){for(i=0,d=1/0,j=0,k=q,l=a.network.vertexes.k;l.next();)if(m=l.value,1===m.component){for(n=0,o=s,p=m.De.n,e=p.length,f=0;e>f;f++)g=p[f],r=g.fromVertex,n+=1,1!==r.component&&(i+=1,r=r.layer-m.layer,g=co(g),d=Math.min(d,r-g));for(g=m.ue.n,e=g.length,f=0;e>f;f++)p=g[f].toVertex,n-=1,1!==p.component?i-=1:o=h;(k===q||j>n)&&!o&&(k=m,j=n)}if(i>0){for(c.reset();c.next();)e=c.value,1===e.component&&(e.layer+=d);b.component=0}else k.component=0}for(c=a.network.vertexes.k;c.next();)c.value.component=-1;for(so(a,b,1,-1,h,s);0!==b.component;){for(f=0,e=1/0,d=0,i=q,j=a.network.vertexes.k;j.next();)if(k=j.value,1===k.component){for(l=0,m=s,g=k.De.n,n=g.length,o=0;n>o;o++)p=g[o].fromVertex,l+=1,1!==p.component?f+=1:m=h;for(g=k.ue.n,n=g.length,o=0;n>o;o++)p=g[o],r=p.toVertex,l-=1,1!==r.component&&(f-=1,r=k.layer-r.layer,p=co(p),e=Math.min(e,r-p));(i===q||l>d)&&!m&&(i=k,d=l)}if(0>f){for(c.reset();c.next();)f=c.value,1===f.component&&(f.layer-=e);b.component=0}else i.component=0}}}function Un(a,b,c){return 90===a.ma?c&&!b.rev||!c&&b.rev?270:90:180===a.ma?c&&!b.rev||!c&&b.rev?0:180:270===a.ma?c&&!b.rev||!c&&b.rev?90:270:c&&!b.rev||!c&&b.rev?180:0}function Bo(a,b){var e,d,f,g,c=b.layer;for(b.index=a.nd[c],a.nd[c]++,c=b.ue.Ee(),d=h;d;)for(d=s,e=0;e<c.length-1;e++)f=c[e],g=c[e+1],f.portFromColOffset>g.portFromColOffset&&(d=h,c[e]=g,c[e+1]=f);for(e=0;e<c.length;e++)d=c[e],d.valid&&(d=d.toVertex,-1===d.index&&Bo(a,d))}function Do(a,b){var e,d,f,g,c=b.layer;for(b.index=a.nd[c],a.nd[c]++,c=b.De.Ee(),d=h;d;)for(d=s,e=0;e<c.length-1;e++)f=c[e],g=c[e+1],f.portToColOffset>g.portToColOffset&&(d=h,c[e]=g,c[e+1]=f);for(e=0;e<c.length;e++)d=c[e],d.valid&&(d=d.fromVertex,-1===d.index&&Do(a,d))}function Eo(a,b,c){var d,e,f,g,j,i;for(x&&(y.p(b,pk,"medianBarycenterCrossingReduction:unfixedLayer"),y.p(c,pk,"medianBarycenterCrossingReduction:direction")),d=Vn(a,b),e=a.nd[b],f=ro(a,b,c),g=qo(a,b,c),c=0;e>c;c++)-1===g[c]&&(g[c]=d[c].column),-1===f[c]&&(f[c]=d[c].column);
for(i=h;i;)for(i=s,c=0;e-1>c;c++)(f[c+1]<f[c]||f[c+1]===f[c]&&g[c+1]<g[c])&&(i=h,j=f[c],f[c]=f[c+1],f[c+1]=j,j=g[c],g[c]=g[c+1],g[c+1]=j,j=d[c],d[c]=d[c+1],d[c+1]=j);for(c=f=0;e>c;c++)j=d[c],j.index=c,f+=Wn(a,j,h),j.column=f,f+=1,f+=Wn(a,j,s);Xn(a,b,d)}function Fo(a,b,c){var f,g,i,j,k,l,m,n,o,p,q,r,t,u,v,w,x,y,z,d=Vn(a,b),e=a.nd[b];for(c=oo(a,b,c),g=[],f=0;e>f;f++)g[f]=-1;for(i=[],f=0;e>f;f++)i[f]=-1;for(j=s,k=h;k;)for(k=s,f=0;e-1>f;f++){for(l=c[d[f].index*e+d[f+1].index],m=c[d[f+1].index*e+d[f].index],n=0,o=0,p=d[f].column,q=d[f+1].column,r=Wn(a,d[f],h),t=Wn(a,d[f],s),u=Wn(a,d[f+1],h),v=Wn(a,d[f+1],s),r=p-r+u,t=q-t+v,w=d[f].cc.k,w.reset();w.next();)if(v=w.value,v.valid&&v.fromVertex.layer===b){for(v=v.fromVertex,u=0;d[u]!==v;)u++;f>u&&(n+=2*(f-u),o+=2*(f+1-u)),u===f+1&&(n+=1),u>f+1&&(n+=4*(u-f),o+=4*(u-(f+1)))}for(w=d[f].Tb.k,w.reset();w.next();)if(v=w.value,v.valid&&v.toVertex.layer===b){for(v=v.toVertex,u=0;d[u]!==v;)u++;u===f+1&&(o+=1)}for(w=d[f+1].cc.k,w.reset();w.next();)if(v=w.value,v.valid&&v.fromVertex.layer===b){for(v=v.fromVertex,u=0;d[u]!==v;)u++;f>u&&(n+=2*(f+1-u),o+=2*(f-u)),u===f&&(o+=1),u>f+1&&(n+=4*(u-(f+1)),o+=4*(u-f))}for(w=d[f+1].Tb.k,w.reset();w.next();)if(v=w.value,v.valid&&v.toVertex.layer===b){for(v=v.toVertex,u=0;d[u]!==v;)u++;u===f&&(n+=1)}u=v=0,w=g[d[f].index],x=i[d[f].index],y=g[d[f+1].index],z=i[d[f+1].index],-1!==w&&(v+=Math.abs(w-p),u+=Math.abs(w-t)),-1!==x&&(v+=Math.abs(x-p),u+=Math.abs(x-t)),-1!==y&&(v+=Math.abs(y-q),u+=Math.abs(y-r)),-1!==z&&(v+=Math.abs(z-q),u+=Math.abs(z-r)),(n-.5>o||o===n&&l-.5>m||o===n&&m===l&&v-.5>u)&&(k=j=h,d[f].column=t,d[f+1].column=r,l=d[f],d[f]=d[f+1],d[f+1]=l)}for(f=0;e>f;f++)d[f].index=f;return Xn(a,b,d),j}function Ko(a,b,c){x&&(y.p(b,pk,"bendStraighten:unfixedLayer"),y.p(c,pk,"bendStraighten:direction"));for(var d=s;Oo(a,b,c);)d=h;return d}function Oo(a,b,c){var d,e,f,g,i,j,k,r,t,u,v,l,m,n,o,p,q,w;if(x&&(y.p(b,pk,"shiftbendStraighten:unfixedLayer"),y.p(c,pk,"shiftbendStraighten:direction")),e=Vn(a,b),f=a.nd[b],g=qo(a,b,-1),c>0)for(d=0;f>d;d++)g[d]=-1;if(i=qo(a,b,1),0>c)for(d=0;f>d;d++)i[d]=-1;for(j=s,k=h;k;)for(k=s,d=0;f>d;d++){if(l=e[d].column,m=Wn(a,e[d],h),n=Wn(a,e[d],s),m=0>d-1||l-e[d-1].column-1>m+Wn(a,e[d-1],s)?l-1:l,n=d+1>=f||e[d+1].column-l-1>n+Wn(a,e[d+1],h)?l+1:l,o=0,p=0,q=0,0>=c)for(w=e[d].cc.k;w.next();)r=w.value,r.valid&&r.fromVertex.layer!==b&&(t=ko(r),u=r.portFromColOffset,v=r.portToColOffset,r=r.fromVertex.column,o+=(Math.abs(l+v-(r+u))+1)*t,p+=(Math.abs(m+v-(r+u))+1)*t,q+=(Math.abs(n+v-(r+u))+1)*t);if(c>=0)for(w=e[d].Tb.k;w.next();)r=w.value,r.valid&&r.toVertex.layer!==b&&(t=ko(r),u=r.portFromColOffset,v=r.portToColOffset,r=r.toVertex.column,o+=(Math.abs(l+u-(r+v))+1)*t,p+=(Math.abs(m+u-(r+v))+1)*t,q+=(Math.abs(n+u-(r+v))+1)*t);v=u=t=0,r=g[e[d].index],w=i[e[d].index],-1!==r&&(t+=Math.abs(r-l),u+=Math.abs(r-m),v+=Math.abs(r-n)),-1!==w&&(t+=Math.abs(w-l),u+=Math.abs(w-m),v+=Math.abs(w-n)),(o>p||p===o&&t>u)&&(k=j=h,e[d].column=m),(o>q||q===o&&t>v)&&(k=j=h,e[d].column=n)}return Xn(a,b,e),a.normalize(),j}function Mo(a,b,c){var d,e,f,g,m,i,j,k,l;for(x&&(y.p(b,pk,"medianStraighten:unfixedLayer"),y.p(c,pk,"medianStraighten:direction")),d=Vn(a,b),e=a.nd[b],f=ro(a,b,c),g=[],c=0;e>c;c++)g[c]=f[c];for(f=h;f;)for(f=s,c=0;e>c;c++)i=d[c].column,j=Wn(a,d[c],h),k=Wn(a,d[c],s),l=0,-1===g[c]?0===c&&c===e-1?l=i:0===c?(m=d[c+1].column,l=m-i===k+Wn(a,d[c+1],h)?i-1:i):c===e-1?(m=d[c-1].column,l=i-m===j+Wn(a,d[c-1],s)?i+1:i):(m=d[c-1].column,j=m+Wn(a,d[c-1],s)+j+1,m=d[c+1].column,k=m-Wn(a,d[c+1],h)-k-1,l=0|(j+k)/2):0===c&&c===e-1?l=g[c]:0===c?(m=d[c+1].column,k=m-Wn(a,d[c+1],h)-k-1,l=Math.min(g[c],k)):c===e-1?(m=d[c-1].column,j=m+Wn(a,d[c-1],s)+j+1,l=Math.max(g[c],j)):(m=d[c-1].column,j=m+Wn(a,d[c-1],s)+j+1,m=d[c+1].column,k=m-Wn(a,d[c+1],h)-k-1,j<g[c]&&g[c]<k?l=g[c]:j>=g[c]?l=j:k<=g[c]&&(l=k)),l!==i&&(f=h,d[c].column=l);Xn(a,b,d),a.normalize()}function Po(a,b){var e,c,d,f,g;for(x&&(y.p(b,pk,"packAux:column"),y.p(1,pk,"packAux:direction")),c=h,d=a.network.vertexes.k;d.next();)if(e=d.value,f=Wn(a,e,h),g=Wn(a,e,s),e.column-f<=b&&e.column+g>=b){c=s;break}if(f=s,c)for(d.reset();d.next();)e=d.value,e.column>b&&(e.column-=1,f=h);return f}function Qo(a,b){var d,c,e,f,g,i,j;for(x&&(y.p(b,pk,"tightPackAux:column"),y.p(1,pk,"tightPackAux:direction")),c=b,c=b+1,e=[],f=[],d=0;d<=a.ab;d++)e[d]=s,f[d]=s;for(g=a.network.vertexes.k;g.next();)d=g.value,i=d.column-Wn(a,d,h),j=d.column+Wn(a,d,s),b>=i&&j>=b&&(e[d.layer]=h),c>=i&&j>=c&&(f[d.layer]=h);for(i=h,c=s,d=0;d<=a.ab;d++)i=i&&!(e[d]&&f[d]);if(i)for(g.reset();g.next();)d=g.value,d.column>b&&(d.column-=1,c=h);return c}function No(a,b){var c,d,e,f,g;for(x&&y.p(b,pk,"componentPack:direction"),c=0;c<=a.vb;c++)for(;Po(a,c););for(a.normalize(),c=0;c<a.vb;c++)for(;Qo(a,c););if(a.normalize(),b>0)for(c=0;c<=a.vb;c++)for(d=mo(a),e=po(a),f=e+1;f>e;)f=e,Ro(a,c,1),g=po(a),g>e?no(a,d):e>g&&(e=g,d=mo(a));if(0>b)for(c=a.vb;c>=0;c--)for(d=mo(a),e=po(a),f=e+1;f>e;)f=e,Ro(a,c,-1),g=po(a),g>e?no(a,d):e>g&&(e=g,d=mo(a));a.normalize()}function Ro(a,b,c){var e,d,f,g,i,j;for(a.Bf=0,d=a.network.vertexes.k;d.next();)d.value.component=-1;if(c>0)for(d.reset();d.next();)e=d.value,e.column-Wn(a,e,h)<=b&&(e.component=a.Bf);if(0>c)for(d.reset();d.next();)e=d.value,e.column+Wn(a,e,s)>=b&&(e.component=a.Bf);for(a.Bf++,d.reset();d.next();)e=d.value,-1===e.component&&(to(a,e,a.Bf,-1,h,h),a.Bf++);for(b=[],e=0;e<a.Bf*a.Bf;e++)b[e]=s;for(f=[],e=0;e<(a.ab+1)*(a.vb+1);e++)f[e]=-1;for(d.reset();d.next();)for(e=d.value,g=e.layer,i=Math.max(0,e.column-Wn(a,e,h)),j=Math.min(a.vb,e.column+Wn(a,e,s));j>=i;i++)f[g*(a.vb+1)+i]=e.component;for(e=0;e<=a.ab;e++){if(c>0)for(i=0;i<a.vb;i++)-1!==f[e*(a.vb+1)+i]&&-1!==f[e*(a.vb+1)+i+1]&&f[e*(a.vb+1)+i]!==f[e*(a.vb+1)+i+1]&&(b[f[e*(a.vb+1)+i]*a.Bf+f[e*(a.vb+1)+i+1]]=h);if(0>c)for(i=a.vb;i>0;i--)-1!==f[e*(a.vb+1)+i]&&-1!==f[e*(a.vb+1)+i-1]&&f[e*(a.vb+1)+i]!==f[e*(a.vb+1)+i-1]&&(b[f[e*(a.vb+1)+i]*a.Bf+f[e*(a.vb+1)+i-1]]=h)}for(f=[],e=0;e<a.Bf;e++)f[e]=h;for(g=new F("number"),g.add(0);0!==g.count;)if(j=g.n[g.count-1],g.kd(g.count-1),f[j])for(f[j]=s,e=0;e<a.Bf;e++)b[j*a.Bf+e]&&g.wd(0,e);if(c>0)for(d.reset();d.next();)e=d.value,f[e.component]&&(e.column-=1);if(0>c)for(d.reset();d.next();)e=d.value,f[e.component]&&(e.column+=1)}function Tn(a,b){return 270===a.ma?b?$b:cc:90===a.ma?b?cc:$b:180===a.ma?b?ac:bc:b?bc:ac}function So(){this.index=this.ud=this.de=this.yd=this.ob=this.layer=0,this.link=q,this.oh=0}function To(a,b,c,d){return x&&(y.p(a,pk,"isUnoccupied2:px"),y.p(b,pk,"isUnoccupied2:py"),y.p(c,pk,"isUnoccupied2:qx"),y.p(d,pk,"isUnoccupied2:qy")),h}function Vn(a,b){var c,e,f,d=a.nd[b];if(d>=a.jg.length){for(c=[],e=0;e<a.jg.length;e++)c[e]=a.jg[e];a.jg=c}for("undefined"==typeof a.jg[d]||a.jg[d]===q?c=[]:(c=a.jg[d],a.jg[d]=q),d=a.hq[b],e=0;e<d.length;e++)f=d[e],f instanceof Uo&&(c[f.index]=f);return c}function Xn(a,b,c){a.jg[a.nd[b]]=c}function Nn(){Rm.call(this)}function Uo(){Vm.call(this),this.index=this.column=this.layer=-1,this.component=0/0,this.near=q,this.valid=s,this.finish=this.Kn=0/0,this.vl=0,this.Zy=this.$y=f}function Vo(){Wm.call(this),this.forest=this.rev=this.valid=s,this.portToPos=this.portFromPos=0/0,this.portToColOffset=this.portFromColOffset=0}function Y(){0<arguments.length&&y.m("TreeLayout constructor cannot take any arguments."),rh.call(this),this.yc=new na(Object),this.Oh=Wo,this.gf=Xo,this.Yq=Yo,this.Tc=Zo,this.vf=new ha(10,10).freeze(),this.pa=new $o,this.oa=new $o}function bp(a,b,c,d){var e,f;for(c=c.k;c.next();)e=c.value,e instanceof T&&e.canLayout()&&"Comment"!==e.Ac&&(!d||e.$n)&&(e.ii||(e instanceof He&&e.Nb===q?bp(a,b,e.Dc,s):b.un(e)));for(c.reset();c.next();)e=c.value,e instanceof U&&e.canLayout()&&"Comment"!==e.Ac&&(!d||e.$n)&&(f=e.da,a=e.ja,f!==q&&a!==q&&f!==a&&"Comment"!==f.Ac&&"Comment"!==a.Ac&&(f=b.Mu(f),a=b.Mu(a),f!==q&&a!==q&&b.Sl(f,a,e)))}function ep(a,b){var c,d,e,f;if(x&&y.l(b,$o,Y,"walkTree:v"),b!==q){switch(a.gf){case Xo:if(0<b.Tb.count){for(c=new F($o),d=b.hG;d.next();)e=d.value,jp(a,b,e)&&c.add(e);0<c.count&&(b.children=c.Ee())}break;case dp:if(0<b.cc.count){for(c=new F($o),d=b.uH;d.next();)e=d.value,jp(a,b,e)&&c.add(e);0<c.count&&(b.children=c.Ee())}break;default:y.m("Unhandled path value"+a.gf.toString())}for(c=b.children,d=c.length,f=0;d>f;f++)e=c[f],e.initialized=h,e.level=b.level+1,e.parent=b,a.yc.remove(e);for(f=0;d>f;f++)e=c[f],ep(a,e)}}function jp(a,b,c){if(x&&y.l(b,$o,Y,"walkOK:v"),x&&y.l(c,$o,Y,"walkOK:c"),c.initialized){var d;if(x&&y.l(c,$o,Y,"isAncestor:a"),x&&y.l(b,$o,Y,"isAncestor:b"),b===q)d=s;else{for(d=b.parent;d!==q&&d!==c;)d=d.parent;d=d===c}if(d||c.level>b.level)return s;a.removeChild(c.parent,c)}return h}function fp(a,b){var c,d,e,f,g,h,i;if(x&&y.l(b,$o,Y,"initializeTree:v"),b!==q){for(a.initializeTreeVertexValues(b),b.alignment===kp&&a.sortTreeVertexChildren(b),c=0,d=b.zl,e=0,f=b.children,g=f.length,h=0;g>h;h++)i=f[h],fp(a,i),c+=i.descendantCount+1,d=Math.max(d,i.maxChildrenCount),e=Math.max(e,i.maxGenerationCount);b.descendantCount=c,b.maxChildrenCount=d,b.maxGenerationCount=d>0?e+1:0}}function lp(a,b){var c,d,e,f;switch(x&&y.l(b,$o,Y,"mom:v"),a.Yq){default:case Yo:return b.parent!==q?b.parent:a.pa;case mp:return b.parent===q?a.pa:b.parent.parent===q?a.oa:b.parent;case np:if(b.parent!==q)return b.parent.parent!==q?b.parent.parent:a.oa;case op:if(c=h,0===b.zl)c=s;else for(d=b.children,e=d.length,f=0;e>f;f++)if(0<d[f].zl){c=s;break}return c&&b.parent!==q?a.oa:b.parent!==q?b.parent:a.pa}}function gp(a,b){if(x&&y.l(b,$o,Y,"assignTree:v"),b!==q){a.assignTreeVertexValues(b);for(var c=b.children,d=c.length,e=0;d>e;e++)gp(a,c[e])}}function hp(a,b){if(x&&y.l(b,$o,Y,"sortTree:v"),b!==q){b.alignment!==kp&&a.sortTreeVertexChildren(b);for(var c=b.children,d=c.length,e=0;d>e;e++)hp(a,c[e])}}function up(a){return a===vp||a===kp||a===wp||a===xp}function yp(a){return a===vp||a===kp}function zp(a){var b,c;if(x&&y.l(a,$o,Y,"isLeftSideBus:v"),b=a.parent,b!==q&&(c=b.alignment,up(c))){if(yp(c)){for(b=b.children,c=0;c<b.length&&a!==b[c];)c++;return 0===c%2}if(c===wp)return h}return s}function ip(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,r,t,u,v,w,z,A,B,C,D,E,F,G,H,I,J,K,L,M;if(x&&y.l(b,$o,Y,"layoutTree:v"),b!==q){for(c=b.children,d=c.length,e=0;d>e;e++)ip(a,c[e]);switch(b.compaction){case Ap:Bp(a,b);break;case Cp:if(b.alignment===kp)Bp(a,b);else if(x&&y.l(b,$o,Y,"layoutTreeBlock:v"),0===b.zl)e=b.parent,c=s,d=0,f=tp,e!==q&&(d=e.angle,f=e.alignment,c=up(f)),e=zp(b),b.ea.q(0,0),b.Va.q(b.width,b.height),b.parent===q||b.comments===q||(180!==d&&270!==d||c)&&!e?b.Ia.q(0,0):180===d&&!c||(90===d||270===d)&&e?b.Ia.q(b.width-2*b.N.x,0):b.Ia.q(0,b.height-2*b.N.y),b.Mr=q,b.ds=q;else{for(g=Dp(b),c=90===g||270===g,h=0,i=b.children,j=i.length,k=0;j>k;k++)l=i[k],h=Math.max(h,c?l.Va.width:l.Va.height);if(m=b.alignment,e=m===Ep,n=m===Fp,o=up(m),p=Math.max(0,b.breadthLimit),d=Gp(b),r=b.nodeSpacing,t=Hp(b),u=b.rowSpacing,v=0,(e||n||b.yo||b.zo&&1===b.maxGenerationCount)&&(v=Math.max(0,b.rowIndent)),e=b.width,f=b.height,w=0,z=0,A=0,B=q,C=q,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,l=0,o&&!yp(m)&&g>135&&i.reverse(),yp(m))if(j>1)for(k=0;j>k;k++)0===k%2&&k!==j-1?K=Math.max(K,c?i[k].Va.width:i[k].Va.height):0!==k%2&&(l=Math.max(l,c?i[k].Va.width:i[k].Va.height));else 1===j&&(K=c?i[0].Va.width:i[0].Va.height);if(o){switch(m){case vp:E=135>g?Ip(b,i,K,w,z):Jp(b,i,K,w,z),K=E[0],w=E[1],z=E[2];break;case wp:for(k=0;j>k;k++)l=i[k],L=l.Va,B=0===I?0:u,c?(l.ea.q(h-L.width,G+B),w=Math.max(w,L.width),z=Math.max(z,G+B+L.height),G+=B+L.height):(l.ea.q(F+B,h-L.height),w=Math.max(w,F+B+L.width),z=Math.max(z,L.height),F+=B+L.width),I++;break;case xp:for(k=0;j>k;k++)l=i[k],L=l.Va,B=0===I?0:u,c?(l.ea.q(r/2+b.N.x,G+B),w=Math.max(w,L.width),z=Math.max(z,G+B+L.height),G+=B+L.height):(l.ea.q(F+B,r/2+b.N.y),w=Math.max(w,F+B+L.width),z=Math.max(z,L.height),F+=B+L.width),I++}B=Kp(a,2),C=Kp(a,2),c?(B[0].q(0,0),B[1].q(0,z),C[0].q(w,0)):(B[0].q(0,0),B[1].q(w,0),C[0].q(0,z)),C[1].q(w,z)}else for(k=0;j>k;k++)l=i[k],L=l.Va,c?(p>0&&I>0&&F+r+L.width>p&&(h>F&&Lp(b,m,h-F,0,J,k-1),H++,I=0,J=k,A=z,F=0,G=g>135?-z-u:z+u),Mp(a,l,0,G),M=0,0===I?(B=l.Mr,C=l.ds,D=L.width,E=L.height,(B===q||C===q||g!==Dp(l))&&(B=Kp(a,2),C=Kp(a,2),B[0].q(0,0),B[1].q(0,E),C[0].q(D,0),C[1].q(D,E))):(E=Np(a,b,l,B,C,D,E),M=E[0],B=E[1],C=E[2],D=E[3],E=E[4],F<L.width&&0>M&&(Op(b,-M,0,J,k-1),Pp(B,-M,0),Pp(C,-M,0),M=0)),l.ea.q(M,G),w=Math.max(w,D),z=Math.max(z,A+(0===H?0:u)+L.height),F=D):(p>0&&I>0&&G+r+L.height>p&&(h>G&&Lp(b,m,0,h-G,J,k-1),H++,I=0,J=k,A=w,G=0,F=g>135?-w-u:w+u),Mp(a,l,F,0),M=0,0===I?(B=l.Mr,C=l.ds,D=L.width,E=L.height,(B===q||C===q||g!==Dp(l))&&(B=Kp(a,2),C=Kp(a,2),B[0].q(0,0),B[1].q(D,0),C[0].q(0,E),C[1].q(D,E))):(E=Np(a,b,l,B,C,D,E),M=E[0],B=E[1],C=E[2],D=E[3],E=E[4],G<L.height&&0>M&&(Op(b,0,-M,J,k-1),Pp(B,0,-M),Pp(C,0,-M),M=0)),l.ea.q(F,M),z=Math.max(z,E),w=Math.max(w,A+(0===H?0:u)+L.width),G=E),I++;switch(H>0&&(c?(z+=Math.max(0,d),w>F&&Lp(b,m,w-F,0,J,j-1),v>0&&(n||Op(b,v,0,0,j-1),w+=v)):(w+=Math.max(0,d),z>G&&Lp(b,m,0,z-G,J,j-1),v>0&&(n||Op(b,0,v,0,j-1),z+=v))),n=h=0,m){case Qp:c?h+=w/2-b.N.x-t/2:n+=z/2-b.N.y-t/2;break;case tp:H>0?c?h+=w/2-b.N.x-t/2:n+=z/2-b.N.y-t/2:c?(k=i[0].ea.x+i[0].Ia.x,K=i[j-1].ea.x+i[j-1].Ia.x+2*i[j-1].N.x,h+=k+(K-k)/2-b.N.x-t/2):(k=i[0].ea.y+i[0].Ia.y,K=i[j-1].ea.y+i[j-1].Ia.y+2*i[j-1].N.y,n+=k+(K-k)/2-b.N.y-t/2);break;case Ep:c?(h-=t,w+=t):(n-=t,z+=t);break;case Fp:c?(h+=w-b.width+t,w+=t):(n+=z-b.height+t,z+=t);break;case vp:c?h=j>1?h+(K+r/2-b.N.x):h+(i[0].N.x-b.N.x+i[0].Ia.x):n=j>1?n+(K+r/2-b.N.y):n+(i[0].N.y-b.N.y+i[0].Ia.y);break;case wp:c?h+=w+r/2-b.N.x:n+=z+r/2-b.N.y;break;case xp:break;default:y.m("Unhandled alignment value "+m.toString())}for(k=0;j>k;k++)l=i[k],c?l.ea.q(l.ea.x+l.Ia.x-h,l.ea.y+(g>135?(o?-z:-l.Va.height)+l.Ia.y-d:f+d+l.Ia.y)):l.ea.q(l.ea.x+(g>135?(o?-w:-l.Va.width)+l.Ia.x-d:e+d+l.Ia.x),l.ea.y+l.Ia.y-n);if(j=i=0,o?c?(w=Rp(b,w,h),0>h&&(h=0),g>135&&(n+=z+d),z+=f+d,m===xp&&(i+=r/2+b.N.x),j+=f+d):(g>135&&(h+=w+d),w+=e+d,z=Sp(b,z,n),0>n&&(n=0),m===xp&&(j+=r/2+b.N.y),i+=e+d):c?(b.comments===q?e>w&&(m=Tp(m,e-w,0),i=m[0],j=m[1],w=e,h=0):w=Rp(b,w,h),0>h&&(i-=h,h=0),g>135&&(n+=z+d),z=Math.max(Math.max(z,f),z+f+d),j+=f+d):(g>135&&(h+=w+d),w=Math.max(Math.max(w,e),w+e+d),b.comments===q?f>z&&(m=Tp(m,0,f-z),i=m[0],j=m[1],z=f,n=0):z=Sp(b,z,n),0>n&&(j-=n,n=0),i+=e+d),H>0)g=Kp(a,4),m=Kp(a,4),c?(g[2].q(0,f+d),g[3].q(g[2].x,z),m[2].q(w,g[2].y),m[3].q(m[2].x,g[3].y)):(g[2].q(e+d,0),g[3].q(w,g[2].y),m[2].q(g[2].x,z),m[3].q(g[3].x,m[2].y));else{for(g=Kp(a,B.length+2),m=Kp(a,C.length+2),k=0;k<B.length;k++)o=B[k],g[k+2].q(o.x+i,o.y+j);for(k=0;k<C.length;k++)o=C[k],m[k+2].q(o.x+i,o.y+j)}c?(g[0].q(h,0),g[1].q(g[0].x,f),g[2].y<g[1].y&&(g[2].x>g[0].x?g[2].assign(g[1]):g[1].assign(g[2])),g[3].y<g[2].y&&(g[3].x>g[0].x?g[3].assign(g[2]):g[2].assign(g[3])),m[0].q(h+e,0),m[1].q(m[0].x,f),m[2].y<m[1].y&&(m[2].x<m[0].x?m[2].assign(m[1]):m[1].assign(m[2])),m[3].y<m[2].y&&(m[3].x<m[0].x?m[3].assign(m[2]):m[2].assign(m[3])),g[2].y-=d/2,m[2].y-=d/2):(g[0].q(0,n),g[1].q(e,g[0].y),g[2].x<g[1].x&&(g[2].y>g[0].y?g[2].assign(g[1]):g[1].assign(g[2])),g[3].x<g[2].x&&(g[3].y>g[0].y?g[3].assign(g[2]):g[2].assign(g[3])),m[0].q(0,n+f),m[1].q(e,m[0].y),m[2].x<m[1].x&&(m[2].y<m[0].y?m[2].assign(m[1]):m[1].assign(m[2])),m[3].x<m[2].x&&(m[3].y<m[0].y?m[3].assign(m[2]):m[2].assign(m[3])),g[2].x-=d/2,m[2].x-=d/2),Up(a,B),Up(a,C),b.Mr=g,b.ds=m,b.Ia.q(h,n),b.Va.q(w,z)}break;default:y.m("Unhandled compaction value "+b.compaction.toString())}}}function Bp(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,r,t,u,v,w,z,A,B,C,D,E,F,G,H,I,J;if(x&&y.l(b,$o,Y,"layoutTreeNone:v"),0===b.zl)c=s,d=0,e=tp,b.parent!==q&&(d=b.parent.angle,e=b.parent.alignment,c=up(e)),e=zp(b),b.ea.q(0,0),b.Va.q(b.width,b.height),b.parent===q||b.comments===q||(180!==d&&270!==d||c)&&!e?b.Ia.q(0,0):180===d&&!c||(90===d||270===d)&&e?b.Ia.q(b.width-2*b.N.x,0):b.Ia.q(0,b.height-2*b.N.y);else{for(c=Dp(b),d=90===c||270===c,f=0,e=b.children,g=e.length,h=0;g>h;h++)i=e[h],f=Math.max(f,d?i.Va.width:i.Va.height);if(j=b.alignment,k=j===Ep,l=j===Fp,m=up(j),n=Math.max(0,b.breadthLimit),o=Gp(b),p=b.nodeSpacing,r=Hp(b),t=k||l?0:r/2,u=b.rowSpacing,v=0,(k||l||b.yo||b.zo&&1===b.maxGenerationCount)&&(v=Math.max(0,b.rowIndent)),k=b.width,w=b.height,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,m&&!yp(j)&&c>135&&e.reverse(),yp(j))if(g>1)for(h=0;g>h;h++)i=e[h],J=i.Va,0===h%2&&h!==g-1?H=Math.max(H,(d?J.width:J.height)+Vp(i)-p):0!==h%2&&(I=Math.max(I,(d?J.width:J.height)+Vp(i)-p));else 1===g&&(H=d?e[0].Va.width:e[0].Va.height);if(m)switch(j){case vp:case kp:A=135>c?Ip(b,e,H,z,A):Jp(b,e,H,z,A),H=A[0],z=A[1],A=A[2];break;case wp:for(h=0;g>h;h++)i=e[h],J=i.Va,n=0===F?0:u,d?(i.ea.q(f-J.width,D+n),z=Math.max(z,J.width),A=Math.max(A,D+n+J.height),D+=n+J.height):(i.ea.q(C+n,f-J.height),z=Math.max(z,C+n+J.width),A=Math.max(A,J.height),C+=n+J.width),F++;break;case xp:for(f=0;g>f;f++)i=e[f],J=i.Va,n=0===F?0:u,d?(i.ea.q(p/2+b.N.x,D+n),z=Math.max(z,J.width),A=Math.max(A,D+n+J.height),D+=n+J.height):(i.ea.q(C+n,p/2+b.N.y),z=Math.max(z,C+n+J.width),A=Math.max(A,J.height),C+=n+J.width),F++}else for(h=0;g>h;h++)i=e[h],J=i.Va,d?(n>0&&F>0&&C+p+J.width>n&&(f>C&&Lp(b,j,f-C,0,G,h-1),E++,F=0,G=h,B=A,C=0,D=c>135?-A-u:A+u),I=0===F?t:p,Mp(a,i,0,D),i.ea.q(C+I,D),z=Math.max(z,C+I+J.width),A=Math.max(A,B+(0===E?0:u)+J.height),C+=I+J.width):(n>0&&F>0&&D+p+J.height>n&&(f>D&&Lp(b,j,0,f-D,G,h-1),E++,F=0,G=h,B=z,D=0,C=c>135?-z-u:z+u),I=0===F?t:p,Mp(a,i,C,0),i.ea.q(C,D+I),A=Math.max(A,D+I+J.height),z=Math.max(z,B+(0===E?0:u)+J.width),D+=I+J.height),F++;switch(E>0&&(d?(A+=Math.max(0,o),z>C&&Lp(b,j,z-C,0,G,g-1),v>0&&(l||Op(b,v,0,0,g-1),z+=v)):(z+=Math.max(0,o),A>D&&Lp(b,j,0,A-D,G,g-1),v>0&&(l||Op(b,0,v,0,g-1),A+=v))),v=l=0,j){case Qp:d?l+=z/2-b.N.x-r/2:v+=A/2-b.N.y-r/2;break;case tp:E>0?d?l+=z/2-b.N.x-r/2:v+=A/2-b.N.y-r/2:d?(j=e[0].ea.x+e[0].Ia.x,p=e[g-1].ea.x+e[g-1].Ia.x+2*e[g-1].N.x,l+=j+(p-j)/2-b.N.x-r/2):(j=e[0].ea.y+e[0].Ia.y,p=e[g-1].ea.y+e[g-1].Ia.y+2*e[g-1].N.y,v+=j+(p-j)/2-b.N.y-r/2);break;case Ep:d?(l-=r,z+=r):(v-=r,A+=r);break;case Fp:d?(l+=z-b.width+r,z+=r):(v+=A-b.height+r,A+=r);break;case vp:case kp:d?l=g>1?l+(H+p/2-b.N.x):l+(e[0].N.x-b.N.x+e[0].Ia.x):v=g>1?v+(H+p/2-b.N.y):v+(e[0].N.y-b.N.y+e[0].Ia.y);break;case wp:d?l+=z+p/2-b.N.x:v+=A+p/2-b.N.y;break;case xp:break;default:y.m("Unhandled alignment value "+j.toString())}for(h=0;g>h;h++)i=e[h],d?i.ea.q(i.ea.x+i.Ia.x-l,i.ea.y+(c>135?(m?-A:-i.Va.height)+i.Ia.y-o:w+o+i.Ia.y)):i.ea.q(i.ea.x+(c>135?(m?-z:-i.Va.width)+i.Ia.x-o:k+o+i.Ia.x),i.ea.y+i.Ia.y-v);d?(z=Rp(b,z,l),0>l&&(l=0),c>135&&(v+=A+o),A+=w+o):(c>135&&(l+=z+o),z+=k+o,A=Sp(b,A,v),0>v&&(v=0)),b.Ia.q(l,v),b.Va.q(z,A)}}function Ip(a,b,c,d,e){var f,g,i,j,k,l,m,n,o,p,q,r,t,u;if(x&&y.l(a,$o,Y,"layoutBusChildrenPosDir:v"),f=b.length,0===f)return a=[],a[0]=c,a[1]=d,a[2]=e,a;if(1===f)return g=b[0],d=g.Va.width,e=g.Va.height,a=[],a[0]=c,a[1]=d,a[2]=e,a;for(i=a.nodeSpacing,j=a.rowSpacing,k=90===Dp(a),l=0,m=0,n=0,o=0;f>o;o++)0!==o%2||f>1&&o===f-1||(g=b[o],p=g.Va,q=0===l?0:j,k?(r=Vp(g)-i,g.ea.q(c-(p.width+r),n+q),d=Math.max(d,p.width+r),e=Math.max(e,n+q+p.height),n+=q+p.height):(r=Vp(g)-i,g.ea.q(m+q,c-(p.height+r)),e=Math.max(e,p.height+r),d=Math.max(d,m+q+p.width),m+=q+p.width),l++);for(l=0,t=m,u=n,k?(m=c+i,n=0):(m=0,n=c+i),o=0;f>o;o++)0!==o%2&&(g=b[o],p=g.Va,q=0===l?0:j,k?(r=Vp(g)-i,g.ea.q(m+r,n+q),d=Math.max(d,m+p.width+r),e=Math.max(e,n+q+p.height),n+=q+p.height):(r=Vp(g)-i,g.ea.q(m+q,n+r),d=Math.max(d,m+q+p.width),e=Math.max(e,n+p.height+r),m+=q+p.width),l++);return f>1&&1===f%2&&(g=b[f-1],p=g.Va,b=Wp(g,k?Math.max(Math.abs(u),Math.abs(n)):Math.max(Math.abs(t),Math.abs(m))),k?(g.ea.q(c+i/2-g.N.x-g.Ia.x,e+b),k=c+i/2-g.N.x-g.Ia.x,d=Math.max(d,k+p.width),0>k&&(d-=k),e=Math.max(e,Math.max(u,n)+b+p.height),0>g.ea.x&&(c=bq(a,g.ea.x,s,c,i))):(g.ea.q(d+b,c+i/2-g.N.y-g.Ia.y),d=Math.max(d,Math.max(t,m)+b+p.width),k=c+i/2-g.N.y-g.Ia.y,e=Math.max(e,k+p.height),0>k&&(e-=k),0>g.ea.y&&(c=bq(a,g.ea.y,h,c,i)))),a=[],a[0]=c,a[1]=d,a[2]=e,a}function Jp(a,b,c,d,e){var f,g,i,j,k,l,m,n,o,p,q,r,t,u;if(x&&y.l(a,$o,Y,"layoutBusChildrenNegDir:v"),f=b.length,0===f)return a=[],a[0]=c,a[1]=d,a[2]=e,a;if(1===f)return g=b[0],d=g.Va.width,e=g.Va.height,a=[],a[0]=c,a[1]=d,a[2]=e,a;for(i=a.nodeSpacing,j=a.rowSpacing,k=270===Dp(a),l=0,m=0,n=0,o=0;f>o;o++)0!==o%2||f>1&&o===f-1||(g=b[o],p=g.Va,q=0===l?0:j,k?(r=Vp(g)-i,n-=q+p.height,g.ea.q(c-(p.width+r),n),d=Math.max(d,p.width+r),e=Math.max(e,Math.abs(n))):(r=Vp(g)-i,m-=q+p.width,g.ea.q(m,c-(p.height+r)),e=Math.max(e,p.height+r),d=Math.max(d,Math.abs(m))),l++);for(l=0,t=m,u=n,k?(m=c+i,n=0):(m=0,n=c+i),o=0;f>o;o++)0!==o%2&&(g=b[o],p=g.Va,q=0===l?0:j,k?(r=Vp(g)-i,n-=q+p.height,g.ea.q(m+r,n),d=Math.max(d,m+p.width+r),e=Math.max(e,Math.abs(n))):(r=Vp(g)-i,m-=q+p.width,g.ea.q(m,n+r),e=Math.max(e,n+p.height+r),d=Math.max(d,Math.abs(m))),l++);for(f>1&&1===f%2&&(g=b[f-1],p=g.Va,j=Wp(g,k?Math.max(Math.abs(u),Math.abs(n)):Math.max(Math.abs(t),Math.abs(m))),k?(g.ea.q(c+i/2-g.N.x-g.Ia.x,-e-p.height-j),m=c+i/2-g.N.x-g.Ia.x,d=Math.max(d,m+p.width),0>m&&(d-=m),e=Math.max(e,Math.abs(Math.min(u,n))+j+p.height),0>g.ea.x&&(c=bq(a,g.ea.x,s,c,i))):(g.ea.q(-d-p.width-j,c+i/2-g.N.y-g.Ia.y),d=Math.max(d,Math.abs(Math.min(t,m))+j+p.width),m=c+i/2-g.N.y-g.Ia.y,e=Math.max(e,m+p.height),0>m&&(e-=m),0>g.ea.y&&(c=bq(a,g.ea.y,h,c,i)))),o=0;f>o;o++)g=b[o],k?g.ea.q(g.ea.x,g.ea.y+e):g.ea.q(g.ea.x+d,g.ea.y);return a=[],a[0]=c,a[1]=d,a[2]=e,a}function Vp(a){return x&&y.l(a,$o,Y,"fixRelativePostions:child"),a.parent===q?0:a.parent.nodeSpacing}function Wp(a){return x&&y.l(a,$o,Y,"fixRelativePostions:lastchild"),a.parent===q?0:a.parent.rowSpacing}function bq(a,b,c,d,e){x&&y.l(a,$o,Y,"fixRelativePostions:v"),a=a.children;for(var f=a.length,g=0;f>g;g++)c?a[g].ea.q(a[g].ea.x,a[g].ea.y-b):a[g].ea.q(a[g].ea.x-b,a[g].ea.y);return b=a[f-1],Math.max(d,c?b.Ia.y+b.N.y-e/2:b.Ia.x+b.N.x-e/2)}function Rp(a,b,c){switch(x&&y.l(a,$o,Y,"calculateSubwidth:v"),a.alignment){case tp:case Qp:var d=b;return c+a.width>d&&(d=c+a.width),0>c&&(d-=c),d;case Ep:return a.width>b?a.width:b;case Fp:return 2*a.N.x>b?a.width:b+a.width-2*a.N.x;case vp:case kp:return d=Math.min(0,c),c=Math.max(b,c+a.width),Math.max(a.width,c-d);case wp:return a.width-a.N.x+a.nodeSpacing/2+b;case xp:return Math.max(a.width,a.N.x+a.nodeSpacing/2+b);default:return b}}function Sp(a,b,c){switch(x&&y.l(a,$o,Y,"calculateSubheight:v"),a.alignment){case tp:case Qp:var d=b;return c+a.height>d&&(d=c+a.height),0>c&&(d-=c),d;case Ep:return a.height>b?a.height:b;case Fp:return 2*a.N.y>b?a.height:b+a.height-2*a.N.y;case vp:case kp:return d=Math.min(0,c),c=Math.max(b,c+a.height),Math.max(a.height,c-d);case wp:return a.height-a.N.y+a.nodeSpacing/2+b;case xp:return Math.max(a.height,a.N.y+a.nodeSpacing/2+b);default:return b}}function Tp(a,b,c){switch(x&&y.l(a,ga,Y,"alignOffset:align"),a){case Qp:b/=2,c/=2;break;case tp:b/=2,c/=2;break;case Ep:c=b=0;break;case Fp:break;default:y.m("Unhandled alignment value "+a.toString())}return a=[],a[0]=b,a[1]=c,a}function Lp(a,b,c,d,e,f){x&&y.l(a,$o,Y,"shiftRelPosAlign:v"),x&&y.l(b,ga,Y,"shiftRelPosAlign:align"),b=Tp(b,c,d),Op(a,b[0],b[1],e,f)}function Op(a,b,c,d,e){if(x&&y.l(a,$o,Y,"shiftRelPos:v"),0!==b||0!==c)for(a=a.children;e>=d;d++){var f=a[d].ea;f.x+=b,f.y+=c}}function Mp(a,b,c,d){x&&(y.l(b,$o,Y,"recordMidPoints:v"),y.j(c,"number",Y,"recordMidPoints:x"),y.j(d,"number",Y,"recordMidPoints:y"));var e=b.parent;switch(a.gf){case Xo:for(a=b.cc;a.next();)b=a.value,b.fromVertex===e&&b.qq.q(c,d);break;case dp:for(a=b.Tb;a.next();)b=a.value,b.toVertex===e&&b.qq.q(c,d);break;default:y.m("Unhandled path value "+a.gf.toString())}}function Pp(a,b,c){var d,e;for(d=0;d<a.length;d++)e=a[d],e.x+=b,e.y+=c}function Np(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,o,p,r,s,t;if(x&&y.l(b,$o,Y,"mergeFringes:parent"),x&&y.l(c,$o,Y,"mergeFringes:child"),h=Dp(b),i=90===h||270===h,j=b.nodeSpacing,b=d,k=e,d=f,e=g,l=c.Mr,m=c.ds,g=c.Va,n=i?Math.max(e,g.height):Math.max(d,g.width),(l===q||h!==Dp(c))&&(l=Kp(a,2),m=Kp(a,2),i?(l[0].q(0,0),l[1].q(0,g.height),m[0].q(g.width,0),m[1].q(m[0].x,l[1].y)):(l[0].q(0,0),l[1].q(g.width,0),m[0].q(0,g.height),m[1].q(l[1].x,m[0].y))),i){if(c=d,d=9999999,!(k===q||2>k.length||l===q||2>l.length))for(f=e=0;e<k.length&&f<l.length;)h=k[e],o=l[f],i=o.x,p=o.y,i+=c,r=h,e+1<k.length&&(r=k[e+1]),s=o,o=s.x,s=s.y,f+1<l.length&&(s=l[f+1],o=s.x,s=s.y,o+=c),t=d,h.y===p?t=i-h.x:h.y>p&&h.y<s?t=i+(h.y-p)/(s-p)*(o-i)-h.x:p>h.y&&p<r.y&&(t=i-(h.x+(p-h.y)/(r.y-h.y)*(r.x-h.x))),d>t&&(d=t),r.y<=h.y?e++:p>=s?f++:(r.y<=s&&e++,s<=r.y&&f++);if(c-=d,c+=j,e=l,f=c,b===q||2>b.length||e===q||2>e.length)d=q;else{for(j=Kp(a,b.length+e.length),d=i=h=0;i<e.length&&e[i].y<b[0].y;)p=e[i++],j[d++].q(p.x+f,p.y);for(;h<b.length;)p=b[h++],j[d++].q(p.x,p.y);for(h=b[b.length-1].y;i<e.length&&e[i].y<=h;)i++;for(;i<e.length&&e[i].y>h;)p=e[i++],j[d++].q(p.x+f,p.y);for(e=Kp(a,d),h=0;d>h;h++)e[h].assign(j[h]);Up(a,j),d=e}if(i=m,p=c,k===q||2>k.length||i===q||2>i.length)e=q;else{for(j=Kp(a,k.length+i.length),f=r=e=0;e<k.length&&k[e].y<i[0].y;)h=k[e++],j[f++].q(h.x,h.y);for(;r<i.length;)h=i[r++],j[f++].q(h.x+p,h.y);for(i=i[i.length-1].y;e<k.length&&k[e].y<=i;)e++;for(;e<k.length&&k[e].y>i;)h=k[e++],j[f++].q(h.x,h.y);for(h=Kp(a,f),e=0;f>e;e++)h[e].assign(j[e]);Up(a,j),e=h}f=Math.max(0,c)+g.width,g=n}else{if(c=e,d=9999999,!(k===q||2>k.length||l===q||2>l.length))for(f=e=0;e<k.length&&f<l.length;)h=k[e],o=l[f],i=o.x,p=o.y,p+=c,r=h,e+1<k.length&&(r=k[e+1]),s=o,o=s.x,s=s.y,f+1<l.length&&(s=l[f+1],o=s.x,s=s.y,s+=c),t=d,h.x===i?t=p-h.y:h.x>i&&h.x<o?t=p+(h.x-i)/(o-i)*(s-p)-h.y:i>h.x&&i<r.x&&(t=p-(h.y+(i-h.x)/(r.x-h.x)*(r.y-h.y))),d>t&&(d=t),r.x<=h.x?e++:i>=o?f++:(r.x<=o&&e++,o<=r.x&&f++);if(c-=d,c+=j,e=l,f=c,b===q||2>b.length||e===q||2>e.length)d=q;else{for(j=Kp(a,b.length+e.length),d=i=h=0;i<e.length&&e[i].x<b[0].x;)p=e[i++],j[d++].q(p.x,p.y+f);for(;h<b.length;)p=b[h++],j[d++].q(p.x,p.y);for(h=b[b.length-1].x;i<e.length&&e[i].x<=h;)i++;for(;i<e.length&&e[i].x>h;)p=e[i++],j[d++].q(p.x,p.y+f);for(e=Kp(a,d),h=0;d>h;h++)e[h].assign(j[h]);Up(a,j),d=e}if(i=m,p=c,k===q||2>k.length||i===q||2>i.length)e=q;else{for(j=Kp(a,k.length+i.length),f=r=e=0;e<k.length&&k[e].x<i[0].x;)h=k[e++],j[f++].q(h.x,h.y);for(;r<i.length;)h=i[r++],j[f++].q(h.x,h.y+p);for(i=i[i.length-1].x;e<k.length&&k[e].x<=i;)e++;for(;e<k.length&&k[e].x>i;)h=k[e++],j[f++].q(h.x,h.y);for(h=Kp(a,f),e=0;f>e;e++)h[e].assign(j[e]);Up(a,j),e=h}f=n,g=Math.max(0,c)+g.height}return Up(a,b),Up(a,l),Up(a,k),Up(a,m),a=[],a[0]=c,a[1]=d,a[2]=e,a[3]=f,a[4]=g,a}function Kp(a,b){var c,d;if(a.Sq||(a.Sq=[]),c=a.Sq[b],c!==f&&(c=c.pop(),c!==f))return c;for(c=[],d=0;b>d;d++)c[d]=new A;return c}function Up(a,b){if(a.Sq){var c=b.length,d=a.Sq[c];d===f&&(d=[],a.Sq[c]=d),d.push(b)}}function cq(a,b,c,d){var e,f,g;if(b!==q)for(x&&y.l(b,$o,Y,"assignAbsolutePositions:v"),b.x=c,b.y=d,b=b.children,e=b.length,f=0;e>f;f++)g=b[f],cq(a,g,c+g.ea.x,d+g.ea.y)}function eq(a,b){if(b!==q){x&&y.l(b,$o,Y,"setPortSpotsTree:v"),a.setPortSpots(b);for(var c=b.children,d=c.length,e=0;d>e;e++)eq(a,c[e])}}function Dp(a){return a=a.angle,45>=a?0:135>=a?90:225>=a?180:315>=a?270:0}function Gp(a){var b,c,d;return x&&y.l(a,$o,Y,"computeLayerSpacing:v"),b=Dp(a),b=90===b||270===b,c=a.layerSpacing,0<a.layerSpacingParentOverlap&&(d=Math.min(1,a.layerSpacingParentOverlap),c-=b?a.height*d:a.width*d),c<(b?-a.height:-a.width)&&(c=b?-a.height:-a.width),c}function Hp(a){var b,c,d;return x&&y.l(a,$o,Y,"computeNodeIndent:v"),b=Dp(a),b=90===b||270===b,c=a.nodeIndent,0<a.nodeIndentPastParent&&(d=Math.min(1,a.nodeIndentPastParent),c+=b?a.width*d:a.height*d),c=Math.max(0,c)}function ap(){Rm.call(this)}function $o(){Vm.call(this),this.initialized=s,this.parent=q,this.children=[],this.maxGenerationCount=this.maxChildrenCount=this.descendantCount=this.level=0,this.comments=q,this.ea=new A(0,0),this.Va=new ha(0,0),this.Ia=new A(0,0),this.zo=this.yo=this.sH=s,this.ds=this.Mr=q,this.sorting=pp,this.comparer=an,this.angle=0,this.alignment=tp,this.nodeIndentPastParent=this.nodeIndent=0,this.nodeSpacing=20,this.layerSpacing=50,this.layerSpacingParentOverlap=0,this.compaction=Cp,this.breadthLimit=0,this.rowSpacing=25,this.commentSpacing=this.rowIndent=10,this.commentMargin=20,this.setsPortSpot=h,this.portSpot=Ib,this.setsChildPortSpot=h,this.childPortSpot=Ib}function fq(){Wm.call(this),this.qq=new A(0,0)}function gq(){this.Gm=[]}function dk(a){var c,d,e,g,i,j,k,l,m,n,b=new gq;if("string"==typeof a)c=(new DOMParser).parseFromString(a,"text/xml");else{if(!(a instanceof Document))return q;c=a.implementation.createDocument("http://www.w3.org/2000/svg","svg",q),c.appendChild(c.importNode(a.documentElement,h))}if(a=c.getElementsByTagName("svg"),0===a.length)return q;for(d=a[0],e=c.getElementsByTagName("linearGradient"),g=c.getElementsByTagName("radialGradient"),a=0;a<e.length;a++){for(i=e[a],j=ek(Hd,Kd,{start:dc,end:fc}),k=i.childNodes,l=0;l<k.length;l++)"stop"===k[l].tagName&&(m=k[l].getAttribute("stop-color"),n=k[l].getAttribute("offset"),-1!==n.indexOf("%")?j.addColorStop(.01*parseFloat(n),m):j.addColorStop(parseFloat(n),m));i=i.getAttribute("id"),"string"==typeof i&&(b["_brush"+i]=j)}for(a=0;a<g.length;a++){for(i=g[a],j=ek(Hd,Ld,{start:Sb,end:Sb}),k=i.childNodes,l=0;l<k.length;l++)"stop"===k[l].tagName&&(m=k[l].getAttribute("stop-color"),n=k[l].getAttribute("offset"),-1!==n.indexOf("%")?j.addColorStop(.01*parseFloat(n),m):j.addColorStop(parseFloat(n),m));i=i.getAttribute("id"),"string"==typeof i&&(b["_brush"+i]=j)}for(e=h;e;)for(e=s,g=c.getElementsByTagName("use"),a=0;a<g.length;a++)j=g[a],0===j.childNodes.length&&(i=j.href,i!==f&&(i=c.getElementById(i.baseVal.substring(1)),i!==q&&(i=i.cloneNode(h),i.removeAttribute("id"),k=parseFloat(j.getAttribute("x")),l=parseFloat(j.getAttribute("y")),isNaN(k)&&(k=0),isNaN(l)&&(l=0),m=j.getAttribute("transform"),m===q&&(m=""),j.setAttribute("transform",m+" translate("+k+","+l+")"),j.appendChild(i),"use"===i.tagName&&(e=h))));if(hq(b,d,q),0===b.Gm.length)return q;if(1===b.Gm.length)return b.Gm[0];for(c=new D,a=0;a<b.Gm.length;a++)c.add(b.Gm[a]);return c}function hq(a,b,c){var e,g,i,j,k,l,m,n,o,d=b.tagName;if("g"===d||"svg"===d||"use"===d||"symbol"===d)for(d=b.childNodes,e=0;e<d.length;e++)if(g=d[e],i=q,g.getAttribute!==f){switch(j=g.getAttribute("transform"),g.tagName){case"g":j===q?hq(a,g,q):(i=new D,hq(a,g,i));break;case"use":j===q?hq(a,g,q):(i=new D,hq(a,g,i));break;case"symbol":if("use"!==b.tagName)break;i=new D,hq(a,g,i),k=i,l=g,l.getAttribute("preserveAspectRatio"),l.getAttribute("viewBox"),k.scale=1;break;case"path":k=g,i=new V,k=k.getAttribute("d"),"string"==typeof k&&(i.rC=Gc(k));break;case"line":m=g,i=new V,k=parseFloat(m.getAttribute("x1")),l=parseFloat(m.getAttribute("y1")),n=parseFloat(m.getAttribute("x2")),m=parseFloat(m.getAttribute("y2")),isNaN(k)&&(k=0),isNaN(l)&&(l=0),isNaN(n)&&(n=0),isNaN(m)&&(m=0),o=new nc(wc),i.position=new A(Math.min(k,n),Math.min(l,m)),(n-k)/(m-l)>0?(o.ha=0,o.ia=0,o.D=Math.abs(n-k),o.F=Math.abs(m-l)):(o.ha=0,o.ia=Math.abs(m-l),o.D=Math.abs(n-k),o.F=0),i.Oc=o;break;case"circle":n=g,i=new V,k=parseFloat(n.getAttribute("r")),l=parseFloat(n.getAttribute("cx")),n=parseFloat(n.getAttribute("cy")),isNaN(k)?i=q:(isNaN(l)&&(l=0),isNaN(n)&&(n=0),m=new nc(yc),m.ha=0,m.ia=0,m.D=2*k,m.F=2*k,i.position=new A(l-k,n-k),i.Oc=m);break;case"ellipse":m=g,i=new V,k=parseFloat(m.getAttribute("rx")),l=parseFloat(m.getAttribute("ry")),n=parseFloat(m.getAttribute("cx")),m=parseFloat(m.getAttribute("cy")),isNaN(n)&&(n=0),isNaN(m)&&(m=0),isNaN(k)||isNaN(l)?i=q:(o=new nc(yc),o.ha=0,o.ia=0,o.D=2*k,o.F=2*l,i.position=new A(n-k,m-l),i.Oc=o);break;case"rect":m=g,i=new V,k=parseFloat(m.getAttribute("height")),l=parseFloat(m.getAttribute("width")),n=parseFloat(m.getAttribute("x")),m=parseFloat(m.getAttribute("y")),isNaN(k)||isNaN(l)?i=q:(isNaN(n)&&(n=0),isNaN(m)&&(m=0),o=new nc(xc),o.ha=0,o.ia=0,o.D=l,o.F=k,i.position=new A(n,m),i.Oc=o);break;case"polygon":i=iq(g);break;case"polyline":i=iq(g)}if(i!==q){if(i instanceof V&&(k=parseFloat(jq(a,g,"stroke-width")),isNaN(k)||(i.jb=k),k=jq(a,g,"stroke-linecap"),k!==q&&(i.cE=k),k=jq(a,g,"fill"),k!==q&&-1!==k.indexOf("url")?(k=k.substring(k.indexOf("#")+1,k.length-1),k=a["_brush"+k],i.fill=k instanceof Hd?k:"black"):i.fill=k===q?"black":"none"===k?q:k,g=jq(a,g,"stroke"),g!==q&&-1!==g.indexOf("url")?(k=g.substring(g.indexOf("#")+1,g.length-1),k=a["_brush"+k],i.stroke=k instanceof Hd?k:"black"):i.stroke="none"===g?q:g,i.Hy=h),j!==q){for(j=j.split(")"),k=h,g=0;g<j.length;g++)/\(.*[^0-9\.,\s-]/.test(j[g])&&(k=s),/\(.*[0-9]-[0-9]/.test(j[g])&&(k=s);
if(k)for(g=j.length-1;g>=0;g--)if(l=j[g],""!==l)switch(n=l.indexOf("("),k=l.substring(0,n).replace(/\s*/,""),n=l.substring(n+1).split(/\s*[\s,]\s*/),k){case"rotate":kq(a,i,n);break;case"translate":k=i,l=parseFloat(n[0]),n=parseFloat(n[1]),isNaN(l)&&isNaN(n)||(m=k.position.copy(),isNaN(m.x)&&(m.x=0),isNaN(m.y)&&(m.y=0),k.position=new A(l+m.x,n+m.y));break;case"scale":lq(a,i,n);break;case"skewX":mq(a,i,parseFloat(n[0])*Math.PI/180);break;case"skewY":nq(a,i,parseFloat(n[0])*Math.PI/180);break;case"matrix":oq(a,i,n)}}if(i instanceof D){for(j=i.elements.k,k=g=0,l=i.position.copy(),isNaN(l.x)&&(l.x=0),isNaN(l.y)&&(l.y=0);j.next();)n=j.value.position.copy(),isNaN(n.x)&&(n.x=0),isNaN(n.y)&&(n.y=0),n.x<g&&(g=n.x),n.y<k&&(k=n.y);l.x+=g,l.y+=k,i.position=l}c===q?a.Gm.push(i):c.add(i)}}}function oq(a,b,c){var j,k,d=parseFloat(c[0]),e=parseFloat(c[1]),f=parseFloat(c[2]),g=parseFloat(c[3]),h=parseFloat(c[4]),i=parseFloat(c[5]);if(!isNaN(d+e+f+g+h+i))if(j=b.position.copy(),isNaN(j.x)&&(j.x=0),isNaN(j.y)&&(j.y=0),b instanceof V)c=b.Oc.copy(),c.type===xc?c=a.Zq(c):c.type===yc?c=pq(c):c.type===wc&&(c.type=oc,a=new pc(c.ha,c.ia),k=new hd(Ec,c.D,c.F),a.Ca.add(k),c.fb.add(a)),c.offset(j.x,j.y),c.transform(d,e,f,g,h-j.x,i-j.y),a=c.normalize(),b.Oc=c,j.x-=a.x,j.y-=a.y,b.position=j;else{for(b=b.elements.k;b.next();)d=b.value.position.copy(),d.x+=j.x,d.y+=j.y,b.value.position=d;for(b.reset();b.next();)oq(a,b.value,c);for(b.reset();b.next();)d=b.value.position.copy(),d.x-=j.x,d.y-=j.y,b.value.position=d}}function kq(a,b,c){var g,h,i,j,k,d=parseFloat(c[0]),e=parseFloat(c[1]),f=parseFloat(c[2]);if(isNaN(e)&&(e=0),isNaN(f)&&(f=0),!isNaN(d))if(g=d*Math.PI/180,h=b.position.copy(),isNaN(h.x)&&(h.x=0),isNaN(h.y)&&(h.y=0),b instanceof V)c=b.Oc.copy(),c.type===yc?c=pq(c):c.type===xc&&(c=a.Zq(c)),c.type===oc?(c.rotate(d,e-h.x,f-h.y),f=c.normalize(),b.Oc=c,h.x-=f.x,h.y-=f.y,b.position=h):(d=c.ha-e+h.x,i=c.ia-f+h.y,j=c.D-e+h.x,k=c.F-f+h.y,a=d*Math.cos(g)-i*Math.sin(g)+e-h.x,d=i*Math.cos(g)+d*Math.sin(g)+f-h.y,e=j*Math.cos(g)-k*Math.sin(g)+e-h.x,f=k*Math.cos(g)+j*Math.sin(g)+f-h.y,j=Math.min(a,e),k=Math.min(d,f),c.ha=a-j,c.ia=d-k,c.D=e-j,c.F=f-k,h.x+=j,h.y+=k,b.position=h,b.Oc=c),b.fill instanceof Hd&&(h=b.fill.copy(),c=Math.atan((.5-h.start.y)/(.5-h.start.x)),c+=g,h.start=new J((1-Math.cos(c))/2,(1-Math.sin(c))/2),h.end=new J((1+Math.cos(c))/2,(1+Math.sin(c))/2),b.fill=h),b.stroke instanceof Hd&&(h=b.stroke.copy(),c=Math.atan((.5-h.start.y)/(.5-h.start.x)),c+=g,h.start=new J((1-Math.cos(c))/2,(1-Math.sin(c))/2),h.end=new J((1+Math.cos(c))/2,(1+Math.sin(c))/2),b.stroke=h);else{for(b=b.elements.k;b.next();)g=b.value.position.copy(),g.x+=h.x,g.y+=h.y,b.value.position=g;for(b.reset();b.next();)kq(a,b.value,c);for(b.reset();b.next();)g=b.value.position.copy(),g.x-=h.x,g.y-=h.y,b.value.position=g}}function lq(a,b,c){var f,d=parseFloat(c[0]),e=parseFloat(c[1]);if(!isNaN(d))if(isNaN(e)&&(e=d),f=b.position.copy(),isNaN(f.x)&&(f.x=0),isNaN(f.y)&&(f.y=0),b instanceof V)a=b.Oc.copy(),f.x*=d,f.y*=e,b.position=f,a.scale(d,e),b.Oc=a;else{for(b=b.elements.k;b.next();)d=b.value.position.copy(),d.x+=f.x,d.y+=f.y,b.value.position=d;for(b.reset();b.next();)lq(a,b.value,c);for(b.reset();b.next();)d=b.value.position.copy(),d.x-=f.x,d.y-=f.y,b.value.position=d}}function mq(a,b,c){var d,e,f;if(!isNaN(c))if(d=b.position.copy(),isNaN(d.x)&&(d.x=0),isNaN(d.y)&&(d.y=0),b instanceof V)e=b.Oc.copy(),e.type===xc?e=a.Zq(e):e.type===yc?e=pq(e):e.type===wc&&(e.type=oc,a=new pc(e.ha,e.ia),f=new hd(Ec,e.D,e.F),a.Ca.add(f),e.fb.add(a)),e.offset(d.x,d.y),e.transform(1,0,Math.tan(c),1,-d.x,-d.y),c=e.normalize(),b.Oc=e,d.x-=c.x,d.y-=c.y,b.position=d;else{for(b=b.elements.k;b.next();)e=b.value.position.copy(),e.x+=d.x,e.y+=d.y,b.value.position=e;for(b.reset();b.next();)mq(a,b.value,c);for(b.reset();b.next();)e=b.value.position.copy(),e.x-=d.x,e.y-=d.y,b.value.position=e}}function nq(a,b,c){var d,e,f;if(!isNaN(c))if(d=b.position.copy(),isNaN(d.x)&&(d.x=0),isNaN(d.y)&&(d.y=0),b instanceof V)e=b.Oc.copy(),e.type===xc?e=a.Zq(e):e.type===yc?e=pq(e):e.type===wc&&(e.type=oc,a=new pc(e.ha,e.ia),f=new hd(Ec,e.D,e.F),a.Ca.add(f),e.fb.add(a)),e.offset(d.x,d.y),e.transform(1,Math.tan(c),0,1,-d.x,-d.y),c=e.normalize(),b.Oc=e,d.x-=c.x,d.y-=c.y,b.position=d;else{for(b=b.elements.k;b.next();)e=b.value.position.copy(),e.x+=d.x,e.y+=d.y,b.value.position=e;for(b.reset();b.next();)nq(a,b.value,c);for(b.reset();b.next();)e=b.value.position.copy(),e.x-=d.x,e.y-=d.y,b.value.position=e}}function iq(a){var c,d,e,g,k,l,m,n,b=s;if("polygon"===a.tagName)b=h;else if("polyline"!==a.tagName)return q;if(c=new V,d=a.getAttribute("points"),a=new nc,e=new F(pc),g=d.split(/\s*[\s,]\s*/),4>g.length)return q;for(d=new F(hd),n=1;n<g.length;n+=2){if(l=eval(g[n-1]),m=eval(g[n]),"number"!=typeof l||isNaN(l)||"number"!=typeof m||isNaN(m))return q;1===n?k=new pc(l,m):d.add(new hd(Ec,l,m))}return b&&(b=new hd(Ec,k.ha,k.ia),b.close(),d.add(b)),k.Ca=d,e.add(k),a.fb=e,k=a.normalize(),c.position=new A(-k.x,-k.y),c.Oc=a,c}function jq(a,b,c){var d=b.getAttribute(c);return"string"!=typeof d&&(d=b.style[c]),"string"!=typeof d||""===d?(b=b.parentNode,"g"===b.tagName||"use"===b.tagName?jq(a,b,c):q):d}function pq(a){var b=a.ha,c=a.ia,d=a.D,e=a.F,f=Math.abs(d-b)/2,g=Math.abs(e-c)/2,b=Math.min(b,d)+f,c=Math.min(c,e)+g;return new A,e=new pc(b,c-g),d=new hd(Xc),d.ib=b+H.ra*f,d.Ab=c-g,d.Rd=b+f,d.Sd=c-H.ra*g,d.D=b+f,d.F=c,e.Ca.add(d),d=new hd(Xc),d.ib=b+f,d.Ab=c+H.ra*g,d.Rd=b+H.ra*f,d.Sd=c+g,d.D=b,d.F=c+g,e.Ca.add(d),d=new hd(Xc),d.ib=b-H.ra*f,d.Ab=c+g,d.Rd=b-f,d.Sd=c+H.ra*g,d.D=b-f,d.F=c,e.Ca.add(d),d=new hd(Xc),d.ib=b-f,d.Ab=c-H.ra*g,d.Rd=b-H.ra*f,d.Sd=c-g,d.D=b,d.F=c-g,e.Ca.add(d),a.type=oc,a.fb.add(e),a}var da,x,y,ua,xa,ya,Ua,Va,Ya,kb,vb,Hb,Ib,Mb,Ob,Rb,Sb,Vb,Wb,Zb,$b,ac,bc,cc,dc,fc,gc,hc,ic,jc,kc,H,wc,xc,yc,oc,Fc,Gc,Lc,Wc,Ec,Xc,cd,dd,ed,nd,sd,td,ud,le,me,vd,lf,df,ef,eg,fg,gg,lg,sg,tg,ug,Ug,Vg,Wg,Xg,Sg,Tg,Yg,Zg,$g,ah,bh,$e,Re,Le,Sh,Th,Nf,$f,bg,cg,Of,Qf,Jd,Kd,Ld,bj,dj,Bg,ej,fj,qc,Cg,Dg,ek,fk,Fg,uh,zg,Ch,Pj,Fj,Gj,ig,Jh,ll,Zk,Pk,ul,vl,tl,Bl,ui,zi,Rj,Sj,Qi,Cl,Pl,Ql,hj,ok,ik,xf,cj,vg,jk,kk,lk,mk,nk,sl,Zl,$l,am,bm,cm,dm,em,Am,Bm,ym,Jm,an,bn,xk,wk,uk,vk,sk,tk,qk,rk,Kk,Jk,Ik,Lk,Gk,Hk,Ek,Fk,Bk,Ck,zk,Ak,Dk,Nk,Mk,In,On,Jn,uo,wo,Kn,Co,Ao,Go,Ln,Ho,Io,Jo,Lo,Mn,Wo,Xo,dp,pp,qp,rp,sp,Qp,tp,Ep,Fp,vp,kp,wp,xp,Ap,Cp,Yo,op,np,mp,Zo,dq,cp,f=void 0,h=!0,q=null,s=!1,fa={};if(document.createElement("canvas").getContext===f)throw window.console&&window.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."),Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");if(!Object.prototype.__defineGetter__&&!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");Object.prototype.__defineGetter__&&!Object.defineProperty&&(Object.defineProperty=function(a,b,c){c.get&&a.__defineGetter__(b,c.get),c.set&&a.__defineSetter__(b,c.set)}),Object.prototype.__lookupGetter__&&!Object.getOwnPropertyDescriptor&&(Object.getOwnPropertyDescriptor=function(a,b){return{get:a.__lookupGetter__(b),set:a.__lookupSetter__(b)}}),Object.getPrototypeOf||(Object.getPrototypeOf=function(a){return a.__proto__}),Object.isFrozen||(Object.isFrozen=function(a){return a.WE===h}),Object.freeze||(Object.freeze=function(a){a.WE=h}),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return f.apply(a,e.concat(d.call(arguments)))}function c(){}var d=Array.prototype.slice,e=d.call(arguments,1),f=this;return c.prototype=this.prototype,b.prototype=new c,b}),function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(8,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),x={ky:s,oI:s,kD:s,yC:s,HH:s,trace:aa(),GF:s,assert:s,ZH:q,eI:aa(),gI:aa(),fI:aa(),dI:aa(),lI:aa(),hI:aa(),jI:aa(),iI:aa(),cI:s,mJ:s,jJ:s,kJ:s,lG:s,kI:aa()},x=q,fa.Debug=q,y={rh:Object.freeze([]),zy:{},mC:0,DG:{},xv:document.createElement("canvas").getContext("2d"),yv:"",Fz:[],nv:q,eC:[],zz:"ontouchstart"in window,eE:"ongesturestart"in window,XB:s,or:q,pr:q,nr:q,zu:"",zE:s,CE:s,BE:s,AE:s,YB:q,Eo:s,xE:s,yE:s,m:function(a){throw x&&x.GF&&alert(a),Error(a)},K:function(a,b){if(a.$a){var c="The object is frozen, so its properties cannot be set: "+a.toString();b!==f&&(c+="  to value: "+b),y.m(c)}},l:function(a,b,c,d){a instanceof b||(c=y.dh(c),d!==f&&(c+="."+d),y.Kb(a,b,c))},j:function(a,b,c,d){typeof a!==b&&(c=y.dh(c),d!==f&&(c+="."+d),y.Kb(a,b,c))},p:function(a,b,c){isFinite(a)||(b=y.dh(b),c!==f&&(b+="."+c),y.m(b+" must be a real number and not NaN or Infinity: "+a))},rb:function(a,b,c,d){a instanceof ga&&a.re===b||(c=y.dh(c),d!==f&&(c+="."+d),y.Kb(a,"a constant of class "+y.bh(b),c))},Kb:function(a,b,c,d){b=y.dh(b),c=y.dh(c),d!==f&&(c+="."+d),y.m(c+" value is not an instance of "+b+": "+a)},ka:function(a,b,c,d){c=y.dh(c),d!==f&&(c+="."+d),y.m(c+" is not in the range "+b+": "+a)},trace:function(a){window&&window.console&&window.console.log(a),x&&x.HH&&y.m(a)},sb:function(a){return"object"==typeof a&&a!==q},isArray:function(a){return Array.isArray(a)||a instanceof NodeList||a instanceof HTMLCollection},mr:function(a,b,c){y.isArray(a)||y.Kb(a,"Array or NodeList or HTMLCollection",b,c)},Sb:function(a){return a.length},Hb:function(a,b){return a[b]},EB:function(a,b,c){Array.isArray(a)?a[b]=c:y.m("Cannot replace an object in an HTMLCollection or NodeList at "+b)},iy:function(a,b){if(Array.isArray(a))return a.indexOf(b);for(var c=a.length,d=0;c>d;d++)if(a[d]===b)return d;return-1},Wh:function(a,b,c){Array.isArray(a)?b>=a.length?a.push(c):a.splice(b,0,c):y.m("Cannot insert an object into an HTMLCollection or NodeList: "+c+" at "+b)},Xh:function(a,b){Array.isArray(a)?b>=a.length?a.pop():a.splice(b,1):y.m("Cannot remove an object from an HTMLCollection or NodeList at "+b)},ew:[],M:function(){var a=y.ew.pop();return a===f?new A:a},dc:function(a,b){var c=y.ew.pop();return c===f?new A(a,b):(c.x=a,c.y=b,c)},B:function(a){y.ew.push(a)},Tz:[],Nk:function(){var a=y.Tz.pop();return a===f?new ha:a},qj:function(a){y.Tz.push(a)},fw:[],df:function(){var a=y.fw.pop();return a===f?new B:a},xj:function(a,b,c,d){var e=y.fw.pop();return e===f?new B(a,b,c,d):(e.x=a,e.y=b,e.width=c,e.height=d,e)},Bc:function(a){y.fw.push(a)},Uz:[],xg:function(){var a=y.Uz.pop();return a===f?new ka:a},ye:function(a){y.Uz.push(a)},gw:q,u:function(){var a=y.gw;return a!==q?(y.gw=q,a):new la},v:function(a){a.reset(),y.gw=a},Sz:[],tb:function(){var a=y.Sz.pop();return a===f?[]:a},ya:function(a){a.length=0,y.Sz.push(a)},Wz:1,lc:function(a){a.__gohashid=y.Wz++},Dr:function(a){var b=a.__gohashid;return b===f&&(b=y.Wz++,a.__gohashid=b),b},ac:function(a){return a.__gohashid},g:function(a,b,c){"name"!==b&&"length"!==b&&(a[b]=c)},ba:function(a,b){b.qw=a,fa[a]=b},Ka:function(a,b){function c(){}c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a},defineProperty:function(a,b,c,d,e){var g,h;y.j(a,"function","Util.defineProperty:classfunc"),y.j(b,"object","Util.defineProperty:propobj"),y.j(c,"function","Util.defineProperty:getter"),y.j(d,"function","Util.defineProperty:setter");for(g in b){if(b=b[g],c={get:c,set:d},e!==f)for(h in e)c[h]=e[h];Object.defineProperty(a.prototype,g,c),e=Object.getOwnPropertyDescriptor(a.prototype,g),b&&e&&Object.defineProperty(a.prototype,b,e);break}},A:function(a,b,c,d){var e,g,h;y.j(a,"function","Util.defineReadOnlyProperty:classfunc"),y.j(b,"object","Util.defineReadOnlyProperty:propobj"),y.j(c,"function","Util.defineReadOnlyProperty:getter");for(e in b){if(g=b[e],b={get:c,set:function(a){y.m('The property "'+g+'" is read-only and cannot be set to '+a)}},d!==f)for(h in d)b[h]=d[h];Object.defineProperty(a.prototype,e,b),d=Object.getOwnPropertyDescriptor(a.prototype,e),g&&d&&Object.defineProperty(a.prototype,g,d);break}},Md:function(a,b){for(var c in b)b[c]=h;a.prototype.ZE=b},dh:function(a){return a===f?"":"string"==typeof a?a:"function"==typeof a?y.bh(a):a===q?"*":""},bh:function(a){if("function"==typeof a){if(a.qw)return a.qw;if(a.name)return a.name;var b=a.toString(),c=b.indexOf("(");if(b=b.substring(9,c).trim())return a.qw=b}else if("object"==typeof a&&a.constructor)return y.bh(a.constructor);return typeof a},w:function(a,b,c){y.j(a,"function","Util.defineEnumValue:classfunc"),y.j(b,"string","Util.defineEnumValue:name"),y.j(c,"number","Util.defineEnumValue:num"),c=new ga(a,b,c),Object.freeze(c),a[b]=c;var d=a.Vz;return d||(d=new ma("string",ga),a.Vz=d),d.add(b,c),c},Il:function(a,b){if(!b)return q;y.j(a,"function","Util.findEnumValueForName:classfunc"),y.j(b,"string","Util.findEnumValueForName:name");var c=a.Vz;return c?c.wa(b):q},OF:function(a){var f,g,i,e={};for(f in a){for(g=s,i=1;i<arguments.length;i++)if(arguments[i]===f){g=h;break}g||(e[f]=a[f])}return e},Xa:function(a,b){if(!a||!b)return q;var c=f;try{"function"==typeof b?c=b(a):"function"==typeof a.getAttribute?(c=a.getAttribute(b),c===q&&(c=f)):c=a[b]}catch(d){x&&y.trace("property get error: "+d.toString())}return c},Oa:function(a,b,c){if(a&&b)try{"function"==typeof b?b(a,c):"function"==typeof a.setAttribute?a.setAttribute(b,c):a[b]=c}catch(d){x&&y.trace("property set error: "+d.toString())}},tv:function(a,b){var c,f,d,e,g,h,i,j;y.j(a,"object","Setting properties requires Objects as arguments"),y.j(b,"object","Setting properties requires Objects as arguments"),c=x,c||(x=y),d=a instanceof D,e=a instanceof E;for(f in b)g=a,h=f,(d||e)&&(i=f.indexOf("."),i>0&&(j=f.substring(0,i),d?g=a.xe(j):(g=a[j])||(g=a.pb[j]),g?h=f.substr(i+1):y.m("Unable to find object named: "+j+" in "+a.toString()+" when trying to set property: "+f))),"_"!==h[0]&&!y.Uu(g,h)&&(e&&y.Uu(a.pb,h)?g=a.pb:y.m('Trying to set undefined property "'+h+'" on object: '+g.toString())),g[h]=b[f],"_"===h[0]&&(i=g.Wk,i||(i=[],g.Wk=i),i.push(h));return x=c,a},Uu:function(a,b){var c,d;for(c=Object.getPrototypeOf(a);c&&c!==Function;){if(c.hasOwnProperty(b))return h;if(d=c.ZE,d&&d[b])return h;c=Object.getPrototypeOf(c)}return s},JB:function(a,b){var d,c,e;if(!y.sb(b)||b instanceof Element||b instanceof CanvasRenderingContext2D)return"";c="";for(d in b)"string"!=typeof d?(""===c&&(c=b+"\n"),c+="  "+d+" is not a string property\n"):"_"===d.charAt(0)||2>=d.length||(e=y.Xa(b,d),e!==q&&"function"!=typeof e&&!y.Uu(b,d)&&(""===c&&(c=b+"\n"),c+='  unknown property "'+d+'" has value: '+e+" at "+a+"\n"));return c},yu:function(a,b){var c,d;if(b&&"number"!=typeof b&&"string"!=typeof b&&"boolean"!=typeof b&&"function"!=typeof b)if(y.ac(b)!==f){if(!y.Vt.contains(b))if(y.Vt.add(b),y.wt.add(y.JB(a,b)),b instanceof F||b instanceof na||b instanceof ma)for(c=b.k;c.next();)y.yu(a+"["+c.key+"]",c.value);else for(c in b)if(d=y.Xa(b,c),d!==f&&d!==q&&y.sb(d)&&"_ownProperties"!==c){if(b instanceof oa){if("_lines"===c)continue}else if(b instanceof D){if("data"===c||"_data"===c)continue;if("itemArray"===c||"_itemArray"===c)continue}else if(!(b instanceof E))if(b instanceof pa){if("archetypeGroupData"===c||"_archetypeGroupData"===c)continue}else if(b instanceof qa){if("archetypeLinkData"===c||"_archetypeLinkData"===c)continue;if("archetypeLabelNodeData"===c||"_archetypeLabelNodeData"===c)continue}else if(b instanceof ra){if("archetypeNodeData"===c||"_archetypeNodeData"===c)continue}else if(b instanceof G){if("nodeDataArray"===c||"_nodeDataArray"===c)continue;if("linkDataArray"===c||"_linkDataArray"===c||"_linkDataSet"===c)continue;if("_mapKeyNodeData"===c||"_delayedNodeReferences"===c)continue}y.yu(a+"."+c,d)}}else if(Array.isArray(b))for(c=0;c<b.length;c++)y.yu(a+"["+c+"]",b[c]);else y.wt.add(y.JB(a,b))},JF:function(a){return y.Vt===f?y.Vt=new na:y.Vt.clear(),y.wt=new sa,y.yu("",a),a=y.wt.toString(),y.wt=q,a},jH:function(a){var b,c,e,d,f,g;for(b=[],c=0;256>c;c++)b[c]=c;for(d=0,c=0;256>c;c++)d=(d+b[c]+119)%256,e=b[c],b[c]=b[d],b[d]=e;for(d=c=0,f="",g=0;g<a.length;g++)c=(c+1)%256,d=(d+b[c])%256,e=b[c],b[c]=b[d],b[d]=e,f+=String.fromCharCode(a.charCodeAt(g)^b[(b[c]+b[d])%256]);return f},CG:function(a){var b,c,d,e;for(b=[],c=0;256>c;c++)b["0123456789abcdef".charAt(c>>4)+"0123456789abcdef".charAt(15&c)]=String.fromCharCode(c);for(a.length%2&&(a="0"+a),d=[],e=0,c=0;c<a.length;c+=2)d[e++]=b[a.substr(c,2)];return a=d.join(""),""===a?"0":a},Sa:function(a){return y.jH(y.CG(a))},Qk:q,by:"7da71ca0ad381e90",KF:"@COLOR1",LF:"@COLOR2"},ua=y,xa=document.createElement("canvas"),ya=xa.getContext("2d"),ua.Qk=xa,ga.prototype.toString=function(){return y.bh(this.aA)+"."+this.Gb},y.A(ga,{re:"classType"},w("aA")),y.A(ga,{name:"name"},w("Gb")),y.A(ga,{value:"value"},w("fF")),sa.prototype.toString=function(){return this.$z.join("")},sa.prototype.add=function(a){a&&this.$z.push(a)},y.A(Ca,{k:"iterator"},function(){return this}),Ca.prototype.reset=Ca.prototype.reset=aa(),Ca.prototype.next=Ca.prototype.next=ca(s),Ca.prototype.first=Ca.prototype.ob=ca(q),y.A(Ca,{count:"count"},ca(0)),Ca.prototype.dg=aa(),Ca.prototype.toString=ca("EmptyIterator"),y.Zf=new Ca,y.Md(Da,{key:h,value:h}),y.A(Da,{k:"iterator"},function(){return this}),Da.prototype.reset=Da.prototype.reset=function(){this.key=-1},Da.prototype.next=Da.prototype.next=function(){return-1===this.key?(this.key=0,h):s},Da.prototype.first=Da.prototype.ob=function(){return this.key=0,this.value},y.A(Da,{count:"count"},ca(1)),Da.prototype.dg=function(){this.value=q},Da.prototype.toString=function(){return"SingletonIterator("+this.value+")"},y.Md(Ea,{key:h,value:h}),y.A(Ea,{k:"iterator"},function(){return this}),y.g(Ea,"predicate",Ea.prototype.Hk),y.defineProperty(Ea,{Hk:"predicate"},w("bn"),ba("bn")),Ea.prototype.reset=Ea.prototype.reset=function(){var a=this.jf;a.Lg=q,this.Ya=a.Lb,this.Vd=-1},Ea.prototype.next=Ea.prototype.next=function(){var b,c,d,e,a=this.jf;if(a.Lb!==this.Ya&&y.m("the List has been modified during iteration"),a=a.n,b=a.length,c=++this.Vd,d=this.bn,d!==q)for(;b>c;){if(e=a[c],d(e))return this.key=this.Vd=c,this.value=e,h;c++}else{if(b>c)return this.key=c,this.value=a[c],h;this.dg()}return s},Ea.prototype.first=Ea.prototype.ob=function(){var b,c,d,e,a=this.jf;if(this.Ya=a.Lb,this.Vd=0,a=a.n,b=a.length,c=this.bn,c!==q){for(d=0;b>d;){if(e=a[d],c(e))return this.key=this.Vd=d,this.value=e;d++}return q}return b>0?(e=a[0],this.key=0,this.value=e):q},y.A(Ea,{count:"count"},function(){var b,c,d,e,a=this.bn;if(a!==q){for(b=0,c=this.jf.n,d=c.length,e=0;d>e;e++)a(c[e])&&b++;return b}return this.jf.n.length}),Ea.prototype.dg=function(){this.key=-1,this.value=q,this.Ya=-1,this.bn=q,this.jf.Lg=this},Ea.prototype.toString=function(){return"ListIterator@"+this.Vd+"/"+this.jf.count},y.Md(Ga,{key:h,value:h}),y.A(Ga,{k:"iterator"},function(){return this}),Ga.prototype.reset=Ga.prototype.reset=function(){var a=this.jf;a.ax=q,this.Ya=a.Lb,this.Vd=a.n.length},Ga.prototype.next=Ga.prototype.next=function(){var b,a=this.jf;return a.Lb!==this.Ya&&y.m("the List has been modified during iteration"),b=--this.Vd,b>=0?(this.key=b,this.value=a.n[b],h):(this.dg(),s)},Ga.prototype.first=Ga.prototype.ob=function(){var b,a=this.jf;return this.Ya=a.Lb,b=a.n,this.Vd=a=b.length-1,a>=0?(b=b[a],this.key=a,this.value=b):q},y.A(Ga,{count:"count"},function(){return this.jf.n.length}),Ga.prototype.dg=function(){this.key=-1,this.value=q,this.Ya=-1,this.jf.ax=this},Ga.prototype.toString=function(){return"ListIteratorBackwards("+this.Vd+"/"+this.jf.count+")"},y.ba("List",F),F.prototype.$f=function(a){this.Y!==q&&("string"==typeof this.Y?(typeof a!==this.Y||a===q)&&y.Kb(a,this.Y):a instanceof this.Y||y.Kb(a,this.Y))},F.prototype.rd=function(){var a=this.Lb;a++,a>999999999&&(a=0),this.Lb=a},F.prototype.freeze=F.prototype.freeze=function(){return this.$a=h,this},F.prototype.thaw=F.prototype.Pa=function(){return this.$a=s,this},F.prototype.toString=function(){return"List("+y.dh(this.Y)+")#"+y.ac(this)},F.prototype.add=F.prototype.add=function(a){a!==q&&(x&&this.$f(a),y.K(this,a),this.n.push(a),this.rd())},F.prototype.addAll=F.prototype.Me=function(a){var b,c,d,e;if(a===q)return this;if(y.K(this),b=this.n,y.isArray(a))for(c=y.Sb(a),d=0;c>d;d++)e=y.Hb(a,d),x&&this.$f(e),b.push(e);else for(a=a.k;a.next();)e=a.value,x&&this.$f(e),b.push(e);return this.rd(),this},F.prototype.clear=F.prototype.clear=function(){y.K(this),this.n.length=0,this.rd()},F.prototype.contains=F.prototype.contains=function(a){return a===q?s:(x&&this.$f(a),-1!==this.n.indexOf(a))},F.prototype.indexOf=F.prototype.indexOf=function(a){return a===q?-1:(x&&this.$f(a),this.n.indexOf(a))},F.prototype.elt=F.prototype.sa=function(a){x&&y.p(a,F,"elt:i");var b=this.n;return(0>a||a>=b.length)&&y.ka(a,"0 <= i < length",F,"elt:i"),b[a]},F.prototype.setElt=F.prototype.Uf=function(a,b){x&&(this.$f(b),y.p(a,F,"setElt:i"));var c=this.n;(0>a||a>=c.length)&&y.ka(a,"0 <= i < length",F,"setElt:i"),y.K(this,a),c[a]=b},F.prototype.first=F.prototype.ob=function(){var a=this.n;return 0===a.length?q:a[0]},F.prototype.insertAt=F.prototype.wd=function(a,b){x&&(this.$f(b),y.p(a,F,"insertAt:i")),0>a&&y.ka(a,">= 0",F,"insertAt:i"),y.K(this,a);var c=this.n;return a>=c.length?c.push(b):c.splice(a,0,b),this.rd(),h},F.prototype.remove=F.prototype.remove=function(a){if(a===q)return s;x&&this.$f(a),y.K(this,a);var b=this.n;return a=b.indexOf(a),-1===a?s:(a===b.length-1?b.pop():b.splice(a,1),this.rd(),h)},F.prototype.removeAt=F.prototype.kd=function(a){x&&y.p(a,F,"removeAt:i");var b=this.n;(0>a||a>=b.length)&&y.ka(a,"0 <= i < length",F,"removeAt:i"),y.K(this,a),a===b.length-1?b.pop():b.splice(a,1),this.rd()},F.prototype.removeRange=F.prototype.removeRange=function(a,b){var c,d;x&&(y.p(a,F,"removeRange:from"),y.p(b,F,"removeRange:to")),c=this.n,(0>a||a>=c.length)&&y.ka(a,"0 <= from < length",F,"elt:from"),(0>b||b>=c.length)&&y.ka(b,"0 <= to < length",F,"elt:to"),y.K(this,a),d=c.slice((b||a)+1||c.length),c.length=0>a?c.length+a:a,c.push.apply(c,d),this.rd()},F.prototype.copy=function(){for(var a=new F(this.Y),b=this.n,c=this.count,d=0;c>d;d++)a.add(b[d]);return a},F.prototype.toArray=F.prototype.Ee=function(){for(var a=this.n,b=this.count,c=Array(b),d=0;b>d;d++)c[d]=a[d];return c},F.prototype.toSet=F.prototype.FH=function(){for(var a=new na(this.Y),b=this.n,c=this.count,d=0;c>d;d++)a.add(b[d]);return a},F.prototype.sort=F.prototype.sort=function(a){return x&&y.j(a,"function",F,"sort:sortfunc"),y.K(this),this.n.sort(a),this.rd(),this},F.prototype.sortRange=F.prototype.Bo=function(a,b,c){var g,d=this.n,e=d.length;if(b===f&&(b=0),c===f&&(c=e),x&&(y.j(a,"function",F,"sortRange:sortfunc"),y.p(b,F,"sortRange:from"),y.p(c,F,"sortRange:to")),y.K(this),g=c-b,1>=g)return this;if((0>b||b>=e-1)&&y.ka(b,"0 <= from < length",F,"sortRange:from"),2===g)return c=d[b],e=d[b+1],0<a(c,e)&&(d[b]=e,d[b+1]=c,this.rd()),this;if(0===b)if(c>=e)d.sort(a);else for(g=d.slice(0,c),g.sort(a),a=0;c>a;a++)d[a]=g[a];else if(c>=e)for(g=d.slice(b),g.sort(a),a=b;e>a;a++)d[a]=g[a-b];else for(g=d.slice(b,c),g.sort(a),a=b;c>a;a++)d[a]=g[a-b];return this.rd(),this},F.prototype.reverse=F.prototype.reverse=function(){return y.K(this),this.n.reverse(),this.rd(),this},y.A(F,{count:"count"},function(){return this.n.length}),y.A(F,{length:"length"},function(){return this.n.length}),y.A(F,{k:"iterator"},function(){if(0>=this.n.length)return y.Zf;var a=this.Lg;return a!==q?(a.reset(),a):new Ea(this)}),y.A(F,{Rl:"iteratorBackwards"},function(){if(0>=this.n.length)return y.Zf;var a=this.ax;return a!==q?(a.reset(),a):new Ga(this)}),y.Md(Ha,{key:h,value:h}),y.A(Ha,{k:"iterator"},function(){return this}),Ha.prototype.reset=Ha.prototype.reset=function(){var a=this.q;a.Lg=q,this.Ya=a.Lb,this.Gd=q},Ha.prototype.next=Ha.prototype.next=function(){var b,a=this.q;return a.Lb!==this.Ya&&y.m("the Set has been modified during iteration"),b=this.Gd,b=b===q?a.le:b.Li,b!==q?(this.Gd=b,this.value=b.value,this.key=b.key,h):(this.dg(),s)},Ha.prototype.first=Ha.prototype.ob=function(){var b,a=this.q;return this.Ya=a.Lb,a=a.le,a!==q?(this.Gd=a,b=a.value,this.key=a.key,this.value=b):q},y.A(Ha,{count:"count"},function(){return this.q.Fd}),Ha.prototype.dg=function(){this.value=q,this.Ya=-1,this.q.Lg=this},Ha.prototype.toString=function(){return this.Gd!==q?"SetIterator@"+this.Gd.value:"SetIterator"},y.ba("Set",na),na.prototype.$f=function(a){this.Y!==q&&("string"==typeof this.Y?(typeof a!==this.Y||a===q)&&y.Kb(a,this.Y):a instanceof this.Y||y.Kb(a,this.Y))},na.prototype.rd=function(){var a=this.Lb;a++,a>999999999&&(a=0),this.Lb=a},na.prototype.freeze=na.prototype.freeze=function(){return this.$a=h,this},na.prototype.thaw=na.prototype.Pa=function(){return this.$a=s,this},na.prototype.toString=function(){return"Set("+y.dh(this.Y)+")#"+y.ac(this)},na.prototype.add=na.prototype.add=function(a){if(a===q)return s;x&&this.$f(a),y.K(this,a);var b=a;return y.sb(a)&&(b=y.Dr(a)),this.Fc[b]===f?(this.Fd++,a=new Ia(a,a),this.Fc[b]=a,b=this.Ng,b===q?this.le=a:(a.cn=b,b.Li=a),this.Ng=a,this.rd(),h):s},na.prototype.addAll=na.prototype.Me=function(a){if(a===q)return this;if(y.K(this),y.isArray(a))for(var b=y.Sb(a),c=0;b>c;c++)this.add(y.Hb(a,c));else for(a=a.k;a.next();)this.add(a.value);return this},na.prototype.contains=na.prototype.contains=function(a){if(a===q)return s;x&&this.$f(a);var b=a;return y.sb(a)&&(b=y.ac(a),b===f)?s:this.Fc[b]!==f},na.prototype.containsAll=na.prototype.WH=function(a){if(a===q)return h;for(a=a.k;a.next();)if(!this.contains(a.value))return s;return h},na.prototype.containsAny=na.prototype.XH=function(a){if(a===q)return h;for(a=a.k;a.next();)if(this.contains(a.value))return h;return s},na.prototype.first=na.prototype.ob=function(){var a=this.le;return a===q?q:a.value},na.prototype.remove=na.prototype.remove=function(a){var b,c,d;return a===q?s:(x&&this.$f(a),y.K(this,a),b=a,y.sb(a)&&(b=y.ac(a),b===f)?s:(a=this.Fc[b],a===f?s:(c=a.Li,d=a.cn,c!==q&&(c.cn=d),d!==q&&(d.Li=c),this.le===a&&(this.le=c),this.Ng===a&&(this.Ng=d),delete this.Fc[b],this.Fd--,this.rd(),h)))},na.prototype.removeAll=na.prototype.oJ=function(a){if(a===q)return this;for(y.K(this),a=a.k;a.next();)this.remove(a.value);return this},na.prototype.retainAll=na.prototype.sJ=function(a){var b,c;if(a===q||0===this.count)return this;for(y.K(this),b=new na(this.Y),b.Me(a),a=new F(this.Y),c=this.k;c.next();)b.contains(c.value)||a.add(c.value);for(b=a.k;b.next();)this.remove(b.value);return this},na.prototype.clear=na.prototype.clear=function(){y.K(this),this.Fc={},this.Fd=0,this.Ng=this.le=q,this.rd()},na.prototype.copy=function(){var c,a=new na(this.Y),b=this.Fc;for(c in b)a.add(b[c].value);return a},na.prototype.toArray=na.prototype.Ee=function(){var d,a=Array(this.Fd),b=this.Fc,c=0;for(d in b)a[c]=b[d].value,c++;return a},na.prototype.toList=na.prototype.EH=function(){var c,a=new F(this.Y),b=this.Fc;for(c in b)a.add(b[c]);return a},y.A(na,{count:"count"},w("Fd")),y.A(na,{k:"iterator"},function(){if(0>=this.Fd)return y.Zf;var a=this.Lg;return a!==q?(a.reset(),a):new Ha(this)}),y.Md(Ja,{key:h,value:h}),y.A(Ja,{k:"iterator"},function(){return this}),Ja.prototype.reset=Ja.prototype.reset=function(){this.Ya=this.Hc.Lb,this.Gd=q},Ja.prototype.next=Ja.prototype.next=function(){var b,a=this.Hc;return a.Lb!==this.Ya&&y.m("the Map has been modified during iteration"),b=this.Gd,b=b===q?a.le:b.Li,b!==q?(this.Gd=b,this.value=b.key,h):(this.dg(),s)},Ja.prototype.first=Ja.prototype.ob=function(){var b,a=this.Hc;return this.Ya=a.Lb,a=a.le,a!==q?(this.Gd=a,b=a.value,this.key=a.key,this.value=b):q},y.A(Ja,{count:"count"},function(){return this.Hc.Fd}),Ja.prototype.dg=function(){this.value=q,this.Ya=-1},Ja.prototype.toString=function(){return this.Gd!==q?"MapKeySetIterator@"+this.Gd.value:"MapKeySetIterator"},y.Ka(Ka,na),Ka.prototype.freeze=function(){return this},Ka.prototype.Pa=function(){return this},Ka.prototype.toString=function(){return"MapKeySet("+this.Hc.toString()+")"},Ka.prototype.add=Ka.prototype.add=function(){return y.m("This Set is read-only: "+this.toString()),s},Ka.prototype.contains=Ka.prototype.contains=function(a){return this.Hc.contains(a)},Ka.prototype.remove=Ka.prototype.remove=function(){return y.m("This Set is read-only: "+this.toString()),s},Ka.prototype.clear=Ka.prototype.clear=function(){y.m("This Set is read-only: "+this.toString())},Ka.prototype.copy=function(){return new Ka(this.Hc)},Ka.prototype.toSet=Ka.prototype.FH=function(){var c,a=new na(this.Hc.Mg),b=this.Hc.Fc;for(c in b)a.add(b[c].key);return a},Ka.prototype.toArray=Ka.prototype.Ee=function(){var d,a=this.Hc.Fc,b=Array(this.Hc.Fd),c=0;for(d in a)b[c]=a[d].key,c++;return b},Ka.prototype.toList=Ka.prototype.EH=function(){var c,a=new F(this.Y),b=this.Hc.Fc;for(c in b)a.add(b[c].key);return a},y.A(Ka,{count:"count"},function(){return this.Hc.Fd}),y.A(Ka,{k:"iterator"},function(){return 0>=this.Hc.Fd?y.Zf:new Ja(this.Hc)}),y.Md(Ia,{key:h,value:h}),Ia.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"},y.Md(Ma,{key:h,value:h}),y.A(Ma,{k:"iterator"},function(){return this}),Ma.prototype.reset=Ma.prototype.reset=function(){var a=this.Hc;a.Lg=q,this.Ya=a.Lb,this.Gd=q},Ma.prototype.next=Ma.prototype.next=function(){var b,a=this.Hc;return a.Lb!==this.Ya&&y.m("the Map has been modified during iteration"),b=this.Gd,b=b===q?a.le:b.Li,b!==q?(this.Gd=b,this.key=b.key,this.value=b.value,h):(this.dg(),s)},Ma.prototype.first=Ma.prototype.ob=function(){var b,a=this.Hc;return this.Ya=a.Lb,a=a.le,a!==q?(this.Gd=a,b=a.key,this.key=b,this.value=a.value,b):q},y.A(Ma,{count:"count"},function(){return this.Hc.Fd}),Ma.prototype.dg=function(){this.value=this.key=q,this.Ya=-1,this.Hc.Lg=this},Ma.prototype.toString=function(){return this.Gd!==q?"MapIterator@"+this.Gd:"MapIterator"},y.ba("Map",ma),ma.prototype.rd=function(){var a=this.Lb;a++,a>999999999&&(a=0),this.Lb=a},ma.prototype.freeze=ma.prototype.freeze=function(){return this.$a=h,this},ma.prototype.thaw=ma.prototype.Pa=function(){return this.$a=s,this},ma.prototype.toString=function(){return"Map("+y.dh(this.Mg)+","+y.dh(this.Vh)+")#"+y.ac(this)},ma.prototype.add=ma.prototype.add=function(a,b){var c,d;return x&&(Na(this,a),this.Vh!==q&&("string"==typeof this.Vh?(typeof b!==this.Vh||b===q)&&y.Kb(b,this.Vh):b instanceof this.Vh||y.Kb(b,this.Vh))),y.K(this,a),c=a,y.sb(a)&&(c=y.Dr(a)),d=this.Fc[c],d===f?(this.Fd++,d=new Ia(a,b),this.Fc[c]=d,c=this.Ng,c===q?this.le=d:(d.cn=c,c.Li=d),this.Ng=d,this.rd(),h):(d.value=b,s)},ma.prototype.addAll=ma.prototype.Me=function(a){if(a===q)return this;for(x&&y.l(a,ma,ma,"addAll:map"),a=a.k;a.next();)this.add(a.key,a.value);return this},ma.prototype.contains=ma.prototype.contains=function(a){x&&Na(this,a);var b=a;return y.sb(a)&&(b=y.ac(a),b===f)?s:this.Fc[b]!==f},ma.prototype.getValue=ma.prototype.wa=function(a){x&&Na(this,a);var b=a;return y.sb(a)&&(b=y.ac(a),b===f)?q:(a=this.Fc[b],a===f?q:a.value)},ma.prototype.remove=ma.prototype.remove=function(a){var b,c,d;return a===q?s:(x&&Na(this,a),y.K(this,a),b=a,y.sb(a)&&(b=y.ac(a),b===f)?s:(a=this.Fc[b],a===f?s:(c=a.Li,d=a.cn,c!==q&&(c.cn=d),d!==q&&(d.Li=c),this.le===a&&(this.le=c),this.Ng===a&&(this.Ng=d),delete this.Fc[b],this.Fd--,this.rd(),h)))},ma.prototype.clear=ma.prototype.clear=function(){y.K(this),this.Fc={},this.Fd=0,this.Ng=this.le=q,this.rd()},ma.prototype.copy=function(){var c,d,a=new ma(this.Mg,this.Vh),b=this.Fc;for(c in b)d=b[c],a.add(d.key,d.value);return a},ma.prototype.toArray=ma.prototype.Ee=function(){var d,e,a=this.Fc,b=Array(this.Fd),c=0;for(d in a)e=a[d],b[c]=new Ia(e.key,e.value),c++;return b},ma.prototype.toKeySet=ma.prototype.Ok=function(){return new Ka(this)},y.A(ma,{count:"count"},w("Fd")),y.A(ma,{k:"iterator"},function(){if(0>=this.count)return y.Zf;var a=this.Lg;return a!==q?(a.reset(),a):new Ma(this)}),y.ba("Point",A),y.Md(A,{x:h,y:h}),A.prototype.assign=function(a){this.x=a.x,this.y=a.y
},A.prototype.q=function(a,b){this.x=a,this.y=b},A.prototype.setTo=A.prototype.Ao=function(a,b){return x&&(y.j(a,"number",A,"setTo:x"),y.j(b,"number",A,"setTo:y")),y.K(this),this.x=a,this.y=b,this},A.prototype.set=A.prototype.set=function(a){return x&&y.l(a,A,A,"set:p"),y.K(this),this.x=a.x,this.y=a.y,this},A.prototype.copy=function(){var a=new A;return a.x=this.x,a.y=this.y,a},A.prototype.Ja=function(){return this.$a=h,Object.freeze(this),this},A.prototype.U=function(){return Object.isFrozen(this)?this:this.copy().freeze()},A.prototype.freeze=function(){return this.$a=h,this},A.prototype.Pa=function(){return Object.isFrozen(this)&&y.m("cannot thaw constant: "+this),this.$a=s,this},A.parse=function(a){var b,c,d,e;if("string"==typeof a){for(a=a.split(" "),b=0,c=0;""===a[b];)b++;for(d=a[b++],d&&(c=parseFloat(d)),e=0;""===a[b];)b++;return(d=a[b++])&&(e=parseFloat(d)),new A(c,e)}return new A},A.stringify=function(a){return a instanceof A?a.x.toString()+" "+a.y.toString():a.toString()},A.prototype.toString=function(){return"Point("+this.x+","+this.y+")"},A.prototype.equals=A.prototype.L=function(a){return a instanceof A?this.x===a.x&&this.y===a.y:s},A.prototype.equalTo=A.prototype.vy=function(a,b){return this.x===a&&this.y===b},A.prototype.nj=function(a){return H.Ha(this.x,a.x)&&H.Ha(this.y,a.y)},A.prototype.di=function(a){return H.I(this.x,a.x)&&H.I(this.y,a.y)},A.prototype.add=A.prototype.add=function(a){return x&&y.l(a,A,A,"add:p"),y.K(this),this.x+=a.x,this.y+=a.y,this},A.prototype.subtract=A.prototype.qs=function(a){return x&&y.l(a,A,A,"subtract:p"),y.K(this),this.x-=a.x,this.y-=a.y,this},A.prototype.offset=A.prototype.offset=function(a,b){return x&&(y.p(a,A,"offset:dx"),y.p(b,A,"offset:dy")),y.K(this),this.x+=a,this.y+=b,this},A.prototype.rotate=A.prototype.rotate=function(a){var b,c,d;return x&&y.p(a,A,"rotate:angle"),y.K(this),0===a?this:(b=this.x,c=this.y,0===b&&0===c?this:(d=a*Math.PI/180,a=Math.cos(d),d=Math.sin(d),this.x=a*b-d*c,this.y=d*b+a*c,this))},A.prototype.scale=A.prototype.scale=function(a,b){return x&&(y.p(a,A,"scale:sx"),y.p(b,A,"scale:sy")),this.x*=a,this.y*=b,this},A.prototype.distanceSquaredPoint=A.prototype.xk=function(a){x&&y.l(a,A,A,"distanceSquaredPoint:p");var b=a.x-this.x;return a=a.y-this.y,b*b+a*a},A.prototype.distanceSquared=A.prototype.sr=function(a,b){x&&(y.p(a,A,"distanceSquared:px"),y.p(b,A,"distanceSquared:py"));var c=a-this.x,d=b-this.y;return c*c+d*d},A.prototype.normalize=A.prototype.normalize=function(){y.K(this);var a=this.x,b=this.y,c=Math.sqrt(a*a+b*b);return c>0&&(this.x=a/c,this.y=b/c),this},A.prototype.directionPoint=A.prototype.ai=function(a){return x&&y.l(a,A,A,"directionPoint:p"),Ra(a.x-this.x,a.y-this.y)},A.prototype.direction=A.prototype.direction=function(a,b){return x&&(y.p(a,A,"direction:px"),y.p(b,A,"direction:py")),Ra(a-this.x,b-this.y)},A.prototype.setRectSpot=A.prototype.ls=function(a,b){return x&&(y.l(a,B,A,"setRectSpot:r"),y.l(b,J,A,"setRectSpot:spot")),y.K(this),this.x=a.x+b.x*a.width+b.offsetX,this.y=a.y+b.y*a.height+b.offsetY,this},A.prototype.setSpot=A.prototype.ms=function(a,b,c,d,e){return x&&(y.p(a,A,"setSpot:x"),y.p(b,A,"setSpot:y"),y.p(c,A,"setSpot:w"),y.p(d,A,"setSpot:h"),(0>c||0>d)&&y.m("Point.setSpot:Width and height cannot be negative"),y.l(e,J,A,"setSpot:spot")),y.K(this),this.x=a+e.x*c+e.offsetX,this.y=b+e.y*d+e.offsetY,this},A.prototype.transform=function(a){return x&&y.l(a,ka,A,"transform:t"),a.Qa(this),this},A.distanceLineSegmentSquared=Ua=function(a,b,c,d,e,f){var g,h,i,j;return x&&(y.p(a,A,"distanceLineSegmentSquared:px"),y.p(b,A,"distanceLineSegmentSquared:py"),y.p(c,A,"distanceLineSegmentSquared:ax"),y.p(d,A,"distanceLineSegmentSquared:ay"),y.p(e,A,"distanceLineSegmentSquared:bx"),y.p(f,A,"distanceLineSegmentSquared:by")),g=e-c,h=f-d,i=g*g+h*h,c-=a,d-=b,j=-c*g-d*h,0>=j||j>=i?(g=e-a,h=f-b,Math.min(c*c+d*d,g*g+h*h)):(a=g*d-h*c,a*a/i)},A.distanceSquared=Va=function(a,b,c,d){return x&&(y.p(a,A,"distanceSquared:px"),y.p(b,A,"distanceSquared:py"),y.p(c,A,"distanceSquared:qx"),y.p(d,A,"distanceSquared:qy")),a=c-a,b=d-b,a*a+b*b},A.direction=Ya=function(a,b,c,d){return x&&(y.p(a,A,"direction:px"),y.p(b,A,"direction:py"),y.p(c,A,"direction:qx"),y.p(d,A,"direction:qy")),a=c-a,b=d-b,0===a?b>0?90:0>b?270:0:0===b?a>0?0:180:isNaN(a)||isNaN(b)?0:(d=180*Math.atan(Math.abs(b/a))/Math.PI,0>a?d=0>b?d+180:180-d:0>b&&(d=360-d),d)},A.prototype.isReal=A.prototype.V=function(){return isFinite(this.x)&&isFinite(this.y)},y.ba("Size",ha),y.Md(ha,{width:h,height:h}),ha.prototype.assign=function(a){this.width=a.width,this.height=a.height},ha.prototype.q=function(a,b){this.width=a,this.height=b},ha.prototype.setTo=ha.prototype.Ao=function(a,b){return x&&(y.j(a,"number",ha,"setTo:w"),y.j(b,"number",ha,"setTo:h")),0>a&&y.ka(a,">= 0",ha,"setTo:w"),0>b&&y.ka(b,">= 0",ha,"setTo:h"),y.K(this),this.width=a,this.height=b,this},ha.prototype.set=ha.prototype.set=function(a){return x&&y.l(a,ha,ha,"set:s"),y.K(this),this.width=a.width,this.height=a.height,this},ha.prototype.copy=function(){var a=new ha;return a.width=this.width,a.height=this.height,a},ha.prototype.Ja=function(){return this.$a=h,Object.freeze(this),this},ha.prototype.U=function(){return Object.isFrozen(this)?this:this.copy().freeze()},ha.prototype.freeze=function(){return this.$a=h,this},ha.prototype.Pa=function(){return Object.isFrozen(this)&&y.m("cannot thaw constant: "+this),this.$a=s,this},ha.parse=function(a){var b,c,d,e;if("string"==typeof a){for(a=a.split(" "),b=0,c=0;""===a[b];)b++;for(d=a[b++],d&&(c=parseFloat(d)),e=0;""===a[b];)b++;return(d=a[b++])&&(e=parseFloat(d)),new ha(c,e)}return new ha},ha.stringify=function(a){return a instanceof ha?a.width.toString()+" "+a.height.toString():a.toString()},ha.prototype.toString=function(){return"Size("+this.width+","+this.height+")"},ha.prototype.equals=ha.prototype.L=function(a){return a instanceof ha?this.width===a.width&&this.height===a.height:s},ha.prototype.equalTo=ha.prototype.vy=function(a,b){return this.width===a&&this.height===b},ha.prototype.nj=function(a){return H.Ha(this.width,a.width)&&H.Ha(this.height,a.height)},ha.prototype.di=function(a){return H.I(this.width,a.width)&&H.I(this.height,a.height)},ha.prototype.isReal=ha.prototype.V=function(){return isFinite(this.width)&&isFinite(this.height)},y.ba("Rect",B),y.Md(B,{x:h,y:h,width:h,height:h}),B.prototype.assign=function(a){this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height},B.prototype.q=function(a,b,c,d){this.x=a,this.y=b,this.width=c,this.height=d},B.prototype.setTo=B.prototype.Ao=function(a,b,c,d){return x&&(y.j(a,"number",B,"setTo:x"),y.j(b,"number",B,"setTo:y"),y.j(c,"number",B,"setTo:w"),y.j(d,"number",B,"setTo:h")),0>c&&y.ka(c,">= 0",B,"setTo:w"),0>d&&y.ka(d,">= 0",B,"setTo:h"),y.K(this),this.x=a,this.y=b,this.width=c,this.height=d,this},B.prototype.set=B.prototype.set=function(a){return x&&y.l(a,B,B,"set:r"),y.K(this),this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this},B.prototype.setPoint=B.prototype.bf=function(a){return x&&y.l(a,A,B,"setPoint:p"),y.K(this),this.x=a.x,this.y=a.y,this},B.prototype.setSize=B.prototype.vJ=function(a){return x&&y.l(a,ha,B,"setSize:s"),y.K(this),this.width=a.width,this.height=a.height,this},B.prototype.copy=function(){var a=new B;return a.x=this.x,a.y=this.y,a.width=this.width,a.height=this.height,a},B.prototype.Ja=function(){return this.$a=h,Object.freeze(this),this},B.prototype.U=function(){return Object.isFrozen(this)?this:this.copy().freeze()},B.prototype.freeze=function(){return this.$a=h,this},B.prototype.Pa=function(){return Object.isFrozen(this)&&y.m("cannot thaw constant: "+this),this.$a=s,this},B.parse=function(a){var b,c,d,e,f,g;if("string"==typeof a){for(a=a.split(" "),b=0,c=0;""===a[b];)b++;for(d=a[b++],d&&(c=parseFloat(d)),e=0;""===a[b];)b++;for((d=a[b++])&&(e=parseFloat(d)),f=0;""===a[b];)b++;for((d=a[b++])&&(f=parseFloat(d)),g=0;""===a[b];)b++;return(d=a[b++])&&(g=parseFloat(d)),new B(c,e,f,g)}return new B},B.stringify=function(a){return a instanceof B?a.x.toString()+" "+a.y.toString()+" "+a.width.toString()+" "+a.height.toString():a.toString()},B.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},B.prototype.equals=B.prototype.L=function(a){return a instanceof B?this.x===a.x&&this.y===a.y&&this.width===a.width&&this.height===a.height:s},B.prototype.equalTo=B.prototype.vy=function(a,b,c,d){return this.x===a&&this.y===b&&this.width===c&&this.height===d},B.prototype.nj=function(a){return H.Ha(this.x,a.x)&&H.Ha(this.y,a.y)&&H.Ha(this.width,a.width)&&H.Ha(this.height,a.height)},B.prototype.di=function(a){return H.I(this.x,a.x)&&H.I(this.y,a.y)&&H.I(this.width,a.width)&&H.I(this.height,a.height)},B.prototype.containsPoint=B.prototype.Ea=function(a){return x&&y.l(a,A,B,"containsPoint:p"),this.x<=a.x&&this.x+this.width>=a.x&&this.y<=a.y&&this.y+this.height>=a.y},B.prototype.containsRect=B.prototype.ij=function(a){return x&&y.l(a,B,B,"containsRect:r"),this.x<=a.x&&a.x+a.width<=this.x+this.width&&this.y<=a.y&&a.y+a.height<=this.y+this.height},B.prototype.contains=B.prototype.contains=function(a,b,c,d){return x?(y.p(a,B,"contains:x"),y.p(b,B,"contains:y"),c===f?c=0:y.p(c,B,"contains:w"),d===f?d=0:y.p(d,B,"contains:h"),(0>c||0>d)&&y.m("Rect.contains:Width and height cannot be negative")):(c===f&&(c=0),d===f&&(d=0)),this.x<=a&&a+c<=this.x+this.width&&this.y<=b&&b+d<=this.y+this.height},B.prototype.reset=function(){y.K(this),this.height=this.width=this.y=this.x=0},B.prototype.offset=B.prototype.offset=function(a,b){return x&&(y.p(a,B,"offset:dx"),y.p(b,B,"offset:dy")),y.K(this),this.x+=a,this.y+=b,this},B.prototype.inflate=B.prototype.pg=function(a,b){return x&&(y.p(a,B,"inflate:w"),y.p(b,B,"inflate:h")),$a(this,b,a,b,a)},B.prototype.addMargin=B.prototype.ou=function(a){return x&&y.l(a,ab,B,"addMargin:m"),$a(this,a.top,a.right,a.bottom,a.left)},B.prototype.subtractMargin=B.prototype.zH=function(a){return x&&y.l(a,ab,B,"subtractMargin:m"),$a(this,-a.top,-a.right,-a.bottom,-a.left)},B.prototype.grow=B.prototype.MI=function(a,b,c,d){return x&&(y.p(a,B,"grow:t"),y.p(b,B,"grow:r"),y.p(c,B,"grow:b"),y.p(d,B,"grow:l")),$a(this,a,b,c,d)},B.prototype.intersectRect=B.prototype.RI=function(a){return x&&y.l(a,B,B,"intersectRect:r"),bb(this,a.x,a.y,a.width,a.height)},B.prototype.intersect=B.prototype.QI=function(a,b,c,d){return x&&(y.p(a,B,"intersect:x"),y.p(b,B,"intersect:y"),y.p(c,B,"intersect:w"),y.p(d,B,"intersect:h"),(0>c||0>d)&&y.m("Rect.intersect:Width and height cannot be negative")),bb(this,a,b,c,d)},B.prototype.intersectsRect=B.prototype.qf=function(a){return x&&y.l(a,B,B,"intersectsRect:r"),this.IC(a.x,a.y,a.width,a.height)},B.prototype.intersects=B.prototype.IC=function(a,b,c,d){x&&(y.p(a,B,"intersects:x"),y.p(b,B,"intersects:y"),y.p(a,B,"intersects:w"),y.p(b,B,"intersects:h"),(0>c||0>d)&&y.m("Rect.intersects:Width and height cannot be negative"));var e=this.width,f=this.x;return 1/0!==e&&1/0!==c&&(e+=f,c+=a,isNaN(c)||isNaN(e)||f>c||a>e)?s:(a=this.height,c=this.y,1/0!==a&&1/0!==d&&(a+=c,d+=b,isNaN(d)||isNaN(a)||c>d||b>a)?s:h)},B.prototype.unionPoint=B.prototype.yj=function(a){return x&&y.l(a,A,B,"unionPoint:p"),ib(this,a.x,a.y,0,0)},B.prototype.unionRect=B.prototype.zj=function(a){return x&&y.l(a,B,B,"unionRect:r"),ib(this,a.x,a.y,a.width,a.height)},B.prototype.union=B.prototype.tE=function(a,b,c,d){return y.K(this),x?(y.p(a,B,"union:x"),y.p(b,B,"union:y"),c===f?c=0:y.p(c,B,"union:w"),d===f?d=0:y.p(d,B,"union:h"),(0>c||0>d)&&y.m("Rect.union:Width and height cannot be negative")):(c===f&&(c=0),d===f&&(d=0)),ib(this,a,b,c,d)},B.prototype.setSpot=B.prototype.ms=function(a,b,c){return x&&(y.p(a,B,"setSpot:x"),y.p(b,B,"setSpot:y"),y.l(c,J,B,"setSpot:spot")),y.K(this),this.x=a-c.offsetX-c.x*this.width,this.y=b-c.offsetY-c.y*this.height,this},B.contains=kb=function(a,b,c,d,e,g,h,i){return x?(y.p(a,B,"contains:rx"),y.p(b,B,"contains:ry"),y.p(c,B,"contains:rw"),y.p(d,B,"contains:rh"),y.p(e,B,"contains:x"),y.p(g,B,"contains:y"),h===f?h=0:y.p(h,B,"contains:w"),i===f?i=0:y.p(i,B,"contains:h"),(0>c||0>d||0>h||0>i)&&y.m("Rect.contains:Width and height cannot be negative")):(h===f&&(h=0),i===f&&(i=0)),e>=a&&a+c>=e+h&&g>=b&&b+d>=g+i},B.intersects=function(a,b,c,d,e,f,g,i){return x&&(y.p(a,B,"intersects:rx"),y.p(b,B,"intersects:ry"),y.p(c,B,"intersects:rw"),y.p(d,B,"intersects:rh"),y.p(e,B,"intersects:x"),y.p(f,B,"intersects:y"),y.p(g,B,"intersects:w"),y.p(i,B,"intersects:h"),(0>c||0>d||0>g||0>i)&&y.m("Rect.intersects:Width and height cannot be negative")),c+=a,g+=e,a>g||e>c?s:(a=d+b,i+=f,b>i||f>a?s:h)},y.g(B,"left",B.prototype.left),y.defineProperty(B,{left:"left"},w("x"),function(a){y.K(this,a),x&&y.j(a,"number",B,"left"),this.x=a}),y.g(B,"top",B.prototype.top),y.defineProperty(B,{top:"top"},w("y"),function(a){y.K(this,a),x&&y.j(a,"number",B,"top"),this.y=a}),y.g(B,"right",B.prototype.right),y.defineProperty(B,{right:"right"},function(){return this.x+this.width},function(a){y.K(this,a),x&&y.p(a,B,"right"),this.x+=a-(this.x+this.width)}),y.g(B,"bottom",B.prototype.bottom),y.defineProperty(B,{bottom:"bottom"},function(){return this.y+this.height},function(a){y.K(this,a),x&&y.p(a,B,"top"),this.y+=a-(this.y+this.height)}),y.g(B,"position",B.prototype.position),y.defineProperty(B,{position:"position"},function(){return new A(this.x,this.y)},function(a){y.K(this,a),x&&y.l(a,A,B,"position"),this.x=a.x,this.y=a.y}),y.g(B,"size",B.prototype.size),y.defineProperty(B,{size:"size"},function(){return new ha(this.width,this.height)},function(a){y.K(this,a),x&&y.l(a,ha,B,"size"),this.width=a.width,this.height=a.height}),y.g(B,"center",B.prototype.ly),y.defineProperty(B,{ly:"center"},function(){return new A(this.x+this.width/2,this.y+this.height/2)},function(a){y.K(this,a),x&&y.l(a,A,B,"center"),this.x=a.x-this.width/2,this.y=a.y-this.height/2}),y.g(B,"centerX",B.prototype.xa),y.defineProperty(B,{xa:"centerX"},function(){return this.x+this.width/2},function(a){y.K(this,a),x&&y.p(a,B,"centerX"),this.x=a-this.width/2}),y.g(B,"centerY",B.prototype.Ga),y.defineProperty(B,{Ga:"centerY"},function(){return this.y+this.height/2},function(a){y.K(this,a),x&&y.p(a,B,"centerY"),this.y=a-this.height/2}),B.prototype.isReal=B.prototype.V=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},B.prototype.isEmpty=B.prototype.SI=function(){return 0===this.width&&0===this.height},y.ba("Margin",ab),y.Md(ab,{top:h,right:h,bottom:h,left:h}),ab.prototype.assign=function(a){this.top=a.top,this.right=a.right,this.bottom=a.bottom,this.left=a.left},ab.prototype.setTo=ab.prototype.Ao=function(a,b,c,d){return x&&(y.j(a,"number",ab,"setTo:t"),y.j(b,"number",ab,"setTo:r"),y.j(c,"number",ab,"setTo:b"),y.j(d,"number",ab,"setTo:l")),y.K(this),this.top=a,this.right=b,this.bottom=c,this.left=d,this},ab.prototype.set=ab.prototype.set=function(a){return x&&y.l(a,ab,ab,"assign:m"),y.K(this),this.top=a.top,this.right=a.right,this.bottom=a.bottom,this.left=a.left,this},ab.prototype.copy=function(){var a=new ab;return a.top=this.top,a.right=this.right,a.bottom=this.bottom,a.left=this.left,a},ab.prototype.Ja=function(){return this.$a=h,Object.freeze(this),this},ab.prototype.U=function(){return Object.isFrozen(this)?this:this.copy().freeze()},ab.prototype.freeze=function(){return this.$a=h,this},ab.prototype.Pa=function(){return Object.isFrozen(this)&&y.m("cannot thaw constant: "+this),this.$a=s,this},ab.parse=function(a){var b,c,d,e,f,g;if("string"==typeof a){for(a=a.split(" "),b=0,c=0;""===a[b];)b++;for(d=a[b++],d&&(c=parseFloat(d)),e=0;""===a[b];)b++;for((d=a[b++])&&(e=parseFloat(d)),f=0;""===a[b];)b++;for((d=a[b++])&&(f=parseFloat(d)),g=0;""===a[b];)b++;return(d=a[b++])&&(g=parseFloat(d)),new ab(c,e,f,g)}return new ab},ab.stringify=function(a){return a instanceof ab?a.top.toString()+" "+a.right.toString()+" "+a.bottom.toString()+" "+a.left.toString():a.toString()},ab.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},ab.prototype.equals=ab.prototype.L=function(a){return a instanceof ab?this.top===a.top&&this.right===a.right&&this.bottom===a.bottom&&this.left===a.left:s},ab.prototype.equalTo=ab.prototype.vy=function(a,b,c,d){return this.top===a&&this.right===b&&this.bottom===c&&this.left===d},ab.prototype.nj=function(a){return H.Ha(this.top,a.top)&&H.Ha(this.right,a.right)&&H.Ha(this.bottom,a.bottom)&&H.Ha(this.left,a.left)},ab.prototype.di=function(a){return H.I(this.top,a.top)&&H.I(this.right,a.right)&&H.I(this.bottom,a.bottom)&&H.I(this.left,a.left)},ab.prototype.isReal=ab.prototype.V=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},y.Md(ka,{m11:h,m12:h,m21:h,m22:h,dx:h,dy:h}),ka.prototype.set=ka.prototype.set=function(a){return x&&y.l(a,ka,ka,"set:t"),this.m11=a.m11,this.m12=a.m12,this.m21=a.m21,this.m22=a.m22,this.dx=a.dx,this.dy=a.dy,this},ka.prototype.copy=function(){var a=new ka;return a.m11=this.m11,a.m12=this.m12,a.m21=this.m21,a.m22=this.m22,a.dx=this.dx,a.dy=this.dy,a},ka.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},ka.prototype.equals=ka.prototype.L=function(a){return a instanceof ka?this.m11===a.m11&&this.m12===a.m12&&this.m21===a.m21&&this.m22===a.m22&&this.dx===a.dx&&this.dy===a.dy:s},ka.prototype.reset=ka.prototype.reset=function(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0},ka.prototype.multiply=ka.prototype.multiply=function(a){x&&y.l(a,ka,ka,"multiply:matrix");var b=this.m12*a.m11+this.m22*a.m12,c=this.m11*a.m21+this.m21*a.m22,d=this.m12*a.m21+this.m22*a.m22,e=this.m11*a.dx+this.m21*a.dy+this.dx,f=this.m12*a.dx+this.m22*a.dy+this.dy;return this.m11=this.m11*a.m11+this.m21*a.m12,this.m12=b,this.m21=c,this.m22=d,this.dx=e,this.dy=f,this},ka.prototype.multiplyInverted=ka.prototype.iD=function(a){x&&y.l(a,ka,ka,"multiplyInverted:matrix");var b=1/(a.m11*a.m22-a.m12*a.m21),c=a.m22*b,d=-a.m12*b,e=-a.m21*b,f=a.m11*b,g=b*(a.m21*a.dy-a.m22*a.dx),h=b*(a.m12*a.dx-a.m11*a.dy);return a=this.m12*c+this.m22*d,b=this.m11*e+this.m21*f,e=this.m12*e+this.m22*f,f=this.m11*g+this.m21*h+this.dx,g=this.m12*g+this.m22*h+this.dy,this.m11=this.m11*c+this.m21*d,this.m12=a,this.m21=b,this.m22=e,this.dx=f,this.dy=g,this},ka.prototype.invert=ka.prototype.Gy=function(){var a=1/(this.m11*this.m22-this.m12*this.m21),b=-this.m12*a,c=-this.m21*a,d=this.m11*a,e=a*(this.m21*this.dy-this.m22*this.dx),f=a*(this.m12*this.dx-this.m11*this.dy);this.m11=this.m22*a,this.m12=b,this.m21=c,this.m22=d,this.dx=e,this.dy=f},ka.prototype.rotate=ka.prototype.rotate=function(a,b,c){var d,e,f,g;x&&(y.p(a,ka,"rotate:angle"),y.p(b,ka,"rotate:rx"),y.p(c,ka,"rotate:ry")),this.translate(b,c),d=a*Math.PI/180,a=Math.cos(d),d=Math.sin(d),e=this.m12*a+this.m22*d,f=this.m11*-d+this.m21*a,g=this.m12*-d+this.m22*a,this.m11=this.m11*a+this.m21*d,this.m12=e,this.m21=f,this.m22=g,this.translate(-b,-c)},ka.prototype.translate=ka.prototype.translate=function(a,b){x&&(y.p(a,ka,"translate:x"),y.p(b,ka,"translate:y")),this.dx+=this.m11*a+this.m21*b,this.dy+=this.m12*a+this.m22*b},ka.prototype.scale=ka.prototype.scale=function(a,b){b===f&&(b=a),x&&(y.p(a,ka,"translate:sx"),y.p(b,ka,"translate:sy")),this.m11*=a,this.m12*=a,this.m21*=b,this.m22*=b},ka.prototype.transformPoint=ka.prototype.Qa=function(a){x&&y.l(a,A,ka,"transformPoint:p");var b=a.x,c=a.y;return a.x=b*this.m11+c*this.m21+this.dx,a.y=b*this.m12+c*this.m22+this.dy,a},ka.prototype.invertedTransformPoint=ka.prototype.gi=function(a){x&&y.l(a,A,ka,"invertedTransformPoint:p");var b=1/(this.m11*this.m22-this.m12*this.m21),c=-this.m12*b,d=this.m11*b,e=b*(this.m12*this.dx-this.m11*this.dy),f=a.x,g=a.y;return a.x=f*this.m22*b+g*-this.m21*b+b*(this.m21*this.dy-this.m22*this.dx),a.y=f*c+g*d+e,a},ka.prototype.transformRect=ka.prototype.oE=function(a){x&&y.l(a,B,ka,"transformRect:rect");var b=a.x,c=a.y,d=b+a.width,e=c+a.height,f=this.m11,g=this.m12,h=this.m21,i=this.m22,j=this.dx,k=this.dy,l=b*f+c*h+j,m=b*g+c*i+k,n=d*f+c*h+j,c=d*g+c*i+k,o=b*f+e*h+j,b=b*g+e*i+k,f=d*f+e*h+j,d=d*g+e*i+k,e=l,g=m,l=Math.min(l,n),e=Math.max(e,n),g=Math.min(g,c),m=Math.max(m,c),l=Math.min(l,o),e=Math.max(e,o),g=Math.min(g,b),m=Math.max(m,b),l=Math.min(l,f),e=Math.max(e,f),g=Math.min(g,d),m=Math.max(m,d);a.x=l,a.y=g,a.width=e-l,a.height=m-g},ka.prototype.isIdentity=ka.prototype.Ir=function(){return 1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22&&0===this.dx&&0===this.dy},y.ba("Spot",J),y.Md(J,{x:h,y:h,offsetX:h,offsetY:h}),J.prototype.assign=function(a){this.x=a.x,this.y=a.y,this.offsetX=a.offsetX,this.offsetY=a.offsetY},J.prototype.setTo=J.prototype.Ao=function(a,b,c,d){return x&&(lb(a,"setTo:x"),lb(b,"setTo:y"),mb(c,"setTo:offx"),mb(d,"setTo:offy")),y.K(this),this.x=a,this.y=b,this.offsetX=c,this.offsetY=d,this},J.prototype.set=J.prototype.set=function(a){return x&&y.l(a,J,J,"set:s"),y.K(this),this.x=a.x,this.y=a.y,this.offsetX=a.offsetX,this.offsetY=a.offsetY,this},J.prototype.copy=function(){var a=new J;return a.x=this.x,a.y=this.y,a.offsetX=this.offsetX,a.offsetY=this.offsetY,a},J.prototype.Ja=function(){return this.$a=h,Object.freeze(this),this},J.prototype.U=function(){return Object.isFrozen(this)?this:this.copy().freeze()},J.prototype.freeze=function(){return this.$a=h,this},J.prototype.Pa=function(){return Object.isFrozen(this)&&y.m("cannot thaw constant: "+this),this.$a=s,this},J.parse=vb=function(a){var b,c,d,e,f,g;if("string"==typeof a){if(a=a.trim(),"None"===a)return y.NONE;if("TopLeft"===a)return y.$v;if("Top"===a||"TopCenter"===a||"MiddleTop"===a)return y.Jo;if("TopRight"===a)return y.bw;if("Left"===a||"LeftCenter"===a||"MiddleLeft"===a)return y.Ho;if("Center"===a)return y.Pv;if("Right"===a||"RightCenter"===a||"MiddleRight"===a)return y.Io;if("BottomLeft"===a)return y.Kv;if("Bottom"===a||"BottomCenter"===a||"MiddleBottom"===a)return y.Go;if("BottomRight"===a)return y.Mv;if("TopSide"===a)return y.dw;if("LeftSide"===a)return y.Sv;if("RightSide"===a)return y.Yv;if("BottomSide"===a)return y.Ov;if("TopBottomSides"===a)return y.Zv;if("LeftRightSides"===a)return y.Rv;if("TopLeftSides"===a)return y.aw;if("TopRightSides"===a)return y.cw;if("BottomLeftSides"===a)return y.Lv;if("BottomRightSides"===a)return y.Nv;if("NotTopSide"===a)return y.Wv;if("NotLeftSide"===a)return y.Uv;if("NotRightSide"===a)return y.Vv;if("NotBottomSide"===a)return y.Tv;if("AllSides"===a)return y.Jv;if("Default"===a)return y.Qv;for(a=a.split(" "),b=0,c=0;""===a[b];)b++;for(d=a[b++],d&&(c=parseFloat(d)),e=0;""===a[b];)b++;for((d=a[b++])&&(e=parseFloat(d)),f=0;""===a[b];)b++;for((d=a[b++])&&(f=parseFloat(d)),g=0;""===a[b];)b++;return(d=a[b++])&&(g=parseFloat(d)),new J(c,e,f,g)}return new J},J.stringify=function(a){return a instanceof J?yb(a)?a.x.toString()+" "+a.y.toString()+" "+a.offsetX.toString()+" "+a.offsetY.toString():a.toString():a.toString()},J.prototype.toString=function(){return yb(this)?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.L(y.NONE)?"None":this.L(y.$v)?"TopLeft":this.L(y.Jo)?"Top":this.L(y.bw)?"TopRight":this.L(y.Ho)?"Left":this.L(y.Pv)?"Center":this.L(y.Io)?"Right":this.L(y.Kv)?"BottomLeft":this.L(y.Go)?"Bottom":this.L(y.Mv)?"BottomRight":this.L(y.dw)?"TopSide":this.L(y.Sv)?"LeftSide":this.L(y.Yv)?"RightSide":this.L(y.Ov)?"BottomSide":this.L(y.Zv)?"TopBottomSides":this.L(y.Rv)?"LeftRightSides":this.L(y.aw)?"TopLeftSides":this.L(y.cw)?"TopRightSides":this.L(y.Lv)?"BottomLeftSides":this.L(y.Nv)?"BottomRightSides":this.L(y.Wv)?"NotTopSide":this.L(y.Uv)?"NotLeftSide":this.L(y.Vv)?"NotRightSide":this.L(y.Tv)?"NotBottomSide":this.L(y.Jv)?"AllSides":this.L(y.Qv)?"Default":"None"},J.prototype.equals=J.prototype.L=function(a){return a instanceof J?(this.x===a.x||isNaN(this.x)&&isNaN(a.x))&&(this.y===a.y||isNaN(this.y)&&isNaN(a.y))&&this.offsetX===a.offsetX&&this.offsetY===a.offsetY:s},J.prototype.opposite=J.prototype.iJ=function(){return new J(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},J.prototype.includesSide=J.prototype.NI=function(a){return Bb(this)&&Bb(a)?(a=a.offsetY,(this.offsetY&a)===a):s},y.ld=1,y.Sc=2,y.ad=4,y.$c=8,y.NONE=nb(new J(0,0,0,0),0).Ja(),y.Qv=nb(new J(0,0,-1,0),-1).Ja(),y.$v=new J(0,0,0,0).Ja(),y.Jo=new J(.5,0,0,0).Ja(),y.bw=new J(1,0,0,0).Ja(),y.Ho=new J(0,.5,0,0).Ja(),y.Pv=new J(.5,.5,0,0).Ja(),y.Io=new J(1,.5,0,0).Ja(),y.Kv=new J(0,1,0,0).Ja(),y.Go=new J(.5,1,0,0).Ja(),y.Mv=new J(1,1,0,0).Ja(),y.dw=nb(new J(0,0,1,y.ld),1).Ja(),y.Sv=nb(new J(0,0,1,y.Sc),1).Ja(),y.Yv=nb(new J(0,0,1,y.ad),1).Ja(),y.Ov=nb(new J(0,0,1,y.$c),1).Ja(),y.Zv=nb(new J(0,0,1,y.ld|y.$c),1).Ja(),y.Rv=nb(new J(0,0,1,y.Sc|y.ad),1).Ja(),y.aw=nb(new J(0,0,1,y.ld|y.Sc),1).Ja(),y.cw=nb(new J(0,0,1,y.ld|y.ad),1).Ja(),y.Lv=nb(new J(0,0,1,y.$c|y.Sc),1).Ja(),y.Nv=nb(new J(0,0,1,y.$c|y.ad),1).Ja(),y.Wv=nb(new J(0,0,1,y.Sc|y.ad|y.$c),1).Ja(),y.Uv=nb(new J(0,0,1,y.ld|y.ad|y.$c),1).Ja(),y.Vv=nb(new J(0,0,1,y.ld|y.Sc|y.$c),1).Ja(),y.Tv=nb(new J(0,0,1,y.ld|y.Sc|y.ad),1).Ja(),y.Jv=nb(new J(0,0,1,y.ld|y.Sc|y.ad|y.$c),1).Ja(),J.None=Hb=y.NONE,J.Default=Ib=y.Qv,J.TopLeft=Mb=y.$v,J.TopCenter=Ob=y.Jo,J.TopRight=Rb=y.bw,J.LeftCenter=y.Ho,J.Center=Sb=y.Pv,J.RightCenter=y.Io,J.BottomLeft=Vb=y.Kv,J.BottomCenter=Wb=y.Go,J.BottomRight=Zb=y.Mv,J.MiddleTop=$b=y.Jo,J.MiddleLeft=ac=y.Ho,J.MiddleRight=bc=y.Io,J.MiddleBottom=cc=y.Go,J.Top=y.Jo,J.Left=dc=y.Ho,J.Right=fc=y.Io,J.Bottom=y.Go,J.TopSide=gc=y.dw,J.LeftSide=hc=y.Sv,J.RightSide=ic=y.Yv,J.BottomSide=jc=y.Ov,J.TopBottomSides=y.Zv,J.LeftRightSides=y.Rv,J.TopLeftSides=y.aw,J.TopRightSides=y.cw,J.BottomLeftSides=y.Lv,J.BottomRightSides=y.Nv,J.NotTopSide=y.Wv,J.NotLeftSide=y.Uv,J.NotRightSide=y.Vv,J.NotBottomSide=y.Tv,J.AllSides=kc=y.Jv,H={ra:4*((Math.sqrt(2)-1)/3),Aj:new A(0,0).Ja(),OE:new B(0,0,0,0).Ja(),Ko:new ab(0,0,0,0).Ja(),ME:new ab(2,2,2,2).Ja(),NE:new ha(1/0,1/0).Ja(),JE:new A(-1/0,-1/0).Ja(),IE:new A(1/0,1/0).Ja(),ws:new ha(0,0).Ja(),Xv:new ha(1,1).Ja(),fm:new ha(6,6).Ja(),Lz:new ha(8,8).Ja(),KE:new A(0/0,0/0).Ja(),Qz:q,sqrt:function(a){var b,c;if(0>=a)return 0;if(b=H.Qz,b===q){for(b=[],c=0;2e3>=c;c++)b[c]=Math.sqrt(c);H.Qz=b}return 1>a?(c=1/a,2e3>=c?1/b[0|c]:Math.sqrt(a)):2e3>=a?b[0|a]:Math.sqrt(a)},I:function(a,b){var c=a-b;return.5>c&&c>-.5},Ha:function(a,b){var c=a-b;return 5e-8>c&&c>-5e-8},jd:function(a,b,c,d,e,f,g){0>=e&&(e=1e-6);var i,j,k,l;if(c>a?(j=a,i=c):(j=c,i=a),d>b?(l=b,k=d):(l=d,k=b),a===c)return g>=l&&k>=g&&f>=a-e&&a+e>=f;if(b===d)return f>=j&&i>=f&&g>=b-e&&b+e>=g;if(i+=e,j-=e,f>=j&&i>=f&&(k+=e,l-=e,g>=l&&k>=g))if(i-j>k-l){if(!(a-c>e||c-a>e))return h;if(f=(d-b)/(c-a)*(f-a)+b,g>=f-e&&f+e>=g)return h}else{if(!(b-d>e||d-b>e))return h;if(g=(c-a)/(d-b)*(g-b)+a,f>=g-e&&g+e>=f)return h}return s},wu:function(a,b,c,d,e,f,g,h,i,j,k,l){var m,n,o,p,q,r;return H.jd(a,b,g,h,l,c,d)&&H.jd(a,b,g,h,l,e,f)?H.jd(a,b,g,h,l,j,k):(m=(a+c)/2,n=(b+d)/2,o=(c+e)/2,p=(d+f)/2,e=(e+g)/2,f=(f+h)/2,d=(m+o)/2,c=(n+p)/2,o=(o+e)/2,p=(p+f)/2,q=(d+o)/2,r=(c+p)/2,H.wu(a,b,m,n,d,c,q,r,i,j,k,l)||H.wu(q,r,o,p,e,f,g,h,i,j,k,l))},IF:function(a,b,c,d,e,f,g,h,i){var j=(c+e)/2,k=(d+f)/2;return i.x=(((a+c)/2+j)/2+(j+(e+g)/2)/2)/2,i.y=(((b+d)/2+k)/2+(k+(f+h)/2)/2)/2,i},HF:function(a,b,c,d,e,f,g,h){var i=(c+e)/2,j=(d+f)/2;return Ya(((a+c)/2+i)/2,((b+d)/2+j)/2,(i+(e+g)/2)/2,(j+(f+h)/2)/2)},Dn:function(a,b,c,d,e,f,g,h,i,j){var k,l,m,n,o,p;return H.jd(a,b,g,h,i,c,d)&&H.jd(a,b,g,h,i,e,f)?(ib(j,a,b,0,0),ib(j,g,h,0,0)):(k=(a+c)/2,l=(b+d)/2,m=(c+e)/2,n=(d+f)/2,e=(e+g)/2,f=(f+h)/2,d=(k+m)/2,c=(l+n)/2,m=(m+e)/2,n=(n+f)/2,o=(d+m)/2,p=(c+n)/2,H.Dn(a,b,k,l,d,c,o,p,i,j),H.Dn(o,p,m,n,e,f,g,h,i,j)),j},ae:function(a,b,c,d,e,f,g,h,i,j){var k,l,m,n,o,p;return H.jd(a,b,g,h,i,c,d)&&H.jd(a,b,g,h,i,e,f)?(0===j.length&&j.push([a,b]),j.push([g,h])):(k=(a+c)/2,l=(b+d)/2,m=(c+e)/2,n=(d+f)/2,e=(e+g)/2,f=(f+h)/2,d=(k+m)/2,c=(l+n)/2,m=(m+e)/2,n=(n+f)/2,o=(d+m)/2,p=(c+n)/2,H.ae(a,b,k,l,d,c,o,p,i,j),H.ae(o,p,m,n,e,f,g,h,i,j)),j},gz:function(a,b,c,d,e,f,g,h,i,j){var k,l,m,n;return H.jd(a,b,e,f,j,c,d)?H.jd(a,b,e,f,j,h,i):(k=(a+c)/2,l=(b+d)/2,c=(c+e)/2,d=(d+f)/2,m=(k+c)/2,n=(l+d)/2,H.gz(a,b,k,l,m,n,g,h,i,j)||H.gz(m,n,c,d,e,f,g,h,i,j))},nJ:function(a,b,c,d,e,f,g){return g.x=((a+c)/2+(c+e)/2)/2,g.y=((b+d)/2+(d+f)/2)/2,g},fz:function(a,b,c,d,e,f,g,h){var i,j,k,l;return H.jd(a,b,e,f,g,c,d)?(ib(h,a,b,0,0),ib(h,e,f,0,0)):(i=(a+c)/2,j=(b+d)/2,c=(c+e)/2,d=(d+f)/2,k=(i+c)/2,l=(j+d)/2,H.fz(a,b,i,j,k,l,g,h),H.fz(k,l,c,d,e,f,g,h)),h},uo:function(a,b,c,d,e,f,g,h){var i,j,k,l;return H.jd(a,b,e,f,g,c,d)?(0===h.length&&h.push([a,b]),h.push([e,f])):(i=(a+c)/2,j=(b+d)/2,c=(c+e)/2,d=(d+f)/2,k=(i+c)/2,l=(j+d)/2,H.uo(a,b,i,j,k,l,g,h),H.uo(k,l,c,d,e,f,g,h)),h},kr:function(a,b,c,d,e,f,g,i,j,k,l,m,n,o){var p,q,r,t,u,v,w,x;if(0>=n&&(n=1e-6),!H.jd(a,b,g,i,n,c,d)||!H.jd(a,b,g,i,n,e,f))return p=(a+c)/2,q=(b+d)/2,c=(c+e)/2,d=(d+f)/2,e=(e+g)/2,f=(f+i)/2,r=(p+c)/2,t=(q+d)/2,c=(c+e)/2,d=(d+f)/2,u=(r+c)/2,v=(t+d)/2,w=(l-j)*(l-j)+(m-k)*(m-k),x=s,H.kr(a,b,p,q,r,t,u,v,j,k,l,m,n,o)&&(a=(o.x-j)*(o.x-j)+(o.y-k)*(o.y-k),w>a&&(w=a,x=h)),b=o.x,p=o.y,H.kr(u,v,c,d,e,f,g,i,j,k,l,m,n,o)&&(a=(o.x-j)*(o.x-j)+(o.y-k)*(o.y-k),w>a?x=h:(o.x=b,o.y=p)),x;if(p=(a-g)*(k-m)-(b-i)*(j-l),!p)return s;if(n=((a*i-b*g)*(j-l)-(a-g)*(j*m-k*l))/p,p=((a*i-b*g)*(k-m)-(b-i)*(j*m-k*l))/p,(k>m?k-m:m-k)>(j>l?j-l:l-j)){if(i>b?(j=b,g=i):(j=i,g=b),j>p||p>g)return s}else if(g>a?j=a:(j=g,g=a),j>n||n>g)return s;return o.x=n,o.y=p,h},lr:function(a,b,c,d,e,f,g,h,i,j,k,l,m){var o,p,q,r,s,t,n=0;if(0>=m&&(m=1e-6),H.jd(a,b,g,h,m,c,d)&&H.jd(a,b,g,h,m,e,f)){if(m=(a-g)*(j-l)-(b-h)*(i-k),!m)return n;if(o=((a*h-b*g)*(i-k)-(a-g)*(i*l-j*k))/m,p=((a*h-b*g)*(j-l)-(b-h)*(i*l-j*k))/m,o>=k)return n;if((j>l?j-l:l-j)>(i>k?i-k:k-i)){if(h>b?(i=b,a=h):(i=h,a=b),i>p||p>a)return n}else if(g>a?(i=a,a=g):i=g,i>o||o>a)return n;m>0?n++:0>m&&n--}else o=(a+c)/2,p=(b+d)/2,q=(c+e)/2,r=(d+f)/2,e=(e+g)/2,f=(f+h)/2,d=(o+q)/2,c=(p+r)/2,q=(q+e)/2,r=(r+f)/2,s=(d+q)/2,t=(c+r)/2,n+=H.lr(a,b,o,p,d,c,s,t,i,j,k,l,m),n+=H.lr(s,t,q,r,e,f,g,h,i,j,k,l,m);return n},Vr:function(a,b,c,d,e,f,g){if(H.Ha(a,c)){var i;return d>b?(i=b,c=d):(i=d,c=b),d=f,i>d?(g.x=a,g.y=i,s):d>c?(g.x=a,g.y=c,s):(g.x=a,g.y=d,h)}return H.Ha(b,d)?(c>a?i=a:(i=c,c=a),d=e,i>d?(g.x=i,g.y=b,s):d>c?(g.x=c,g.y=b,s):(g.x=d,g.y=b,h)):(i=((a-e)*(a-c)+(b-f)*(b-d))/((c-a)*(c-a)+(d-b)*(d-b)),-5e-6>i?(g.x=a,g.y=b,s):i>1.000005?(g.x=c,g.y=d,s):(g.x=a+i*(c-a),g.y=b+i*(d-b),h))},vg:function(a,b,c,d,e,f,g,i,j){return H.I(a,c)&&H.I(b,d)?(j.x=a,j.y=b,s):H.Ha(e,g)?H.Ha(a,c)?(H.Vr(a,b,c,d,e,f,j),s):(f=(d-b)/(c-a)*(e-a)+b,H.Vr(a,b,c,d,e,f,j)):(i=(i-f)/(g-e),H.Ha(a,c)?(f=i*(a-e)+f,d>b?(g=b,c=d):(g=d,c=b),g>f?(j.x=a,j.y=g,s):f>c?(j.x=a,j.y=c,s):(j.x=a,j.y=f,h)):(g=(d-b)/(c-a),H.Ha(i,g)?(H.Vr(a,b,c,d,e,f,j),s):(e=(g*a-i*e+f-b)/(g-i),H.Ha(g,0)?(c>a?g=a:(g=c,c=a),g>e?(j.x=g,j.y=b,s):e>c?(j.x=c,j.y=b,s):(j.x=e,j.y=b,h)):(f=g*(e-a)+b,H.Vr(a,b,c,d,e,f,j)))))},XI:function(a,b,c,d,e){return H.vg(c.x,c.y,d.x,d.y,a.x,a.y,b.x,b.y,e)},II:function(a,b,c,d,e,f,g,h,i,j){function k(c,d){var e=(c-a)*(c-a)+(d-b)*(d-b);l>e&&(l=e,i.x=c,i.y=d)}var m,n,o,p,l=1/0;if(k(i.x,i.y),g>e?(m=e,n=g):(m=g,n=e),h>f?(o=e,p=g):(o=g,p=e),m=(n-m)/2+j,j=(p-o)/2+j,e=(e+g)/2,f=(f+h)/2,0===m||0===j)return i;if(.5>(c>a?c-a:a-c)){if(m=1-(c-e)*(c-e)/(m*m),0>m)return i;m=Math.sqrt(m),d=-j*m+f,k(c,j*m+f),k(c,d)}else{if(c=(d-b)/(c-a),d=1/(m*m)+c*c/(j*j),h=2*c*(b-c*a)/(j*j)-2*c*f/(j*j)-2*e/(m*m),m=h*h-4*d*(2*c*a*f/(j*j)-2*b*f/(j*j)+f*f/(j*j)+e*e/(m*m)-1+(b-c*a)*(b-c*a)/(j*j)),0>m)return i;m=Math.sqrt(m),j=(-h+m)/(2*d),k(j,c*j-c*a+b),m=(-h-m)/(2*d),k(m,c*m-c*a+b)}return i},Un:function(a,b,c,d,e,f,g,h,i){var m,j=1e21,k=a,l=b;return H.vg(a,b,a,d,e,f,g,h,i)&&(m=(i.x-e)*(i.x-e)+(i.y-f)*(i.y-f),j>m&&(j=m,k=i.x,l=i.y)),H.vg(c,b,c,d,e,f,g,h,i)&&(m=(i.x-e)*(i.x-e)+(i.y-f)*(i.y-f),j>m&&(j=m,k=i.x,l=i.y)),H.vg(a,b,c,b,e,f,g,h,i)&&(m=(i.x-e)*(i.x-e)+(i.y-f)*(i.y-f),j>m&&(j=m,k=i.x,l=i.y)),H.vg(a,d,c,d,e,f,g,h,i)&&(m=(i.x-e)*(i.x-e)+(i.y-f)*(i.y-f),j>m&&(j=m,k=i.x,l=i.y)),i.x=k,i.y=l,1e21>j},Wu:function(a,b,c){var d=b.x,e=b.y,f=c.x,g=c.y,i=a.left,j=a.right,k=a.top,l=a.bottom;return d===f?(g>e?(a=e,f=g):(a=g,f=e),d>=i&&j>=d&&l>=a&&f>=k):e===g?(f>d?a=d:(a=f,f=d),e>=k&&l>=e&&j>=a&&f>=i):a.Ea(b)||a.Ea(c)||H.Vu(i,k,j,k,d,e,f,g)||H.Vu(j,k,j,l,d,e,f,g)||H.Vu(j,l,i,l,d,e,f,g)||H.Vu(i,l,i,k,d,e,f,g)?h:s
},Vu:function(a,b,c,d,e,f,g,h){return 0>=H.Bu(a,b,c,d,e,f)*H.Bu(a,b,c,d,g,h)&&0>=H.Bu(e,f,g,h,a,b)*H.Bu(e,f,g,h,c,d)},Bu:function(a,b,c,d,e,f){return c-=a,d-=b,a=e-a,b=f-b,f=a*d-b*c,0===f&&(f=a*c+b*d,f>0&&(f=(a-c)*c+(b-d)*d,0>f&&(f=0))),0>f?-1:f>0?1:0},Yr:function(a){return 0>a&&(a+=360),a>=360&&(a-=360),a},VB:function(a,b,c,d,e,f){var h,i,j,g=Math.PI;for(f||(d*=g/180,e*=g/180),f=e>d?1:-1,h=[],i=g/2,j=d,d=Math.min(2*g+1e-5,Math.abs(e-d));d>1e-5;)e=j+f*Math.min(d,i),h.push(H.RF(c,j,e,a,b)),d-=Math.abs(e-j),j=e;return h},RF:function(a,b,c,d,e){var f=(c-b)/2,g=a*Math.cos(f),h=a*Math.sin(f),i=.5522847498*Math.tan(f),j=g+i*h,g=-h+i*g,h=-g,i=f+b,f=Math.cos(i),i=Math.sin(i);return{x1:d+a*Math.cos(b),y1:e+a*Math.sin(b),x2:d+j*f-g*i,y2:e+j*i+g*f,Bd:d+j*f-h*i,Cd:e+j*i+h*f,Db:d+a*Math.cos(c),Eb:e+a*Math.sin(c)}},wy:function(a,b,c,d,e,f,g){c=Math.floor((a-c)/e)*e+c,d=Math.floor((b-d)/f)*f+d;var h=c;return e/2>c+e-a&&(h=c+e),a=d,f/2>d+f-b&&(a=d+f),g.q(h,a),g},qC:function(a,b){var c=Math.max(a,b),d=Math.min(a,b),e=1,f=1;do e=c%d,c=f=d,d=e;while(e>0);return f},iG:function(a,b,c,d){var g,h,i,j,e=0>c,f=0>d;return b>a?(g=1,h=0):(g=0,h=1),i=0===g?a:b,j=0===g?c:d,(0===g?e:f)&&(j=-j),g=h,c=0===g?c:d,(0===g?e:f)&&(c=-c),H.jG(i,0===g?a:b,j,c,0,0)},jG:function(a,b,c,d,e,f){var g,h,i,j,k,l;if(d>0)if(c>0){for(f=a*a,e=b*b,a*=c,g=b*d,h=-e+g,i=-e+Math.sqrt(a*a+g*g),b=h,j=0;9999999999>j&&(b=.5*(h+i),b!==h&&b!==i);++j)if(k=a/(b+f),l=g/(b+e),k=k*k+l*l-1,k>0)h=b;else{if(!(0>k))break;i=b}c=f*c/(b+f)-c,d=e*d/(b+e)-d,c=Math.sqrt(c*c+d*d)}else c=Math.abs(d-b);else d=a*a-b*b,e=a*c,d>e?(d=e/d,e=a*d,f=b*Math.sqrt(Math.abs(1-d*d)),c=e-c,c=Math.sqrt(c*c+f*f)):c=Math.abs(c-a);return c}},y.ba("Geometry",nc),nc.prototype.copy=function(){var b,c,d,e,f,a=new nc;for(a.Y=this.Y,a.Rb=this.Rb,a.$b=this.$b,a.Vc=this.Vc,a.cd=this.cd,b=this.Uj,c=b.length,d=a.Uj,e=0;c>e;e++)f=b.n[e].copy(),d.add(f);return a.Zs=this.Zs,a.Ls.assign(this.Ls),a.Ua=this.Ua,a.Qh=this.Qh.U(),a.Rh=this.Rh.U(),a.kt=this.kt,a.jt=this.jt,a.Hd=this.Hd.U(),a.ec=this.ec,a},nc.Line=wc=y.w(nc,"Line",0),nc.Rectangle=xc=y.w(nc,"Rectangle",1),nc.Ellipse=yc=y.w(nc,"Ellipse",2),nc.Path=oc=y.w(nc,"Path",3),nc.prototype.Ja=function(){return this.freeze(),Object.freeze(this),this},nc.prototype.freeze=function(){var a,b,c;for(this.$a=h,a=this.fb,a.freeze(),b=a.length,c=0;b>c;c++)a.n[c].freeze();return this},nc.prototype.Pa=function(){var a,b,c;for(Object.isFrozen(this)&&y.m("cannot thaw constant: "+this),this.$a=s,a=this.fb,a.Pa(),b=a.length,c=0;b>c;c++)a.n[c].Pa();return this},nc.prototype.equalsApprox=nc.prototype.nj=function(a){var b,c,d;if(!(a instanceof nc))return s;if(this.type!==a.type)return this.type===wc&&a.type===oc?Dc(this,a):a.type===wc&&this.type===oc?Dc(a,this):s;if(this.type===oc){if(b=this.fb,a=a.fb,c=b.length,c!==a.length)return s;for(d=0;c>d;d++)if(!b.n[d].nj(a.n[d]))return s;return h}return H.I(this.ha,a.ha)&&H.I(this.ia,a.ia)&&H.I(this.D,a.D)&&H.I(this.F,a.F)},nc.stringify=Fc=function(a){return a.toString()},nc.prototype.toString=function(a){var b,c,d,e,g;switch(this.type){case wc:return a===f?"M"+this.ha.toString()+" "+this.ia.toString()+"L"+this.D.toString()+" "+this.F.toString():"M"+this.ha.toFixed(a)+" "+this.ia.toFixed(a)+"L"+this.D.toFixed(a)+" "+this.F.toFixed(a);case xc:return b=new B(this.ha,this.ia,0,0),b.tE(this.D,this.F,0,0),a===f?"M"+b.x.toString()+" "+b.y.toString()+"H"+b.right.toString()+"V"+b.bottom.toString()+"H"+b.left.toString()+"z":"M"+b.x.toFixed(a)+" "+b.y.toFixed(a)+"H"+b.right.toFixed(a)+"V"+b.bottom.toFixed(a)+"H"+b.left.toFixed(a)+"z";case yc:return b=new B(this.ha,this.ia,0,0),b.tE(this.D,this.F,0,0),a===f?(c=b.left.toString()+" "+(b.y+b.height/2).toString(),d=b.right.toString()+" "+(b.y+b.height/2).toString(),"M"+c+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+d+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+c):(c=b.left.toFixed(a)+" "+(b.y+b.height/2).toFixed(a),d=b.right.toFixed(a)+" "+(b.y+b.height/2).toFixed(a),"M"+c+"A"+(b.width/2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+d+"A"+(b.width/2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+c);case oc:for(b="",c=this.fb,d=c.length,e=0;d>e;e++)g=c.n[e],e>0&&(b+=" x "),g.Yn&&(b+="F "),b+=g.toString(a);return b;default:return this.type.toString()}},nc.fillPath=Gc=function(a){var b,c,d,e;for("string"!=typeof a&&y.Kb(a,"string",nc,"fillPath:str"),a=a.split(/[Xx]/),b=a.length,c="",d=0;b>d;d++)e=a[d],c=e.match(/[Ff]/)!==q?0===d?c+e:c+("X"+(" "===e[0]?"":" ")+e):c+((0===d?"":"X ")+"F"+(" "===e[0]?"":" ")+e);return c},nc.parse=Lc=function(a,b){function c(){return m>=u-1?h:l[m+1].match(/[A-Za-z]/)!==q}function d(){return m++,l[m]}function e(){var a=new A(parseFloat(d()),parseFloat(d()));return n===n.toLowerCase()&&(a.x=t.x+a.x,a.y=t.y+a.y),a}function g(){return t=e()}function i(){return r=e()}function j(){var a=[parseFloat(d()),parseFloat(d()),parseFloat(d()),parseFloat(d()),parseFloat(d())];return c()||(a.push(parseFloat(d())),c()||a.push(parseFloat(d()))),n===n.toLowerCase()&&(a[2]+=t.x,a[3]+=t.y),a}function k(){return"c"!==o.toLowerCase()&&"s"!==o.toLowerCase()?t:new A(2*t.x-r.x,2*t.y-r.y)}var w,l,m,n,o,p,r,t,u,v,x,z,B,C,D,E,F,G;for(b===f&&(b=s),"string"!=typeof a&&y.Kb(a,"string",nc,"parse:str"),a=a.replace(/,/gm," "),a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm,"$1 $2"),a=a.replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),a=a.replace(/([0-9])([+\-])/gm,"$1 $2"),a=a.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),a=a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),a=a.replace(/[\s\r\t\n]+/gm," "),a=a.replace(/^\s+|\s+$/g,""),l=a.split(" "),m=-1,n="",o="",p=new A(0,0),r=new A(0,0),t=new A(0,0),u=l.length,v=y.u(),x=s,z=s,B=h;!(m>=u-1);)if(o=n,n=d(),""!==n)switch(n.toUpperCase()){case"X":B=h,z=x=s;break;case"M":for(w=g(),v.Fb===q||B===h?(M(v,w.x,w.y,x,s,!z),B=s):v.moveTo(w.x,w.y),p=t;!c();)w=g(),v.lineTo(w.x,w.y);break;case"L":for(;!c();)w=g(),v.lineTo(w.x,w.y);break;case"H":for(;!c();)t=w=new A((n===n.toLowerCase()?t.x:0)+parseFloat(d()),t.y),v.lineTo(t.x,t.y);break;case"V":for(;!c();)t=w=new A(t.x,(n===n.toLowerCase()?t.y:0)+parseFloat(d())),v.lineTo(t.x,t.y);break;case"C":for(;!c();)C=e(),D=i(),w=g(),N(v,C.x,C.y,D.x,D.y,w.x,w.y);break;case"S":for(;!c();)C=k(),D=i(),w=g(),N(v,C.x,C.y,D.x,D.y,w.x,w.y);break;case"Q":for(;!c();)D=i(),w=g(),Pc(v,D.x,D.y,w.x,w.y);break;case"T":for(;!c();)r=D=k(),w=g(),Pc(v,D.x,D.y,w.x,w.y);break;case"B":for(;!c();)w=j(),v.arcTo(w[0],w[1],w[2],w[3],w[4],w[5],w[6]);break;case"A":for(;!c();)C=Math.abs(parseFloat(d())),D=Math.abs(parseFloat(d())),E=parseFloat(d()),F=!!parseFloat(d()),G=!!parseFloat(d()),w=g(),Qc(v,C,D,E,F,G,w.x,w.y);break;case"Z":Rc(v),t=p;break;case"F":for(w=q,C=1;l[m+C];)if(l[m+C].match(/[Uu]/)!==q)C++;else{if(l[m+C].match(/[A-Za-z]/)!==q){w=l[m+C];break}C++}w.match(/[Mm]/)?x=h:Sc(v);break;case"U":for(w=q,C=1;l[m+C];)if(l[m+C].match(/[Ff]/)!==q)C++;else{if(l[m+C].match(/[A-Za-z]/)!==q){w=l[m+C];break}C++}w.match(/[Mm]/)?z=h:Tc(v)}if(p=v.s,y.v(v),b)for(v=p.fb.k;v.next();)v.value.Yn=h;return p},nc.prototype.Ky=function(){var a,b,c;if(this.Ua)return h;if(a=this.fb,this.Zs!==a.Lb)return h;for(b=a.length,c=0;b>c;c++)if(a.n[c].Ky())return h;return s},nc.prototype.Hz=function(){var a,b,c;for(this.Ua=s,a=this.fb,this.Zs=a.Lb,b=a.length,c=0;b>c;c++)a.n[c].Hz()},nc.prototype.Qe=function(){var a=this.Ls;a.Pa(),a.q(0,0,this.Hd.width,this.Hd.height),Vc(this,a,s),ib(a,0,0,0,0),a.freeze()},nc.prototype.computeBoundsWithoutOrigin=nc.prototype.NF=function(){var a=new B;return Vc(this,a,h),a},nc.prototype.normalize=nc.prototype.normalize=function(){y.K(this);var a=this.NF();return this.offset(-a.x,-a.y),new A(-a.x,-a.y)},nc.prototype.offset=nc.prototype.offset=function(a,b){y.K(this),x&&(y.p(a,nc,"offset"),y.p(b,nc,"offset")),this.transform(1,0,0,1,a,b)},nc.prototype.scale=nc.prototype.scale=function(a,b){y.K(this),x&&(y.p(a,nc,"scale:x"),y.p(b,nc,"scale:y"),0>=a&&y.ka(a,"scale must be greater than zero",nc,"scale:x"),0>=b&&y.ka(b,"scale must be greater than zero",nc,"scale:y")),this.transform(a,0,0,b,0,0)},nc.prototype.rotate=nc.prototype.rotate=function(a,b,c){y.K(this),b===f&&(b=0),c===f&&(c=0),x&&(y.p(a,nc,"rotate:angle"),y.p(b,nc,"rotate:x"),y.p(c,nc,"rotate:y"));var d=y.xg();d.reset(),d.rotate(a,b,c),this.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy),y.ye(d)},nc.prototype.transform=nc.prototype.transform=function(a,b,c,d,e,g){var i,j,k,l,m,n,o,p,q;switch(this.type){case wc:case xc:case yc:i=this.Rb,j=this.$b,this.Rb=i*a+j*c+e,this.$b=i*b+j*d+g,i=this.Vc,j=this.cd,this.Vc=i*a+j*c+e,this.cd=i*b+j*d+g;break;case oc:for(k=this.fb,l=k.length,m=0;l>m;m++)for(n=k.n[m],i=n.ha,j=n.ia,n.ha=i*a+j*c+e,n.ia=i*b+j*d+g,n=n.Ca,o=n.length,p=0;o>p;p++)switch(q=n.n[p],q.type){case Ec:case Wc:i=q.D,j=q.F,q.D=i*a+j*c+e,q.F=i*b+j*d+g;break;case Xc:i=q.ib,j=q.Ab,q.ib=i*a+j*c+e,q.Ab=i*b+j*d+g,i=q.Rd,j=q.Sd,q.Rd=i*a+j*c+e,q.Sd=i*b+j*d+g,i=q.D,j=q.F,q.D=i*a+j*c+e,q.F=i*b+j*d+g;break;case cd:i=q.ib,j=q.Ab,q.ib=i*a+j*c+e,q.Ab=i*b+j*d+g,i=q.D,j=q.F,q.D=i*a+j*c+e,q.F=i*b+j*d+g;break;case dd:i=q.xa,j=q.Ga,q.xa=i*a+j*c+e,q.Ga=i*b+j*d+g,q.radiusX*=Math.sqrt(a*a+c*c),q.radiusY!==f&&(q.radiusY*=Math.sqrt(b*b+d*d));break;case ed:i=q.D,j=q.F,q.D=i*a+j*c+e,q.F=i*b+j*d+g,q.radiusX*=Math.sqrt(a*a+c*c),q.radiusY*=Math.sqrt(b*b+d*d);break;default:y.m("Unknown Segment type: "+q.type)}}this.Ua=h},nc.prototype.Zq=function(a,b){var c=this.Rb,d=this.$b,e=this.Vc,f=this.cd,g=Math.min(c,e),h=Math.min(d,f),c=Math.abs(e-c),d=Math.abs(f-d),f=y.M();return f.x=g,f.y=h,b.Qa(f),e=new pc(f.x,f.y),f.x=g+c,f.y=h,b.Qa(f),e.Ca.add(new hd(Ec,f.x,f.y)),f.x=g+c,f.y=h+d,b.Qa(f),e.Ca.add(new hd(Ec,f.x,f.y)),f.x=g,f.y=h+d,b.Qa(f),e.Ca.add(new hd(Ec,f.x,f.y).close()),y.B(f),a.type=oc,a.fb.add(e),a},nc.prototype.Ea=function(a,b,c,d){var j,k,l,m,n,o,p,i,r,s,t,u,v,w,x,z,A,B,C,e=a.x,f=a.y,g=this.Ib.x-20;for(a=a.y,i=0,r=this.fb.n,s=r.length,t=0;s>t;t++)if(u=r[t],u.Yn){if(c&&u.Ea(e,f,b))return h;for(v=u.Ca,j=u.ha,k=u.ia,w=j,x=k,z=0;z<=v.length;z++){switch(z!==v.length?(l=v.n[z],m=l.type,o=l.D,p=l.F):(m=Ec,o=w,p=x),m){case Wc:if(n=id(e,f,g,a,j,k,w,x),n===h)return h;i+=n,w=o,x=p;break;case Ec:if(n=id(e,f,g,a,j,k,o,p),n===h)return h;i+=n;break;case Xc:n=H.lr(j,k,l.ib,l.Ab,l.Rd,l.Sd,o,p,g,a,e,f,.5),i+=n;break;case cd:n=H.lr(j,k,(j+2*l.ib)/3,(k+2*l.Ab)/3,(l.ib+2*o)/3,(l.ib+2*o)/3,o,p,g,a,e,f,.5),i+=n;break;case dd:case ed:for(m=l.type===dd?fd(l,u):gd(l,u,j,k),A=m.length,B=q,C=0;A>C;C++){if(B=m[C],0===C){if(n=id(e,f,g,a,j,k,B.x1,B.y1),n===h)return h;i+=n}n=H.lr(B.x1,B.y1,B.x2,B.y2,B.Bd,B.Cd,B.Db,B.Eb,g,a,e,f,.5),i+=n}B!==q&&(o=B.Db,p=B.Eb);break;default:y.m("Unknown Segment type: "+l.type)}j=o,k=p}if(0!==i)return h;i=0}else if(u.Ea(e,f,d?b:b+2))return h;return 0!==i},nc.prototype.getPointAlongPath=nc.prototype.LI=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;for((0>a||a>1)&&y.ka(a,"0 <= fraction <= 1",nc,"getPointAlongPath:fraction"),b=this.fb.ob(),c=y.tb(),d=[],d.push([b.ha,b.ia]),e=b.ha,f=b.ia,g=e,h=f,i=b.Ca.n,j=i.length,k=0;j>k;k++){switch(l=i[k],l.Y){case Wc:c.push(d),d=[],d.push([l.D,l.F]),e=l.D,f=l.F,g=e,h=f;break;case Ec:d.push([l.D,l.F]),e=l.D,f=l.F;break;case Xc:H.ae(e,f,l.lg,l.mg,l.jk,l.kk,l.Xd,l.Yd,.5,d),e=l.D,f=l.F;break;case cd:H.uo(e,f,l.lg,l.mg,l.Xd,l.Yd,.5,d),e=l.D,f=l.F;break;case dd:for(m=fd(l,b),n=m.length,o=0;n>o;o++)p=m[o],H.ae(e,f,p.x2,p.y2,p.Bd,p.Cd,p.Db,p.Eb,.5,d),e=p.Db,f=p.Eb;break;case ed:for(m=gd(l,b,e,f),n=m.length,o=0;n>o;o++)p=m[o],H.ae(e,f,p.x2,p.y2,p.Bd,p.Cd,p.Db,p.Eb,.5,d),e=p.Db,f=p.Eb;break;default:y.m("Segment not of valid type")}l.Kg&&d.push([g,h])}for(c.push(d),j=0,e=c.length,b=q,f=0;e>f;f++)for(g=c[f],h=g.length,k=0;h>k;k++)d=g[k],0!==k&&(i=Math.sqrt(Va(b[0],b[1],d[0],d[1])),j+=i),b=d;for(a*=j,f=j=0;e>f;f++)for(g=c[f],h=g.length,k=0;h>k;k++){if(d=g[k],0!==k){if(i=Math.sqrt(Va(b[0],b[1],d[0],d[1])),j+i>a)return k=(a-j)/i,y.ya(c),new A(b[0]+(d[0]-b[0])*k,b[1]+(d[1]-b[1])*k);j+=i}b=d}return y.ya(c),q},y.g(nc,"type",nc.prototype.type),y.defineProperty(nc,{type:"type"},w("Y"),function(a){this.Y!==a&&(x&&y.rb(a,nc,nc,"type"),y.K(this,a),this.Y=a,this.Ua=h)}),y.g(nc,"startX",nc.prototype.ha),y.defineProperty(nc,{ha:"startX"},w("Rb"),function(a){this.Rb!==a&&(x&&y.p(a,nc,"startX"),y.K(this,a),this.Rb=a,this.Ua=h)}),y.g(nc,"startY",nc.prototype.ia),y.defineProperty(nc,{ia:"startY"},w("$b"),function(a){this.$b!==a&&(x&&y.p(a,nc,"startY"),y.K(this,a),this.$b=a,this.Ua=h)}),y.g(nc,"endX",nc.prototype.D),y.defineProperty(nc,{D:"endX"},w("Vc"),function(a){this.Vc!==a&&(x&&y.p(a,nc,"endX"),y.K(this,a),this.Vc=a,this.Ua=h)}),y.g(nc,"endY",nc.prototype.F),y.defineProperty(nc,{F:"endY"},w("cd"),function(a){this.cd!==a&&(x&&y.p(a,nc,"endY"),y.K(this,a),this.cd=a,this.Ua=h)}),y.g(nc,"figures",nc.prototype.fb),y.defineProperty(nc,{fb:"figures"},w("Uj"),function(a){this.Uj!==a&&(x&&y.l(a,F,nc,"figures"),y.K(this,a),this.Uj=a,this.Ua=h)}),y.defineProperty(nc,{G:"spot1"},w("Qh"),function(a){x&&y.l(a,J,nc,"spot1"),y.K(this,a),this.Qh=a.U()}),y.defineProperty(nc,{H:"spot2"},w("Rh"),function(a){x&&y.l(a,J,nc,"spot2"),y.K(this,a),this.Rh=a.U()}),y.A(nc,{Ib:"bounds"},function(){return this.Ky()&&(this.Hz(),this.Qe()),this.Ls}),y.g(nc,"minSize",nc.prototype.Ce),y.defineProperty(nc,{Ce:"minSize"},w("Hd"),function(a){this.Hd.L(a)||(x&&y.l(a,ha,nc,"minSize"),a=a.U(),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a.freeze(),this.Hd=a)}),y.ba("PathFigure",pc),pc.prototype.copy=function(){var b,c,d,e,f,a=new pc;for(a.bl=this.bl,a.Mm=this.Mm,a.Rb=this.Rb,a.$b=this.$b,b=this.Fq,c=b.length,d=a.Fq,e=0;c>e;e++)f=b.n[e].copy(),d.add(f);return a.Wt=this.Wt,a.Ua=this.Ua,a},pc.prototype.equalsApprox=pc.prototype.nj=function(a){var b,c,d;if(!(a instanceof pc&&H.I(this.ha,a.ha)&&H.I(this.ia,a.ia)))return s;if(b=this.Ca,a=a.Ca,c=b.length,c!==a.length)return s;for(d=0;c>d;d++)if(!b.n[d].nj(a.n[d]))return s;return h},da=pc.prototype,da.toString=function(a){for(var b=a===f?"M"+this.ha.toString()+" "+this.ia.toString():"M"+this.ha.toFixed(a)+" "+this.ia.toFixed(a),c=this.Ca,d=c.length,e=0;d>e;e++)b+=" "+c.n[e].toString(a);return b},da.freeze=function(){var a,b,c;for(this.$a=h,a=this.Ca,a.freeze(),b=a.length,c=0;b>c;c++)a.n[c].freeze();return this},da.Pa=function(){var a,b,c;for(this.$a=s,a=this.Ca,a.Pa(),b=a.length,c=0;b>c;c++)a.n[c].Pa();return this},da.Ky=function(){var a,b,c;if(this.Ua)return h;if(a=this.Ca,this.Wt!==a.Lb)return h;for(b=a.length,c=0;b>c;c++)if(a.n[c].Ua)return h;return s},da.Hz=function(){var a,b,c,d;for(this.Ua=s,a=this.Ca,this.Wt=a.Lb,b=a.length,c=0;b>c;c++)d=a.n[c],d.Ua=s,d.oi=q},y.g(pc,"isFilled",pc.prototype.Yn),y.defineProperty(pc,{Yn:"isFilled"},w("bl"),function(a){x&&y.j(a,"boolean",pc,"isFilled"),y.K(this,a),this.bl=a}),y.g(pc,"isShadowed",pc.prototype.Ck),y.defineProperty(pc,{Ck:"isShadowed"},w("Mm"),function(a){x&&y.j(a,"boolean",pc,"isShadowed"),y.K(this,a),this.Mm=a}),y.g(pc,"startX",pc.prototype.ha),y.defineProperty(pc,{ha:"startX"},w("Rb"),function(a){x&&y.p(a,pc,"startX"),y.K(this,a),this.Rb=a,this.Ua=h}),y.g(pc,"startY",pc.prototype.ia),y.defineProperty(pc,{ia:"startY"},w("$b"),function(a){x&&y.p(a,pc,"startY"),y.K(this,a),this.$b=a,this.Ua=h}),y.g(pc,"segments",pc.prototype.Ca),y.defineProperty(pc,{Ca:"segments"},w("Fq"),function(a){x&&y.l(a,F,pc,"segments"),y.K(this,a),this.Fq=a,this.Ua=h}),pc.prototype.Ea=function(a,b,c){var d,e,f,g,i,j,k,l,m,n,o,p;for(d=this.ha,e=this.ia,f=d,g=e,i=this.Ca.n,j=i.length,k=0;j>k;k++){switch(l=i[k],l.type){case Wc:f=l.D,g=l.F,d=l.D,e=l.F;break;case Ec:if(H.jd(d,e,l.D,l.F,c,a,b))return h;d=l.D,e=l.F;break;case Xc:if(H.wu(d,e,l.ib,l.Ab,l.Rd,l.Sd,l.D,l.F,.5,a,b,c))return h;d=l.D,e=l.F;break;case cd:if(H.gz(d,e,l.ib,l.Ab,l.D,l.F,.5,a,b,c))return h;d=l.D,e=l.F;break;case dd:case ed:for(m=l.type===dd?fd(l,this):gd(l,this,d,e),n=m.length,o=q,p=0;n>p;p++)if(o=m[p],0===p&&H.jd(d,e,o.x1,o.y1,c,a,b)||H.wu(o.x1,o.y1,o.x2,o.y2,o.Bd,o.Cd,o.Db,o.Eb,.5,a,b,c))return h;o!==q&&(d=o.Db,e=o.Eb);break;default:y.m("Unknown Segment type: "+l.type)}if(l.Hr&&(d!==f||e!==g)&&H.jd(d,e,f,g,c,a,b))return h}return s},y.ba("PathSegment",hd),hd.prototype.copy=function(){var a=new hd;return a.Y=this.Y,this.Y===dd?(a.Zd=this.Zd,a.$d=this.$d,a.nm=this.nm,a.om=this.om,a.Oi=this.Oi,a.Pi=this.Pi):this.Y===ed?(a.Zd=this.Zd,a.$d=this.$d,a.Xd=this.Xd,a.Yd=this.Yd,a.Oi=this.Oi,a.Pi=this.Pi,a.sn=this.sn):(a.Xd=this.Xd,a.Yd=this.Yd,a.lg=this.lg,a.mg=this.mg,a.jk=this.jk,a.kk=this.kk),a.Ua=this.Ua,a.Kg=this.Kg,a},hd.prototype.equalsApprox=hd.prototype.nj=function(a){if(!(a instanceof hd)||this.type!==a.type||this.Hr!==a.Hr)return s;switch(this.type){case Wc:case Ec:return H.I(this.D,a.D)&&H.I(this.F,a.F);case Xc:return H.I(this.D,a.D)&&H.I(this.F,a.F)&&H.I(this.ib,a.ib)&&H.I(this.Ab,a.Ab)&&H.I(this.Rd,a.Rd)&&H.I(this.Sd,a.Sd);case cd:return H.I(this.D,a.D)&&H.I(this.F,a.F)&&H.I(this.ib,a.ib)&&H.I(this.Ab,a.Ab);case dd:return H.I(this.Vf,a.Vf)&&H.I(this.nh,a.nh)&&H.I(this.xa,a.xa)&&H.I(this.Ga,a.Ga)&&H.I(this.radiusX,a.radiusX)&&H.I(this.radiusY,a.radiusY);case ed:return this.Yu===a.Yu&&this.$u===a.$u&&H.I(this.Iv,a.Iv)&&H.I(this.D,a.D)&&H.I(this.F,a.F)&&H.I(this.radiusX,a.radiusX)&&H.I(this.radiusY,a.radiusY);default:return s}},hd.prototype.toString=function(a){switch(this.type){case Wc:a=a===f?"M"+this.D.toString()+" "+this.F.toString():"M"+this.D.toFixed(a)+" "+this.F.toFixed(a);break;case Ec:a=a===f?"L"+this.D.toString()+" "+this.F.toString():"L"+this.D.toFixed(a)+" "+this.F.toFixed(a);break;case Xc:a=a===f?"C"+this.ib.toString()+" "+this.Ab.toString()+" "+this.Rd.toString()+" "+this.Sd.toString()+" "+this.D.toString()+" "+this.F.toString():"C"+this.ib.toFixed(a)+" "+this.Ab.toFixed(a)+" "+this.Rd.toFixed(a)+" "+this.Sd.toFixed(a)+" "+this.D.toFixed(a)+" "+this.F.toFixed(a);break;case cd:a=a===f?"Q"+this.ib.toString()+" "+this.Ab.toString()+" "+this.D.toString()+" "+this.F.toString():"Q"+this.ib.toFixed(a)+" "+this.Ab.toFixed(a)+" "+this.D.toFixed(a)+" "+this.F.toFixed(a);break;case dd:a=a===f?"B"+this.Vf.toString()+" "+this.nh.toString()+" "+this.xa.toString()+" "+this.Ga.toString()+" "+this.radiusX:"B"+this.Vf.toFixed(a)+" "+this.nh.toFixed(a)+" "+this.xa.toFixed(a)+" "+this.Ga.toFixed(a)+" "+this.radiusX;break;case ed:a=a===f?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.Iv.toString()+" "+(this.$u?1:0)+" "+(this.Yu?1:0)+" "+this.D.toString()+" "+this.F.toString():"A"+this.radiusX.toFixed(a)+" "+this.radiusY.toFixed(a)+" "+this.Iv.toFixed(a)+" "+(this.$u?1:0)+" "+(this.Yu?1:0)+" "+this.D.toFixed(a)+" "+this.F.toFixed(a);break;default:a=this.type.toString()}return a+(this.Kg?"z":"")},hd.Move=Wc=y.w(hd,"Move",0),hd.Line=Ec=y.w(hd,"Line",1),hd.Bezier=Xc=y.w(hd,"Bezier",2),hd.QuadraticBezier=cd=y.w(hd,"QuadraticBezier",3),hd.Arc=dd=y.w(hd,"Arc",4),hd.SvgArc=ed=y.w(hd,"SvgArc",4),hd.prototype.freeze=function(){return this.$a=h,this},hd.prototype.Pa=function(){return this.$a=s,this},hd.prototype.close=hd.prototype.close=function(){return this.Kg=h,this},y.g(hd,"isClosed",hd.prototype.Hr),y.defineProperty(hd,{Hr:"isClosed"},w("Kg"),function(a){this.Kg!==a&&(this.Kg=a,this.Ua=h)}),y.g(hd,"type",hd.prototype.type),y.defineProperty(hd,{type:"type"},w("Y"),function(a){x&&y.rb(a,hd,hd,"type"),y.K(this,a),this.Y=a,this.Ua=h}),y.g(hd,"endX",hd.prototype.D),y.defineProperty(hd,{D:"endX"},w("Xd"),function(a){x&&y.p(a,hd,"endX"),y.K(this,a),this.Xd=a,this.Ua=h}),y.g(hd,"endY",hd.prototype.F),y.defineProperty(hd,{F:"endY"},w("Yd"),function(a){x&&y.p(a,hd,"endY"),y.K(this,a),this.Yd=a,this.Ua=h}),y.defineProperty(hd,{ib:"point1X"},w("lg"),function(a){x&&y.p(a,hd,"point1X"),y.K(this,a),this.lg=a,this.Ua=h}),y.defineProperty(hd,{Ab:"point1Y"},w("mg"),function(a){x&&y.p(a,hd,"point1Y"),y.K(this,a),this.mg=a,this.Ua=h}),y.defineProperty(hd,{Rd:"point2X"},w("jk"),function(a){x&&y.p(a,hd,"point2X"),y.K(this,a),this.jk=a,this.Ua=h}),y.defineProperty(hd,{Sd:"point2Y"},w("kk"),function(a){x&&y.p(a,hd,"point2Y"),y.K(this,a),this.kk=a,this.Ua=h}),y.defineProperty(hd,{xa:"centerX"},w("nm"),function(a){x&&y.p(a,hd,"centerX"),y.K(this,a),this.nm=a,this.Ua=h}),y.defineProperty(hd,{Ga:"centerY"},w("om"),function(a){x&&y.p(a,hd,"centerY"),y.K(this,a),this.om=a,this.Ua=h}),y.defineProperty(hd,{radiusX:"radiusX"},w("Oi"),function(a){x&&y.p(a,hd,"radiusX"),0>a&&y.ka(a,">= zero",hd,"radiusX"),y.K(this,a),this.Oi=a,this.Ua=h}),y.defineProperty(hd,{radiusY:"radiusY"},w("Pi"),function(a){x&&y.p(a,hd,"radiusY"),0>a&&y.ka(a,">= zero",hd,"radiusY"),y.K(this,a),this.Pi=a,this.Ua=h}),y.defineProperty(hd,{Vf:"startAngle"},w("Zd"),function(a){this.Zd!==a&&(y.K(this,a),x&&y.p(a,hd,"startAngle"),a%=360,0>a&&(a+=360),this.Zd=a,this.Ua=h)}),y.defineProperty(hd,{nh:"sweepAngle"},w("$d"),function(a){x&&y.p(a,hd,"sweepAngle"),y.K(this,a),a>360&&(a=360),-360>a&&(a=-360),this.$d=a,this.Ua=h}),y.defineProperty(hd,{Yu:"isClockwiseArc"},function(){return!!this.$d},function(a){y.K(this,a),this.$d=a?1:0,this.Ua=h}),y.defineProperty(hd,{$u:"isLargeArc"},function(){return!!this.Zd},function(a){y.K(this,a),this.Zd=a?1:0,this.Ua=h}),y.defineProperty(hd,{Iv:"xAxisRotation"},w("sn"),function(a){x&&y.p(a,hd,"xAxisRotation"),a%=360,0>a&&(a+=360),y.K(this,a),this.sn=a,this.Ua=h}),y.ba("InputEvent",kd),kd.prototype.copy=function(){var a=new kd;return a.ca=this.ca,a.Ux=this.Rc.copy().freeze(),a.Cw=this.T.copy().freeze(),a.zt=this.zt,a.Hs=this.Hs,a.nt=this.nt,a.Vs=this.Vs,a.iu=this.iu,a.Ks=this.Ks,a.Ts=this.Ts,a.ct=this.ct,a.pi=this.pi,a.lp=this.lp,a.gu=this.gu,a.eu=this.eu,a.Cf=this.Cf,a},kd.prototype.toString=function(){var a="^";return this.hh&&(a+="M:"+this.hh),this.button&&(a+="B:"+this.button),this.key&&(a+="K:"+this.key),this.ce&&(a+="C:"+this.ce),this.lj&&(a+="D:"+this.lj),this.ee&&(a+="h"),this.bubbles&&(a+="b"),this.T!==q&&(a+="@"+this.T.toString()),a},y.g(kd,"diagram",kd.prototype.h),y.defineProperty(kd,{h:"diagram"},w("ca"),ba("ca")),y.g(kd,"viewPoint",kd.prototype.Rc),y.defineProperty(kd,{Rc:"viewPoint"},w("Ux"),function(a){y.l(a,A,kd,"viewPoint"),this.Ux.assign(a)}),y.g(kd,"documentPoint",kd.prototype.T),y.defineProperty(kd,{T:"documentPoint"},w("Cw"),function(a){y.l(a,A,kd,"documentPoint"),this.Cw.assign(a)}),y.g(kd,"modifiers",kd.prototype.hh),y.defineProperty(kd,{hh:"modifiers"},w("zt"),ba("zt")),y.g(kd,"button",kd.prototype.button),y.defineProperty(kd,{button:"button"},w("Hs"),ba("Hs")),y.g(kd,"key",kd.prototype.key),y.defineProperty(kd,{key:"key"},w("nt"),ba("nt")),y.g(kd,"down",kd.prototype.mj),y.defineProperty(kd,{mj:"down"},w("Vs"),ba("Vs")),y.g(kd,"up",kd.prototype.ni),y.defineProperty(kd,{ni:"up"},w("iu"),ba("iu")),y.g(kd,"clickCount",kd.prototype.ce),y.defineProperty(kd,{ce:"clickCount"},w("Ks"),ba("Ks")),y.g(kd,"delta",kd.prototype.lj),y.defineProperty(kd,{lj:"delta"},w("Ts"),ba("Ts")),y.g(kd,"handled",kd.prototype.ee),y.defineProperty(kd,{ee:"handled"},w("ct"),ba("ct")),y.g(kd,"bubbles",kd.prototype.bubbles),y.defineProperty(kd,{bubbles:"bubbles"},w("pi"),ba("pi")),y.g(kd,"event",kd.prototype.event),y.defineProperty(kd,{event:"event"},w("lp"),ba("lp")),y.A(kd,{bv:"isTouchEvent"},function(){var a=window.TouchEvent;return a&&this.event instanceof a}),y.g(kd,"timestamp",kd.prototype.timestamp),y.defineProperty(kd,{timestamp:"timestamp"},w("gu"),ba("gu")),y.g(kd,"targetDiagram",kd.prototype.Wf),y.defineProperty(kd,{Wf:"targetDiagram"},w("eu"),ba("eu")),y.g(kd,"targetObject",kd.prototype.zd),y.defineProperty(kd,{zd:"targetObject"},w("Cf"),ba("Cf")),y.A(kd,{control:"control"},function(){return 0!==(1&this.hh)}),y.A(kd,{shift:"shift"},function(){return 0!==(4&this.hh)}),y.A(kd,{alt:"alt"},function(){return 0!==(2&this.hh)}),y.A(kd,{dJ:"meta"},function(){return 0!==(8&this.hh)}),y.A(kd,{left:"left"},function(){return 0===this.button}),y.A(kd,{eJ:"middle"},function(){return 1===this.button}),y.A(kd,{right:"right"},function(){return 2===this.button}),y.ba("DiagramEvent",ld),ld.prototype.copy=function(){var a=new ld;return a.ca=this.ca,a.Gb=this.Gb,a.au=this.au,a.Ot=this.Ot,a.Is=this.Is,a},ld.prototype.toString=function(){var a="*"+this.name;return this.cancel&&(a+="x"),this.Bv!==q&&(a+=":"+this.Bv.toString()),this.mv!==q&&(a+="("+this.mv.toString()+")"),a},y.g(ld,"diagram",ld.prototype.h),y.defineProperty(ld,{h:"diagram"},w("ca"),ba("ca")),y.g(ld,"name",ld.prototype.name),y.defineProperty(ld,{name:"name"},w("Gb"),ba("Gb")),y.g(ld,"subject",ld.prototype.Bv),y.defineProperty(ld,{Bv:"subject"},w("au"),ba("au")),y.g(ld,"parameter",ld.prototype.mv),y.defineProperty(ld,{mv:"parameter"},w("Ot"),ba("Ot")),y.g(ld,"cancel",ld.prototype.cancel),y.defineProperty(ld,{cancel:"cancel"},w("Is"),ba("Is")),y.ba("ChangedEvent",md),md.Transaction=nd=y.w(md,"Transaction",-1),md.Property=sd=y.w(md,"Property",0),md.Insert=td=y.w(md,"Insert",1),md.Remove=ud=y.w(md,"Remove",2),md.prototype.clear=md.prototype.clear=function(){this.Js=sd,this.Rt=this.yt="",this.Ct=this.Dt=this.Jt=this.Kt=this.It=this.ca=this.Jd=q},md.prototype.copy=function(){var b,a=new md;return a.Jd=this.Jd,a.ca=this.ca,a.Js=this.Js,a.yt=this.yt,a.Rt=this.Rt,a.It=this.It,b=this.Kt,a.Kt=y.sb(b)&&"function"==typeof b.U?b.U():b,b=this.Jt,a.Jt=y.sb(b)&&"function"==typeof b.U?b.U():b,b=this.Dt,a.Dt=y.sb(b)&&"function"==typeof b.U?b.U():b,b=this.Ct,a.Ct=y.sb(b)&&"function"==typeof b.U?b.U():b,a},md.prototype.toString=function(){var a="",a=this.Yc===nd?a+"* ":this.Yc===sd?a+(this.fa!==q?"!m":"!d"):a+((this.fa!==q?"!m":"!d")+this.Yc);return this.propertyName&&"string"==typeof this.propertyName&&(a+=" "+this.propertyName),this.Ye&&this.Ye!==this.propertyName&&(a+=" "+this.Ye),a+=": ",this.Yc===nd?this.oldValue!==q&&(a+=" "+this.oldValue):(this.object!==q&&(a+=vd(this.object)),this.oldValue!==q&&(a+="  old: "+vd(this.oldValue)),this.tf!==q&&(a+=" "+this.tf),this.newValue!==q&&(a+="  new: "+vd(this.newValue)),this.rf!==q&&(a+=" "+this.rf)),a},md.prototype.getValue=md.prototype.wa=function(a){return a?this.oldValue:this.newValue},md.prototype.getParam=md.prototype.KI=function(a){return a?this.tf:this.rf},md.prototype.canUndo=md.prototype.canUndo=function(){return this.fa!==q||this.h!==q?h:s},md.prototype.undo=md.prototype.undo=function(){this.canUndo()&&(this.fa!==q?this.fa.changeState(this,h):this.h!==q&&this.h.changeState(this,h))},md.prototype.canRedo=md.prototype.canRedo=function(){return this.fa!==q||this.h!==q?h:s},md.prototype.redo=md.prototype.redo=function(){this.canRedo()&&(this.fa!==q?this.fa.changeState(this,s):this.h!==q&&this.h.changeState(this,s))},y.g(md,"model",md.prototype.fa),y.defineProperty(md,{fa:"model"},w("Jd"),ba("Jd")),y.g(md,"diagram",md.prototype.h),y.defineProperty(md,{h:"diagram"},w("ca"),ba("ca")),y.g(md,"change",md.prototype.Yc),y.defineProperty(md,{Yc:"change"},w("Js"),function(a){x&&y.rb(a,md,md,"change"),this.Js=a}),y.g(md,"modelChange",md.prototype.Ye),y.defineProperty(md,{Ye:"modelChange"},w("yt"),function(a){x&&y.j(a,"string",md,"modelChange"),this.yt=a}),y.g(md,"propertyName",md.prototype.propertyName),y.defineProperty(md,{propertyName:"propertyName"},w("Rt"),function(a){x&&"string"!=typeof a&&y.l(a,Function,md,"propertyName"),this.Rt=a}),y.g(md,"object",md.prototype.object),y.defineProperty(md,{object:"object"},w("It"),ba("It")),y.g(md,"oldValue",md.prototype.oldValue),y.defineProperty(md,{oldValue:"oldValue"},w("Kt"),ba("Kt")),y.g(md,"oldParam",md.prototype.tf),y.defineProperty(md,{tf:"oldParam"},w("Jt"),ba("Jt")),y.g(md,"newValue",md.prototype.newValue),y.defineProperty(md,{newValue:"newValue"},w("Dt"),ba("Dt")),y.g(md,"newParam",md.prototype.rf),y.defineProperty(md,{rf:"newParam"},w("Ct"),ba("Ct")),y.ba("Model",G),G.prototype.clear=G.prototype.clear=function(){this.lf=[],this.mc.clear(),this.cg.clear(),this.va.clear()},G.prototype.writeJsonProtected=function(){var a="";return""!==this.name&&(a+=',\n  "name": '+this.quote(this.name)),""!==this.Dl&&(a+=',\n  "dataFormat": '+this.quote(this.Dl)),this.Za&&(a+=',\n  "isReadOnly": '+this.Za),"key"!==this.Gk&&"string"==typeof this.Gk&&(a+=',\n  "nodeKeyProperty": '+this.quote(this.Gk)),"category"!==this.Fk&&"string"==typeof this.Fk&&(a+=',\n  "nodeCategoryProperty": '+this.quote(this.Fk)),a},G.prototype.Kz=function(){return',\n  "nodeDataArray": '+xd(this,this.Pf,h)},G.prototype.readJsonProtected=function(a){a.name&&(this.name=a.name),a.dataFormat&&(this.Dl=a.dataFormat),a.isReadOnly&&(this.Za=a.isReadOnly),a.nodeKeyProperty&&(this.Gk=a.nodeKeyProperty),a.nodeCategoryProperty&&(this.Fk=a.nodeCategoryProperty)},G.prototype.iz=function(a){a.nodeDataArray&&(a=a.nodeDataArray,yd(this,a),this.Pf=a)},G.prototype.toString=function(a){var b,d,c,e;if(a===f&&(a=0),a>1)return this.Cz();if(b=(""!==this.name?this.name:"")+" Model",a>0)for(b+="\n node data:",a=this.Pf,c=y.Sb(a),d=0;c>d;d++)e=y.Hb(a,d),b+=" "+this.Cb(e)+":"+vd(e);return b},G.prototype.toJson=G.prototype.Cz=function(a){return a===f&&(a=this.constructor===G?"go.Model":this.constructor===O?"go.GraphLinksModel":this.constructor===zd?"go.TreeModel":y.bh(this)),'{ "class": '+this.quote(a)+this.writeJsonProtected()+this.Kz()+"}"},G.fromJson=function(a,b){var c,e,g,h;if(b===f&&(b=q),b&&y.l(b,G,G,"fromJson:model"),c=q,"string"==typeof a)if(window&&window.JSON&&window.JSON.parse)try{c=window.JSON.parse(a)}catch(d){x&&y.trace("JSON.parse error: "+d.toString())}else y.trace("WARNING: no JSON.parse available");else"object"==typeof a?c=a:y.m("Unable to construct a Model from: "+a);if(b===q){if(e=q,g=c["class"],"string"==typeof g)try{h=q,0===g.indexOf("go.")?(g=g.substr(3),h=fa[g]):(h=fa[g])||(h=window[g]),"function"==typeof h&&(e=new h)}catch(i){}e===q||e instanceof G?b=e:y.m("Unable to construct a Model of declared class: "+c["class"])}return b===q&&(b=new O),b.readJsonProtected(c),b.iz(c),b},G.prototype.quote=function(a){var b,c,d,e;for(b="",c=a.length,d=0;c>d;d++)e=a[d],b='"'===e||"\\"===e?b+("\\"+e):"\b"===e?b+"\\b":"\f"===e?b+"\\f":"\n"===e?b+"\\n":"\r"===e?b+"\\r":"	"===e?b+"\\t":b+e;return'"'+b+'"'},G.prototype.writeJsonValue=G.prototype.Hv=function(a){var b,c,d,e,g,i;if(a===f)b="undefined";else if(a===q)b="null";else if(a===h)b="true";else if(a===s)b="false";else if("string"==typeof a)b=this.quote(a);else if("number"==typeof a)b=1/0===a?"9e9999":-1/0===a?"-9e9999":isNaN(a)?'{"class":"NaN"}':a.toString();else if(y.isArray(a))b=xd(this,a);else if(y.sb(a)){if(c=a,c instanceof A)a={"class":"go.Point",x:Id(c.x),y:Id(c.y)};else if(c instanceof ha)a={"class":"go.Size",width:Id(c.width),height:Id(c.height)};else if(c instanceof B)a={"class":"go.Rect",x:Id(c.x),y:Id(c.y),width:Id(c.width),height:Id(c.height)};else if(c instanceof ab)a={"class":"go.Margin",top:Id(c.top),right:Id(c.right),bottom:Id(c.bottom),left:Id(c.left)};else if(c instanceof J)a=yb(c)?{"class":"go.Spot",x:Id(c.x),y:Id(c.y),offsetX:Id(c.offsetX),offsetY:Id(c.offsetY)}:{"class":"go.Spot","enum":c.toString()};else if(c instanceof Hd){if(a={"class":"go.Brush",type:c.type.name},c.type===Jd?a.color=c.color:(c.type===Kd||c.type===Ld)&&(a.start=c.start,a.end=c.end,c.type===Ld&&(0!==c.Co&&(a.startRadius=Id(c.Co)),isNaN(c.Ln)||(a.endRadius=Id(c.Ln)))),c.Fn!==q){for(d={},c=c.Fn.k;c.next();)d[c.key.toString()]=c.value;a.colorStops=d}}else c instanceof nc&&(a={"class":"go.Geometry",type:c.type.name},0!==c.ha&&(a.startX=Id(c.ha)),0!==c.ia&&(a.startY=Id(c.ia)),0!==c.D&&(a.endX=Id(c.D)),0!==c.F&&(a.endY=Id(c.F)),c.G.L(Mb)||(a.spot1=c.G),c.H.L(Zb)||(a.spot2=c.H),c.type===oc&&(a.path=Fc(c)));d="{",e=h;for(b in a)if(c=y.Xa(a,b),!(c===f||"__gohashid"===b||"_"===b[0]||"function"==typeof c))if(e?e=s:d+=", ",d+='"'+b+'":',"points"===b&&c instanceof F&&c.Y===A){for(g="[",c=c.k;c.next();)i=c.value,1<g.length&&(g+=","),g+=this.Hv(i.x),g+=",",g+=this.Hv(i.y);g+="]",d+=g}else d+=this.Hv(c);b=d+"}"}else b="function"==typeof a?"null":a.toString();return b},y.g(G,"name",G.prototype.name),y.defineProperty(G,{name:"name"},w("Gb"),function(a){var b=this.Gb;b!==a&&(y.j(a,"string",G,"name"),this.Gb=a,this.i("name",b,a))}),y.g(G,"dataFormat",G.prototype.Dl),y.defineProperty(G,{Dl:"dataFormat"},w("ww"),function(a){var b=this.ww;
b!==a&&(y.j(a,"string",G,"dataFormat"),this.ww=a,this.i("dataFormat",b,a))}),y.g(G,"isReadOnly",G.prototype.Za),y.defineProperty(G,{Za:"isReadOnly"},w("ak"),function(a){var b=this.ak;b!==a&&(y.j(a,"boolean",G,"isReadOnly"),this.ak=a,this.i("isReadOnly",b,a))}),G.prototype.addChangedListener=G.prototype.ay=function(a){y.j(a,"function",G,"addChangedListener:listener"),this.Ii===q&&(this.Ii=new F("function")),this.Ii.add(a)},G.prototype.removeChangedListener=G.prototype.lz=function(a){y.j(a,"function",G,"removeChangedListener:listener"),this.Ii!==q&&(this.Ii.remove(a),0===this.Ii.count&&(this.Ii=q))},G.prototype.xu=function(a){var b,c,d,e;if(this.Wb||this.va.xC(a),this.Ii!==q)if(b=this.Ii,c=b.length,1===c)b=b.sa(0),b(a);else if(0!==c)for(d=b.Ee(),e=0;c>e;e++)b=d[e],b(a)},G.prototype.raiseChangedEvent=G.prototype.Qc=function(a,b,c,d,e,f,g){Md(this,"",a,b,c,d,e,f,g)},G.prototype.raiseChanged=G.prototype.i=function(a,b,c,d,e){Md(this,"",sd,a,this,b,c,d,e)},G.prototype.raiseDataChanged=G.prototype.hz=function(a,b,c,d,e,f){Md(this,"",sd,b,a,c,d,e,f)},y.g(G,"undoManager",G.prototype.va),y.defineProperty(G,{va:"undoManager"},w("Tx"),function(a){var b=this.Tx;b!==a&&(y.l(a,wd,G,"undoManager"),b!==q&&b.oH(this),this.Tx=a,a!==q&&a.kF(this))}),y.g(G,"skipsUndoManager",G.prototype.Wb),y.defineProperty(G,{Wb:"skipsUndoManager"},w("Ph"),function(a){y.j(a,"boolean",G,"skipsUndoManager"),this.Ph=a}),G.prototype.changeState=function(a,b){if(a!==q&&a.fa===this)if(a.Yc===sd){var c=a.object,d=a.propertyName,e=a.wa(b);y.Oa(c,d,e)}else a.Yc===td?"nodeDataArray"===a.Ye?(c=a.newValue,y.sb(c)&&(d=this.Cb(c),d!==f&&(b?(y.Xh(this.lf,a.rf),this.mc.remove(d)):(y.Wh(this.lf,a.rf,c),this.mc.add(d,c))))):""===a.Ye?(c=a.object,!y.isArray(c)&&a.propertyName&&(c=y.Xa(a.object,a.propertyName)),y.isArray(c)&&(d=a.newValue,e=a.rf,b?y.Xh(c,e):y.Wh(c,e,d))):y.m("unknown ChangedEvent.Insert object: "+a.toString()):a.Yc===ud?"nodeDataArray"===a.Ye?(c=a.oldValue,y.sb(c)&&(d=this.Cb(c),d!==f&&(b?(y.Wh(this.lf,a.tf,c),this.mc.add(d,c)):(y.Xh(this.lf,a.tf),this.mc.remove(d))))):""===a.Ye?(c=a.object,!y.isArray(c)&&a.propertyName&&(c=y.Xa(a.object,a.propertyName)),y.isArray(c)&&(d=a.oldValue,e=a.tf,b?y.Wh(c,e,d):y.Xh(c,e))):y.m("unknown ChangedEvent.Remove object: "+a.toString()):a.Yc!==nd&&y.m("unknown ChangedEvent: "+a.toString())},G.prototype.startTransaction=G.prototype.kc=function(a){return this.va.kc(a)},G.prototype.commitTransaction=G.prototype.se=function(a){return this.va.se(a)},G.prototype.rollbackTransaction=G.prototype.es=function(){return this.va.es()},G.prototype.updateTargetBindings=G.prototype.yb=function(a,b){b===f&&(b=""),Md(this,"SourceChanged",nd,b,a,q,q)},y.g(G,"nodeKeyProperty",G.prototype.Gk),y.defineProperty(G,{Gk:"nodeKeyProperty"},w("ll"),function(a){var b=this.ll;b!==a&&(Nd(a,G,"nodeKeyProperty"),0<this.mc.count&&y.m("Cannot set Model.nodeKeyProperty when there is existing node data"),this.ll=a,this.i("nodeKeyProperty",b,a))}),G.prototype.getKeyForNodeData=G.prototype.Cb=function(a){if(a!==q){var b=this.ll;if(""!==b&&(b=y.Xa(a,b),b!==f)){if(Od(b))return b;x&&y.trace("Key value for node data "+a+" is not a number or a string: "+b)}}},G.prototype.setKeyForNodeData=G.prototype.tz=function(a,b){var c,d;b===q&&(b=f),b!==f&&!Od(b)&&y.Kb(b,"number or string",G,"setKeyForNodeData:key"),a!==q&&(c=this.ll,""!==c&&(this.te(a)?(d=y.Xa(a,c),d!==b&&this.Te(b)===q&&(y.Oa(a,c,b),this.mc.remove(d),this.mc.add(b,a),Md(this,"nodeKey",sd,c,a,d,b),"string"==typeof c&&this.yb(a,c),this.cs(d,b))):y.Oa(a,c,b)))},y.g(G,"makeUniqueKeyFunction",G.prototype.WG),y.defineProperty(G,{WG:"makeUniqueKeyFunction"},w("rt"),function(a){var b=this.rt;b!==a&&(a!==q&&y.j(a,"function",G,"makeUniqueKeyFunction"),this.rt=a,this.i("makeUniqueKeyFunction",b,a))}),G.prototype.containsNodeData=G.prototype.te=function(a){return a=this.Cb(a),a===f?s:this.mc.contains(a)},G.prototype.findNodeDataForKey=G.prototype.Te=function(a){return a===q&&y.m("Model.findNodeDataForKey:key must not be null"),a!==f&&Od(a)?this.mc.wa(a):q},y.g(G,"nodeDataArray",G.prototype.Pf),y.defineProperty(G,{Pf:"nodeDataArray"},w("lf"),function(a){var c,d,e,g,i,b=this.lf;if(b!==a){for(y.mr(a,G,"nodeDataArray"),this.mc.clear(),this.Gz(),c=y.Sb(a),d=0;c>d;d++){if(e=y.Hb(a,d),!y.sb(e))return y.m("Model.nodeDataArray must only contain Objects, not: "+e),void 0;y.Dr(e)}for(this.lf=a,g=new F(Object),d=0;c>d;d++)e=y.Hb(a,d),i=this.Cb(e),i===f?g.add(e):this.mc.wa(i)!==q?g.add(e):this.mc.add(i,e);for(d=g.k;d.next();)e=d.value,this.YC(e),g=this.Cb(e),this.mc.add(g,e);for(Md(this,"nodeDataArray",sd,"nodeDataArray",this,b,a),d=0;c>d;d++)e=y.Hb(a,d),this.xo(e),this.wo(e);this.KB(),Array.isArray(a)||(this.Za=h)}}),G.prototype.makeNodeDataKeyUnique=G.prototype.YC=function(a){var b,c,d;if(a!==q&&(b=this.ll,""!==b&&(c=this.Cb(a),c===f||this.mc.contains(c)))){if(d=this.rt,d!==q&&(c=d(this,a),c!==f&&c!==q&&!this.mc.contains(c)))return y.Oa(a,b,c),void 0;if("string"==typeof c){for(d=2;this.mc.contains(c+d);)d++;y.Oa(a,b,c+d)}else if(c===f||"number"==typeof c){for(d=-this.mc.count-1;this.mc.contains(d);)d--;y.Oa(a,b,d)}else y.m("Model.getKeyForNodeData returned something other than a string or a number: "+c)}},G.prototype.addNodeData=G.prototype.fr=function(a){if(a!==q){y.Dr(a);var b=this.Cb(a);b!==f&&this.mc.wa(b)===a||(this.YC(a),b=this.Cb(a),this.mc.add(b,a),b=y.Sb(this.lf),y.Wh(this.lf,b,a),Md(this,"nodeDataArray",td,"nodeDataArray",this,q,a,q,b),this.xo(a),this.wo(a))}},G.prototype.removeNodeData=G.prototype.wD=function(a){if(a!==q){var b=this.Cb(a);b!==f&&this.mc.contains(b)&&(this.mc.remove(b),b=y.iy(this.lf,a),0>b||(y.Xh(this.lf,b),Md(this,"nodeDataArray",ud,"nodeDataArray",this,a,q,b,q),this.us(a)))}},da=G.prototype,da.cs=function(a,b){var c=Yd(this,a);c instanceof na&&this.cg.add(b,c)},da.Gz=aa(),da.xo=aa(),da.wo=aa(),da.us=aa(),G.prototype.dumpDelayedReferences=G.prototype.rI=function(){var a,b,c;for(y.trace("DelayedReferences ("+this.cg.count+")"),a=this.cg.k;a.next();){for(b="",c=a.value.k;c.next();)b+=vd(c.value)+", ";y.trace("  "+a.key+": "+b)}},G.prototype.clearUnresolvedReferences=G.prototype.KB=function(a){a===f?this.cg.clear():this.cg.remove(a)},y.g(G,"copyNodeDataFunction",G.prototype.QF),y.defineProperty(G,{QF:"copyNodeDataFunction"},w("Os"),function(a){var b=this.Os;b!==a&&(a!==q&&y.j(a,"function",G,"copyNodeDataFunction"),this.Os=a,this.i("copyNodeDataFunction",b,a))}),G.prototype.copyNodeData=G.prototype.jj=function(a){var b,c;if(a===q)return q;if(b=q,b=this.Os,b!==q)b=b(a,this);else{b=new a.constructor;for(c in a)y.Oa(b,c,y.Xa(a,c))}return b&&y.lc(b),b},G.prototype.setDataProperty=G.prototype.uv=function(a,b,c){if(x&&(y.j(a,"object",G,"setDataProperty:data"),y.j(b,"string",G,"setDataProperty:propname"),""===b&&y.m("Model.setDataProperty: property name must not be an empty string when setting "+a+" to "+c)),this.te(a)){if(b===this.Gk)this.tz(a,c);else if(b===this.Fk)return this.sv(a,c),void 0}else!y.Eo&&a instanceof P&&(y.Eo=h,y.trace('Model.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),y.trace("  Is that really your intent?"));var d=y.Xa(a,b);d!==c&&(y.Oa(a,b,c),this.hz(a,b,d,c))},G.prototype.addArrayItem=G.prototype.OH=function(a,b){this.IG(a,-1,b)},G.prototype.insertArrayItem=G.prototype.IG=function(a,b,c){x&&(y.mr(a,G,"insertArrayItem:arr"),y.p(b,G,"insertArrayItem:idx")),a===this.lf&&y.m("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray"),0>b&&(b=y.Sb(a)),y.Wh(a,b,c),Md(this,"",td,"",a,q,c,q,b)},G.prototype.removeArrayItem=G.prototype.pJ=function(a,b){b===f&&(b=-1),x&&(y.mr(a,G,"removeArrayItem:arr"),y.p(b,G,"removeArrayItem:idx")),a===this.lf&&y.m("Model.removeArrayItem should not be called on the Model.nodeDataArray"),-1===b&&(b=y.Sb(a)-1);var c=y.Hb(a,b);y.Xh(a,b),Md(this,"",ud,"",a,c,q,b,q)},y.g(G,"nodeCategoryProperty",G.prototype.Fk),y.defineProperty(G,{Fk:"nodeCategoryProperty"},w("iq"),function(a){var b=this.iq;b!==a&&(Nd(a,G,"nodeCategoryProperty"),this.iq=a,this.i("nodeCategoryProperty",b,a))}),G.prototype.getCategoryForNodeData=G.prototype.getCategoryForNodeData=function(a){if(a===q)return"";var b=this.iq;return""===b?"":(b=y.Xa(a,b),b===f?"":"string"==typeof b?b:(x&&y.trace("getCategoryForNodeData found a non-string category for "+a+": "+b),""))},G.prototype.setCategoryForNodeData=G.prototype.sv=function(a,b){var c,d;y.j(b,"string",G,"setCategoryForNodeData:cat"),a!==q&&(c=this.iq,""!==c&&(this.te(a)?(d=y.Xa(a,c),d===f&&(d=""),d!==b&&(y.Oa(a,c,b),Md(this,"nodeCategory",sd,c,a,d,b))):y.Oa(a,c,b)))},y.ba("GraphLinksModel",O),y.Ka(O,G),O.prototype.clear=O.prototype.clear=function(){G.prototype.clear.call(this),this.ck=[],this.Vm.clear()},O.prototype.toString=function(a){var b,d,c,e;if(a===f&&(a=0),a>=2)return this.Cz();if(b=(""!==this.name?this.name:"")+" GraphLinksModel",a>0){for(b+="\n node data:",a=this.Pf,c=y.Sb(a),d=0;c>d;d++)e=y.Hb(a,d),b+=" "+this.Cb(e)+":"+vd(e);for(b+="\n link data:",a=this.rg,c=y.Sb(a),d=0;c>d;d++)e=y.Hb(a,d),b+=" "+this.Ll(e)+"-->"+this.Ml(e)}return b},O.prototype.writeJsonProtected=function(){var a=G.prototype.writeJsonProtected.call(this),b="";return"category"!==this.co&&"string"==typeof this.co&&(b+=',\n  "linkCategoryProperty": '+this.quote(this.co)),"from"!==this.eo&&"string"==typeof this.eo&&(b+=',\n "linkFromKeyProperty": '+this.quote(this.eo)),"to"!==this.jo&&"string"==typeof this.jo&&(b+=',\n  "linkToKeyProperty": '+this.quote(this.jo)),""!==this.fo&&"string"==typeof this.fo&&(b+=',\n  "linkFromPortIdProperty": '+this.quote(this.fo)),""!==this.ko&&"string"==typeof this.ko&&(b+=',\n  "linkToPortIdProperty": '+this.quote(this.ko)),""!==this.so&&"string"==typeof this.so&&(b+=',\n "nodeIsLinkLabelProperty": '+this.quote(this.so)),""!==this.ho&&"string"==typeof this.ho&&(b+=',\n  "linkLabelKeysProperty": '+this.quote(this.ho)),"isGroup"!==this.ro&&"string"==typeof this.ro&&(b+=',\n "nodeIsGroupProperty": '+this.quote(this.ro)),"group"!==this.qo&&"string"==typeof this.qo&&(b+=',\n  "nodeGroupKeyProperty": '+this.quote(this.qo)),a+b},O.prototype.Kz=function(){var a=G.prototype.Kz.call(this),b=',\n  "linkDataArray": '+xd(this,this.rg,h);return a+b},O.prototype.readJsonProtected=function(a){G.prototype.readJsonProtected.call(this,a),a.linkFromKeyProperty&&(this.eo=a.linkFromKeyProperty),a.linkToKeyProperty&&(this.jo=a.linkToKeyProperty),a.linkFromPortIdProperty&&(this.fo=a.linkFromPortIdProperty),a.linkToPortIdProperty&&(this.ko=a.linkToPortIdProperty),a.linkCategoryProperty&&(this.co=a.linkCategoryProperty),a.nodeIsLinkLabelProperty&&(this.so=a.nodeIsLinkLabelProperty),a.linkLabelKeysProperty&&(this.ho=a.linkLabelKeysProperty),a.nodeIsGroupProperty&&(this.ro=a.nodeIsGroupProperty),a.nodeGroupKeyProperty&&(this.qo=a.nodeGroupKeyProperty)},O.prototype.iz=function(a){G.prototype.iz.call(this,a),a.linkDataArray&&(a=a.linkDataArray,yd(this,a),this.rg=a)},O.prototype.changeState=function(a,b){if(a.Yc===td){var c=q;if("linkDataArray"===a.Ye?c=this.rg:"linkLabelKeys"===a.Ye&&(c=this.Ak(a.object)),y.isArray(c))return b?y.Xh(c,a.rf):y.Wh(c,a.rf,a.newValue),void 0}else if(a.Yc===ud&&(c=q,"linkDataArray"===a.Ye?c=this.rg:"linkLabelKeys"===a.Ye&&(c=this.Ak(a.object)),y.isArray(c)))return b?y.Wh(c,a.tf,a.oldValue):y.Xh(c,a.tf),void 0;G.prototype.changeState.call(this,a,b)},y.g(O,"archetypeNodeData",O.prototype.jr),y.defineProperty(O,{jr:"archetypeNodeData"},w("Nj"),function(a){var b=this.Nj;b!==a&&(a!==q&&y.l(a,Object,O,"archetypeNodeData"),this.Nj=a,this.i("archetypeNodeData",b,a))}),O.prototype.Tl=function(a){var b,c;return a!==f?(b=this.Nj,b!==q&&(c=this.Te(a),c===q&&(c=this.jj(b),y.Oa(c,this.ll,a),this.fr(c))),a):void 0},y.g(O,"linkFromKeyProperty",O.prototype.eo),y.defineProperty(O,{eo:"linkFromKeyProperty"},w("Fi"),function(a){var b=this.Fi;b!==a&&(Nd(a,O,"linkFromKeyProperty"),this.Fi=a,this.i("linkFromKeyProperty",b,a))}),O.prototype.getFromKeyForLinkData=O.prototype.Ll=function(a){if(a!==q){var b=this.Fi;if(""!==b&&(b=y.Xa(a,b),b!==f)){if(Od(b))return b;x&&y.trace("FromKey value for link data "+a+" is not a number or a string: "+b)}}},O.prototype.setFromKeyForLinkData=O.prototype.rz=function(a,b){var c,d;b===q&&(b=f),b!==f&&!Od(b)&&y.Kb(b,"number or string",O,"setFromKeyForLinkData:key"),a!==q&&(c=this.Fi,""!==c&&(b=this.Tl(b),this.$h(a)?(d=y.Xa(a,c),d!==b&&($d(this,d,a),y.Oa(a,c,b),this.Te(b)===q&&Zd(this,b,a),Md(this,"linkFromKey",sd,c,a,d,b),"string"==typeof c&&this.yb(a,c))):y.Oa(a,c,b)))},y.g(O,"linkToKeyProperty",O.prototype.jo),y.defineProperty(O,{jo:"linkToKeyProperty"},w("Hi"),function(a){var b=this.Hi;b!==a&&(Nd(a,O,"linkToKeyProperty"),this.Hi=a,this.i("linkToKeyProperty",b,a))}),O.prototype.getToKeyForLinkData=O.prototype.Ml=function(a){if(a!==q){var b=this.Hi;if(""!==b&&(b=y.Xa(a,b),b!==f)){if(Od(b))return b;x&&y.trace("ToKey value for link data "+a+" is not a number or a string: "+b)}}},O.prototype.setToKeyForLinkData=O.prototype.vz=function(a,b){var c,d;b===q&&(b=f),b!==f&&!Od(b)&&y.Kb(b,"number or string",O,"setToKeyForLinkData:key"),a!==q&&(c=this.Hi,""!==c&&(b=this.Tl(b),this.$h(a)?(d=y.Xa(a,c),d!==b&&($d(this,d,a),y.Oa(a,c,b),this.Te(b)===q&&Zd(this,b,a),Md(this,"linkToKey",sd,c,a,d,b),"string"==typeof c&&this.yb(a,c))):y.Oa(a,c,b)))},y.g(O,"linkFromPortIdProperty",O.prototype.fo),y.defineProperty(O,{fo:"linkFromPortIdProperty"},w("Pp"),function(a){var b=this.Pp;b!==a&&(Nd(a,O,"linkFromPortIdProperty"),this.Pp=a,this.i("linkFromPortIdProperty",b,a))}),O.prototype.getFromPortIdForLinkData=O.prototype.vG=function(a){if(a===q)return"";var b=this.Pp;return""===b?"":(a=y.Xa(a,b),a===f?"":a)},O.prototype.setFromPortIdForLinkData=O.prototype.vv=function(a,b){var c,d;y.j(b,"string",O,"setFromPortIdForLinkData:portname"),a!==q&&(c=this.Pp,""!==c&&(this.$h(a)?(d=y.Xa(a,c),d===f&&(d=""),d!==b&&(y.Oa(a,c,b),Md(this,"linkFromPortId",sd,c,a,d,b),"string"==typeof c&&this.yb(a,c))):y.Oa(a,c,b)))},y.g(O,"linkToPortIdProperty",O.prototype.ko),y.defineProperty(O,{ko:"linkToPortIdProperty"},w("Rp"),function(a){var b=this.Rp;b!==a&&(Nd(a,O,"linkToPortIdProperty"),this.Rp=a,this.i("linkToPortIdProperty",b,a))}),O.prototype.getToPortIdForLinkData=O.prototype.yG=function(a){if(a===q)return"";var b=this.Rp;return""===b?"":(a=y.Xa(a,b),a===f?"":a)},O.prototype.setToPortIdForLinkData=O.prototype.wv=function(a,b){var c,d;y.j(b,"string",O,"setToPortIdForLinkData:portname"),a!==q&&(c=this.Rp,""!==c&&(this.$h(a)?(d=y.Xa(a,c),d===f&&(d=""),d!==b&&(y.Oa(a,c,b),Md(this,"linkToPortId",sd,c,a,d,b),"string"==typeof c&&this.yb(a,c))):y.Oa(a,c,b)))},y.g(O,"nodeIsLinkLabelProperty",O.prototype.so),y.defineProperty(O,{so:"nodeIsLinkLabelProperty"},w("Ft"),function(a){var b=this.Ft;b!==a&&(Nd(a,O,"nodeIsLinkLabelProperty"),this.Ft=a,this.i("nodeIsLinkLabelProperty",b,a))}),O.prototype.isLinkLabelForNodeData=O.prototype.My=function(a){if(a===q)return s;var b=this.Ft;return""===b?s:y.Xa(a,b)?h:s},y.g(O,"linkLabelKeysProperty",O.prototype.ho),y.defineProperty(O,{ho:"linkLabelKeysProperty"},w("Pg"),function(a){var b=this.Pg;b!==a&&(Nd(a,O,"linkLabelKeysProperty"),this.Pg=a,this.i("linkLabelKeysProperty",b,a))}),O.prototype.getLabelKeysForLinkData=O.prototype.Ak=function(a){if(a===q)return y.rh;var b=this.Pg;return""===b?y.rh:(a=y.Xa(a,b),a===f?y.rh:a)},O.prototype.setLabelKeysForLinkData=O.prototype.VD=function(a,b){var c,d,e,g,h;if(y.mr(b,O,"setLabelKeysForLinkData:arr"),a!==q&&(c=this.Pg,""!==c))if(this.$h(a)){if(d=y.Xa(a,c),d===f&&(d=y.rh),d!==b){for(e=y.Sb(d),g=0;e>g;g++)h=y.Hb(d,g),$d(this,h,a);for(y.Oa(a,c,b),e=y.Sb(b),g=0;e>g;g++)h=y.Hb(b,g),this.Te(h)===q&&Zd(this,h,a);Md(this,"linkLabelKeys",sd,c,a,d,b),"string"==typeof c&&this.yb(a,c)}}else y.Oa(a,c,b)},O.prototype.addLabelKeyForLinkData=O.prototype.xB=function(a,b){var c,d;b!==q&&b!==f&&(Od(b)||y.Kb(b,"number or string",O,"addLabelKeyForLinkData:key"),a!==q&&(c=this.Pg,""!==c&&(d=y.Xa(a,c),d===f?this.VD(a,[b]):y.isArray(d)?0<=y.iy(d,b)||(y.Wh(d,1/0,b),this.$h(a)&&(this.Te(b)===q&&Zd(this,b,a),Md(this,"linkLabelKeys",td,c,a,q,b))):y.m(c+" property is not an Array; cannot addLabelKeyForLinkData: "+a))))},O.prototype.removeLabelKeyForLinkData=O.prototype.mH=function(a,b){var c,d,e;b!==q&&b!==f&&(Od(b)||y.Kb(b,"number or string",O,"removeLabelKeyForLinkData:key"),a!==q&&(c=this.Pg,""!==c&&(d=y.Xa(a,c),y.isArray(d)?(e=y.iy(d,b),0>e||(y.Xh(d,e),this.$h(a)&&($d(this,b,a),Md(this,"linkLabelKeys",ud,c,a,b,q)))):d!==f&&y.m(c+" property is not an Array; cannot removeLabelKeyforLinkData: "+a))))},y.g(O,"linkDataArray",O.prototype.rg),y.defineProperty(O,{rg:"linkDataArray"},w("ck"),function(a){var c,d,e,f,b=this.ck;if(b!==a){for(y.mr(a,O,"linkDataArray"),c=y.Sb(a),d=0;c>d;d++){if(e=y.Hb(a,d),!y.sb(e))return y.m("GraphLinksModel.linkDataArray must only contain Objects, not: "+e),void 0;y.Dr(e)}for(this.ck=a,f=new na(Object),d=0;c>d;d++)e=y.Hb(a,d),f.add(e);for(this.Vm=f,Md(this,"linkDataArray",sd,"linkDataArray",this,b,a),d=0;c>d;d++)e=y.Hb(a,d),ae(this,e)}}),O.prototype.containsLinkData=O.prototype.$h=function(a){return a===q?s:this.Vm.contains(a)},O.prototype.addLinkData=O.prototype.yB=function(a){if(a!==q){if(y.ac(a)===f)y.lc(a);else if(this.$h(a))return;this.Vm.add(a);var b=y.Sb(this.ck);y.Wh(this.ck,b,a),Md(this,"linkDataArray",td,"linkDataArray",this,q,a,q,b),ae(this,a)}},O.prototype.removeLinkData=O.prototype.nH=function(a){var b,c,d,e;if(a!==q&&(this.Vm.remove(a),b=this.ck.indexOf(a),!(0>b)))for(y.Xh(this.ck,b),Md(this,"linkDataArray",ud,"linkDataArray",this,a,q,b,q),b=this.Ll(a),$d(this,b,a),b=this.Ml(a),$d(this,b,a),c=this.Ak(a),d=y.Sb(c),e=0;d>e;e++)b=y.Hb(c,e),$d(this,b,a)},y.g(O,"copyLinkDataFunction",O.prototype.PF),y.defineProperty(O,{PF:"copyLinkDataFunction"},w("Ns"),function(a){var b=this.Ns;b!==a&&(a!==q&&y.j(a,"function",O,"copyLinkDataFunction"),this.Ns=a,this.i("copyLinkDataFunction",b,a))}),O.prototype.copyLinkData=O.prototype.SB=function(a){var b,c;if(a===q)return q;if(b=q,b=this.Ns,b!==q)b=b(a,this);else{b=new a.constructor;for(c in a)y.Oa(b,c,y.Xa(a,c))}return b&&(y.lc(b),""!==this.Fi&&y.Oa(b,this.Fi,f),""!==this.Hi&&y.Oa(b,this.Hi,f),""!==this.Pg&&y.Oa(b,this.Pg,[])),b},y.g(O,"nodeIsGroupProperty",O.prototype.ro),y.defineProperty(O,{ro:"nodeIsGroupProperty"},w("Et"),function(a){var b=this.Et;b!==a&&(Nd(a,O,"nodeIsGroupProperty"),this.Et=a,this.i("nodeIsGroupProperty",b,a))}),O.prototype.isGroupForNodeData=O.prototype.Iy=function(a){if(a===q)return s;var b=this.Et;return""===b?s:y.Xa(a,b)?h:s},y.g(O,"nodeGroupKeyProperty",O.prototype.qo),y.defineProperty(O,{qo:"nodeGroupKeyProperty"},w("Mi"),function(a){var b=this.Mi;b!==a&&(Nd(a,O,"nodeGroupKeyProperty"),this.Mi=a,this.i("nodeGroupKeyProperty",b,a))}),O.prototype.getGroupKeyForNodeData=O.prototype.Tn=function(a){if(a!==q){var b=this.Mi;if(""!==b&&(b=y.Xa(a,b),b!==f)){if(Od(b))return b;x&&y.trace("GroupKey value for node data "+a+" is not a number or a string: "+b)}}},O.prototype.setGroupKeyForNodeData=O.prototype.sz=function(a,b){var c,d;b===q&&(b=f),b!==f&&!Od(b)&&y.Kb(b,"number or string",O,"setGroupKeyForNodeData:key"),a!==q&&(c=this.Mi,""!==c&&(this.te(a)?(d=y.Xa(a,c),d!==b&&($d(this,d,a),y.Oa(a,c,b),this.Te(b)===q&&Zd(this,b,a),Md(this,"nodeGroupKey",sd,c,a,d,b),"string"==typeof c&&this.yb(a,c))):y.Oa(a,c,b)))},O.prototype.copyNodeData=O.prototype.jj=function(a){return a===q?q:(a=G.prototype.jj.call(this,a),""!==this.Mi&&y.Oa(a,this.Mi,f),a)},O.prototype.setDataProperty=O.prototype.uv=function(a,b,c){if(x&&(y.j(a,"object",O,"setDataProperty:data"),y.j(b,"string",O,"setDataProperty:propname"),""===b&&y.m("GraphLinksModel.setDataProperty: property name must not be an empty string when setting "+a+" to "+c)),this.te(a))if(b===this.Gk)this.tz(a,c);else{if(b===this.Fk)return this.sv(a,c),void 0;if(b===this.qo)return this.sz(a,c),void 0;b===this.ro?y.m("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+b):b===this.so&&y.m("GraphLinksModel.setDataProperty: property name must not be the nodeIsLinkLabelProperty: "+b)}else if(this.$h(a)){if(b===this.eo)return this.rz(a,c),void 0;if(b===this.jo)return this.vz(a,c),void 0;if(b===this.fo)return this.vv(a,c),void 0;if(b===this.ko)return this.wv(a,c),void 0;if(b===this.co)return this.UD(a,c),void 0;if(b===this.ho)return this.VD(a,c),void 0}else!y.Eo&&a instanceof P&&(y.Eo=h,y.trace('GraphLinksModel.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),y.trace("  Is that really your intent?"));var d=y.Xa(a,b);d!==c&&(y.Oa(a,b,c),this.hz(a,b,d,c))},da=O.prototype,da.cs=function(a,b){var c,d,e,f,g,h,i,j;for(G.prototype.cs.call(this,a,b),c=this.mc.k;c.next();)this.nz(c.value,a,b);for(c=this.Vm.k;c.next();)for(d=c.value,e=a,f=b,this.Ll(d)===e&&(g=this.Fi,y.Oa(d,g,f),Md(this,"linkFromKey",sd,g,d,e,f),"string"==typeof g&&this.yb(d,g)),this.Ml(d)===e&&(g=this.Hi,y.Oa(d,g,f),Md(this,"linkToKey",sd,g,d,e,f),"string"==typeof g&&this.yb(d,g)),h=this.Ak(d),i=y.Sb(h),g=this.Pg,j=0;i>j;j++)y.Hb(h,j)===e&&(y.EB(h,j,f),Md(this,"linkLabelKeys",td,g,d,e,f))},da.nz=function(a,b,c){if(this.Tn(a)===b){var d=this.Mi;y.Oa(a,d,c),Md(this,"nodeGroupKey",sd,d,a,b,c),"string"==typeof d&&this.yb(a,d)}},da.Gz=function(){G.prototype.Gz.call(this);for(var a=this.rg,b=y.Sb(a),c=0;b>c;c++)ae(this,y.Hb(a,c))},da.xo=function(a){var b,c,d,e,f,g,h;if(G.prototype.xo.call(this,a),a=this.Cb(a),b=Yd(this,a),b!==q){for(c=new F(Object),b=b.k;b.next();)if(d=b.value,this.te(d))this.Tn(d)===a&&(e=this.Mi,Md(this,"nodeGroupKey",sd,e,d,a,a),"string"==typeof e&&this.yb(d,e),c.add(d));else for(this.Ll(d)===a&&(e=this.Fi,Md(this,"linkFromKey",sd,e,d,a,a),"string"==typeof e&&this.yb(d,e),c.add(d)),this.Ml(d)===a&&(e=this.Hi,Md(this,"linkToKey",sd,e,d,a,a),"string"==typeof e&&this.yb(d,e),c.add(d)),f=this.Ak(d),g=y.Sb(f),e=this.Pg,h=0;g>h;h++)y.Hb(f,h)===a&&(Md(this,"linkLabelKeys",td,e,d,a,a),c.add(d));for(c=c.k;c.next();)$d(this,a,c.value)}},da.wo=function(a){G.prototype.wo.call(this,a);var b=this.Tn(a);this.Te(b)===q&&Zd(this,b,a)},da.us=function(a){G.prototype.us.call(this,a);var b=this.Tn(a);$d(this,b,a)},y.g(O,"linkCategoryProperty",O.prototype.co),y.defineProperty(O,{co:"linkCategoryProperty"},w("Mp"),function(a){var b=this.Mp;b!==a&&(Nd(a,O,"linkCategoryProperty"),this.Mp=a,this.i("linkCategoryProperty",b,a))}),O.prototype.getCategoryForLinkData=O.prototype.getCategoryForLinkData=function(a){if(a===q)return"";var b=this.Mp;return""===b?"":(b=y.Xa(a,b),b===f?"":"string"==typeof b?b:(x&&y.trace("getCategoryForLinkData found a non-string category for "+a+": "+b),""))},O.prototype.setCategoryForLinkData=O.prototype.UD=function(a,b){var c,d;if(y.j(b,"string",O,"setCategoryForLinkData:cat"),a!==q){if(c=this.Mp,""===c)return"";this.$h(a)?(d=y.Xa(a,c),d===f&&(d=""),d!==b&&(y.Oa(a,c,b),Md(this,"linkCategory",sd,c,a,d,b),"string"==typeof c&&this.yb(a,c))):y.Oa(a,c,b)}},y.ba("TreeModel",zd),y.Ka(zd,G),zd.prototype.toString=function(a){var b,d,c,e;if(a===f&&(a=0),a>=2)return this.Cz();if(b=(""!==this.name?this.name:"")+" TreeModel",a>0)for(b+="\n node data:",a=this.Pf,c=y.Sb(a),d=0;c>d;d++)e=y.Hb(a,d),b+=" "+this.Cb(e)+":"+vd(e);return b},zd.prototype.writeJsonProtected=function(){var a=G.prototype.writeJsonProtected.call(this),b="";return"parent"!==this.to&&"string"==typeof this.to&&(b+=',\n  "nodeParentKeyProperty": '+this.quote(this.to)),a+b},zd.prototype.readJsonProtected=function(a){G.prototype.readJsonProtected.call(this,a),a.nodeParentKeyProperty&&(this.to=a.nodeParentKeyProperty)},zd.prototype.Tl=function(a){return a},y.g(zd,"nodeParentKeyProperty",zd.prototype.to),y.defineProperty(zd,{to:"nodeParentKeyProperty"},w("Ni"),function(a){var b=this.Ni;b!==a&&(Nd(a,zd,"nodeParentKeyProperty"),this.Ni=a,this.i("nodeParentKeyProperty",b,a))}),zd.prototype.getParentKeyForNodeData=zd.prototype.Vn=function(a){if(a!==q){var b=this.Ni;if(""!==b&&(b=y.Xa(a,b),b!==f)){if(Od(b))return b;x&&y.trace("ParentKey value for node data "+a+" is not a number or a string: "+b)}}},zd.prototype.setParentKeyForNodeData=zd.prototype.kh=function(a,b){var c,d;b===q&&(b=f),b!==f&&!Od(b)&&y.Kb(b,"number or string",zd,"setParentKeyForNodeData:key"),a!==q&&(c=this.Ni,""!==c&&(b=this.Tl(b),this.te(a)?(d=y.Xa(a,c),d!==b&&($d(this,d,a),y.Oa(a,c,b),this.Te(b)===q&&Zd(this,b,a),Md(this,"nodeParentKey",sd,c,a,d,b),"string"==typeof c&&this.yb(a,c))):y.Oa(a,c,b)))},y.g(zd,"parentLinkCategoryProperty",zd.prototype.iH),y.defineProperty(zd,{iH:"parentLinkCategoryProperty"},w("mq"),function(a){var b=this.mq;b!==a&&(Nd(a,zd,"parentLinkCategoryProperty"),this.mq=a,this.i("parentLinkCategoryProperty",b,a))}),zd.prototype.getParentLinkCategoryForNodeData=zd.prototype.xG=function(a){if(a===q)return"";var b=this.mq;return""===b?"":(b=y.Xa(a,b),b===f?"":"string"==typeof b?b:(x&&y.trace("getParentLinkCategoryForNodeData found a non-string category for "+a+": "+b),""))},zd.prototype.setParentLinkCategoryForNodeData=zd.prototype.tH=function(a,b){var c,d;if(y.j(b,"string",zd,"setParentLinkCategoryForNodeData:cat"),a!==q){if(c=this.mq,""===c)return"";this.te(a)?(d=y.Xa(a,c),d===f&&(d=""),d!==b&&(y.Oa(a,c,b),Md(this,"parentLinkCategory",sd,c,a,d,b),"string"==typeof c&&this.yb(a,c))):y.Oa(a,c,b)}},zd.prototype.copyNodeData=zd.prototype.jj=function(a){return a===q?q:(a=G.prototype.jj.call(this,a),""!==this.Ni&&y.Oa(a,this.Ni,f),a)},zd.prototype.setDataProperty=zd.prototype.uv=function(a,b,c){if(x&&(y.j(a,"object",zd,"setDataProperty:data"),y.j(b,"string",zd,"setDataProperty:propname"),""===b&&y.m("TreeModel.setDataProperty: property name must not be an empty string when setting "+a+" to "+c)),this.te(a))if(b===this.Gk)this.tz(a,c);else{if(b===this.Fk)return this.sv(a,c),void 0;if(b===this.to)return this.kh(a,c),void 0}else!y.Eo&&a instanceof P&&(y.Eo=h,y.trace('TreeModel.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),y.trace("  Is that really your intent?"));var d=y.Xa(a,b);d!==c&&(y.Oa(a,b,c),this.hz(a,b,d,c))},da=zd.prototype,da.cs=function(a,b){G.prototype.cs.call(this,a,b);for(var c=this.mc.k;c.next();)this.nz(c.value,a,b)},da.nz=function(a,b,c){if(this.Vn(a)===b){var d=this.Ni;y.Oa(a,d,c),Md(this,"nodeParentKey",sd,d,a,b,c),"string"==typeof d&&this.yb(a,d)}},da.xo=function(a){var b,c,d,e;if(G.prototype.xo.call(this,a),a=this.Cb(a),b=Yd(this,a),b!==q){for(c=new F(Object),b=b.k;b.next();)d=b.value,this.te(d)&&this.Vn(d)===a&&(e=this.Ni,Md(this,"nodeParentKey",sd,e,d,a,a),"string"==typeof e&&this.yb(d,e),c.add(d));for(c=c.k;c.next();)$d(this,a,c.value)}},da.wo=function(a){G.prototype.wo.call(this,a);var b=this.Vn(a),b=this.Tl(b);this.Te(b)===q&&Zd(this,b,a)},da.us=function(a){G.prototype.us.call(this,a);var b=this.Vn(a);$d(this,b,a)},y.ba("Binding",be),be.OneWay=le=y.w(be,"OneWay",1),be.TwoWay=me=y.w(be,"TwoWay",2),be.parseEnum=function(a,b){return y.j(a,"function",be,"parseEnum:ctor"),y.rb(b,a,be,"parseEnum:defval"),function(c){return y.Il(a,c)||b}},be.toString=vd=function(a){var b=a;return y.sb(a)&&(a.text?b=a.text:a.Text?b=a.Text:a.name?b=a.name:a.Name?b=a.Name:a.key!==f?b=a.key:a.Key!==f?b=a.Key:a.id!==f?b=a.id:a.Id!==f?b=a.Id:a.ID!==f&&(b=a.ID)),b===f?"undefined":b===q?"null":b.toString()},be.prototype.toString=function(){return"Binding("+this.Zl+" "+this.Az+":"+this.wz+")"},be.prototype.freeze=function(){return this.$a=h,this},be.prototype.Pa=function(){return this.$a=s,this},y.g(be,"targetId",be.prototype.Zl),y.defineProperty(be,{Zl:q},w("iB"),function(a){y.K(this),y.j(a,"string",be,"targetId"),this.iB=a}),y.g(be,"targetProperty",be.prototype.Az),y.defineProperty(be,{Az:"targetProperty"},w("fu"),function(a){y.K(this),y.j(a,"string",be,"targetProperty"),this.fu=a}),y.g(be,"sourceName",be.prototype.ps),y.defineProperty(be,{ps:"sourceName"},w("bB"),function(a){y.K(this),y.j(a,"string",be,"sourceName"),this.bB=a}),y.g(be,"sourceProperty",be.prototype.wz),y.defineProperty(be,{wz:"sourceProperty"},w("Zt"),function(a){y.K(this),y.j(a,"string",be,"sourceProperty"),this.Zt=a}),y.g(be,"converter",be.prototype.PB),y.defineProperty(be,{PB:"converter"},w("tw"),function(a){y.K(this),a!==q&&y.j(a,"function",be,"converter"),this.tw=a}),y.g(be,"backConverter",be.prototype.IB),y.defineProperty(be,{IB:"backConverter"},w("ow"),function(a){y.K(this),a!==q&&y.j(a,"function",be,"backConverter"),this.ow=a}),y.g(be,"mode",be.prototype.mode),y.defineProperty(be,{mode:"mode"},w("hx"),function(a){y.K(this),y.rb(a,be,be,"mode"),this.hx=a}),be.prototype.makeTwoWay=be.prototype.ZI=function(a){return a===f&&(a=q),this.mode=me,this.IB=a,this},be.prototype.ofObject=be.prototype.bz=function(a){return a===f&&(a=""),x&&y.j(a,"string",be,"ofObject:srcname"),this.ps=a,this},be.prototype.updateTarget=be.prototype.vE=function(a,b,c){var e,g,h,d=this.Zt;if(!(c&&d!==c||(c=this.fu,e=this.tw,e===q&&""===c||(x&&"string"==typeof c&&"function"!=typeof a.setAttribute&&"_"!==c[0]&&!y.Uu(a,c)&&y.trace("Binding error: undefined target property: "+c+" on "+a.toString()),g=b,""!==d&&(g=y.Xa(b,d)),g===f))))if(e===q)""!==c&&y.Oa(a,c,g);else try{""!==c?(h=e(g,a),y.Oa(a,c,h)):e(g,a)}catch(i){x&&y.trace("Binding error: "+i.toString())}},be.prototype.updateSource=be.prototype.uE=function(a,b,c,d){var e,g,h,i;if(this.hx===me&&(e=this.fu,!(c&&e!==c||(c=this.Zt,g=this.ow,g===q&&""===c||(h=a,""!==e&&(h=y.Xa(a,e)),h===f)))))if(g===q)d&&d.fa?d.fa.uv(b,c,h):y.Oa(b,c,h);else try{""!==c?(i=g(h,b),d&&d.fa?d.fa.uv(b,c,i):y.Oa(b,c,i)):g(h,b)}catch(j){x&&y.trace("Binding error: "+j.toString())}},y.ba("Transaction",ne),ne.prototype.toString=function(a){var c,d,e,b="Transaction: "+this.name+" "+this.$g.count.toString()+(this.Xn?"":", incomplete");if(a!==f&&a>0)for(c=this.$g.count,d=0;c>d;d++)e=this.$g.sa(d),e!==q&&(b+="\n  "+e.toString(a-1));return b},ne.prototype.clear=ne.prototype.clear=function(){var b,c,a=this.$g;for(a.Pa(),b=a.count-1;b>=0;b--)c=a.sa(b),c!==q&&c.clear();a.clear(),a.freeze()},ne.prototype.canUndo=ne.prototype.canUndo=w("Xn"),ne.prototype.undo=ne.prototype.undo=function(){var a,b;if(this.canUndo())for(a=this.$g.count-1;a>=0;a--)b=this.$g.sa(a),b!==q&&b.undo()},ne.prototype.canRedo=ne.prototype.canRedo=w("Xn"),ne.prototype.redo=ne.prototype.redo=function(){var a,b,c;if(this.canRedo())for(a=this.$g.count,b=0;a>b;b++)c=this.$g.sa(b),c!==q&&c.redo()},y.A(ne,{$g:"changes"},w("SE")),y.g(ne,"name",ne.prototype.name),y.defineProperty(ne,{name:"name"},w("Gb"),ba("Gb")),y.g(ne,"isComplete",ne.prototype.Xn),y.defineProperty(ne,{Xn:"isComplete"},w("AA"),ba("AA")),y.ba("UndoManager",wd),wd.prototype.toString=function(a){for(var b="UndoManager "+this.sj+"<"+this.history.count+"<="+this.Ty,b=b+"[",c=this.jD.count,d=0;c>d;d++)d>0&&(b+=" "),b+=this.jD.sa(d);if(b+="]",a!==f&&a>0)for(c=this.history.count,d=0;c>d;d++)b+="\n "+this.history.sa(d).toString(a-1);return b},wd.prototype.clear=wd.prototype.clear=function(){var b,c,a=this.history;for(a.Pa(),b=a.count-1;b>=0;b--)c=a.sa(b),c!==q&&c.clear();a.clear(),this.Yj=-1,a.freeze(),this.Eh=s,this.Ss=q,this.nk=0,this.kg.Pa(),this.kg.clear(),this.kg.freeze(),this.Zm.clear()},wd.prototype.addModel=wd.prototype.kF=function(a){this.ix.add(a)},wd.prototype.removeModel=wd.prototype.oH=function(a){this.ix.remove(a)},wd.prototype.startTransaction=wd.prototype.kc=function(a){if(a===f&&(a=""),a===q&&(a=""),this.cb)return s;this.Jw===h&&(this.Jw=s,this.nk++,this.xc("StartingFirstTransaction",a,this.wk),0<this.nk&&this.nk--),this.isEnabled&&(this.kg.Pa(),this.kg.add(a),this.kg.freeze(),this.wk===q?this.Zm.add(0):this.Zm.add(this.wk.$g.count)),this.nk++;var b=1===this.Pk;return b&&this.xc("StartedTransaction",a,this.wk),b},wd.prototype.commitTransaction=wd.prototype.se=function(a){return oe(this,h,a)},wd.prototype.rollbackTransaction=wd.prototype.es=function(){return oe(this,s,"")},wd.prototype.canUndo=wd.prototype.canUndo=function(){if(!this.isEnabled||0<this.Pk||this.cb)return s;var a=this.nE;return a!==q&&a.canUndo()?h:s},wd.prototype.undo=wd.prototype.undo=function(){if(this.canUndo()){var a=this.nE;try{this.xc("StartingUndo","Undo",a),this.Eh=h,this.Yj--,a.undo()}catch(b){y.trace("undo error: "+b.toString())}finally{this.Eh=s,this.xc("FinishedUndo","Undo",a)}}},wd.prototype.canRedo=wd.prototype.canRedo=function(){if(!this.isEnabled||0<this.Pk||this.cb)return s;
var a=this.mE;return a!==q&&a.canRedo()?h:s},wd.prototype.redo=wd.prototype.redo=function(){if(this.canRedo()){var a=this.mE;try{this.xc("StartingRedo","Redo",a),this.Eh=h,this.Yj++,a.redo()}catch(b){y.trace("redo error: "+b.toString())}finally{this.Eh=s,this.xc("FinishedRedo","Redo",a)}}},wd.prototype.xc=function(a,b,c){c===f&&(c=q);var d=new md;for(d.Yc=nd,d.propertyName=a,d.object=c,d.oldValue=b,a=this.YG;a.next();)b=a.value,d.fa=b,b.xu(d)},wd.prototype.handleChanged=wd.prototype.xC=function(a){var b,c;!this.isEnabled||this.cb||this.skipsEvent(a)||(b=this.wk,b===q&&(this.Ss=b=new ne),c=a.copy(),b=b.$g,b.Pa(),b.add(c),b.freeze(),this.my&&0>=this.Pk&&!this.Jw&&(a=a.h,a!==q&&a.fg===s||y.trace("Change not within a transaction: "+c.toString())))},wd.prototype.skipsEvent=function(a){if(a===q||0>a.Yc.value)return h;if(a=a.object,a instanceof P){if(a=a.layer,a!==q&&a.bc)return h}else if(a instanceof pe&&a.bc)return h;return s},y.A(wd,{YG:"models"},function(){return this.ix.k}),y.g(wd,"isEnabled",wd.prototype.isEnabled),y.defineProperty(wd,{isEnabled:"isEnabled"},w("Dh"),ba("Dh")),y.A(wd,{nE:"transactionToUndo"},function(){return 0<=this.sj&&this.sj<=this.history.count-1?this.history.sa(this.sj):q}),y.A(wd,{mE:"transactionToRedo"},function(){return this.sj<this.history.count-1?this.history.sa(this.sj+1):q}),y.A(wd,{cb:"isUndoingRedoing"},w("Eh")),y.A(wd,{history:"history"},w("VE")),y.g(wd,"maxHistoryLength",wd.prototype.Ty),y.defineProperty(wd,{Ty:"maxHistoryLength"},w("IA"),ba("IA")),y.A(wd,{sj:"historyIndex"},w("Yj")),y.A(wd,{wk:"currentTransaction"},w("Ss")),y.A(wd,{Pk:"transactionLevel"},w("nk")),y.A(wd,{KG:"isInTransaction"},function(){return 0<this.nk}),y.defineProperty(wd,{my:"checksTransactionLevel"},w("pw"),ba("pw")),y.A(wd,{jD:"nestedTransactionNames"},w("kg")),y.ba("CommandHandler",pa),pa.prototype.toString=ca("CommandHandler"),y.A(pa,{h:"diagram"},w("ca")),pa.prototype.ie=function(a){x&&a!==q&&y.l(a,E,pa,"setDiagram"),this.ca=a},pa.prototype.doKeyDown=function(){var b,c,d,e,f,a=this.h;a!==q&&(b=a.Q,c=b.control,d=b.shift,e=b.alt,f=b.key,!c||"C"!==f&&"Insert"!==f?c&&"X"===f||d&&"Del"===f?this.canCutSelection()&&this.cutSelection():"Del"===f?this.canDeleteSelection()&&this.deleteSelection():c&&"V"===f||d&&"Insert"===f?this.canPasteSelection()&&this.pasteSelection():c&&"Y"===f||e&&d&&"Backspace"===f?this.canRedo()&&this.redo():c&&"Z"===f||e&&"Backspace"===f?this.canUndo()&&this.undo():c&&"A"===f?this.canSelectAll()&&this.selectAll():"Esc"===f?this.canStopCommand()&&this.stopCommand():"Up"===f?a.Oe&&(c?a.scroll("pixel","up"):a.scroll("line","up")):"Down"===f?a.Oe&&(c?a.scroll("pixel","down"):a.scroll("line","down")):"Left"===f?a.Ne&&(c?a.scroll("pixel","left"):a.scroll("line","left")):"Right"===f?a.Ne&&(c?a.scroll("pixel","right"):a.scroll("line","right")):"PageUp"===f?d&&a.Ne?a.scroll("page","left"):a.Oe&&a.scroll("page","up"):"PageDown"===f?d&&a.Ne?a.scroll("page","right"):a.Oe&&a.scroll("page","down"):"Home"===f?(b=a.fd,c&&a.Oe?a.position=new A(a.position.x,b.y):!c&&a.Ne&&(a.position=new A(b.x,a.position.y))):"End"===f?(b=a.fd,d=a.eb,c&&a.Oe?a.position=new A(d.x,b.bottom-d.height):!c&&a.Ne&&(a.position=new A(b.right-d.width,d.y))):"Subtract"===f?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===f?this.canIncreaseZoom()&&this.increaseZoom():c&&"0"===f?this.canResetZoom()&&this.resetZoom():d&&"Z"===f?this.canZoomToFit()&&this.zoomToFit():c&&!d&&"G"===f?this.canGroupSelection()&&this.groupSelection():c&&d&&"G"===f?this.canUngroupSelection()&&this.ungroupSelection():b.event&&113===b.event.which?this.canEditTextBlock()&&this.editTextBlock():b.event&&93===b.event.which?this.canShowContextMenu()&&this.showContextMenu():b.bubbles=h:this.canCopySelection()&&this.copySelection())},pa.prototype.doKeyUp=function(){var a=this.h;a!==q&&(a.Q.bubbles=h)},pa.prototype.stopCommand=function(){var b,a=this.h;a!==q&&(b=a.Ma,b instanceof Ee&&a.pe&&a.ny(),b!==q&&b.doCancel())},pa.prototype.canStopCommand=ca(h),pa.prototype.selectAll=function(){var b,a=this.h;if(a!==q){a.ta();try{for(a.Mc="wait",a.Fa("ChangingSelection"),b=a.as;b.next();)b.value.Wa=h;for(b=a.uj;b.next();)b.value.Wa=h;for(b=a.links;b.next();)b.value.Wa=h}finally{a.Fa("ChangedSelection"),a.Mc=""}}},pa.prototype.canSelectAll=function(){var a=this.h;return a!==q&&a.pe},pa.prototype.deleteSelection=function(){var b,c,a=this.h;if(a!==q&&!a.Fa("SelectionDeleting",a.selection))try{for(a.Mc="wait",a.kc("Delete"),a.Fa("ChangingSelection"),b=new na(R),c=a.selection.k;c.next();)Fe(b,c.value,h,this.dC?1/0:0,function(a){return a.canDelete()});a.mz(b,h),a.Fa("SelectionDeleted",b)}finally{a.Fa("ChangedSelection"),a.se("Delete"),a.Mc=""}},pa.prototype.canDeleteSelection=function(){var a=this.h;return a===q||a.Za||a.Be||!a.rk||0===a.selection.count?s:h},pa.prototype.copyParts=function(a,b,c){var e,g,h,i,j,d=new ma(R,R);for(a=a.k;a.next();)e=a.value,Ie(this,e,b,d,c);if(b!==q){for(c=b.fa,a=new na(U),g=new ma(U,U),h=d.k;h.next();)e=h.value,e instanceof U?(e.da===q||e.ja===q)&&a.add(e):c instanceof zd&&e instanceof T&&e.data!==q&&(i=e,e=h.key,j=e.lC(),j!==q&&((j=d.wa(j))?(c.kh(i.data,c.Cb(j.data)),i=b.pf(i.data),e=e.yr(),e!==q&&i!==q&&g.add(e,i)):c.kh(i.data,f)));if(0<a.count&&b.mz(a,s),0<g.count)for(b=g.k;b.next();)d.add(b.key,b.value)}for(b=d.k;b.next();)b.value.yb();return d},pa.prototype.copySelection=function(){var b,a=this.h;if(a!==q){for(b=new na(R),a=a.selection.k;a.next();)Fe(b,a.value,h,this.RB?1/0:0,function(a){return a.canCopy()});this.copyToClipboard(b)}},pa.prototype.canCopySelection=function(){var a=this.h;return a!==q&&a.cj&&a.ru&&0!==a.selection.count?h:s},pa.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},pa.prototype.canCutSelection=function(){var a=this.h;return a!==q&&!a.Za&&!a.Be&&a.cj&&a.rk&&a.ru&&0!==a.selection.count?h:s},pa.prototype.copyToClipboard=function(a){var c,b=this.h;b!==q&&(c=q,a===q?(y.nr=q,y.zu=""):(a=b.copyParts(a,q,h),c=new F(R),c.Me(a),y.nr=c,y.zu=b.fa.Dl),b.Fa("ClipboardChanged",c))},pa.prototype.pasteFromClipboard=function(){var c,a=new na(R),b=y.nr;if(b===q)return a;if(c=this.h,c===q||y.zu!==c.fa.Dl)return a;for(b=c.copyParts(b,c,s).k;b.next();)c=b.value,c.location.V()||(c.location=b.key.location),c.position.V()||(c.position=b.key.position),a.add(c);return a},pa.prototype.pasteSelection=function(a){var c,d,e,f,g,b=this.h;if(b!==q)try{for(b.Mc="wait",b.kc("Paste"),b.Fa("ChangingSelection"),c=this.pasteFromClipboard(),0<c.count&&Ke(b),d=c.k;d.next();)d.value.Wa=h;b.Fa("ChangedSelection"),a instanceof A&&(e=b.computePartsBounds(b.selection),e&&(f=b.pb.ve,g=f.computeEffectiveCollection(b.selection),f.moveParts(g,new A(a.x-e.xa,a.y-e.Ga),s))),b.Fa("ClipboardPasted",c)}finally{b.se("Paste"),b.Mc=""}},pa.prototype.canPasteSelection=function(){var a=this.h;return a===q||a.Za||a.Be||!a.tl||!a.ru||y.nr===q||y.zu!==a.fa.Dl?s:h},pa.prototype.undo=function(){var a=this.h;a!==q&&a.va.undo()},pa.prototype.canUndo=function(){var a=this.h;return a===q||a.Za||a.Be?s:a.gy&&a.va.canUndo()},pa.prototype.redo=function(){var a=this.h;a!==q&&a.va.redo()},pa.prototype.canRedo=function(){var a=this.h;return a===q||a.Za||a.Be?s:a.gy&&a.va.canRedo()},pa.prototype.decreaseZoom=function(a){a===f&&(a=1/this.vs),y.p(a,pa,"decreaseZoom:factor");var b=this.h;b!==q&&b.wl===Le&&(a*=b.scale,a<b.Nf||a>b.Mf||(b.scale=a))},pa.prototype.canDecreaseZoom=function(a){a===f&&(a=1/this.vs),y.p(a,pa,"canDecreaseZoom:factor");var b=this.h;return b===q||b.wl!==Le?s:(a*=b.scale,a<b.Nf||a>b.Mf?s:b.Bn)},pa.prototype.increaseZoom=function(a){a===f&&(a=this.vs),y.p(a,pa,"increaseZoom:factor");var b=this.h;b!==q&&b.wl===Le&&(a*=b.scale,a<b.Nf||a>b.Mf||(b.scale=a))},pa.prototype.canIncreaseZoom=function(a){a===f&&(a=this.vs),y.p(a,pa,"canIncreaseZoom:factor");var b=this.h;return b===q||b.wl!==Le?s:(a*=b.scale,a<b.Nf||a>b.Mf?s:b.Bn)},pa.prototype.resetZoom=function(a){a===f&&(a=1),y.p(a,pa,"resetZoom:newscale");var b=this.h;b===q||a<b.Nf||a>b.Mf||(b.scale=a)},pa.prototype.canResetZoom=function(a){a===f&&(a=1),y.p(a,pa,"canResetZoom:newscale");var b=this.h;return b===q||a<b.Nf||a>b.Mf?s:b.Bn},pa.prototype.zoomToFit=function(){var b,c,a=this.h;a!==q&&(b=a.scale,c=a.position,b!==this.tB||isNaN(this.bx)?(this.bx=b,this.FA=c.copy(),a.zoomToFit(),a.li(),this.tB=a.scale):(a.scale=this.bx,a.position=this.FA))},pa.prototype.canZoomToFit=function(){var a=this.h;return a===q?s:a.Bn},pa.prototype.collapseTree=function(a){var b,c,d;if(a===f&&(a=q),b=this.h,b===q)return s;if(b.kc("Collapse Tree"),c=new F(T),a instanceof T&&a.Cc)a.collapseTree(),c.add(a);else for(a=b.selection.k;a.next();)d=a.value,d instanceof T&&d.Cc&&(d.collapseTree(),c.add(d));b.Fa("TreeCollapsed",c),b.se("Collapse Tree")},pa.prototype.canCollapseTree=function(a){a===f&&(a=q);var b=this.h;if(b===q||b.Za)return s;if(a instanceof T){if(!a.Cc)return s;if(0<a.Ou().count)return h}else for(a=b.selection.k;a.next();)if(b=a.value,b instanceof T&&b.Cc&&0<b.Ou().count)return h;return s},pa.prototype.expandTree=function(a){var b,c,d;if(a===f&&(a=q),b=this.h,b===q)return s;if(b.kc("Expand Tree"),c=new F(T),a instanceof T&&!a.Cc)a.expandTree(),c.add(a);else for(a=b.selection.k;a.next();)d=a.value,d instanceof T&&!d.Cc&&(d.expandTree(),c.add(d));b.Fa("TreeExpanded",c),b.se("Expand Tree")},pa.prototype.canExpandTree=function(a){a===f&&(a=q);var b=this.h;if(b===q||b.Za)return s;if(a instanceof T){if(a.Cc)return s;if(0<a.Ou().count)return h}else for(a=b.selection.k;a.next();)if(b=a.value,b instanceof T&&!b.Cc&&0<b.Ou().count)return h;return s},pa.prototype.groupSelection=function(){var b,c,d,e,f,g,i,j,k,l,m,a=this.h;if(a!==q&&(b=a.fa,b!==q&&b instanceof O&&(c=this.hy,c!==q))){d=q;try{for(a.Mc="wait",a.kc("Group"),a.Fa("ChangingSelection"),e=new F(R),f=a.selection.k;f.next();)g=f.value,g.Pd()&&g.canGroup()&&e.add(g);for(i=new F(R),j=e.k;j.next();){for(k=j.value,g=s,f=e.k;f.next();)if(k.Jr(f.value)){g=h;break}g||i.add(k)}if(0<i.count){if(f=i.k,f.next(),l=f.value.bb,l!==q)for(;l!==q;){for(f=i.k,f.next(),e=s;f.next();)if(k=f.value,!k.Jr(l)){e=h;break}if(!e)break;l=l.bb}if(c instanceof He?(Je(c),d=c.copy(),d instanceof He&&a.add(d)):b.Iy(c)&&(m=b.jj(c),y.sb(m)&&(b.fr(m),d=a.vr(m))),d instanceof He){for(l!==q&&this.isValidMember(l,d)&&(d.bb=l),f=i.k;f.next();)k=f.value,this.isValidMember(d,k)&&(k.bb=d);a.select(d)}}a.Fa("ChangedSelection"),a.Fa("SelectionGrouped",d)}finally{a.se("Group"),a.Mc=""}}},pa.prototype.canGroupSelection=function(){var b,a=this.h;if(a===q||a.Za||a.Be||!a.tl||!a.vn)return s;if(b=a.fa,b===q||!(b instanceof O)||this.hy===q)return s;for(a=a.selection.k;a.next();)if(b=a.value,b.Pd()&&b.canGroup())return h;return s},pa.prototype.isValidMember=function(a,b){if(b===q||a===b||b instanceof U)return s;if(a!==q){if(a===b||a.Jr(b))return s;var c=a.Pr;if(c!==q&&!c(a,b)||a.data===q&&b.data!==q||a.data!==q&&b.data===q)return s}return c=this.Pr,c!==q?c(a,b):h},pa.prototype.ungroupSelection=function(a){var b,c,d,e,g,i,j,k,l,m,n,o,p;if(a===f&&(a=q),b=this.h,b!==q&&(c=b.fa,c!==q&&c instanceof O))try{if(b.Mc="wait",b.kc("Ungroup"),b.Fa("ChangingSelection"),d=new F(He),a instanceof He)d.add(a);else for(e=b.selection.k;e.next();)g=e.value,g instanceof He&&g.canUngroup()&&d.add(g);if(0<d.count)for(b.ny(),e=d.k;e.next();){for(i=e.value,j=i.data,k=i.bb,l=k!==q&&k.data!==q?c.Cb(k.data):f,m=new F(R),m.Me(i.Dc),n=m.k;n.next();)o=n.value,o instanceof U||(p=o.data,p!==q?c.sz(p,l):o.bb=k,o.Wa=h);j!==q?c.wD(j):b.remove(i)}b.Fa("ChangedSelection"),b.Fa("SelectionUngrouped",d,m)}finally{b.se("Ungroup"),b.Mc=""}},pa.prototype.canUngroupSelection=function(a){var b,c;if(a===f&&(a=q),b=this.h,b===q||b.Za||b.Be||!b.rk||!b.An)return s;if(c=b.fa,c===q||!(c instanceof O))return s;if(a instanceof He){if(a.canUngroup())return h}else for(a=b.selection.k;a.next();)if(b=a.value,b instanceof He&&b.canUngroup())return h;return s},pa.prototype.addTopLevelParts=function(a,b){var c,d,e;for(c=h,d=Me(a).k;d.next();)e=d.value,e.bb!==q&&(!b||this.isValidMember(q,e)?e.bb=q:c=s);return c},pa.prototype.collapseSubGraph=function(a){var b,c,d;if(a===f&&(a=q),b=this.h,b===q)return s;if(b.kc("Collapse SubGraph"),c=new F(He),a instanceof He&&a.Ue)a.collapseSubGraph(),c.add(a);else for(a=b.selection.k;a.next();)d=a.value,d instanceof He&&d.Ue&&(d.collapseSubGraph(),c.add(d));b.Fa("SubGraphCollapsed",c),b.se("Collapse SubGraph")},pa.prototype.canCollapseSubGraph=function(a){a===f&&(a=q);var b=this.h;if(b===q||b.Za)return s;if(a instanceof He)return a.Ue?h:s;for(a=b.selection.k;a.next();)if(b=a.value,b instanceof He&&b.Ue)return h;return s},pa.prototype.expandSubGraph=function(a){var b,c,d;if(a===f&&(a=q),b=this.h,b===q)return s;if(b.kc("Expand SubGraph"),c=new F(He),a instanceof He&&!a.Ue)a.expandSubGraph(),c.add(a);else for(a=b.selection.k;a.next();)d=a.value,d instanceof He&&!d.Ue&&(d.expandSubGraph(),c.add(d));b.Fa("SubGraphExpanded",c),b.se("Expand SubGraph")},pa.prototype.canExpandSubGraph=function(a){a===f&&(a=q);var b=this.h;if(b===q||b.Za)return s;if(a instanceof He)return a.Ue?s:h;for(a=b.selection.k;a.next();)if(b=a.value,b instanceof He&&!b.Ue)return h;return s},pa.prototype.editTextBlock=function(a){var b,c,d,e;if(a===f&&(a=q),b=this.h,b!==q&&b.pb!==q&&(c=b.pb.Cv,c!==q)){if(a===q){for(a=b.selection.k,d=q;a.next();)if(e=a.value,e.canEdit()){d=e;break}if(d===q)return;a=Ne(d,function(a){return a instanceof oa&&a.Ju})}a!==q&&a instanceof oa&&(c.Yf=a,b.Ma=c)}},pa.prototype.canEditTextBlock=function(a){a===f&&(a=q);var b=this.h;if(b===q||b.Za||b.Be||!b.zn||b.pb===q||b.pb.Cv===q)return s;if(a instanceof oa){if(a=a.W,a!==q&&a.canEdit())return h}else for(b=b.selection.k;b.next();)if(a=b.value,a.canEdit()&&(a=Ne(a,function(a){return a instanceof oa&&a.Ju}),a!==q))return h;return s},pa.prototype.showContextMenu=function(a){var c,d,e,b=this.h;b!==q&&b.pb!==q&&(c=b.pb.Du,c!==q&&(a===f&&(a=0<b.selection.count?b.selection.ob():b),a=c.findObjectWithContextMenu(a),a!==q)&&(d=new kd,e=q,a instanceof P?e=a.hb(Sb):b.Lm||(e=b.eb,e=new A(e.x+e.width/2,e.y+e.height/2)),e!==q&&(d.Rc=b.Do(e),d.T=e,b.Zb=d),b.Ma=c,Oe(c,s,a)))},pa.prototype.canShowContextMenu=function(a){var c,b=this.h;return b===q||b.pb===q?s:(c=b.pb.Du,c===q?s:(a===f&&(a=0<b.selection.count?b.selection.ob():b),c.findObjectWithContextMenu(a)===q?s:h))},y.g(pa,"copiesTree",pa.prototype.RB),y.defineProperty(pa,{RB:"copiesTree"},w("fA"),ba("fA")),y.g(pa,"deletesTree",pa.prototype.dC),y.defineProperty(pa,{dC:"deletesTree"},w("mA"),ba("mA")),y.g(pa,"archetypeGroupData",pa.prototype.hy),y.defineProperty(pa,{hy:"archetypeGroupData"},w("Zz"),function(a){a!==q&&y.l(a,Object,pa,"archetypeGroupData");var b=this.h;b!==q&&(b=b.fa,b instanceof O&&!(a instanceof He)&&!b.Iy(a)&&y.m("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+a)),this.Zz=a}),y.g(pa,"memberValidation",pa.prototype.Pr),y.defineProperty(pa,{Pr:"memberValidation"},w("fk"),function(a){a!==q&&y.j(a,"function",pa,"memberValidation"),this.fk=a}),y.g(pa,"zoomFactor",pa.prototype.vs),y.defineProperty(pa,{vs:"zoomFactor"},w("sB"),function(a){y.j(a,"number",pa,"zoomFactor"),a>1||y.m("zoomFactor must be larger than 1.0, not: "+a),this.sB=a}),y.ba("Tool",Pe),Pe.prototype.ie=function(a){x&&a!==q&&y.l(a,E,Pe,"setDiagram"),this.ca=a},Pe.prototype.toString=function(){return""!==this.name?this.name+" Tool":y.bh(Object.getPrototypeOf(this))},Pe.prototype.updateAdornments=aa(),Pe.prototype.canStart=w("isEnabled"),Pe.prototype.doStart=aa(),Pe.prototype.doActivate=function(){this.la=h},Pe.prototype.doDeactivate=function(){this.la=s},Pe.prototype.doStop=aa(),Pe.prototype.doCancel=function(){this.stopTool()},Pe.prototype.stopTool=function(){var a=this.h;a!==q&&a.Ma===this&&(a.Ma=q,a.Mc="")},Pe.prototype.doMouseDown=function(){!this.la&&this.canStart()&&this.doActivate()},Pe.prototype.doMouseMove=aa(),Pe.prototype.doMouseUp=function(){this.stopTool()},Pe.prototype.doMouseWheel=aa(),Pe.prototype.doKeyDown=function(){var a=this.h;a!==q&&"Esc"===a.Q.key&&this.doCancel()},Pe.prototype.doKeyUp=aa(),Pe.prototype.startTransaction=Pe.prototype.kc=function(a){this.Fe=q;var b=this.h;return b===q?s:b.kc(a)},Pe.prototype.stopTransaction=Pe.prototype.wj=function(){var a=this.h;return a===q?s:this.Fe===q?a.es():a.se(this.Fe)},Pe.prototype.standardMouseSelect=function(){var b,c,a=this.h;if(a!==q&&a.pe)if(b=a.Q,c=a.wr(b.T,s),c!==q){if(b.control){for(a.Fa("ChangingSelection"),b=c;b!==q&&!b.canSelect();)b=b.bb;b.Wa=!b.Wa,a.Fa("ChangedSelection")}else if(b.shift){if(!c.Wa){for(a.Fa("ChangingSelection"),b=c;b!==q&&!b.canSelect();)b=b.bb;b.Wa=h,a.Fa("ChangedSelection")}}else if(!c.Wa){for(b=c;b!==q&&!b.canSelect();)b=b.bb;a.select(b)}}else b.left&&!b.control&&!b.shift&&a.ny()},Pe.prototype.standardMouseClick=function(a,b){var c,d,e;a===f&&(a=q),b===f&&(b=function(a){return!a.layer.bc}),c=this.h,c!==q&&(d=c.Q,e=c.vd(d.T,a,b),d.zd=e,Qe(e,d,c))},Pe.prototype.standardMouseOver=function(){var b,c,d,e,f,g,a=this.h;if(a!==q&&(b=a.Q,b.h!==q)){if(c=a.vd(b.T,q,q),b.zd=c,d=a.Wb,a.Wb=h,e=s,c!==a.Hn){for(f=a.Hn,a.ez=f,a.Hn=c,this.doCurrentObjectChanged(f,c);f!==q;){if(g=f.Xy,g!==q){if(c===f)break;if(c!==q&&c.hi(f))break;if(g(b,f,c),e=h,b.ee)break}f=f.ga}for(f=a.ez;c!==q;){if(g=c.Wy,g!==q){if(f===c)break;if(f!==q&&f.hi(c))break;if(g(b,c,f),e=h,b.ee)break}c=c.ga}c=a.Hn}if(c!==q){for(f=c,g="";f!==q&&(g=f.cursor,""===g);)f=f.ga;for(a.Mc=g,f=c;f!==q&&(g=f.Tr,g===q||(g(b,f),e=h,!b.ee));)f=f.ga}else a.Mc="",g=a.Tr,g!==q&&(g(b),e=h);e&&a.jc(),a.Wb=d}},Pe.prototype.doCurrentObjectChanged=aa(),Pe.prototype.standardMouseWheel=function(){var b,c,d,e,a=this.h;a!==q&&(b=a.Q,c=b.lj,0!==c&&(d=a.pb.Ul,a.Bn&&(d===Re&&!b.shift||d===$e&&b.control)?(d=a.qh,a.qh=b.Rc,e=a.Pe,e!==q?c>0?e.increaseZoom():e.decreaseZoom():a.scale=c>0?1.05*a.scale:a.scale/1.05,a.qh=d,b.bubbles=s):(d===Re&&b.shift||d===$e&&!b.control)&&(d=a.position.copy(),!b.shift&&a.Oe?c>0?a.scroll("line","up",3):a.scroll("line","down",3):b.shift&&a.Ne&&(c>0?a.scroll("line","left",3):a.scroll("line","right",3)),a.position.L(d)||(b.bubbles=s))))},Pe.prototype.standardWaitAfter=function(a){y.j(a,"number",Pe,"standardWaitAfter:delay"),this.cancelWaitAfter();var b=this;this.mu=window.setTimeout(function(){b.doWaitAfter()},a)},Pe.prototype.cancelWaitAfter=function(){-1!==this.mu&&window.clearTimeout(this.mu),this.mu=-1},Pe.prototype.doWaitAfter=aa(),Pe.prototype.findToolHandleAt=function(a,b){var d,c=this.h;return c===q?q:(c=c.vd(a,q,function(a){return a=a.W,a===q?s:a.zc!==q}),c===q?q:(d=c.W,d===q||d.Ac!==b?q:c))},Pe.prototype.isBeyondDragSize=function(a,b){var d,c=this.h;return c===q?s:(a===f&&(a=c.uc.Rc),b===f&&(b=c.Q.Rc),d=c.pb.gC,c=d.width,d=d.height,y.zz&&(c+=6,d+=6),Math.abs(b.x-a.x)>c||Math.abs(b.y-a.y)>d)},y.A(Pe,{h:"diagram"},w("ca")),y.g(Pe,"name",Pe.prototype.name),y.defineProperty(Pe,{name:"name"},w("Gb"),ba("Gb")),y.g(Pe,"isEnabled",Pe.prototype.isEnabled),y.defineProperty(Pe,{isEnabled:"isEnabled"},w("Dh"),ba("Dh")),y.g(Pe,"isActive",Pe.prototype.la),y.defineProperty(Pe,{la:"isActive"},w("yA"),ba("yA")),y.g(Pe,"transactionResult",Pe.prototype.Fe),y.defineProperty(Pe,{Fe:"transactionResult"},w("qB"),ba("qB")),y.ba("DraggingTool",af),y.Ka(af,Pe),y.g(af,"copiesEffectiveCollection",af.prototype.QB),y.defineProperty(af,{QB:"copiesEffectiveCollection"},w("eA"),ba("eA")),y.g(af,"dragsTree",af.prototype.hC),y.defineProperty(af,{hC:"dragsTree"},w("rA"),ba("rA")),y.g(af,"isGridSnapEnabled",af.prototype.Zn),y.defineProperty(af,{Zn:"isGridSnapEnabled"},w("cl"),function(a){this.cl!==a&&(y.j(a,"boolean",af,"isGridSnapEnabled"),this.cl=a)}),y.g(af,"isGridSnapRealtime",af.prototype.KC),y.defineProperty(af,{KC:"isGridSnapRealtime"},w("Tw"),function(a){this.Tw!==a&&(y.j(a,"boolean",af,"isGridSnapRealtime"),this.Tw=a)}),y.g(af,"gridSnapCellSize",af.prototype.Ey),y.defineProperty(af,{Ey:"gridSnapCellSize"},w("Mw"),function(a){this.Mw.L(a)||(y.l(a,ha,af,"gridSnapCellSize"),this.Mw=a=a.U())}),y.g(af,"gridSnapCellSpot",af.prototype.tC),y.defineProperty(af,{tC:"gridSnapCellSpot"},w("Nw"),function(a){this.Nw.L(a)||(y.l(a,J,af,"gridSnapCellSpot"),this.Nw=a=a.U())}),y.g(af,"gridSnapOrigin",af.prototype.uC),y.defineProperty(af,{uC:"gridSnapOrigin"},w("Ow"),function(a){this.Ow.L(a)||(y.l(a,A,af,"gridSnapOrigin"),this.Ow=a=a.U())}),y.g(af,"dragsLinks",af.prototype.Gl),y.defineProperty(af,{Gl:"dragsLinks"},w("qA"),ba("qA")),y.g(af,"currentPart",af.prototype.In),y.defineProperty(af,{In:"currentPart"},w("hA"),ba("hA")),y.g(af,"copiedParts",af.prototype.Zc),y.defineProperty(af,{Zc:"copiedParts"},w("dA"),ba("dA")),y.g(af,"draggedParts",af.prototype.gc),y.defineProperty(af,{gc:"draggedParts"},w("pA"),ba("pA")),y.g(af,"draggedLink",af.prototype.fc),y.defineProperty(af,{fc:"draggedLink"},w("oA"),ba("oA")),y.g(af,"isDragOutStarted",af.prototype.Zu),y.defineProperty(af,{Zu:"isDragOutStarted"},w("BA"),ba("BA")),y.g(af,"delay",af.prototype.Hu),y.defineProperty(af,{Hu:"delay"},w("zm"),ba("zm")),af.prototype.canStart=function(){var a,b;return this.isEnabled?(a=this.h,a!==q&&(a.sk||a.cj||a.su)&&a.pe?(b=a.Q,!b.left||a.Ma!==this&&(!this.isBeyondDragSize()||b.bv&&b.timestamp-a.uc.timestamp<this.zm)?s:this.findDraggablePart()!==q):s):s},af.prototype.findDraggablePart=function(){var a=this.h;if(a===q)return q;if(a=a.wr(a.uc.T,s),a===q)return q;for(;a!==q&&!a.canSelect();)a=a.bb;return a!==q&&(a.canMove()||a.canCopy())?a:q},af.prototype.standardMouseSelect=function(){var b,a=this.h;if(a!==q&&a.pe&&(b=a.wr(a.uc.T,s),b!==q)){for(;b!==q&&!b.canSelect();)b=b.bb;this.In=b,this.In.Wa||(a.Fa("ChangingSelection"),b=a.Q,!b.control&&!b.shift&&Ke(a),this.In.Wa=h,a.Fa("ChangedSelection"))}},af.prototype.doActivate=function(){var b,a=this.h;a!==q&&(this.standardMouseSelect(),b=this.In,b===q||!b.canMove()&&!b.canCopy()||(this.la=h,this.ln.set(a.position),bf(this,a.selection),this.Xk=this.Qt=q,this.gc=this.computeEffectiveCollection(a.selection),a.Bx=h,cf(this,this.gc),this.kc("Drag"),this.Sh.set(a.uc.T),a.gd=h,a.su&&(this.Zu=h,this.hp=s,df=this,ef=this.h)))},af.prototype.computeEffectiveCollection=function(a){var d,e,b=this.h!==q&&this.h.Ma===this,c=new ma(R,Object);if(a===q)return c;for(d=a.k;d.next();)e=d.value,ff(this,c,e,b);if(this.fc!==q&&this.Gl)return c;for(d=a.k;d.next();)e=d.value,e instanceof U&&(a=e,b=a.da,b===q||c.contains(b)?(b=a.ja,b!==q&&!c.contains(b)&&c.remove(a)):c.remove(a));return c},af.prototype.doDeactivate=function(){var a,b,c,d;if(this.la=s,a=this.h,a!==q&&hf(a),jf(this),kf(this,this.gc),this.gc=q,this.hp=this.Zu=s,0<lf.count){for(b=lf.length,c=0;b>c;c++)d=lf.n[c],d.fc!==q&&(d.fc=q),mf(d),jf(d),d.h!==q&&hf(d.h);lf.clear()}this.fc!==q&&(this.fc=q),this.ln.Ao(0/0,0/0),df=ef=q,mf(this),a.gd=s,a.Bx=s,this.wj()},af.prototype.doCancel=function(){mf(this),nf(this);var a=this.h;a!==q&&this.ln.V()&&(a.position=this.ln),this.stopTool()},af.prototype.doKeyDown=function(){var a=this.h;a!==q&&(a=a.Q,a!==q&&this.la&&("Esc"===a.key?this.doCancel():this.doMouseMove()))},af.prototype.doKeyUp=function(){var a=this.h;a!==q&&a.Q!==q&&this.la&&this.doMouseMove()},af.prototype.moveParts=function(a,b,c){var d,e,f,g,h,i,j,k,l,m;if(a!==q&&0!==a.count){for(d=y.M(),e=y.M(),e.assign(b),isNaN(e.x)&&(e.x=0),isNaN(e.y)&&(e.y=0),f=this.bu,f||cf(this,a),g=new F,h=new F(Ia),i=a.k;i.next();)j=i.key,j.Pd()?(k=Bf(this,j,a),k!==q?g.add({vc:j,info:i.value,zG:k}):(!c||j.canMove())&&(k=i.value.point,d.assign(k),l=this.computeMove(j,d.add(e),a),j.location=l,i.value.Ax=l.qs(k))):i.key instanceof U&&h.add(i.Gd);for(c=g.k;c.next();)g=c.value,k=g.info.point,d.assign(k),g.vc.location=d.add(g.zG.Ax);for(k=y.M(),c=y.M(),h=h.k;h.next();)l=h.value,g=l.key,g instanceof U&&(g.rs?(i=g.da,j=g.ja,this.fc!==q&&this.Gl?(l=l.value.point,a.add(g,gf(e)),i=b.x-l.x,j=b.y-l.y,g.Ek(i,j)):(i!==q&&(k.assign(i.location),m=a.wa(i),m!==q&&k.qs(m.point)),j!==q&&(c.assign(j.location),m=a.wa(j),m!==q&&c.qs(m.point)),i!==q&&j!==q?k.di(c)?(l=l.value.point,i=d,i.assign(k),i.qs(l),a.add(g,gf(k)),g.Ek(i.x,i.y)):(g.rs=s,g.Ub()):(l=l.value.point,a.add(g,gf(i!==q?k:j!==q?c:b)),i=e.x-l.x,j=e.y-l.y,g.Ek(i,j)))):(g.da===q||g.ja===q)&&(l=l.value.point,a.add(g,gf(b)),i=e.x-l.x,j=e.y-l.y,g.Ek(i,j)));y.B(d),y.B(e),y.B(k),y.B(c),f||kf(this,a)}},af.prototype.computeMove=function(a,b,c,d){var e,g,h,i,j,k,l,m;return d===f&&(d=new A),d.assign(b),a===q?d:(c===f&&(c=q),e=b,this.Zn&&(this.KC||c===q||this.h.Q.ni)&&(e=y.M(),c=e,c.assign(b),a!==q&&(g=this.h,g!==q&&(h=g.Wn,i=this.Ey,g=i.width,i=i.height,j=this.uC,k=j.x,j=j.y,l=this.tC,h!==q&&(m=h.Br,isNaN(g)&&(g=m.width),isNaN(i)&&(i=m.height),h=h.Dy,isNaN(k)&&(k=h.x),isNaN(j)&&(j=h.y)),h=y.dc(0,0),h.ms(0,0,g,i,l),H.wy(b.x,b.y,k+h.x,j+h.y,g,i,c),y.B(h)))),c=a.ty!==q?a.ty(a,b,e):e,i=a.eD,g=i.x,isNaN(g)&&(g=a.location.x),i=i.y,isNaN(i)&&(i=a.location.y),h=a.ZC,k=h.x,isNaN(k)&&(k=a.location.x),h=h.y,isNaN(h)&&(h=a.location.y),d.q(Math.max(g,Math.min(c.x,k)),Math.max(i,Math.min(c.y,h))),e!==b&&y.B(e),d)},af.prototype.doDragOver=aa(),af.prototype.doDropOnto=aa(),af.prototype.doMouseMove=function(){var a,b,c;this.la&&(a=this.h,a!==q&&this.In!==q&&this.gc!==q&&(b=s,c=s,this.mayCopy()?(b=h,zf(this,s),Af(this,this.Zc,h)):this.mayMove()?(c=h,mf(this),Af(this,this.gc,h)):mf(this),Df(this,a.Q.T,c,b),a.jc()))},af.prototype.doMouseUp=function(){var a,b,c,d;if(this.la&&(this.hp=h,a=this.h,a!==q)){if(b=s,c=this.mayCopy(),c&&this.Zc!==q?(nf(this),mf(this),zf(this,h),Af(this,this.Zc,h),this.Zc!==q&&a.PD(this.Zc.Ok())):(b=h,mf(this),this.mayMove()&&(Af(this,this.gc,h),this.Yt=s,Df(this,a.Q.T,h,s),this.Yt=h)),Gf(this,a.Q.T),this.la){if(this.Zc=q,b&&this.gc!==q)for(b=this.gc.k;b.next();)d=b.key,d instanceof T&&(d=d.bb,d!==q&&d.placeholder!==q&&!this.gc.contains(d)&&d.oy&&d.aa());a.oc(),kf(this,this.gc),this.Fe=c?"Copy":"Move",a.Fa(c?"SelectionCopied":"SelectionMoved",a.selection)}this.stopTool()}},af.prototype.mayCopy=function(){var b,a=this.h;if(a===q||a.Za||a.Be||!a.tl||!a.cj||!a.Q.control)return s;for(a=a.selection.k;a.next();)if(b=a.value,b.Pd()&&b.canCopy())return h;return this.fc!==q&&this.Gl&&this.fc.canCopy()?h:s},af.prototype.mayMove=function(){var b,a=this.h;if(a===q||a.Za||!a.sk)return s;for(a=a.selection.k;a.next();)if(b=a.value,b.Pd()&&b.canMove())return h;return this.fc!==q&&this.Gl&&this.fc.canMove()?h:s},lf=new F(af),df=q,ef=q,af.prototype.mayCopyExternal=function(){var a=this.h;return a===q||!a.ey||a.Za||a.Be||!a.tl||a.fa===q?s:h},af.prototype.doSimulatedDragEnter=function(){var a,b;this.mayCopyExternal()&&(a=df,a!==q&&(mf(a),nf(a),b=a.h,b!==q&&a.ln.V()&&(b.position=a.ln),b!==q&&hf(b)),lf.contains(this)||lf.add(this))},af.prototype.doSimulatedDragLeave=function(){df.Zu=s,this.doCancel()},af.prototype.doSimulatedDragOver=function(){var a,b;this.mayCopyExternal()&&(a=this.h,a!==q&&(b=df,b!==q&&b.gc!==q&&(If(this,b.gc.Ok(),s),Af(this,this.Zc,s),Df(this,a.Q.T,s,h),a.jc())))},af.prototype.doSimulatedDrop=function(){var b,a=df;a!==q&&(a.hp=h,mf(this),this.mayCopyExternal())&&(b=this.h,b!==q&&(this.kc("Drop"),If(this,a.gc.Ok(),h),Af(this,this.Zc,h),this.Zc!==q&&b.PD(this.Zc.Ok()),this.Fe="ExternalCopy",Gf(this,b.Q.T),this.Zc=q,b.Fa("ExternalObjectsDropped",b.selection),this.wj(),b.oc()))},y.ba("LinkingBaseTool",Jf),y.Ka(Jf,Pe),Jf.prototype.doStop=function(){var a=this.h;a!==q&&hf(a),this.Tf=this.Sf=this.Rf=this.Qf=this.pc=q,this.Fv.clear(),this.cf=q},y.g(Jf,"portGravity",Jf.prototype.pD),y.defineProperty(Jf,{pD:"portGravity"},w("ux"),function(a){this.ux!==a&&(x&&y.j(a,"number",Jf,"portGravity"),this.ux=a)}),y.g(Jf,"isUnconnectedLinkValid",Jf.prototype.ao),y.defineProperty(Jf,{ao:"isUnconnectedLinkValid"},w("Zw"),function(a){this.Zw!==a&&(x&&y.j(a,"boolean",Jf,"isUnconnectedLinkValid"),this.Zw=a)}),y.g(Jf,"temporaryLink",Jf.prototype.Xf),y.defineProperty(Jf,{Xf:"temporaryLink"},w("Px"),function(a){this.Px!==a&&(x&&y.l(a,U,Jf,"temporaryLink"),this.Px=a)}),y.g(Jf,"temporaryFromNode",Jf.prototype.ef),y.defineProperty(Jf,{ef:"temporaryFromNode"},w("Nx"),function(a){this.Nx!==a&&(x&&y.l(a,T,Jf,"temporaryFromNode"),this.Nx=a)}),y.g(Jf,"temporaryFromPort",Jf.prototype.$l),y.defineProperty(Jf,{$l:"temporaryFromPort"},w("Ox"),function(a){this.Ox!==a&&(x&&y.l(a,P,Jf,"temporaryFromPort"),this.Ox=a)}),y.g(Jf,"temporaryToNode",Jf.prototype.ff),y.defineProperty(Jf,{ff:"temporaryToNode"},w("Qx"),function(a){this.Qx!==a&&(x&&y.l(a,T,Jf,"temporaryToNode"),this.Qx=a)}),y.g(Jf,"temporaryToPort",Jf.prototype.am),y.defineProperty(Jf,{am:"temporaryToPort"},w("Rx"),function(a){this.Rx!==a&&(x&&y.l(a,P,Jf,"temporaryToPort"),this.Rx=a)}),y.g(Jf,"originalLink",Jf.prototype.pc),y.defineProperty(Jf,{pc:"originalLink"},w("nx"),function(a){this.nx!==a&&(x&&a!==q&&y.l(a,U,Jf,"originalLink"),this.nx=a)}),y.g(Jf,"originalFromNode",Jf.prototype.Qf),y.defineProperty(Jf,{Qf:"originalFromNode"},w("lx"),function(a){this.lx!==a&&(x&&a!==q&&y.l(a,T,Jf,"originalFromNode"),this.lx=a)}),y.g(Jf,"originalFromPort",Jf.prototype.Rf),y.defineProperty(Jf,{Rf:"originalFromPort"},w("mx"),function(a){this.mx!==a&&(x&&a!==q&&y.l(a,P,Jf,"originalFromPort"),this.mx=a)}),y.g(Jf,"originalToNode",Jf.prototype.Sf),y.defineProperty(Jf,{Sf:"originalToNode"},w("sx"),function(a){this.sx!==a&&(x&&a!==q&&y.l(a,T,Jf,"originalToNode"),this.sx=a)}),y.g(Jf,"originalToPort",Jf.prototype.Tf),y.defineProperty(Jf,{Tf:"originalToPort"},w("tx"),function(a){this.tx!==a&&(x&&a!==q&&y.l(a,P,Jf,"originalToPort"),this.tx=a)}),y.defineProperty(Jf,{Ae:"isForwards"},w("vp"),ba("vp")),y.A(Jf,{Fv:"validPortsCache"},w("eF")),y.g(Jf,"targetPort",Jf.prototype.cf),y.defineProperty(Jf,{cf:"targetPort"},w("Kx"),function(a){this.Kx!==a&&(x&&a!==q&&y.l(a,P,Jf,"targetPort"),this.Kx=a)}),Jf.prototype.copyPortProperties=function(a,b,c,d,e){if(a!==q&&b!==q&&c!==q&&d!==q){d.Aa=b.ua.size,e?(d.kb=b.kb,d.cm=b.cm):(d.gb=b.gb,d.Kl=b.Kl),c.We=Sb;var f=y.M();c.location=b.hb(Sb,f),y.B(f),d.angle=b.yk(),this.bs!==q&&this.bs(a,b,c,d,e)}},Jf.prototype.setNoTargetPortProperties=function(a,b,c){b!==q&&(b.Aa=H.Xv,b.gb=Hb,b.kb=Hb),a!==q&&(a.location=this.h.Q.T),this.bs!==q&&this.bs(q,q,a,b,c)},Jf.prototype.doMouseDown=function(){this.la&&this.doMouseMove()},Jf.prototype.doMouseMove=function(){var a,b;if(this.la&&(a=this.h,a!==q)){if(this.cf=this.findTargetPort(this.Ae),this.cf!==q&&(b=this.cf.W,b instanceof T))return this.Ae?this.copyPortProperties(b,this.cf,this.ff,this.am,h):this.copyPortProperties(b,this.cf,this.ef,this.$l,s),a.jc(),void 0;this.Ae?this.setNoTargetPortProperties(this.ff,this.am,h):this.setNoTargetPortProperties(this.ef,this.$l,s),a.jc(),(a.Ne||a.Oe)&&Ff(a,a.Q.T)}},Jf.prototype.findValidLinkablePort=function(a,b){var c,d;if(a===q)return q;if(c=a.W,!(c instanceof T))return q;for(;a!==q;){if(d=b?a.Dz:a.Ay,d===h&&(a.Td!==q||a instanceof T)&&(b?this.isValidTo(c,a):this.isValidFrom(c,a)))return a;if(d===s)break;a=a.ga}return q},Jf.prototype.findTargetPort=function(a){var e,f,g,i,j,k,l,b=this.h,c=b.Q.T,d=this.pD;for(0>=d&&(d=.1),e=this,f=b.Pn(c,d,function(b){return e.findValidLinkablePort(b,a)},q,h),d=1/0,b=q,f=f.k;f.next();)g=f.value,i=g.W,i instanceof T&&(j=g.hb(Sb,y.M()),k=c.x-j.x,l=c.y-j.y,y.B(j),j=k*k+l*l,d>j&&(k=this.Fv.wa(g),k!==q?k&&(b=g,d=j):a&&this.isValidLink(this.Qf,this.Rf,i,g)||!a&&this.isValidLink(i,g,this.Sf,this.Tf)?(this.Fv.add(g,h),b=g,d=j):this.Fv.add(g,s)));return b!==q&&(c=b.W,c instanceof T&&(c.layer===q||c.layer.ul))?b:q},Jf.prototype.isValidFrom=function(a,b){var c,d;if(a===q||b===q)return this.ao;if(this.h.Ma===this&&(a.layer!==q&&!a.layer.ul||b.Ay!==h))return s;if(c=b.pC,1/0>c){if(this.pc!==q&&a===this.Qf&&b===this.Rf)return h;if(d=b.Td,d===q&&(d=""),a.Nu(d).count>=c)return s}return h},Jf.prototype.isValidTo=function(a,b){var c,d;if(a===q||b===q)return this.ao;if(this.h.Ma===this&&(a.layer!==q&&!a.layer.ul||b.Dz!==h))return s;if(c=b.iE,1/0>c){if(this.pc!==q&&a===this.Sf&&b===this.Tf)return h;if(d=b.Td,d===q&&(d=""),a.If(d).count>=c)return s}return h},Jf.prototype.isInSameNode=function(a,b){if(a===q||b===q)return s;if(a===b)return h;var c=a.W,d=b.W;return c!==q&&c===d},Jf.prototype.isLinked=function(a,b){var c,d,e,f;if(a===q||b===q)return s;if(c=a.W,!(c instanceof T))return s;if(d=a.Td,d===q&&(d=""),e=b.W,!(e instanceof T))return s;for(f=b.Td,f===q&&(f=""),e=e.If(f);e.next();)if(f=e.value,f.da===c&&f.Kf===d)return h;
return s},Jf.prototype.isValidLink=function(a,b,c,d){return!this.isValidFrom(a,b)||!this.isValidTo(c,d)||b!==q&&d!==q&&((!b.oC||!d.hE)&&this.isInSameNode(b,d)||(!b.nC||!d.gE)&&this.isLinked(b,d))||this.pc!==q&&(a!==q&&Kf(this,a,this.pc)||c!==q&&Kf(this,c,this.pc))||a!==q&&c!==q&&(a.data===q&&c.data!==q||a.data!==q&&c.data===q)||!Lf(this,a,c,this.pc)?s:this.Ry!==q?this.Ry(a,b,c,d,this.pc):h},y.g(Jf,"linkValidation",Jf.prototype.Ry),y.defineProperty(Jf,{Ry:"linkValidation"},w("HA"),function(a){a!==q&&y.j(a,"function",Jf,"linkValidation"),this.HA=a}),y.g(Jf,"portTargeted",Jf.prototype.bs),y.defineProperty(Jf,{bs:"portTargeted"},w("WA"),function(a){a!==q&&y.j(a,"function",Jf,"portTargeted"),this.WA=a}),y.ba("LinkingTool",qa),y.Ka(qa,Jf),qa.Either=eg=y.w(qa,"Either",0),qa.ForwardsOnly=fg=y.w(qa,"ForwardsOnly",0),qa.BackwardsOnly=gg=y.w(qa,"BackwardsOnly",0),y.g(qa,"archetypeLinkData",qa.prototype.CB),y.defineProperty(qa,{CB:"archetypeLinkData"},w("mw"),function(a){this.mw!==a&&(a!==q&&y.l(a,Object,qa,"archetypeLinkData"),this.mw=a)}),y.g(qa,"archetypeLabelNodeData",qa.prototype.BB),y.defineProperty(qa,{BB:"archetypeLabelNodeData"},w("lw"),function(a){if(this.lw!==a){a!==q&&y.l(a,Object,qa,"archetypeLabelNodeData");var b=this.h;b!==q&&(b=b.fa,b instanceof O&&!(a instanceof T)&&!b.My(a)&&y.m("CommandHandler.archetypeLabelNodeData must be either a Node or a data object for which GraphLinksModel.isLinkLabelForNodeData is true: "+a)),this.lw=a}}),y.g(qa,"direction",qa.prototype.direction),y.defineProperty(qa,{direction:"direction"},w("ma"),function(a){this.ma!==a&&(x&&y.rb(a,qa,qa,"direction"),this.ma=a)}),y.g(qa,"startObject",qa.prototype.xz),y.defineProperty(qa,{xz:"startObject"},w("Ex"),function(a){this.Ex!==a&&(x&&a!==q&&y.l(a,P,qa,"startObject"),this.Ex=a)}),y.A(qa,{Av:"startPort"},w("Fx")),qa.prototype.canStart=function(){var a,b;return this.isEnabled?(a=this.h,a===q||a.Za||a.Be||!a.ul?s:(b=a.fa,b!==q&&(b instanceof O||b instanceof zd)&&a.Q.left&&(a.Ma===this||this.isBeyondDragSize())?this.findLinkablePort()!==q:s)):s},qa.prototype.findLinkablePort=function(){var b,c,a=this.h;return a===q?q:(b=this.xz,b===q&&(b=a.vd(a.uc.T,q,q)),b!==q&&b.W instanceof T?(c=this.direction,c!==eg&&c!==fg||(a=this.findValidLinkablePort(b,s),a===q)?c!==eg&&c!==gg||(a=this.findValidLinkablePort(b,h),a===q)?q:(this.vp=s,a):(this.vp=h,a)):q)},qa.prototype.doActivate=function(){var b,a=this.h;a!==q&&(this.Av===q&&(this.Fx=this.findLinkablePort()),this.Av!==q)&&(this.kc(this.name),a.gd=h,a.Mc="pointer",this.Ae?(this.Rf=this.Av,b=this.Rf.W,b instanceof T&&(this.Qf=b),this.copyPortProperties(this.Qf,this.Rf,this.ef,this.$l,s)):(this.Tf=this.Av,b=this.Tf.W,b instanceof T&&(this.Sf=b),this.copyPortProperties(this.Sf,this.Tf,this.ff,this.am,h)),a.add(this.ef),a.add(this.ff),this.Xf!==q&&(this.ef!==q&&(this.Xf.da=this.ef),this.ff!==q&&(this.Xf.ja=this.ff),this.Xf.Ub(),a.add(this.Xf)),this.la=h)},qa.prototype.doDeactivate=function(){this.la=s;var a=this.h;a!==q&&(a.remove(this.Xf),a.remove(this.ef),a.remove(this.ff),a.gd=s,a.Mc="",this.wj())},qa.prototype.doStop=function(){Jf.prototype.doStop.call(this),this.xz=this.Fx=q},qa.prototype.doMouseUp=function(){var a,b,c,d,e,f,g;if(this.la){if(a=this.h,a===q)return;b=this.Fe=q,c=q,d=q,e=q,f=this.cf=this.findTargetPort(this.Ae),g=q,f!==q?(g=f.W,g instanceof T&&(this.Ae?(this.Qf!==q&&(b=this.Qf,c=this.Rf),d=g,e=f):(b=g,c=f,this.Sf!==q&&(d=this.Sf,e=this.Tf)))):this.Ae?this.Qf!==q&&this.ao&&(b=this.Qf,c=this.Rf):this.Sf!==q&&this.ao&&(d=this.Sf,e=this.Tf),(b!==q||d!==q)&&(b=this.insertLink(b,c,d,e),b!==q?(f===q&&(this.Ae?b.fG=a.Q.T:b.YF=a.Q.T),a.pe&&a.select(b),this.Fe=this.name,a.Fa("LinkDrawn",b)):a.fa.KB())}this.stopTool()},qa.prototype.insertLink=function(a,b,c,d){var g,h,e=this.h;if(e===q)return q;if(g=e.fa,g===q)return q;if(g instanceof zd){if(b=a,d=c,e.Pc||(b=c,d=a),b!==q&&d!==q)return g.kh(d.data,g.Cb(b.data)),d.yr()}else if(g instanceof O)if(b===q&&(b=a),b=b.Td,b===q&&(b=""),d===q&&(d=c),h=d.Td,h===q&&(h=""),d=this.CB,d instanceof U){if(Je(d),g=d.copy(),g instanceof U)return g.da=a,g.Kf=b,g.ja=c,g.yg=h,e.add(g),g}else if(d!==q&&(d=g.SB(d),y.sb(d)))return g.rz(d,g.Cb(a.data)),g.vv(d,b),g.vz(d,g.Cb(c.data)),g.wv(d,h),g.yB(d),a=this.BB,a!==q&&g.My(a)&&(a=g.jj(a),y.sb(a)&&(g.fr(a),a=g.Cb(a),a!==f&&g.xB(d,a))),g=e.pf(d);return q},y.ba("RelinkingTool",hg),y.Ka(hg,Jf),hg.prototype.updateAdornments=function(a){var b,c,d;a instanceof U&&(b=q,c="RelinkFrom",a.Wa?(d=a.js,a.ua.V()&&d!==q&&a.xb()&&a.canRelinkFrom()&&d.Dk()&&d.ua.V()&&(b=a.Mn(c),b===q&&(b=this.makeAdornment(d,s),b.Ac=c),b!==q&&b.aa()),a.ok(c,b)):a.Ik(c),b=q,c="RelinkTo",a.Wa?(d=a.js,a.ua.V()&&d!==q&&a.xb()&&a.canRelinkTo()&&d.Dk()&&d.ua.V()&&(b=a.Mn(c),b===q&&(b=this.makeAdornment(d,h),b.Ac=c,b.Ql=h),b!==q&&b.aa()),a.ok(c,b)):a.Ik(c))},hg.prototype.makeAdornment=function(a,b){var d,c=new Ge;return c.type=ig,d=b?this.DH:this.tG,d!==q&&c.add(d.copy()),c.zc=a,c},y.defineProperty(hg,{tG:"fromHandleArchetype"},w("vA"),function(a){a&&y.l(a,P,hg,"fromHandleArchetype"),this.vA=a}),y.defineProperty(hg,{DH:"toHandleArchetype"},w("mB"),function(a){a&&y.l(a,P,hg,"toHandleArchetype"),this.mB=a}),y.A(hg,{handle:"handle"},w("Mb")),hg.prototype.canStart=function(){var a,b;return this.isEnabled?(a=this.h,a===q||a.Za||a.Be||!a.dj?s:(b=a.fa,b!==q&&(b instanceof O||b instanceof zd)&&a.Q.left?(b=this.findToolHandleAt(a.uc.T,"RelinkFrom"),b===q&&(b=this.findToolHandleAt(a.uc.T,"RelinkTo")),b!==q):s)):s},hg.prototype.doActivate=function(){var b,c,a=this.h;if(a!==q){if(this.pc===q){if(b=this.findToolHandleAt(a.uc.T,"RelinkFrom"),b===q&&(b=this.findToolHandleAt(a.uc.T,"RelinkTo")),b===q)return;if(c=b.W,!(c instanceof Ge&&c.aj instanceof U))return;this.Mb=b,this.vp=c===q||"RelinkTo"===c.Ac,this.pc=c.aj}this.kc(this.name),a.gd=h,a.Mc="pointer",this.Rf=this.pc.Nc,this.Qf=this.pc.da,this.Tf=this.pc.Ad,this.Sf=this.pc.ja,this.UA.set(this.pc.ua),this.pc!==q&&0<this.pc.qa&&(this.pc.da===q&&(this.$l!==q&&(this.$l.Aa=H.ws),this.ef!==q&&(this.ef.location=this.pc.o(0))),this.pc.ja===q&&(this.am!==q&&(this.am.Aa=H.ws),this.ff!==q&&(this.ff.location=this.pc.o(this.pc.qa-1)))),this.copyPortProperties(this.Qf,this.Rf,this.ef,this.$l,s),this.copyPortProperties(this.Sf,this.Tf,this.ff,this.am,h),a.add(this.ef),a.add(this.ff),this.Xf!==q&&(this.ef!==q&&(this.Xf.da=this.ef),this.ff!==q&&(this.Xf.ja=this.ff),this.Xf.Ub(),a.add(this.Xf)),this.la=h}},hg.prototype.doDeactivate=function(){this.la=s;var a=this.h;a!==q&&(a.remove(this.Xf),a.remove(this.ef),a.remove(this.ff),a.gd=s,a.Mc="",this.wj())},hg.prototype.doStop=function(){Jf.prototype.doStop.call(this),this.Mb=q},hg.prototype.doMouseUp=function(){var a,b,c,d,e,f,g;if(this.la){if(a=this.h,a===q)return;this.Fe=q,b=this.Qf,c=this.Rf,d=this.Sf,e=this.Tf,f=this.pc,this.cf=this.findTargetPort(this.Ae),this.cf!==q?(g=this.cf.W,g instanceof T&&(this.Ae?(d=g,e=this.cf):(b=g,c=this.cf))):this.ao?this.Ae?e=d=q:c=b=q:f=q,f!==q&&(this.reconnectLink(f,this.Ae?d:b,this.Ae?e:c,this.Ae),this.cf===q&&(this.Ae?f.fG=a.Q.T:f.YF=a.Q.T,f.Ub()),a.pe&&(f.Wa=h),this.Fe=this.name,a.Fa("LinkRelinked",f,this.Ae?this.Tf:this.Rf)),jg(this.pc,this.UA)}this.stopTool()},hg.prototype.reconnectLink=function(a,b,c,d){return this.h===q?s:(c=c!==q&&c.Td!==q?c.Td:"",d?(a.ja=b,a.yg=c):(a.da=b,a.Kf=c),h)},y.ba("LinkReshapingTool",kg),y.Ka(kg,Pe),kg.None=lg=y.w(kg,"None",0),kg.Horizontal=sg=y.w(kg,"Horizontal",1),kg.Vertical=tg=y.w(kg,"Vertical",2),kg.All=ug=y.w(kg,"All",3),kg.prototype.updateAdornments=function(a){var b,c;a instanceof U&&(b=q,a.Wa?(c=a.path,a.ua.V()&&c!==q&&a.xb()&&a.canReshape()&&c.Dk()&&c.ua.V()&&(b=a.Mn(this.name),b===q&&(b=this.makeAdornment(c),b.Ac=this.name,b.Ql=h),b!==q&&(b.location=a.position,b.aa())),a.ok(this.name,b)):a.Ik(this.name))},kg.prototype.makeAdornment=function(a){var c,d,e,f,g,h,i,j,b=new Ge;if(b.type=ig,c=a.W,d=c.qa,e=c.Jb,c.points!==q&&d>1){if(d=c.zr,f=c.cv,g=e?1:0,c.ov&&c.Se!==vg)for(h=d+g;f-g>h;h++)i=this.makeResegmentHandle(a,h),i!==q&&(i.af=h,i.hs=.5,b.add(i));for(h=d+1;f>h;h++)i=this.makeHandle(a,h),i!==q&&(i.af=h,h!==d&&(h===d+1&&e?(g=c.o(d),j=c.o(d+1),H.I(g.x,j.x)&&H.I(g.y,j.y)&&(j=c.o(d-1)),H.I(g.x,j.x)?(i.vo=tg,i.cursor="n-resize"):H.I(g.y,j.y)&&(i.vo=sg,i.cursor="w-resize")):h===f-1&&e?(g=c.o(f-1),j=c.o(f),H.I(g.x,j.x)&&H.I(g.y,j.y)&&(g=c.o(f+1)),H.I(g.x,j.x)?(i.vo=tg,i.cursor="n-resize"):H.I(g.y,j.y)&&(i.vo=sg,i.cursor="w-resize")):h!==f&&(i.vo=ug,i.cursor="move")),b.add(i));b.zc=a}return b},kg.prototype.makeHandle=function(){var a=this.Cr;return a===q?q:a.copy()},y.defineProperty(kg,{Cr:"handleArchetype"},w("Wj"),function(a){a&&y.l(a,P,kg,"handleArchetype"),this.Wj=a}),kg.prototype.makeResegmentHandle=function(){var a=this.XG;return a===q?q:a.copy()},y.defineProperty(kg,{XG:"midHandleArchetype"},w("JA"),function(a){a&&y.l(a,P,kg,"midHandleArchetype"),this.JA=a}),y.A(kg,{handle:"handle"},w("Mb")),y.A(kg,{ir:"adornedLink"},w("jw")),kg.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;return a===q||a.Za||!a.wn?s:this.findToolHandleAt(a.uc.T,this.name)!==q},kg.prototype.doActivate=function(){var b,c,d,a=this.h;a!==q&&(this.Mb=this.findToolHandleAt(a.uc.T,this.name),this.Mb!==q)&&(b=this.Mb.W.aj,b instanceof U&&(this.jw=b,a.gd=h,this.kc(this.name),b.ov&&.5===this.Mb.hs&&(c=b.points.copy(),d=this.Mb.hb(Sb),c.wd(this.Mb.af+1,d),b.Jb&&c.wd(this.Mb.af+1,d),b.points=c,b.be(),b.updateAdornments(),this.Mb=this.findToolHandleAt(a.uc.T,this.name)),this.VA=b.o(this.Mb.af),this.px=b.points.copy(),this.la=h))},kg.prototype.doDeactivate=function(){this.wj(),this.jw=this.Mb=q;var a=this.h;a!==q&&(a.gd=s),this.la=s},kg.prototype.doCancel=function(){var a=this.ir;a!==q&&(a.points=this.px),this.stopTool()},kg.prototype.doMouseMove=function(){var a=this.h;this.la&&a!==q&&(a=this.computeReshape(a.Q.T),this.reshape(a))},kg.prototype.doMouseUp=function(){var b,c,d,e,f,g,i,a=this.h;this.la&&a!==q&&(b=this.computeReshape(a.Q.T),this.reshape(b),b=this.ir,b!==q&&b.ov&&(c=this.handle.af,d=b.o(c-1),e=b.o(c),f=b.o(c+1),b.Jb?c>b.zr+1&&c<b.cv-1&&(g=b.o(c-2),Math.abs(d.x-e.x)<this.ih&&Math.abs(d.y-e.y)<this.ih&&(wg(this,g,d,e,f,h)||wg(this,g,d,e,f,s))?(i=b.points.copy(),wg(this,g,d,e,f,h)?(i.Uf(c-2,new A(g.x,(f.y+g.y)/2)),i.Uf(c+1,new A(f.x,(f.y+g.y)/2))):(i.Uf(c-2,new A((f.x+g.x)/2,g.y)),i.Uf(c+1,new A((f.x+g.x)/2,f.y))),i.kd(c),i.kd(c-1),b.points=i,b.be(),b.updateAdornments()):(g=b.o(c+2),Math.abs(e.x-f.x)<this.ih&&Math.abs(e.y-f.y)<this.ih&&(wg(this,d,e,f,g,h)||wg(this,d,e,f,g,s))&&(i=b.points.copy(),wg(this,d,e,f,g,h)?(i.Uf(c-1,new A(d.x,(d.y+g.y)/2)),i.Uf(c+2,new A(g.x,(d.y+g.y)/2))):(i.Uf(c-1,new A((d.x+g.x)/2,d.y)),i.Uf(c+2,new A((d.x+g.x)/2,g.y))),i.kd(c+1),i.kd(c),b.points=i,b.be(),b.updateAdornments()))):(g=y.M(),H.Vr(d.x,d.y,f.x,f.y,e.x,e.y,g)&&9>g.xk(e)&&(i=b.points.copy(),i.kd(c),b.points=i,b.be(),b.updateAdornments()),y.B(g))),a.oc(),this.Fe=this.name,a.Fa("LinkReshaped",this.ir)),this.stopTool()},y.g(Pe,"resegmentingDistance",Pe.prototype.ih),y.defineProperty(Pe,{ih:"resegmentingDistance"},w("YA"),ba("YA")),kg.prototype.reshape=function(a){var c,d,e,f,g,b=this.ir;b.Mk(),c=this.handle.af,d=this.handle.vo,b.Jb?c===b.zr+1?(c=b.zr+1,d===tg?(b.R(c,b.o(c-1).x,a.y),b.R(c+1,b.o(c+2).x,a.y)):d===sg&&(b.R(c,a.x,b.o(c-1).y),b.R(c+1,a.x,b.o(c+2).y))):c===b.cv-1?(c=b.cv-1,d===tg?(b.R(c-1,b.o(c-2).x,a.y),b.R(c,b.o(c+1).x,a.y)):d===sg&&(b.R(c-1,a.x,b.o(c-2).y),b.R(c,a.x,b.o(c+1).y))):(d=c,e=b.o(d),f=b.o(d-1),g=b.o(d+1),H.I(f.x,e.x)&&H.I(e.y,g.y)?(H.I(f.x,b.o(d-2).x)&&!H.I(f.y,b.o(d-2).y)?(b.C(d,a.x,f.y),c++,d++):b.R(d-1,a.x,f.y),H.I(g.y,b.o(d+2).y)&&!H.I(g.x,b.o(d+2).x)?b.C(d+1,g.x,a.y):b.R(d+1,g.x,a.y)):H.I(f.y,e.y)&&H.I(e.x,g.x)?(H.I(f.y,b.o(d-2).y)&&!H.I(f.x,b.o(d-2).x)?(b.C(d,f.x,a.y),c++,d++):b.R(d-1,f.x,a.y),H.I(g.x,b.o(d+2).x)&&!H.I(g.y,b.o(d+2).y)?b.C(d+1,a.x,g.y):b.R(d+1,a.x,g.y)):H.I(f.x,e.x)&&H.I(e.x,g.x)?(H.I(f.x,b.o(d-2).x)&&!H.I(f.y,b.o(d-2).y)?(b.C(d,a.x,f.y),c++,d++):b.R(d-1,a.x,f.y),H.I(g.x,b.o(d+2).x)&&!H.I(g.y,b.o(d+2).y)?b.C(d+1,a.x,g.y):b.R(d+1,a.x,g.y)):H.I(f.y,e.y)&&H.I(e.y,g.y)&&(H.I(f.y,b.o(d-2).y)&&!H.I(f.x,b.o(d-2).x)?(b.C(d,f.x,a.y),c++,d++):b.R(d-1,f.x,a.y),H.I(g.y,b.o(d+2).y)&&!H.I(g.x,b.o(d+2).x)?b.C(d+1,g.x,a.y):b.R(d+1,g.x,a.y)),b.R(c,a.x,a.y)):(b.R(c,a.x,a.y),1===c&&Cb(b.computeSpot(h))&&(f=b.da,g=b.Nc,d=g.hb(Sb,y.M()),e=y.M(),f=b.getLinkPointFromPoint(f,g,d,a,h,e),b.R(0,f.x,f.y),y.B(d),y.B(e)),c===b.qa-2&&Cb(b.computeSpot(s))&&(c=b.ja,f=b.Ad,d=f.hb(Sb,y.M()),e=y.M(),f=b.getLinkPointFromPoint(c,f,d,a,s,e),b.R(b.qa-1,f.x,f.y),y.B(d),y.B(e))),b.Zh()},kg.prototype.computeReshape=function(a){var b=this.ir,c=this.handle.af;switch(this.handle.vo){case ug:return a;case tg:return b=b.o(c),new A(b.x,a.y);case sg:return b=b.o(c),new A(a.x,b.y);default:case lg:return b.o(c)}},y.g(kg,"originalPoint",kg.prototype.eH),y.A(kg,{eH:"originalPoint"},w("VA")),y.g(kg,"originalPoints",kg.prototype.fH),y.A(kg,{fH:"originalPoints"},w("px")),y.ba("ResizingTool",xg),y.Ka(xg,Pe),xg.prototype.updateAdornments=function(a){var b,c,d,e,f,g;a===q||a instanceof U||(b=q,a.Wa?(c=a.DD,a.canResize()&&c!==q&&a.ua.V()&&a.xb()&&c.Dk()&&c.ua.V()&&(b=a.Mn(this.name),b===q&&(b=this.makeAdornment(c),b.Ql=h,b.We=Sb),b!==q)&&(d=c.yk(),b.angle=d,e=c.hb(Sb,y.M()),f=c.rj(),b.location=e,y.B(e),e=b.placeholder,e!==q&&(c=c.Ta,g=y.Nk(),g.q(c.width*f,c.height*f),e.Aa=g,y.qj(g)),yg(this,b,d)),a.ok(this.name,b)):a.Ik(this.name))},xg.prototype.makeAdornment=function(a){var c,b=q;if(b=a.W.BD,b===q)b=new Ge,b.type=zg,c=new Ag,c.ji=h,b.add(c),b.add(this.makeHandle(a,Mb)),b.add(this.makeHandle(a,Rb)),b.add(this.makeHandle(a,Zb)),b.add(this.makeHandle(a,Vb)),b.add(this.makeHandle(a,$b)),b.add(this.makeHandle(a,bc)),b.add(this.makeHandle(a,cc)),b.add(this.makeHandle(a,ac));else if(Je(b),b=b.copy(),!(b instanceof Ge))return q;return b.Ac=this.name,b.zc=a,b},xg.prototype.makeHandle=function(a,b){var c=this.Cr;return c===q?q:(c=c.copy(),c.alignment=b,c)},y.defineProperty(xg,{Cr:"handleArchetype"},w("Wj"),function(a){a&&y.l(a,P,xg,"handleArchetype"),this.Wj=a}),y.A(xg,{handle:"handle"},w("Mb")),y.defineProperty(xg,{zc:"adornedObject"},w("La"),function(a){a&&y.l(a,P,xg,"adornedObject"),this.La=a}),xg.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;return a!==q&&!a.Za&&a.xn&&a.Q.left?this.findToolHandleAt(a.uc.T,this.name)!==q?h:s:s},xg.prototype.doActivate=function(){var a=this.h;a!==q&&(this.Mb=this.findToolHandleAt(a.uc.T,this.name),this.Mb!==q&&(this.La=this.Mb.W.zc,this.$m=this.La.angle,this.YE.set(this.La.Ta),this.ox.set(this.La.W.location),this.Mt.set(this.La.Aa),this.Gw=this.computeCellSize(),this.Iw=this.computeMinSize(),this.Hw=this.computeMaxSize(),a.gd=h,this.kc(this.name),this.la=h))},xg.prototype.doDeactivate=function(){var a=this.h;a!==q&&(this.wj(),this.La=this.Mb=q,this.la=a.gd=s)},xg.prototype.doCancel=function(){this.La.Aa=this.Mt,this.La.W.location=this.ox,this.stopTool()},xg.prototype.doMouseMove=function(){var b,c,d,e,f,a=this.h;this.la&&a!==q&&(b=this.Iw,c=this.Hw,d=this.Gw,e=this.La.sC(a.Q.T,y.M()),f=this.La.Su,f===Bg&&(f=this.La.Na.ec),b=this.computeResize(e,this.Mb.alignment,b,c,d,!(f===Cg||f===Dg||a.Q.shift)),this.resize(b),a.li(),y.B(e))},xg.prototype.doMouseUp=function(){var b,c,d,e,f,a=this.h;this.la&&a!==q&&(b=this.Iw,c=this.Hw,d=this.Gw,e=this.La.sC(a.Q.T,y.M()),f=this.La.Su,f===Bg&&(f=this.La.Na.ec),b=this.computeResize(e,this.Mb.alignment,b,c,d,!(f===Cg||f===Dg||a.Q.shift)),this.resize(b),y.B(e),a.oc(),this.Fe=this.name,a.Fa("PartResized",this.La,this.Mt)),this.stopTool()},xg.prototype.resize=function(a){var c,d,e,f,g,h,i,j,k,b=this.h;b!==q&&(c=this.La.W,d=c.position.copy(),e=this.La.Ta.copy(),f=this.La.yk(),g=this.La.rj(),f>=360?f-=360:0>f&&(f+=360),h=Math.PI*f/180,i=Math.cos(h),h=Math.sin(h),j=a.width-e.width,e=a.height-e.height,k=f>90&&270>f?1:0,d.x+=g*((a.x+j*k)*i-(a.y+e*(f>0&&180>f?1:0))*h),d.y+=g*((a.x+j*(f>180&&360>f?1:0))*h+(a.y+e*k)*i),this.La.Aa=a.size,c.ci(),c.move(d),b.jc())},xg.prototype.computeResize=function(a,b,c,d,e,f){var g,h,i,j,k,l,m;return Cb(b)&&(b=Sb),g=this.La.Ta,h=g.x,i=g.y,j=g.x+g.width,k=g.y+g.height,l=1,f||(l=g.width,m=g.height,0>=l&&(l=1),0>=m&&(m=1),l=m/l),m=y.M(),H.wy(a.x,a.y,h,i,e.width,e.height,m),a=g.copy(),0>=b.x?0>=b.y?(a.x=Math.max(m.x,j-d.width),a.x=Math.min(a.x,j-c.width),a.width=Math.max(j-a.x,c.width),a.y=Math.max(m.y,k-d.height),a.y=Math.min(a.y,k-c.height),a.height=Math.max(k-a.y,c.height),f||(b=a.height/a.width,b>l?(a.height=l*a.width,a.y=k-a.height):(a.width=a.height/l,a.x=j-a.width))):1<=b.y?(a.x=Math.max(m.x,j-d.width),a.x=Math.min(a.x,j-c.width),a.width=Math.max(j-a.x,c.width),a.height=Math.max(Math.min(m.y-i,d.height),c.height),f||(b=a.height/a.width,b>l?a.height=l*a.width:(a.width=a.height/l,a.x=j-a.width))):(a.x=Math.max(m.x,j-d.width),a.x=Math.min(a.x,j-c.width),a.width=j-a.x,f||(a.height=l*a.width,a.y=i+.5*(k-i-a.height))):1<=b.x?0>=b.y?(a.width=Math.max(Math.min(m.x-h,d.width),c.width),a.y=Math.max(m.y,k-d.height),a.y=Math.min(a.y,k-c.height),a.height=Math.max(k-a.y,c.height),f||(b=a.height/a.width,b>l?(a.height=l*a.width,a.y=k-a.height):a.width=a.height/l)):1<=b.y?(a.width=Math.max(Math.min(m.x-h,d.width),c.width),a.height=Math.max(Math.min(m.y-i,d.height),c.height),f||(b=a.height/a.width,b>l?a.height=l*a.width:a.width=a.height/l)):(a.width=Math.max(Math.min(m.x-h,d.width),c.width),f||(a.height=l*a.width,a.y=i+.5*(k-i-a.height))):0>=b.y?(a.y=Math.max(m.y,k-d.height),a.y=Math.min(a.y,k-c.height),a.height=k-a.y,f||(a.width=a.height/l,a.x=h+.5*(j-h-a.width))):1<=b.y&&(a.height=Math.max(Math.min(m.y-i,d.height),c.height),f||(a.width=a.height/l,a.x=h+.5*(j-h-a.width))),y.B(m),a},xg.prototype.computeMinSize=function(){var a=this.La.Ce.copy(),b=this.Ce;return!isNaN(b.width)&&b.width>a.width&&(a.width=b.width),!isNaN(b.height)&&b.height>a.height&&(a.height=b.height),a},xg.prototype.computeMaxSize=function(){var a=this.La.he.copy(),b=this.he;return!isNaN(b.width)&&b.width<a.width&&(a.width=b.width),!isNaN(b.height)&&b.height<a.height&&(a.height=b.height),a},xg.prototype.computeCellSize=function(){var c,a=new ha(0/0,0/0),b=this.La.W;return b&&(c=b.CD,!isNaN(c.width)&&0<c.width&&(a.width=c.width),!isNaN(c.height)&&0<c.height&&(a.height=c.height)),c=this.tk,isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width),isNaN(a.height)&&!isNaN(c.height)&&0<c.height&&(a.height=c.height),b=this.h,(isNaN(a.width)||isNaN(a.height))&&b&&(c=b.pb.ve,c!==q&&c.Zn&&(c=c.Ey,isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width),isNaN(a.height)&&!isNaN(c.height)&&0<c.height&&(a.height=c.height)),b=b.Wn,b!==q&&b.visible&&this.Zn&&(c=b.Br,isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width),isNaN(a.height)&&!isNaN(c.height)&&0<c.height&&(a.height=c.height))),(isNaN(a.width)||0===a.width||1/0===a.width)&&(a.width=1),(isNaN(a.height)||0===a.height||1/0===a.height)&&(a.height=1),a},y.g(xg,"minSize",xg.prototype.Ce),y.defineProperty(xg,{Ce:"minSize"},w("Hd"),function(a){this.Hd.L(a)||(x&&y.l(a,ha,xg,"minSize"),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),this.Hd.assign(a))}),y.g(xg,"maxSize",xg.prototype.he),y.defineProperty(xg,{he:"maxSize"},w("Ki"),function(a){this.Ki.L(a)||(x&&y.l(a,ha,xg,"maxSize"),isNaN(a.width)&&(a.width=1/0),isNaN(a.height)&&(a.height=1/0),this.Ki.assign(a))}),y.g(xg,"cellSize",xg.prototype.tk),y.defineProperty(xg,{tk:"cellSize"},w("qi"),function(a){this.qi.L(a)||(x&&y.l(a,ha,xg,"cellSize"),this.qi.assign(a))}),y.g(xg,"isGridSnapEnabled",xg.prototype.Zn),y.defineProperty(xg,{Zn:"isGridSnapEnabled"},w("cl"),function(a){this.cl!==a&&(y.j(a,"boolean",xg,"isGridSnapEnabled"),this.cl=a)}),y.g(xg,"originalDesiredSize",xg.prototype.cH),y.A(xg,{cH:"originalDesiredSize"},w("Mt")),y.g(xg,"originalLocation",xg.prototype.dH),y.A(xg,{dH:"originalLocation"},w("ox")),y.ba("RotatingTool",Eg),y.Ka(Eg,Pe),Eg.prototype.updateAdornments=function(a){var b,c,d,e,f,g;if(!(a===q||a instanceof U))if(b=q,a.Wa){if(c=a.JD,a.canRotate()&&c!==q&&a.ua.V()&&a.xb()&&c.Dk()&&c.ua.V()&&(b=a.Mn(this.name),b===q&&(b=this.makeAdornment(c),b.Ql=h),b!==q)){for(b.angle=c.yk(),d=q,e=q,c===a||c===a.Vb?(d=a.Vb,e=a.We):(d=c,e=Sb),f=d.Ta,e=y.dc(f.width*e.x+e.offsetX,f.height*e.y+e.offsetY);d!==q&&d!==c;)d.transform.Qa(e),d=d.ga;d=e.y,f=Math.max(e.x-c.Ta.width,0),b.We=Sb,g=y.M(),b.location=c.hb(new J(1,0,50+f,d),g),y.B(g),y.B(e)}a.ok(this.name,b)}else a.Ik(this.name)},Eg.prototype.makeAdornment=function(a){var c,b=q;if(b=a.W.HD,b===q)b=new Ge,b.type=Fg,c=this.Cr,c!==q&&b.add(c.copy());else if(Je(b),b=b.copy(),!(b instanceof Ge))return q;return b.Ac=this.name,b.zc=a,b},y.defineProperty(Eg,{Cr:"handleArchetype"},w("Wj"),function(a){a&&y.l(a,P,Eg,"handleArchetype"),this.Wj=a}),y.A(Eg,{handle:"handle"},w("Mb")),y.defineProperty(Eg,{zc:"adornedObject"},w("La"),function(a){a&&y.l(a,P,Eg,"adornedObject"),this.La=a}),Eg.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;return a!==q&&!a.Za&&a.yn&&a.Q.left?this.findToolHandleAt(a.uc.T,this.name)!==q?h:s:s},Eg.prototype.doActivate=function(){var b,c,a=this.h;a!==q&&(this.Mb=this.findToolHandleAt(a.uc.T,this.name),this.Mb!==q)&&(this.La=this.Mb.W.zc,b=this.La.W,c=b.Vb,this.ZA=this.La===b||this.La===c?c.hb(b.We):this.La.hb(Sb),this.$m=this.La.angle,a.gd=h,this.kc(this.name),this.la=h)},Eg.prototype.doDeactivate=function(){var a=this.h;a!==q&&(this.wj(),this.La=this.Mb=q,this.la=a.gd=s)},Eg.prototype.doCancel=function(){this.rotate(this.$m),this.stopTool()},Eg.prototype.doMouseMove=function(){var a=this.h;this.la&&a!==q&&(a=this.computeRotate(a.Q.T),this.rotate(a))},Eg.prototype.doMouseUp=function(){var b,a=this.h;this.la&&a!==q&&(b=this.computeRotate(a.Q.T),this.rotate(b),a.oc(),this.Fe=this.name,a.Fa("PartRotated",this.La,this.$m)),this.stopTool()},Eg.prototype.rotate=function(a){y.p(a,Eg,"rotate:newangle"),this.La!==q&&(this.La.angle=a,this.h.jc())},Eg.prototype.computeRotate=function(a){var b,c;return a=this.ZA.ai(a),b=this.La.ga,b&&(a-=b.yk(),a>=360?a-=360:0>a&&(a+=360)),b=Math.min(Math.abs(this.aE),180),c=Math.min(Math.abs(this.$D),b/2),!this.h.Q.shift&&b>0&&c>0&&(c>a%b?a=Math.floor(a/b)*b:a%b>b-c&&(a=(Math.floor(a/b)+1)*b)),a>=360?a-=360:0>a&&(a+=360),a},y.g(Eg,"snapAngleMultiple",Eg.prototype.aE),y.defineProperty(Eg,{aE:"snapAngleMultiple"},w("Dx"),function(a){this.Dx!==a&&(x&&y.j(a,"number",Eg,"snapAngleMultiple"),this.Dx=a)}),y.g(Eg,"snapAngleEpsilon",Eg.prototype.$D),y.defineProperty(Eg,{$D:"snapAngleEpsilon"},w("Cx"),function(a){this.Cx!==a&&(x&&y.j(a,"number",Eg,"snapAngleEpsilon"),this.Cx=a)}),y.g(Eg,"originalAngle",Eg.prototype.bH),y.A(Eg,{bH:"originalAngle"},w("$m")),y.ba("ClickSelectingTool",Gg),y.Ka(Gg,Pe),Gg.prototype.canStart=function(){return!this.isEnabled||this.h===q||this.isBeyondDragSize()?s:h},Gg.prototype.doMouseUp=function(){this.la&&(this.standardMouseSelect(),this.standardMouseClick()),this.stopTool()},y.ba("ActionTool",Hg),y.Ka(Hg,Pe),Hg.prototype.canStart=function(){var a,b,c;return this.isEnabled?(a=this.h,a===q?s:(b=a.Q,c=a.vd(b.T,function(a){for(;a.ga!==q&&!a.Xu;)a=a.ga;return a},function(a){return a.Xu}),c!==q?(this.im=c,a.Hn=a.vd(b.T,q,q),h):s)):s},Hg.prototype.doMouseDown=function(){if(this.la){var a=this.h.Q,b=this.im;b!==q&&(a.zd=b,b.Yx!==q&&b.Yx(a,b))}else this.canStart()&&this.doActivate()},Hg.prototype.doMouseMove=function(){if(this.la){var a=this.h.Q,b=this.im;b!==q&&(a.zd=b,b.Zx!==q&&b.Zx(a,b))}},Hg.prototype.doMouseUp=function(){if(this.la){var a=this.h,b=a.Q,c=this.im;if(c===q)return;b.zd=c,c.$x!==q&&c.$x(b,c),this.isBeyondDragSize()||Qe(c,b,a)}this.stopTool()},Hg.prototype.doCancel=function(){var b,a=this.h;if(a!==q){if(a=a.Q,b=this.im,b===q)return;a.zd=b,b.Xx!==q&&b.Xx(a,b)}this.stopTool()},Hg.prototype.doStop=function(){this.im=q},y.ba("ClickCreatingTool",ra),y.Ka(ra,Pe),ra.prototype.canStart=function(){if(!this.isEnabled||this.jr===q)return s;var a=this.h;if(a===q||a.Za||a.Be||!a.tl||!a.Q.left||this.isBeyondDragSize())return s;if(this.JC){if(1===a.Q.ce&&(this.uA=a.Q.Rc.copy()),2!==a.Q.ce||this.isBeyondDragSize(this.uA))return s}else if(1!==a.Q.ce)return s;return a.Ma!==this&&a.wr(a.Q.T,h)!==q?s:h},ra.prototype.doMouseUp=function(){var a=this.h;this.la&&a!==q&&this.insertPart(a.Q.T),this.stopTool()},ra.prototype.insertPart=function(a){var c,d,b=this.h;return b===q?q:(c=this.jr,c===q?q:(this.kc(this.name),d=q,c instanceof R?c.Pd()&&(Je(c),d=c.copy(),d instanceof R&&b.add(d)):c!==q&&(c=b.fa.jj(c),y.sb(c)&&(b.fa.fr(c),d=b.pj(c))),d instanceof R&&(d.location=a,b.pe&&b.select(d)),b.oc(),this.Fe=this.name,b.Fa("PartCreated",d),this.wj(),d instanceof R?d:q))},y.g(ra,"archetypeNodeData",ra.prototype.jr),y.defineProperty(ra,{jr:"archetypeNodeData"},w("Nj"),function(a){this.Nj!==a&&(a!==q&&y.l(a,Object,ra,"archetypeNodeData"),this.Nj=a)}),y.g(ra,"isDoubleClick",ra.prototype.JC),y.defineProperty(ra,{JC:"isDoubleClick"},w("Sw"),function(a){this.Sw!==a&&(y.j(a,"boolean",ra,"isDoubleClick"),this.Sw=a)}),y.ba("ContextMenuTool",Ig),y.Ka(Ig,Pe),Ig.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;return a===q||this.isBeyondDragSize()||!a.Q.right?s:(this.ym===q||a.Q.event instanceof MouseEvent)&&this.findObjectWithContextMenu()===q?s:h},Ig.prototype.doStart=function(){var a=this.h;a!==q&&this.MA.set(a.uc.T)},Ig.prototype.doStop=function(){this.hideDefaultContextMenu(),this.hideContextMenu()},Ig.prototype.findObjectWithContextMenu=function(a){var c,d,b=this.h;if(b===q)return q;if(c=b.Q,d=q,d=a!==f?a:b.vd(c.T,q,function(a){return!a.layer.bc}),d!==q){for(a=d;a!==q;){if(c=a.contextMenu,c!==q)return a;a=a.ga}if(this.ym!==q&&!(b.Q.event instanceof MouseEvent))return d.W}else if(c=b.contextMenu,c!==q)return b;return q},Ig.prototype.doActivate=aa(),Ig.prototype.doMouseDown=function(){var a,b;this.la&&(a=this.h,a!==q&&this.Re!==q&&(b=a.vd(a.Q.T,q,q),b!==q&&b.hi(this.Re)?(this.standardMouseClick(q,q),this.stopTool()):(this.stopTool(),a.Ma.doMouseDown())))},Ig.prototype.doMouseUp=function(){this.la||this.canStart()&&Oe(this,h)},Ig.prototype.doMouseMove=function(){this.la&&this.standardMouseOver()},Ig.prototype.showContextMenu=function(a,b){var c,d,e;y.l(a,Ge,Ig,"showContextMenu:contextmenu"),b!==q&&y.l(b,P,Ig,"showContextMenu:obj"),c=this.h,c!==q&&(a!==this.Re&&this.hideContextMenu(),a.ge="Tool",a.Jk=s,a.scale=1/c.scale,a.Ac=this.name,c.add(a),b!==q?(d=q,e=b.Rn(),e!==q&&(d=e.data),a.zc=b,a.data=d):a.data=c.fa,a.ci(),this.positionContextMenu(a,b),this.Re=a,c.jc())},Ig.prototype.positionContextMenu=function(a){var c,d,e,b=this.h;b!==q&&(c=b.Q.T.copy(),d=a.Ba,e=b.eb,b.Q.bv&&(c.x-=d.width),c.x+d.width>e.right&&(c.x-=d.width+5),c.x<e.x&&(c.x=e.x),c.y+d.height>e.bottom&&(c.y-=d.height+5),c.y<e.y&&(c.y=e.y),a.position=c)},Ig.prototype.hideContextMenu=function(){var a=this.h;a!==q&&this.Re!==q&&(this.Re.data=q,this.Re.zc=q,a.remove(this.Re),this.Re=q,this.standardMouseOver(),a.jc())},Ig.prototype.initializeDefaultButtons=function(){if(this.h===q)return q;var a=new F,b=this.h.Pe;return a.add({text:"Copy",of:function(){b.copySelection()},visible:function(){return b.canCopySelection()}}),a.add({text:"Cut",of:function(){b.cutSelection()},visible:function(){return b.canCutSelection()}}),a.add({text:"Delete",of:function(){b.deleteSelection()},visible:function(){return b.canDeleteSelection()}}),a.add({text:"Paste",of:function(a){b.pasteSelection(a.Q.T)},visible:function(){return b.canPasteSelection()}}),a.add({text:"Select All",of:function(){b.selectAll()},visible:function(){return b.canSelectAll()}}),a.add({text:"Undo",of:function(){b.undo()},visible:function(){return b.canUndo()}}),a.add({text:"Redo",of:function(){b.redo()},visible:function(){return b.canRedo()}}),a.add({text:"Zoom Out",of:function(){b.decreaseZoom()},visible:function(){return b.canDecreaseZoom()}}),a.add({text:"Zoom In",of:function(){b.increaseZoom()},visible:function(){return b.canIncreaseZoom()}}),a.add({text:"Zoom To Fit",of:function(){b.zoomToFit()},visible:function(){return b.canZoomToFit()}}),a.add({text:"Reset Zoom",of:function(){b.resetZoom()},visible:function(){return b.canResetZoom()}}),a.add({text:"Group Selection",of:function(){b.groupSelection()},visible:function(){return b.canGroupSelection()}}),a.add({text:"Ungroup Selection",of:function(){b.ungroupSelection()},visible:function(){return b.canUngroupSelection()}}),a.add({text:"Edit Text",of:function(){b.editTextBlock()},visible:function(){return b.canEditTextBlock()}}),a},Ig.prototype.showDefaultContextMenu=function(){var b,c,d,e,f,g,h,a=this.h;if(a!==q){for(this.xw===q&&(this.xw=this.initializeDefaultButtons()),this.ym!==this.Re&&this.hideContextMenu(),y.pr.innerHTML="",y.or.addEventListener("click",this.nB,s),b=this,c=document.createElement("ul"),c.className="defaultCXul",y.pr.appendChild(c),c.innerHTML="",d=this.xw.k;d.next();)e=d.value,f=e.text,g=e.visible,("function"!=typeof g||g())&&(g=document.createElement("li"),g.className="defaultCXli",h=document.createElement("a"),h.className="defaultCXa",h.href="#",h.TE=e.of,h.addEventListener("click",function(c){return this.TE(a),b.stopTool(),c.preventDefault(),s},s),h.textContent=f,g.appendChild(h),c.appendChild(g));y.pr.style.display="block",y.or.style.display="block",this.Re=this.ym}},Ig.prototype.hideDefaultContextMenu=function(){this.Re!==q&&this.Re===this.ym&&(y.pr.style.display="none",y.or.style.display="none",y.or.removeEventListener("click",this.nB,s),this.Re=q)},y.g(Ig,"currentContextMenu",Ig.prototype.Re),y.defineProperty(Ig,{Re:"currentContextMenu"},w("gA"),ba("gA")),y.A(Ig,{gJ:"mouseDownPoint"},w("MA")),y.ba("DragSelectingTool",Og),y.Ka(Og,Pe),Og.prototype.canStart=function(){var a,b;return this.isEnabled?(a=this.h,a!==q&&a.pe?(b=a.Q,!b.left||a.Ma!==this&&(!this.isBeyondDragSize()||b.timestamp-a.uc.timestamp<this.Hu||a.wr(b.T,h)!==q)?s:h):s):s},Og.prototype.doActivate=function(){var a=this.h;a!==q&&(this.la=h,a.gd=h,a.Wb=h,a.add(this.Hf),this.doMouseMove())},Og.prototype.doDeactivate=function(){var a=this.h;a!==q&&(a.remove(this.Hf),a.Wb=s,this.la=a.gd=s,a.jc())},Og.prototype.doMouseMove=function(){var b,c,a=this.h;a!==q&&this.la&&this.Hf!==q&&(b=this.computeBoxBounds(),c=this.Hf.xe("SHAPE"),c===q&&(c=this.Hf.qG()),c.Aa=b.size,this.Hf.position=b.position,a.jc())},Og.prototype.doMouseUp=function(){if(this.la){var a=this.h;a.remove(this.Hf);try{a.Mc="wait",this.selectInRect(this.computeBoxBounds())}finally{a.Mc=""}}this.stopTool()},Og.prototype.computeBoxBounds=function(){var a=this.h;return a===q?new B(0,0,0,0):new B(a.uc.T,a.Q.T)},Og.prototype.selectInRect=function(a){var c,d,e,b=this.h;if(b!==q){if(c=b.Q,b.Fa("ChangingSelection"),a=b.oj(a,q,function(a){return a instanceof R&&a.canSelect()},this.OC),c.control)if(c.shift)for(a=a.k;a.next();)c=a.value,c.Wa&&(c.Wa=s);else for(a=a.k;a.next();)c=a.value,c.Wa=!c.Wa;else{if(!c.shift){for(d=new F(R),e=b.selection.k;e.next();)c=e.value,a.contains(c)||d.add(c);for(d=d.k;d.next();)c=d.value,c.Wa=s}for(a=a.k;a.next();)c=a.value,c.Wa||(c.Wa=h)}b.Fa("ChangedSelection")}},y.g(Og,"delay",Og.prototype.Hu),y.defineProperty(Og,{Hu:"delay"},w("zm"),ba("zm")),y.g(Og,"isPartialInclusion",Og.prototype.OC),y.defineProperty(Og,{OC:"isPartialInclusion"},w("DA"),ba("DA")),y.g(Og,"box",Og.prototype.Hf),y.defineProperty(Og,{Hf:"box"},w("mm"),ba("mm")),y.ba("PanningTool",Qg),y.Ka(Qg,Pe),Qg.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;return a===q||!a.Ne&&!a.Oe||!a.Q.left||a.Ma!==this&&!this.isBeyondDragSize()?s:h},Qg.prototype.doActivate=function(){var a=this.h;a!==q&&(this.pi?(a.Q.bubbles=h,document.addEventListener("scroll",this.dB,s)):(a.Mc="move",a.gd=h,this.qx=a.position.copy()),this.la=h)},Qg.prototype.doDeactivate=function(){var a=this.h;a!==q&&(a.Mc="",this.la=a.gd=s,a.ta())},Qg.prototype.doCancel=function(){var a=this.h;a!==q&&(a.position=this.qx,a.gd=s),this.stopTool()},Qg.prototype.doMouseMove=function(){this.move()},Qg.prototype.doMouseUp=function(){this.move(),this.stopTool()},Qg.prototype.move=function(){var b,c,d,e,a=this.h;this.la&&a&&(this.pi?a.Q.bubbles=h:(b=a.position,c=a.uc.T,d=a.Q.T,e=b.x+c.x-d.x,c=b.y+c.y-d.y,a.Ne||(e=b.x),a.Oe||(c=b.y),a.position=new A(e,c)))},y.g(Qg,"bubbles",Qg.prototype.bubbles),y.defineProperty(Qg,{bubbles:"bubbles"},w("pi"),ba("pi")),y.g(Qg,"originalPosition",Qg.prototype.gH),y.A(Qg,{gH:"originalPosition"},w("qx")),y.ba("TextEditingTool",Rg),y.Ka(Rg,Pe),Rg.LostFocus=Ug=y.w(Rg,"LostFocus",0),Rg.MouseDown=Vg=y.w(Rg,"MouseDown",1),Rg.Tab=Wg=y.w(Rg,"Tab",2),Rg.Enter=Xg=y.w(Rg,"Enter",3),Rg.SingleClick=y.w(Rg,"SingleClick",0),Rg.SingleClickSelected=Sg=y.w(Rg,"SingleClickSelected",1),Tg=y.w(Rg,"StateNone",0),Yg=y.w(Rg,"StateActive",1),Zg=y.w(Rg,"StateEditing",2),$g=y.w(Rg,"StateEditing2",3),ah=y.w(Rg,"StateValidating",4),bh=y.w(Rg,"StateValidated",5),y.g(Rg,"textBlock",Rg.prototype.Yf),y.defineProperty(Rg,{Yf:"textBlock"},w("Sx"),ba("Sx")),y.g(Rg,"currentTextEditor",Rg.prototype.og),y.defineProperty(Rg,{og:"currentTextEditor"},w("iA"),ba("iA")),y.g(Rg,"defaultTextEditor",Rg.prototype.ZB),y.defineProperty(Rg,{ZB:"defaultTextEditor"},w("yw"),ba("yw")),y.g(Rg,"starting",Rg.prototype.bE),y.defineProperty(Rg,{bE:"starting"},w("Gx"),function(a){this.Gx!==a&&(x&&y.rb(a,Rg,Rg,"starting"),this.Gx=a)
}),Rg.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;return a===q||a.Za||!a.Q.left||this.isBeyondDragSize()?s:(a=a.vd(a.Q.T,q,function(a){return a instanceof oa}),a instanceof oa&&a.Ju?(a=a.W,a===q||this.bE===Sg&&!a.Wa?s:h):s)},Rg.prototype.doStart=function(){!this.la&&this.Yf!==q&&this.doActivate()},Rg.prototype.doActivate=function(){var a,b,c,d,e,g,i,j,k,l;this.la||(a=this.h,a!==q&&(b=this.Yf,b===q&&(b=a.vd(a.Q.T,function(a){return a instanceof oa?a:q}),b=b instanceof oa?b:q),b!==q&&(this.Yf=b,b.W!==q)&&(this.la=h,this.Ya=Yg,this.kc(this.name),c=this.ZB,d=s,b.Bz!==q&&(c=b.Bz),c!==q&&!c.Xz&&(d=h),this.kB=this.Yf.copy(),c===q&&(c=document.createElement("textarea"),c.Xz=h,this.yw=c,c.addEventListener("input",function(){var a=this.textEditingTool.kB;a.text=this.value,ch(a,1/0,1/0),this.style.width=20+a.Ba.width*this.CH+"px",this.rows=a.TC},s),c.addEventListener("keydown",function(a){var b=a.which,c=this.textEditingTool;if(c!==q)if(13===b)c.acceptText(Xg);else{if(9===b)return c.acceptText(Wg),a.preventDefault(),s;27===b&&(c.doCancel(),c.h&&c.h.focus())}},s),c.addEventListener("focus",function(){var a=this.textEditingTool;a.Ya===Yg?a.Ya=Zg:a.Ya===bh?a.Ya=$g:a.Ya===$g&&(a.Ya=Zg)},s)),c.Xz?(e=b.hb(Sb),g=a.position,i=a.scale,j=b.rj()*i,k=b.Ta.width*j,dh(b),l=(e.x-g.x)*i,e=(e.y-g.y)*i,c.value=b.text,a.bi.style.font=b.font,c.style.font="inherit",c.style.fontSize=100*j+"%",c.style.lineHeight="normal",k=20+k,c.style.width=k+"px",c.style.height="",c.rows=b.TC,a.bi.appendChild(c),c.style.left=(0|l-k/2)+"px",c.style.top=(0|e-c.clientHeight/2)+"px",c.style.textAlign=b.textAlign):a.bi.appendChild(c),c.style.position="absolute",c.style.zIndex=100,c.className="start",c.textEditingTool=this,c.CH=j,d&&c.onActivate!==f&&c.onActivate(),this.og=c,c.focus())))},Rg.prototype.doCancel=function(){this.hk!==q&&(this.og.style.border=this.hk,this.hk=q),this.stopTool()},Rg.prototype.doMouseUp=function(){!this.la&&this.canStart()&&this.doActivate()},Rg.prototype.doMouseDown=function(){this.la&&this.acceptText(Vg)},Rg.prototype.acceptText=function(a){switch(a){case Vg:this.Ya===bh||this.Ya===$g?this.og.focus():(this.Ya===Yg||this.Ya===Zg)&&(this.Ya=ah,eh(this));break;case Ug:case Xg:case Wg:if(Xg===a&&this.Sx.av===h)break;(this.Ya===Yg||this.Ya===Zg)&&(this.Ya=ah,eh(this))}},Rg.prototype.doDeactivate=function(){var b,a=this.h;a!==q&&(this.la&&this.wj(),this.Ya=Tg,this.Yf=q,this.og!==q&&(b=this.og,b.onDeactivate!==f&&b.onDeactivate(),b!==q&&a.bi.removeChild(b)),this.la=s)},Rg.prototype.isValidText=function(a,b,c){y.l(a,oa,Rg,"isValidText:textblock");var d=this.ss;return d===q||d(a,b,c)?(d=a.ss,d===q||d(a,b,c)?h:s):s},y.g(Rg,"textValidation",Rg.prototype.ss),y.defineProperty(Rg,{ss:"textValidation"},w("Vi"),function(a){this.Vi!==a&&(this.Vi=a)}),y.ba("ToolManager",Ee),y.Ka(Ee,Pe),Ee.WheelScroll=$e=y.w(Ee,"WheelScroll",0),Ee.WheelZoom=Re=y.w(Ee,"WheelZoom",1),Ee.WheelNone=y.w(Ee,"WheelNone",2),y.g(Ee,"mouseWheelBehavior",Ee.prototype.Ul),y.defineProperty(Ee,{Ul:"mouseWheelBehavior"},w("QA"),ba("QA")),Ee.prototype.initializeStandardTools=function(){this.uB=new Hg,this.tD=new hg,this.WC=new kg,this.FD=new xg,this.LD=new Eg,this.Sy=new qa,this.ve=new af,this.fC=new Og,this.oD=new Qg,this.Du=new Ig,this.Cv=new Rg,this.LB=new ra,this.MB=new Gg},Ee.prototype.doMouseDown=function(){var b,c,d,a=this.h;if(a!==q){for(b=a.va,b.my&&0!==b.Pk&&y.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero"),b=this.Ze.length,c=0;b>c;c++)if(d=this.Ze.sa(c),d.h===q&&d.ie(this.h),d.canStart())return a.Ma=d,a.Ma===d&&(d.la||d.doActivate(),d.doMouseDown()),void 0;1===a.Q.button&&(this.Ul===$e?this.Ul=Re:this.Ul===Re&&(this.Ul=$e)),this.doActivate(),this.standardWaitAfter(this.Fy)}},Ee.prototype.doMouseMove=function(){var b,c,d,a=this.h;if(a!==q){if(this.la)for(b=this.sg.length,c=0;b>c;c++)if(d=this.sg.sa(c),d.h===q&&d.ie(this.h),d.canStart())return a.Ma=d,a.Ma===d&&(d.la||d.doActivate(),d.doMouseMove()),void 0;this.standardMouseOver(),this.isBeyondDragSize()&&this.standardWaitAfter(this.la?this.Fy:this.BC)}},Ee.prototype.doCurrentObjectChanged=function(a,b){var c=this.vk;c!==q&&!(b!==q&&(b===c||b.hi(c)))&&this.hideToolTip()},Ee.prototype.doWaitAfter=function(){this.h&&this.h.Da&&(this.doMouseHover(),this.la||this.doToolTip())},Ee.prototype.doMouseHover=function(){var b,c,a=this.h;if(a!==q)if(b=a.Q,b.zd===q&&(b.zd=a.vd(b.T,q,q)),c=b.zd,c!==q)for(;c!==q&&(a=this.la?c.Rr:c.Sr,a===q||(a(b,c),!b.ee));)c=c.ga;else a=this.la?a.Rr:a.Sr,a!==q&&a(b)},Ee.prototype.doToolTip=function(){var b,a=this.h;if(a!==q)if(b=a.Q,b.zd===q&&(b.zd=a.vd(b.T,q,q)),b=b.zd,b!==q){if(b!==this.vk&&!b.hi(this.vk)){for(;b!==q;){if(a=b.ts,a!==q)return this.showToolTip(a,b),void 0;b=b.ga}this.hideToolTip()}}else a=a.ts,a!==q?this.showToolTip(a,q):this.hideToolTip()},Ee.prototype.showToolTip=function(a,b){var c,d,e;y.l(a,Ge,Ee,"showToolTip:tooltip"),b!==q&&y.l(b,P,Ee,"showToolTip:obj"),c=this.h,c!==q&&(a!==this.vk&&this.hideToolTip(),a.ge="Tool",a.Jk=s,a.scale=1/c.scale,c.add(a),b!==q&&b!==this.Rs?(d=q,e=b.Rn(),e!==q&&(d=e.data),a.zc=b,a.data=d):b===q&&(a.data=c.fa),(b===q||b!==this.Rs)&&(a.ci(),this.positionToolTip(a,b)),this.vw=a,this.Rs=b,c.jc())},Ee.prototype.positionToolTip=function(a){var c,d,e,b=this.h;b!==q&&(c=b.Q.T.copy(),d=a.Ba,e=b.eb,b.Q.bv&&(c.x-=d.width),c.x+d.width>e.right&&(c.x-=d.width+5),c.x<e.x&&(c.x=e.x),c.y=c.y+20+d.height>e.bottom?c.y-(d.height+5):c.y+20,c.y<e.y&&(c.y=e.y),a.position=c)},Ee.prototype.hideToolTip=function(){if(this.vk!==q){var a=this.h;a!==q&&(this.vk.data=q,this.vk.zc=q,a.remove(this.vk),this.Rs=this.vw=q,a.jc())}},y.A(Ee,{vk:"currentToolTip"},w("vw")),Ee.prototype.doMouseUp=function(){var a,b,c,d;if(this.cancelWaitAfter(),this.la){if(a=this.h,a===q)return;for(b=this.tg.length,c=0;b>c;c++)if(d=this.tg.sa(c),d.h===q&&d.ie(this.h),d.canStart())return a.Ma=d,a.Ma===d&&(d.la||d.doActivate(),d.doMouseUp()),void 0}this.doDeactivate()},Ee.prototype.doMouseWheel=function(){this.standardMouseWheel()},Ee.prototype.doKeyDown=function(){var a=this.h;a!==q&&a.Pe.doKeyDown()},Ee.prototype.doKeyUp=function(){var a=this.h;a!==q&&a.Pe.doKeyUp()},Ee.prototype.doCancel=function(){df!==q&&df.doCancel(),Pe.prototype.doCancel.call(this)},Ee.prototype.findTool=function(a){var b,c,d;for(y.j(a,"string",Ee,"findTool:name"),b=this.Ze.length,c=0;b>c;c++)if(d=this.Ze.sa(c),d.name===a)return d;for(b=this.sg.length,c=0;b>c;c++)if(d=this.sg.sa(c),d.name===a)return d;for(b=this.tg.length,c=0;b>c;c++)if(d=this.tg.sa(c),d.name===a)return d;return q},Ee.prototype.replaceTool=function(a,b){var c,d,e;for(y.j(a,"string",Ee,"replaceTool:name"),b!==q&&(y.l(b,Pe,Ee,"replaceTool:newtool"),b.h&&b.h!==this.h&&y.m("Cannot share tools between Diagrams: "+b.toString()),b.ie(this.h)),c=this.Ze.length,d=0;c>d;d++)if(e=this.Ze.sa(d),e.name===a)return b!==q?this.Ze.Uf(d,b):this.Ze.kd(d),e;for(c=this.sg.length,d=0;c>d;d++)if(e=this.sg.sa(d),e.name===a)return b!==q?this.sg.Uf(d,b):this.sg.kd(d),e;for(c=this.tg.length,d=0;c>d;d++)if(e=this.tg.sa(d),e.name===a)return b!==q?this.tg.Uf(d,b):this.tg.kd(d),e;return q},y.A(Ee,{Ze:"mouseDownTools"},w("NA")),y.A(Ee,{sg:"mouseMoveTools"},w("OA")),y.A(Ee,{tg:"mouseUpTools"},w("PA")),y.g(Ee,"hoverDelay",Ee.prototype.BC),y.defineProperty(Ee,{BC:"hoverDelay"},w("xA"),ba("xA")),y.g(Ee,"holdDelay",Ee.prototype.Fy),y.defineProperty(Ee,{Fy:"holdDelay"},w("wA"),ba("wA")),y.g(Ee,"dragSize",Ee.prototype.gC),y.defineProperty(Ee,{gC:"dragSize"},w("nA"),ba("nA")),y.g(Ee,"actionTool",Ee.prototype.uB),y.defineProperty(Ee,{uB:"actionTool"},function(){return this.findTool("Action")},function(a){fh(this,"Action",a,this.Ze)}),y.g(Ee,"relinkingTool",Ee.prototype.tD),y.defineProperty(Ee,{tD:"relinkingTool"},function(){return this.findTool("Relinking")},function(a){fh(this,"Relinking",a,this.Ze)}),y.g(Ee,"linkReshapingTool",Ee.prototype.WC),y.defineProperty(Ee,{WC:"linkReshapingTool"},function(){return this.findTool("LinkReshaping")},function(a){fh(this,"LinkReshaping",a,this.Ze)}),y.g(Ee,"resizingTool",Ee.prototype.FD),y.defineProperty(Ee,{FD:"resizingTool"},function(){return this.findTool("Resizing")},function(a){fh(this,"Resizing",a,this.Ze)}),y.g(Ee,"rotatingTool",Ee.prototype.LD),y.defineProperty(Ee,{LD:"rotatingTool"},function(){return this.findTool("Rotating")},function(a){fh(this,"Rotating",a,this.Ze)}),y.g(Ee,"linkingTool",Ee.prototype.Sy),y.defineProperty(Ee,{Sy:"linkingTool"},function(){return this.findTool("Linking")},function(a){fh(this,"Linking",a,this.sg)}),y.g(Ee,"draggingTool",Ee.prototype.ve),y.defineProperty(Ee,{ve:"draggingTool"},function(){return this.findTool("Dragging")},function(a){fh(this,"Dragging",a,this.sg)}),y.g(Ee,"dragSelectingTool",Ee.prototype.fC),y.defineProperty(Ee,{fC:"dragSelectingTool"},function(){return this.findTool("DragSelecting")},function(a){fh(this,"DragSelecting",a,this.sg)}),y.g(Ee,"panningTool",Ee.prototype.oD),y.defineProperty(Ee,{oD:"panningTool"},function(){return this.findTool("Panning")},function(a){fh(this,"Panning",a,this.sg)}),y.g(Ee,"contextMenuTool",Ee.prototype.Du),y.defineProperty(Ee,{Du:"contextMenuTool"},function(){return this.findTool("ContextMenu")},function(a){fh(this,"ContextMenu",a,this.tg)}),y.g(Ee,"textEditingTool",Ee.prototype.Cv),y.defineProperty(Ee,{Cv:"textEditingTool"},function(){return this.findTool("TextEditing")},function(a){fh(this,"TextEditing",a,this.tg)}),y.g(Ee,"clickCreatingTool",Ee.prototype.LB),y.defineProperty(Ee,{LB:"clickCreatingTool"},function(){return this.findTool("ClickCreating")},function(a){fh(this,"ClickCreating",a,this.tg)}),y.g(Ee,"clickSelectingTool",Ee.prototype.MB),y.defineProperty(Ee,{MB:"clickSelectingTool"},function(){return this.findTool("ClickSelecting")},function(a){fh(this,"ClickSelecting",a,this.tg)}),y.ba("Layer",pe),pe.prototype.ie=ba("ca"),pe.prototype.toString=function(a){var b,c,d,e,g,h,i,j;if(a===f&&(a=0),b='Layer "'+this.name+'"',0>=a)return b;for(c=0,d=0,e=0,g=0,h=0,i=this.lb.k;i.next();)j=i.value,j instanceof He?e++:j instanceof T?d++:j instanceof U?g++:j instanceof Ge?h++:c++;if(i="",c>0&&(i+=c+" Parts "),d>0&&(i+=d+" Nodes "),e>0&&(i+=e+" Groups "),g>0&&(i+=g+" Links "),h>0&&(i+=h+" Adornments "),a>1)for(c=this.lb.k;c.next();)d=c.value,i+="\n    "+d.toString(a-1),(e=d.data)&&y.ac(e)&&(i+=" #"+y.ac(e)),d instanceof T?i+=" "+vd(e):d instanceof U&&(i+=" "+vd(d.da)+" "+vd(d.ja));return b+" "+this.lb.count+": "+i},pe.prototype.findObjectAt=pe.prototype.vd=function(a,b,c){var d,e,g,i,j;if(b===f&&(b=q),c===f&&(c=q),this.ik===s)return q;for(d=this.lb,e=s,this.h.eb.Ea(a)&&(e=h),g=y.M(),i=d.length;i--;)if(j=d.sa(i),(e!==h||gh(j)!==s)&&j.xb()&&(g.assign(a),Ta(g,j.oe),j=j.vd(g,b,c),j!==q&&(b!==q&&(j=b(j)),j&&(c===q||c(j)))))return y.B(g),j;return y.B(g),q},pe.prototype.findObjectsAt=pe.prototype.On=function(a,b,c,d){var e,g,i,j,k;if(b===f&&(b=q),c===f&&(c=q),!(d instanceof F||d instanceof na||!(d=new na(P))),this.ik===s)return d;for(e=this.lb,g=s,this.h.eb.Ea(a)&&(g=h),i=y.M(),j=e.length;j--;)k=e.sa(j),!(g===h&&gh(k)===s)&&k.xb()&&(i.assign(a),Ta(i,k.oe),k.On(i,b,c,d)&&(b!==q&&(k=b(k)),k&&(c===q||c(k))&&d.add(k)));return y.B(i),d},pe.prototype.findObjectsIn=pe.prototype.oj=function(a,b,c,d,e){var g,i,j,k;if(b===f&&(b=q),c===f&&(c=q),d===f&&(d=s),!(e instanceof F||e instanceof na||!(e=new na(P))),this.ik===s)return e;for(g=this.lb,i=s,this.h.eb.ij(a)&&(i=h),j=g.length,g=g.n;j--;)k=g[j],!(i===h&&gh(k)===s)&&k.xb()&&k.oj(a,b,c,d,e)&&(b!==q&&(k=b(k)),k&&(c===q||c(k))&&e.add(k));return e},pe.prototype.xy=function(a,b,c,d,e,f,g){var i,j,k;if(this.ik===s)return e;for(i=this.lb,j=i.length,i=i.n;j--;)k=i[j],!(g===h&&gh(k)===s)&&f(k)&&k.xb()&&k.oj(a,b,c,d,e)&&(b!==q&&(k=b(k)),k&&(c===q||c(k))&&e.add(k));return e},pe.prototype.findObjectsNear=pe.prototype.Pn=function(a,b,c,d,e,g){var i,j,k,l,m,n;if(c===f&&(c=q),d===f&&(d=q),e===f&&(e=h),e!==s&&e!==h&&((e instanceof F||e instanceof na)&&(g=e),e=h),!(g instanceof F||g instanceof na||!(g=new na(P))),this.ik===s)return g;for(i=this.lb,j=s,this.h.eb.Ea(a)&&(j=h),k=y.M(),l=y.M(),m=i.length;m--;)n=i.n[m],!(j===h&&gh(n)===s)&&n.xb()&&(k.assign(a),Ta(k,n.oe),l.q(a.x+b,a.y),Ta(l,n.oe),n.Pn(k,l,c,d,e,g)&&(c!==q&&(n=c(n)),n&&(d===q||d(n))&&g.add(n)));return y.B(k),y.B(l),g},da=pe.prototype,da.uf=function(a,b){var d,c,e,f,g,i;if(this.visible&&a.$j)for(c=this.lb,d=b?b:a.eb,e=c.length,f=0;e>f;f++)if(g=c.n[f],g.XE=f,!(g instanceof U&&g.Yg===s||g instanceof Ge&&g.aj!==q))if(cb(g.ua,d))for(g.uf(h),hh(g),g=g.qu;g.next();)i=g.value,ch(i,1/0,1/0),i.tc(),i.uf(h);else g.uf(s),g.qu!==q&&0<g.qu.count&&hh(g)},da.we=function(a,b,c,d){var e,g,i,j,k;if(this.visible&&(d===f&&(d=h),d||!this.bc)){for(1!==this.mf&&(a.globalAlpha=this.mf),c=this.lb,d=this.Nt,d.length=0,e=b.scale,g=c.length,i=0;g>i;i++)if(j=c.n[i],gh(j)){if(j instanceof U&&(j.Jb&&d.push(j),j.Yg===s))continue;k=j.ua,1<k.width*e||1<k.height*e?j.we(a,b):ih(j,a)}a.globalAlpha=1}},da.i=function(a,b,c,d,e){var f=this.h;f!==q&&f.Qc(sd,a,this,b,c,d,e)},da.Ol=function(a,b,c){var d=this.lb;if(b.Rm=this,a>=d.count)a=d.count;else if(d.sa(a)===b)return-1;return d.wd(a,b),b.Er(),d=this.h,d!==q&&(c?d.ta():d.Ol(b)),b instanceof He&&this.zv(b),a},da.ze=function(a,b,c){var d=this.lb;if(0>a||a>=d.length){if(a=d.indexOf(b),0>a)return-1}else if(d.sa(a)!==b&&(a=d.indexOf(b),0>a))return-1;return b.Fr(),d.kd(a),d=this.h,d!==q&&(c?d.ta():d.ze(b)),b.Rm=q,a},da.zv=function(a){for(var b,c,d,e,f,g,h;a!==q;){if(a.layer===this&&(b=a,b.Dc.next())){for(c=-1,d=-1,e=this.lb.n,f=e.length,g=0;f>g&&(h=e[g],!(h===b&&(c=g,d>=0)))&&!(0>d&&h.bb===b&&(d=g,c>=0));g++);!(0>d)&&c>d&&(e=this.lb,e.kd(c),e.wd(d,b))}a=a.bb}},da.clear=function(){for(var a=this.lb.Ee(),b=a.length,c=0;b>c;c++)a[c].uf(s),this.ze(-1,a[c])},y.A(pe,{as:"parts"},function(){return this.lb.k}),y.A(pe,{lJ:"partsBackwards"},function(){return this.lb.Rl}),y.A(pe,{h:"diagram"},w("ca")),y.g(pe,"name",pe.prototype.name),y.defineProperty(pe,{name:"name"},w("Gb"),function(a){var b,c;if(y.j(a,"string",pe,"name"),b=this.Gb,b!==a){if(c=this.h,c!==q)for(""===b&&y.m("Cannot rename default Layer to: "+a),c=c.dv;c.next();)c.value.name===a&&y.m("Layer.name is already present in this diagram: "+a);for(this.Gb=a,this.i("name",b,a),a=this.lb.k;a.next();)a.value.ge=this.Gb}}),y.g(pe,"opacity",pe.prototype.opacity),y.defineProperty(pe,{opacity:"opacity"},w("mf"),function(a){var b=this.mf;b!==a&&(y.j(a,"number",pe,"opacity"),(0>a||a>1)&&y.ka(a,"0 <= val <= 1",pe,"opacity"),this.mf=a,this.i("opacity",b,a),a=this.h,a!==q&&a.ta())}),y.g(pe,"isTemporary",pe.prototype.bc),y.defineProperty(pe,{bc:"isTemporary"},w("Yw"),function(a){var b=this.Yw;b!==a&&(y.j(a,"boolean",pe,"isTemporary"),this.Yw=a,this.i("isTemporary",b,a))}),y.g(pe,"visible",pe.prototype.visible),y.defineProperty(pe,{visible:"visible"},w("Wx"),function(a){var c,b=this.Wx;if(b!==a){for(y.j(a,"boolean",pe,"visible"),this.Wx=a,this.i("visible",b,a),b=this.lb.k;b.next();)c=b.value,a?c.updateAdornments():c.be();a=this.h,a!==q&&a.ta()}}),y.g(pe,"pickable",pe.prototype.$e),y.defineProperty(pe,{$e:"pickable"},w("ik"),function(a){var b=this.ik;b!==a&&(y.j(a,"boolean",pe,"pickable"),this.ik=a,this.i("pickable",b,a))}),y.g(pe,"allowCopy",pe.prototype.cj),y.defineProperty(pe,{cj:"allowCopy"},w("Bj"),function(a){var b=this.Bj;b!==a&&(y.j(a,"boolean",pe,"allowCopy"),this.Bj=a,this.i("allowCopy",b,a))}),y.g(pe,"allowDelete",pe.prototype.rk),y.defineProperty(pe,{rk:"allowDelete"},w("Cj"),function(a){var b=this.Cj;b!==a&&(y.j(a,"boolean",pe,"allowDelete"),this.Cj=a,this.i("allowDelete",b,a))}),y.g(pe,"allowTextEdit",pe.prototype.zn),y.defineProperty(pe,{zn:"allowTextEdit"},w("Lj"),function(a){var b=this.Lj;b!==a&&(y.j(a,"boolean",pe,"allowTextEdit"),this.Lj=a,this.i("allowTextEdit",b,a))}),y.g(pe,"allowGroup",pe.prototype.vn),y.defineProperty(pe,{vn:"allowGroup"},w("Dj"),function(a){var b=this.Dj;b!==a&&(y.j(a,"boolean",pe,"allowGroup"),this.Dj=a,this.i("allowGroup",b,a))}),y.g(pe,"allowUngroup",pe.prototype.An),y.defineProperty(pe,{An:"allowUngroup"},w("Mj"),function(a){var b=this.Mj;b!==a&&(y.j(a,"boolean",pe,"allowUngroup"),this.Mj=a,this.i("allowUngroup",b,a))}),y.g(pe,"allowLink",pe.prototype.ul),y.defineProperty(pe,{ul:"allowLink"},w("Ej"),function(a){var b=this.Ej;b!==a&&(y.j(a,"boolean",pe,"allowLink"),this.Ej=a,this.i("allowLink",b,a))}),y.g(pe,"allowRelink",pe.prototype.dj),y.defineProperty(pe,{dj:"allowRelink"},w("Gj"),function(a){var b=this.Gj;b!==a&&(y.j(a,"boolean",pe,"allowRelink"),this.Gj=a,this.i("allowRelink",b,a))}),y.g(pe,"allowMove",pe.prototype.sk),y.defineProperty(pe,{sk:"allowMove"},w("Fj"),function(a){var b=this.Fj;b!==a&&(y.j(a,"boolean",pe,"allowMove"),this.Fj=a,this.i("allowMove",b,a))}),y.g(pe,"allowReshape",pe.prototype.wn),y.defineProperty(pe,{wn:"allowReshape"},w("Hj"),function(a){var b=this.Hj;b!==a&&(y.j(a,"boolean",pe,"allowReshape"),this.Hj=a,this.i("allowReshape",b,a))}),y.g(pe,"allowResize",pe.prototype.xn),y.defineProperty(pe,{xn:"allowResize"},w("Ij"),function(a){var b=this.Ij;b!==a&&(y.j(a,"boolean",pe,"allowResize"),this.Ij=a,this.i("allowResize",b,a))}),y.g(pe,"allowRotate",pe.prototype.yn),y.defineProperty(pe,{yn:"allowRotate"},w("Jj"),function(a){var b=this.Jj;b!==a&&(y.j(a,"boolean",pe,"allowRotate"),this.Jj=a,this.i("allowRotate",b,a))}),y.g(pe,"allowSelect",pe.prototype.pe),y.defineProperty(pe,{pe:"allowSelect"},w("Kj"),function(a){var b=this.Kj;b!==a&&(y.j(a,"boolean",pe,"allowSelect"),this.Kj=a,this.i("allowSelect",b,a))}),y.ba("Diagram",E),E.prototype.toString=function(a){var b,c;if(a===f&&(a=0),b="",this.id&&(b=this.id),this.bi&&this.bi.id&&(b=this.bi.id),b='Diagram "'+b+'"',0>=a)return b;for(c=this.zb.k;c.next();)b+="\n  "+c.value.toString(a-1);return b},E.prototype.checkProperties=E.prototype.VH=function(){return y.JF(this)},E.fromDiv=function(a){var b=a;return"string"==typeof a&&(b=document.getElementById(a)),b instanceof HTMLDivElement&&b.ca instanceof E?b.ca:q},y.g(E,"div",E.prototype.bi),y.defineProperty(E,{bi:"div"},w("qb"),function(a){var b,c,d,e;if(a!==q&&y.l(a,HTMLDivElement,E,"div"),this.qb!==a){if(b=this.qb,b!==q){if(delete b.ca,b.innerHTML="",this.Da!==q&&(this.Da.ca=q,this.Da.removeEventListener("touchstart",this.lE,s),this.Da.removeEventListener("touchmove",this.kE,s),this.Da.removeEventListener("touchend",this.jE,s)),b=this.hu,b!==q){for(c=b.NA.n,d=c.length,e=0;d>e;e++)c[e].cancelWaitAfter();for(c=b.OA.n,d=c.length,e=0;d>e;e++)c[e].cancelWaitAfter();for(c=b.PA.n,d=c.length,e=0;d>e;e++)c[e].cancelWaitAfter()}b.cancelWaitAfter(),this.si=this.Da=q,window.removeEventListener("resize",this.Uy,s),window.removeEventListener("mousemove",this.mo,h),window.removeEventListener("mousedown",this.lo,h),window.removeEventListener("mouseup",this.oo,h),window.removeEventListener("mousewheel",this.ug,h),window.removeEventListener("DOMMouseScroll",this.ug,h),window.removeEventListener("mouseout",this.no,h)}this.qb=q,a!==q&&((b=a.ca)&&(b.bi=q),th(this,a),this.kz())}}),sh.prototype.Qk=function(a){return a.PE(),0<this.vi&&this!==this.bF?h:s},sh.prototype.t=sh.prototype.wJ=function(){this.bF=q},E.prototype.focus=E.prototype.focus=function(){this.Da&&this.Da.focus()},E.prototype.SA=function(){var a,b,c,d,e,f,g,i,j,k,l,m,n,o,p,r;this.ca.isEnabled?(a=this.ca,a.xx&&(b=a.Da,b!==q&&(a.St=h,c=a.fd,d=a.eb,e=c.width,f=d.width,g=c.height,i=d.height,j=c.right,k=d.right,l=c.bottom,m=d.bottom,n=c.x,o=d.x,c=c.y,d=d.y,p=a.scale,e>f||g>i?(r=y.M(),this.$A&&a.Ne?(r.q(this.scrollLeft/p+n,a.position.y),a.position=r):this.aB&&a.Oe&&(r.q(a.position.x,this.scrollTop/p+c),a.position=r),y.B(r),a.St=s,a.Di=s):(r=y.M(),this.$A&&a.Ne&&(o>n&&(a.position=new A(this.scrollLeft+n,a.position.y)),j>k&&(a.position=new A(-(a.Qi.scrollWidth-b.width)+this.scrollLeft-b.width/p+a.fd.right,a.position.y))),this.aB&&a.Oe&&(d>c&&(a.position=new A(a.position.x,this.scrollTop+c)),l>m&&(a.position=new A(a.position.x,-(a.Ri.scrollHeight-b.height)+this.scrollTop-b.height/p+a.fd.bottom))),y.B(r),Kh(a),a.St=s,a.Di=s,c=a.fd,d=a.eb,j=c.right,k=d.right,l=c.bottom,m=d.bottom,n=c.x,o=d.x,c=c.y,d=d.y,f>=e&&n>=o&&k>=j&&(a.yx.style.width="1px"),i>=g&&c>=d&&m>=l&&(a.zx.style.height="1px"))))):Lh(this.ca)},E.prototype.TA=function(){this.ca.isEnabled?this.ca.xx=h:Lh(this.ca)},E.prototype.computeBounds=E.prototype.Qe=function(){return 0<this.xf.count&&Mh(this),Nh(this)},E.prototype.computePartsBounds=function(a){var c,b=q;for(a=a.k;a.next();)c=a.value,c instanceof U||(c.ci(),b===q?b=c.ua.copy():b.zj(c.ua));return b===q?new B(0/0,0/0,0,0):b},E.prototype.zoomToFit=E.prototype.zoomToFit=function(){this.scale=Ph(this,Sh)},E.prototype.zoomToRect=E.prototype.AJ=function(a,b){var c,d,e,g;b===f&&(b=Sh),c=a.width,d=a.height,0===c||0===d||isNaN(c)&&isNaN(d)||(e=1,(b===Sh||b===Th)&&(isNaN(c)?e=this.eb.height*this.scale/d:isNaN(d)?e=this.eb.width*this.scale/c:(e=this.Da.width,g=this.Da.height,e=b===Th?g/d>e/c?(g-(this.$k?this.Le:0))/d:(e-(this.al?this.Le:0))/c:Math.min(g/d,e/c))),this.scale=e,this.position=new A(a.x,a.y))},E.prototype.alignDocument=E.prototype.SH=function(a,b){this.Ci&&Rh(this,this.Qe());var c=this.fd,d=this.eb,e=this.Yb;this.Yb=h,this.position=new A(c.x+(a.x*c.width+a.offsetX)-(b.x*d.width-b.offsetX),c.y+(a.y*c.height+a.offsetY)-(b.y*d.height-b.offsetY)),this.Yb=e,this.ta()},E.prototype.findPartAt=E.prototype.wr=function(a,b){var c=b?Ef(this,a,function(a){return a.W},function(a){return a.canSelect()}):this.vd(a,function(a){return a.W});return c instanceof R?c:q},E.prototype.findObjectAt=E.prototype.vd=function(a,b,c){var d,e;for(b===f&&(b=q),c===f&&(c=q),d=this.zb.Rl,Mh(this);d.next();)if(e=d.value,e.visible&&(e=e.vd(a,b,c),e!==q))return e;return q},E.prototype.findObjectsAt=E.prototype.On=function(a,b,c,d){var e,g;for(b===f&&(b=q),c===f&&(c=q),!(d instanceof F||d instanceof na||!(d=new na(P))),Mh(this),e=this.zb.Rl;e.next();)g=e.value,g.visible&&g.On(a,b,c,d);return d},E.prototype.findObjectsIn=E.prototype.oj=function(a,b,c,d,e){var g,h;for(b===f&&(b=q),c===f&&(c=q),d===f&&(d=s),!(e instanceof F||e instanceof na||!(e=new na(P))),Mh(this),g=this.zb.Rl;g.next();)h=g.value,h.visible&&h.oj(a,b,c,d,e);return e},E.prototype.xy=function(a,b,c,d,e,f){var h,i,g=new na(P);for(Mh(this),h=this.zb.Rl;h.next();)i=h.value,i.visible&&i.xy(a,b,c,d,g,e,f);return g},E.prototype.findObjectsNear=E.prototype.Pn=function(a,b,c,d,e,g){var i,j;for(c===f&&(c=q),d===f&&(d=q),e===f&&(e=h),e!==s&&e!==h&&((e instanceof F||e instanceof na)&&(g=e),e=h),!(g instanceof F||g instanceof na||!(g=new na(P))),Mh(this),i=this.zb.Rl;i.next();)j=i.value,j.visible&&j.Pn(a,b,c,d,e,g);return g},E.prototype.RG=function(a){if(this.ca.isEnabled){var b=this.ca.Zb;switch(Dh(this.ca,a,b,s),b.key=String.fromCharCode(a.which),b.mj=h,a.which){case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del";break;case 48:b.key="0";break;case 187:b.key="Add";break;case 189:b.key="Subtract";break;case 107:b.key="Add";break;case 109:b.key="Subtract";break;case 27:b.key="Esc"}return this.ca.Ma.doKeyDown(),187!==a.which&&189!==a.which&&48!==a.which&&107!==a.which&&109!==a.which||a.ctrlKey!==h?Fh(this.ca,b,a):(a.cancelBubble=h,a.preventDefault!==f?a.preventDefault():a.returnValue=s,Event.stop&&(y.m("Event.stop can fire for this browser"),Event.stop(a)),a.stopPropagation!==f&&a.stopPropagation(),s)}},E.prototype.SG=function(a){if(this.ca.isEnabled){var b=this.ca.Zb;switch(Dh(this.ca,a,b,s),b.key=String.fromCharCode(a.which),b.ni=h,a.which){case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del"}return this.ca.Ma.doKeyUp(),Fh(this.ca,b,a)}},E.prototype.Ig=function(a){if(this.kw){var b=this.Da,c=0,d=0;if(b.offsetParent!==f)do c+=b.offsetLeft+b.clientLeft,d+=b.offsetTop+b.clientTop;while(b=b.offsetParent);return c+=this.gB+this.eB+this.ft,d+=this.hB+this.fB+this.gt,b=a.pageX-c,a=a.pageY-d,this.Xc!==q?(a=new A(b,a),Ta(a,this.Xc)):a=new A(b,a),a}return b=this.Da,b===q?new A(0,0):(c=b.getBoundingClientRect(),d=a.clientX-c.left*(b.width/c.width),a=a.clientY-c.top*(b.height/c.height),this.Xc!==q?(a=new A(d,a),Ta(a,this.Xc),a):new A(d,a))},y.g(E,"alternateCoordinates",E.prototype.tF),y.defineProperty(E,{tF:q},w("kw"),function(a){y.j(a,"boolean",E,"alternateCoordinates"),this.kw=a}),y.g(E,"renderingHints",E.prototype.yD),y.defineProperty(E,{yD:"renderingHints"},w("XA"),function(a){this.XA=a,this.kz()}),E.prototype.invalidateDocumentBounds=E.prototype.oc=function(){this.Ci=h,this.jc()},E.prototype.redraw=E.prototype.kz=function(){!this.Yb&&!this.od&&(this.ta(),Vh(this),Kh(this),this.oc(),this.li())},E.prototype.isUpdateRequested=E.prototype.VI=w("Ef"),E.prototype.delayInitialization=E.prototype.$H=function(a){Wh(this),this.fg=s,a&&setTimeout(a,1)},E.prototype.requestUpdate=E.prototype.jc=function(a){if(a===f&&(a=s),this.Ef!==h&&!(this.Yb||a===s&&this.od)){this.Ef=h;var b=this;requestAnimationFrame(function(){b.Ef&&b.li()})}},E.prototype.maybeUpdate=E.prototype.li=function(){(!this.mp||this.Ef)&&(this.mp&&(this.mp=s),Wh(this))},E.prototype.uf=function(a,b,c,d){for(var e=0;b>e;e++)a[e].uf(c,d)},E.prototype.we=function(a,b){var c,d,e,g,i,j,k,l,m,n,o;if(this.qb===q&&y.m("No div specified"),c=this.Da,c===q&&y.m("No canvas specified"),a||(a=this.si),d=a!==this.si,e=this.zb.n,g=e.length,i=this,this.uf(e,g,i),d)Hh(this,a),Kh(this);else if(!this.me&&b===f)return;if(g=this.nb,j=this.Qb,k=Math.round(g.x*j)/j,l=Math.round(g.y*j)/j,m=this.Xc,m.reset(),1!==j&&m.scale(j),(0!==g.x||0!==g.y)&&m.translate(-k,-l),n=this.ui,j=n!==q&&0<n.length&&this.wx===h){for(l=this.Uw,a.save(),a.beginPath(),g=n.length,k=0;g>k;k++)o=n[k],0===o[2]&&0===o[3]||(o=di(this,o),a.rect(Math.floor(o[0])-1,Math.floor(o[1])-1,Math.ceil(o[2])+2,Math.ceil(o[3])+2),l&&a.clearRect(Math.floor(o[0])-1,Math.floor(o[1])-1,Math.ceil(o[2])+2,Math.ceil(o[3])+2));a.clip()}for(this.Km?(c.width=c.width,j=s,Hh(this,a)):(a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,c.width,c.height)),a.miterLimit=9,a.setTransform(m.m11,m.m12,m.m21,m.m22,m.dx,m.dy),x&&x.ky&&x.kG(this,a),c=b?function(c){var e,f,g,h,j,k,d=a;if(c.visible){for(d.globalAlpha=c.mf,e=c.lb,c=c.Nt,c.length=0,f=i.scale,g=e.length,h=0;g>h;h++)if(j=e.n[h],gh(j)&&!b.contains(j)){if(j instanceof U&&(j.Jb&&c.push(j),j.Yg===s))continue;k=j.ua,1<k.width*f||1<k.height*f?j.we(d,i):ih(j,d)}d.globalAlpha=1}}:j?function(b){jh(b,a,i,n)}:function(b){b.we(a,i)},ei(this,a),g=e.length,k=0;g>k;k++)c(e[k]);this.ui=[],this.Xj?this.Xj.Qk(this)&&this.iw():this.Ig=aa(),j&&(a.restore(),Hh(this,a),x&&x.qI&&x.pI(n,a,this)),d?(Hh(this),Kh(this)):this.me=this.$j=s},E.prototype.ta=function(a,b){if(this.wx&&a!==f&&this.ui!==q){var c=this.eb;(a&&c.qf(a)||b&&c.qf(b))&&(this.ui!==q&&(a&&a.V()&&hi(this,a.x-2,a.y-2,a.width+4,a.height+4),b&&b.V()&&hi(this,b.x-2,b.y-2,b.width+4,b.height+4)),this.me=h,this.jc())}else this.ui=q,this.me=h,this.jc();for(c=this.an.k;c.next();)c.value.ta(a,b)},y.g(E,"viewportOptimizations",E.prototype.JH),y.defineProperty(E,{JH:q},w("Vx"),function(a){y.j(a,"boolean",E,"viewportOptimizations"),this.ui=q,this.Vx=a}),y.g(E,"addsToTemporaryLayer",E.prototype.hr),y.defineProperty(E,{hr:q},w("Yz"),function(a){y.j(a,"boolean",E,"addsToTemporaryLayer"),this.Yz=a}),E.prototype.add=E.prototype.add=function(a){var b,c;y.l(a,R,E,"add:part"),b=a.h,b!==this&&(b!==q&&y.m("Cannot add part "+a.toString()+" to "+this.toString()+". It is already a part of "+b.toString()),c=this.hr?"Tool":a.ge,b=this.ur(c),b===q&&(b=this.ur("")),b===q&&y.m('Cannot add a Part when unable find a Layer named "'+c+'" and there is no default Layer'),a.layer!==b&&(c=a.h===this?b.Ol(99999999,a,h):b.Ol(99999999,a),c>=0&&this.Qc(td,"parts",b,q,a,q,c),b.bc||this.oc(),a.J(ui),c=a.bo,c!==q&&c(a,q,b)))},E.prototype.Ol=function(a){var b,c;a instanceof T?(this.Ht.add(a),a instanceof He&&(b=a.bb,b===q?this.mk.add(a):b.Ym.add(a),b=a.Nb,b!==q&&(b.h=this))):a instanceof U?this.qt.add(a):a instanceof Ge||this.lb.add(a),a.mb&&a.aa(),(b=a.data)&&(a instanceof Ge||(a instanceof U?this.Sj.add(b,a):this.xh.add(b,a)),c=this,vi(a,function(a){wi(c,a)})),(bi(a)===h||ci(a)===h)&&this.xf.add(a),xi(a,h,this),a.xb()&&(a.ua.V()&&this.ta(kh(a,a.ua)),this.oc())},E.prototype.ze=function(a){var b,c;a.be(),a instanceof T?(this.Ht.remove(a),a instanceof He&&(b=a.bb,b===q?this.mk.remove(a):b.Ym.remove(a),b=a.Nb,b!==q&&(b.h=q))):a instanceof U?this.qt.remove(a):a instanceof Ge||this.lb.remove(a),(b=a.data)&&(a instanceof Ge||(a instanceof U?this.Sj.remove(b):this.xh.remove(b)),c=this,vi(a,function(a){yi(c,a)})),this.xf.remove(a),a.xb()&&(a.ua.V()&&this.ta(kh(a,a.ua)),this.oc())},E.prototype.remove=E.prototype.remove=function(a){var b,c;y.l(a,R,E,"remove:part"),a.Wa=s,b=a.layer,b!==q&&b.h===this&&(a.J(zi),a.El(),c=b.ze(-1,a),c>=0&&this.Qc(ud,"parts",b,a,q,c,q),c=a.bo,c!==q&&c(a,b,q),b.bc||this.oc())},E.prototype.removeParts=E.prototype.mz=function(a,b){var c,d;for(c=a.k;c.next();)d=c.value,d.h===this&&(!b||d.canDelete())&&this.remove(d)},E.prototype.copyParts=E.prototype.copyParts=function(a,b,c){return this.Pe.copyParts(a,b,c)},E.prototype.moveParts=E.prototype.moveParts=function(a,b,c){var e,f,d=this.pb;if(d!==q&&(d=d.ve,d!==q)){for(e=new ma(R,Object),a=a.k;a.next();)f=a.value,f instanceof U?e.add(f,gf()):e.add(f,gf(f.location));d.moveParts(e,b,c)}},E.prototype.addLayer=E.prototype.er=function(a){y.l(a,pe,E,"addLayer:layer"),ti(this,a.name),a.ie(this);var b=this.zb,c=b.count-1;if(!a.bc)for(;c>=0&&b.sa(c).bc;)c--;b.wd(c+1,a),this.Jd!==q&&this.Qc(td,"layers",this,q,a,q,c+1),this.oc()},E.prototype.addLayerBefore=E.prototype.jF=function(a,b){y.l(a,pe,E,"addLayer:layer"),y.l(b,pe,E,"addLayerBefore:existingLayer"),ti(this,a.name),a.ie(this);for(var c=s,d=this.zb.count,e=0;d>e;e++)if(this.zb.sa(e)===b){this.zb.wd(e,a),c=h;break}c||y.m("addLayerBefore: Existing layer "+b.toString()+" not found."),this.Jd!==q&&this.Qc(td,"layers",this,q,a,q,e),this.oc()},E.prototype.addLayerAfter=E.prototype.PH=function(a,b){y.l(a,pe,E,"addLayer:layer"),y.l(b,pe,E,"addLayerAfter:existingLayer"),ti(this,a.name),a.ie(this);for(var c=s,d=this.zb.count,e=0;d>e;e++)if(this.zb.sa(e)===b){this.zb.wd(e+1,a),c=h;break}c||y.m("addLayerAfter: Existing layer "+b.toString()+" not found."),this.Jd!==q&&this.Qc(td,"layers",this,q,a,q,e+1),this.oc()},E.prototype.removeLayer=E.prototype.vD=function(a){var b,c,d,e;if(""!==a.name&&(b=this.zb.indexOf(a),this.zb.remove(a))){for(c=a.lb.copy().k;c.next();)d=c.value,e=d.ge,d.ge="",e!==a.name&&(d.ge=e);this.Jd!==q&&this.Qc(ud,"layers",this,a,q,b,q),this.oc()}},E.prototype.findLayer=E.prototype.ur=function(a){var b,c;for(b=this.dv;b.next();)if(c=b.value,c.name===a)return c;return q},E.prototype.addChangedListener=E.prototype.ay=function(a){y.j(a,"function",E,"addChangedListener:listener"),this.ri===q&&(this.ri=new F("function")),this.ri.add(a)},E.prototype.removeChangedListener=E.prototype.lz=function(a){y.j(a,"function",E,"removeChangedListener:listener"),this.ri!==q&&(this.ri.remove(a),0===this.ri.count&&(this.ri=q))},E.prototype.xu=function(a){var b,c,d,e;if(this.Wb||this.va.xC(a),a.Yc!==nd&&(this.Pl=h),this.ri!==q)if(b=this.ri,c=b.length,1===c)b=b.sa(0),b(a);else if(0!==c)for(d=b.Ee(),e=0;c>e;e++)b=d[e],b(a)},E.prototype.raiseChangedEvent=E.prototype.Qc=function(a,b,c,d,e,g,h){g===f&&(g=q),h===f&&(h=q);var i=new md;i.h=this,i.Yc=a,i.propertyName=b,i.object=c,i.oldValue=d,i.tf=g,i.newValue=e,i.rf=h,this.xu(i)},E.prototype.raiseChanged=E.prototype.i=function(a,b,c,d,e){this.Qc(sd,a,this,b,c,d,e)},y.A(E,{va:"undoManager"},function(){return this.Jd.va}),y.g(E,"skipsUndoManager",E.prototype.Wb),y.defineProperty(E,{Wb:"skipsUndoManager"},w("Ph"),function(a){y.j(a,"boolean",E,"skipsUndoManager"),this.Ph=a,this.Jd.Ph=a}),E.prototype.changeState=function(a,b){var c,d,e,f;a!==q&&a.h===this&&(c=a.Yc,c===sd?(c=a.object,d=a.propertyName,e=a.wa(b),y.Oa(c,d,e),c instanceof P&&(c=c.W,c!==q&&c.be())):c===td?(e=a.object,d=a.rf,c=a.newValue,e instanceof D?"number"==typeof d&&c instanceof P&&(f=e,b?f.ze(d):f.wd(d,c),c=e.W,c!==q&&c.be()):e instanceof pe?(f=a.tf===h,"number"==typeof d&&c instanceof R&&(b?(c.be(),f?e.ze(d,c,f):this.remove(c)):e.Ol(d,c,f))):e instanceof E?"number"==typeof d&&c instanceof pe&&(b?this.vD(c):Ai(this,c,d)):y.m("unknown ChangedEvent.Insert object: "+a.toString())):c===ud?(e=a.object,d=a.tf,c=a.oldValue,e instanceof D?"number"==typeof d&&c instanceof P&&(f=e,b?f.wd(d,c):f.ze(d)):e instanceof pe?(f=a.rf===h,"number"==typeof d&&c instanceof R&&(b?e.Ol(d,c,f):(c.be(),f?e.ze(d,c,f):this.remove(c)))):e instanceof E?"number"==typeof d&&c instanceof pe&&(b?Ai(this,c,d):this.vD(c)):y.m("unknown ChangedEvent.Remove object: "+a.toString())):c!==nd&&y.m("unknown ChangedEvent: "+a.toString()))
},E.prototype.startTransaction=E.prototype.kc=function(a){return this.va.kc(a)},E.prototype.commitTransaction=E.prototype.se=function(a){return this.va.se(a)},E.prototype.rollbackTransaction=E.prototype.es=function(){return this.va.es()},E.prototype.updateAllTargetBindings=E.prototype.yJ=function(){for(var a=this.as;a.next();)a.value.yb();for(a=this.uj;a.next();)a.value.yb();for(a=this.links;a.next();)a.value.yb()},E.prototype.Zr=function(a,b,c){Vh(this),Kh(this);var d=this.Nb;d!==q&&d.Lr&&!c&&(a.width!==b.width||a.height!==b.height||isNaN(a.x)&&!isNaN(b.x)||isNaN(a.y&&!isNaN(b.y)))&&d.J(),this.Yb||Oh(this),Xh(this),d=this.Ma,this.Lm===h&&d instanceof Ee&&(this.Q.T=this.pE(this.Q.Rc),d.doMouseMove()),ii(this,a,b),this.Fa("ViewportBoundsChanged",c?{}:q,a)},E.prototype.clearSelection=E.prototype.ny=function(){var a=0<this.selection.count;a&&this.Fa("ChangingSelection"),Ke(this),a&&this.Fa("ChangedSelection")},E.prototype.select=E.prototype.select=function(a){a!==q&&a.layer.h===this&&(!a.Wa||1<this.selection.count)&&(this.Fa("ChangingSelection"),Ke(this),a.Wa=h,this.Fa("ChangedSelection"))},E.prototype.selectCollection=E.prototype.PD=function(a){for(this.Fa("ChangingSelection"),Ke(this),a=a.k;a.next();)a.value.Wa=h;this.Fa("ChangedSelection")},E.prototype.scroll=function(a,b,c){c===f&&(c=1);var e,d="up"===b||"down"===b;"pixel"===a?e=c:"line"===a?e=c*(d?this.gs:this.fs):"page"===a?(a=d?this.eb.height:this.eb.width,a*=this.scale,0!==a&&(e=Math.max(a-(d?this.gs:this.fs),0),e*=c)):y.m("scrolling unit must be 'pixel', 'line', or 'page', not: "+a),e/=this.scale,c=this.position.copy(),"up"===b?c.y=this.position.y-e:"down"===b?c.y=this.position.y+e:"left"===b?c.x=this.position.x-e:"right"===b?c.x=this.position.x+e:y.m("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+b),this.position=c},E.prototype.scrollToRect=E.prototype.tJ=function(a){var b=this.eb;b.ij(a)||(a=a.ly,a.x-=b.width/2,a.y-=b.height/2,this.position=a)},E.prototype.centerRect=E.prototype.UH=function(a){var b=this.eb;a=a.ly,a.x-=b.width/2,a.y-=b.height/2,this.position=a},E.prototype.transformDocToView=E.prototype.Do=function(a){var c,b=this.Xc;return b.reset(),1!==this.Qb&&b.scale(this.Qb),c=this.nb,(0!==c.x||0!==c.y)&&isFinite(c.x)&&isFinite(c.y)&&b.translate(-c.x,-c.y),a.copy().transform(this.Xc)},E.prototype.transformViewToDoc=E.prototype.pE=function(a){var c,b=this.Xc;return b.reset(),1!==this.Qb&&b.scale(this.Qb),c=this.nb,(0!==c.x||0!==c.y)&&isFinite(c.x)&&isFinite(c.y)&&b.translate(-c.x,-c.y),Ta(a.copy(),this.Xc)},E.None=Le=y.w(E,"None",0),E.Uniform=Sh=y.w(E,"Uniform",1),E.UniformToFill=Th=y.w(E,"UniformToFill",2),E.CycleAll=Nf=y.w(E,"CycleAll",10),E.CycleNotDirected=$f=y.w(E,"CycleNotDirected",11),E.CycleNotDirectedFast=bg=y.w(E,"CycleNotDirectedFast",12),E.CycleNotUndirected=cg=y.w(E,"CycleNotUndirected",13),E.CycleDestinationTree=Of=y.w(E,"CycleDestinationTree",14),E.CycleSourceTree=Qf=y.w(E,"CycleSourceTree",15),y.g(E,"validCycle",E.prototype.wE),y.defineProperty(E,{wE:"validCycle"},w("ku"),function(a){var b=this.ku;b!==a&&(y.rb(a,E,E,"validCycle"),this.ku=a,this.i("validCycle",b,a))}),y.A(E,{dv:"layers"},function(){return this.zb.k}),y.g(E,"isModelReadOnly",E.prototype.Be),y.defineProperty(E,{Be:"isModelReadOnly"},function(){var a=this.Jd;return a===q?s:a.Za},function(a){var b=this.Jd;b!==q&&(b.Za=a)}),y.g(E,"isReadOnly",E.prototype.Za),y.defineProperty(E,{Za:"isReadOnly"},w("ak"),function(a){var b=this.ak;b!==a&&(y.j(a,"boolean",E,"isReadOnly"),this.ak=a,this.i("isReadOnly",b,a))}),y.g(E,"isEnabled",E.prototype.isEnabled),y.defineProperty(E,{isEnabled:"isEnabled"},w("Dh"),function(a){var b=this.Dh;b!==a&&(y.j(a,"boolean",E,"isEnabled"),this.Dh=a,this.i("isEnabled",b,a))}),y.g(E,"allowClipboard",E.prototype.ru),y.defineProperty(E,{ru:"allowClipboard"},w("xs"),function(a){var b=this.xs;b!==a&&(y.j(a,"boolean",E,"allowClipboard"),this.xs=a,this.i("allowClipboard",b,a))}),y.g(E,"allowCopy",E.prototype.cj),y.defineProperty(E,{cj:"allowCopy"},w("Bj"),function(a){var b=this.Bj;b!==a&&(y.j(a,"boolean",E,"allowCopy"),this.Bj=a,this.i("allowCopy",b,a))}),y.g(E,"allowDelete",E.prototype.rk),y.defineProperty(E,{rk:"allowDelete"},w("Cj"),function(a){var b=this.Cj;b!==a&&(y.j(a,"boolean",E,"allowDelete"),this.Cj=a,this.i("allowDelete",b,a))}),y.g(E,"allowDragOut",E.prototype.su),y.defineProperty(E,{su:"allowDragOut"},w("ys"),function(a){var b=this.ys;b!==a&&(y.j(a,"boolean",E,"allowDragOut"),this.ys=a,this.i("allowDragOut",b,a))}),y.g(E,"allowDrop",E.prototype.ey),y.defineProperty(E,{ey:"allowDrop"},w("zs"),function(a){var b=this.zs;b!==a&&(y.j(a,"boolean",E,"allowDrop"),this.zs=a,this.i("allowDrop",b,a))}),y.g(E,"allowTextEdit",E.prototype.zn),y.defineProperty(E,{zn:"allowTextEdit"},w("Lj"),function(a){var b=this.Lj;b!==a&&(y.j(a,"boolean",E,"allowTextEdit"),this.Lj=a,this.i("allowTextEdit",b,a))}),y.g(E,"allowGroup",E.prototype.vn),y.defineProperty(E,{vn:"allowGroup"},w("Dj"),function(a){var b=this.Dj;b!==a&&(y.j(a,"boolean",E,"allowGroup"),this.Dj=a,this.i("allowGroup",b,a))}),y.g(E,"allowUngroup",E.prototype.An),y.defineProperty(E,{An:"allowUngroup"},w("Mj"),function(a){var b=this.Mj;b!==a&&(y.j(a,"boolean",E,"allowUngroup"),this.Mj=a,this.i("allowUngroup",b,a))}),y.g(E,"allowInsert",E.prototype.tl),y.defineProperty(E,{tl:"allowInsert"},w("Bs"),function(a){var b=this.Bs;b!==a&&(y.j(a,"boolean",E,"allowInsert"),this.Bs=a,this.i("allowInsert",b,a))}),y.g(E,"allowLink",E.prototype.ul),y.defineProperty(E,{ul:"allowLink"},w("Ej"),function(a){var b=this.Ej;b!==a&&(y.j(a,"boolean",E,"allowLink"),this.Ej=a,this.i("allowLink",b,a))}),y.g(E,"allowRelink",E.prototype.dj),y.defineProperty(E,{dj:"allowRelink"},w("Gj"),function(a){var b=this.Gj;b!==a&&(y.j(a,"boolean",E,"allowRelink"),this.Gj=a,this.i("allowRelink",b,a))}),y.g(E,"allowMove",E.prototype.sk),y.defineProperty(E,{sk:"allowMove"},w("Fj"),function(a){var b=this.Fj;b!==a&&(y.j(a,"boolean",E,"allowMove"),this.Fj=a,this.i("allowMove",b,a))}),y.g(E,"allowReshape",E.prototype.wn),y.defineProperty(E,{wn:"allowReshape"},w("Hj"),function(a){var b=this.Hj;b!==a&&(y.j(a,"boolean",E,"allowReshape"),this.Hj=a,this.i("allowReshape",b,a))}),y.g(E,"allowResize",E.prototype.xn),y.defineProperty(E,{xn:"allowResize"},w("Ij"),function(a){var b=this.Ij;b!==a&&(y.j(a,"boolean",E,"allowResize"),this.Ij=a,this.i("allowResize",b,a))}),y.g(E,"allowRotate",E.prototype.yn),y.defineProperty(E,{yn:"allowRotate"},w("Jj"),function(a){var b=this.Jj;b!==a&&(y.j(a,"boolean",E,"allowRotate"),this.Jj=a,this.i("allowRotate",b,a))}),y.g(E,"allowSelect",E.prototype.pe),y.defineProperty(E,{pe:"allowSelect"},w("Kj"),function(a){var b=this.Kj;b!==a&&(y.j(a,"boolean",E,"allowSelect"),this.Kj=a,this.i("allowSelect",b,a))}),y.g(E,"allowUndo",E.prototype.gy),y.defineProperty(E,{gy:"allowUndo"},w("Cs"),function(a){var b=this.Cs;b!==a&&(y.j(a,"boolean",E,"allowUndo"),this.Cs=a,this.i("allowUndo",b,a))}),y.g(E,"allowZoom",E.prototype.Bn),y.defineProperty(E,{Bn:"allowZoom"},w("Es"),function(a){var b=this.Es;b!==a&&(y.j(a,"boolean",E,"allowZoom"),this.Es=a,this.i("allowZoom",b,a))}),y.g(E,"hasVerticalScrollbar",E.prototype.AC),y.defineProperty(E,{AC:"hasVerticalScrollbar"},w("et"),function(a){var b=this.et;b!==a&&(y.j(a,"boolean",E,"hasVerticalScrollbar"),this.et=a,this.i("hasVerticalScrollbar",b,a),Oh(this))}),y.g(E,"hasHorizontalScrollbar",E.prototype.zC),y.defineProperty(E,{zC:"hasHorizontalScrollbar"},w("dt"),function(a){var b=this.dt;b!==a&&(y.j(a,"boolean",E,"hasHorizontalScrollbar"),this.dt=a,this.i("hasHorizontalScrollbar",b,a),Oh(this))}),y.g(E,"allowHorizontalScroll",E.prototype.Ne),y.defineProperty(E,{Ne:"allowHorizontalScroll"},w("As"),function(a){var b=this.As;b!==a&&(y.j(a,"boolean",E,"allowHorizontalScroll"),this.As=a,this.i("allowHorizontalScroll",b,a),Oh(this))}),y.g(E,"allowVerticalScroll",E.prototype.Oe),y.defineProperty(E,{Oe:"allowVerticalScroll"},w("Ds"),function(a){var b=this.Ds;b!==a&&(y.j(a,"boolean",E,"allowVerticalScroll"),this.Ds=a,this.i("allowVerticalScroll",b,a),Oh(this))}),y.g(E,"scrollHorizontalLineChange",E.prototype.fs),y.defineProperty(E,{fs:"scrollHorizontalLineChange"},w("Tt"),function(a){var b=this.Tt;b!==a&&(y.j(a,"number",E,"scrollHorizontalLineChange"),0>a&&y.ka(a,">= 0",E,"scrollHorizontalLineChange"),this.Tt=a,this.i("scrollHorizontalLineChange",b,a))}),y.g(E,"scrollVerticalLineChange",E.prototype.gs),y.defineProperty(E,{gs:"scrollVerticalLineChange"},w("Ut"),function(a){var b=this.Ut;b!==a&&(y.j(a,"number",E,"scrollVerticalLineChange"),0>a&&y.ka(a,">= 0",E,"scrollVerticalLineChange"),this.Ut=a,this.i("scrollVerticalLineChange",b,a))}),y.g(E,"lastInput",E.prototype.Q),y.defineProperty(E,{Q:"lastInput"},w("Zb"),function(a){x&&y.l(a,kd,E,"lastInput"),this.Zb=a}),y.g(E,"firstInput",E.prototype.uc),y.defineProperty(E,{uc:"firstInput"},w("eg"),function(a){x&&y.l(a,kd,E,"firstInput"),this.eg=a}),y.g(E,"currentCursor",E.prototype.Mc),y.defineProperty(E,{Mc:"currentCursor"},w("Qs"),function(a){y.j(a,"string",E,"currentCursor"),this.Da===q||this.Qs===a||""===a&&this.Qs===this.fp||(this.Qs=a,""!==a?(this.Da.style.cursor=a,this.qb.style.cursor=a):(this.Da.style.cursor=this.qy,this.qb.style.cursor=this.qy))}),y.g(E,"defaultCursor",E.prototype.qy),y.defineProperty(E,{qy:"defaultCursor"},w("fp"),function(a){y.j(a,"string",E,"defaultCursor");var b=this.fp;b!==a&&(this.fp=a,this.i("defaultCursor",b,a))}),y.g(E,"hasGestureZoom",E.prototype.BG),y.defineProperty(E,{BG:"hasGestureZoom"},w("Ch"),function(a){var b=this.Ch;b!==a&&(y.j(a,"boolean",E,"hasGestureZoom"),this.Ch=a,this.i("hasGestureZoom",b,a))}),y.g(E,"click",E.prototype.click),y.defineProperty(E,{click:"click"},w("uh"),function(a){var b=this.uh;b!==a&&(a!==q&&y.j(a,"function",E,"click"),this.uh=a,this.i("click",b,a))}),y.g(E,"doubleClick",E.prototype.Fl),y.defineProperty(E,{Fl:"doubleClick"},w("zh"),function(a){var b=this.zh;b!==a&&(a!==q&&y.j(a,"function",E,"doubleClick"),this.zh=a,this.i("doubleClick",b,a))}),y.g(E,"contextClick",E.prototype.qr),y.defineProperty(E,{qr:"contextClick"},w("vh"),function(a){var b=this.vh;b!==a&&(a!==q&&y.j(a,"function",E,"contextClick"),this.vh=a,this.i("contextClick",b,a))}),y.g(E,"mouseOver",E.prototype.Tr),y.defineProperty(E,{Tr:"mouseOver"},w("Jh"),function(a){var b=this.Jh;b!==a&&(a!==q&&y.j(a,"function",E,"mouseOver"),this.Jh=a,this.i("mouseOver",b,a))}),y.g(E,"mouseHover",E.prototype.Sr),y.defineProperty(E,{Sr:"mouseHover"},w("Ih"),function(a){var b=this.Ih;b!==a&&(a!==q&&y.j(a,"function",E,"mouseHover"),this.Ih=a,this.i("mouseHover",b,a))}),y.g(E,"mouseHold",E.prototype.Rr),y.defineProperty(E,{Rr:"mouseHold"},w("Hh"),function(a){var b=this.Hh;b!==a&&(a!==q&&y.j(a,"function",E,"mouseHold"),this.Hh=a,this.i("mouseHold",b,a))}),y.g(E,"mouseDragOver",E.prototype.gD),y.defineProperty(E,{gD:"mouseDragOver"},w("At"),function(a){var b=this.At;b!==a&&(a!==q&&y.j(a,"function",E,"mouseDragOver"),this.At=a,this.i("mouseDragOver",b,a))}),y.g(E,"mouseDrop",E.prototype.Qr),y.defineProperty(E,{Qr:"mouseDrop"},w("Gh"),function(a){var b=this.Gh;b!==a&&(a!==q&&y.j(a,"function",E,"mouseDrop"),this.Gh=a,this.i("mouseDrop",b,a))}),y.g(E,"toolTip",E.prototype.ts),y.defineProperty(E,{ts:"toolTip"},w("Th"),function(a){var b=this.Th;b!==a&&(a!==q&&y.l(a,Ge,E,"toolTip"),this.Th=a,this.i("toolTip",b,a))}),y.g(E,"contextMenu",E.prototype.contextMenu),y.defineProperty(E,{contextMenu:"contextMenu"},w("wh"),function(a){var b=this.wh;b!==a&&(a!==q&&y.l(a,Ge,E,"contextMenu"),this.wh=a,this.i("contextMenu",b,a))}),y.g(E,"commandHandler",E.prototype.Pe),y.defineProperty(E,{Pe:"commandHandler"},w("rw"),function(a){var b=this.rw;b!==a&&(y.l(a,pa,E,"commandHandler"),a.h!==q&&y.m("Cannot share CommandHandlers between Diagrams: "+a.toString()),b!==q&&b.ie(q),this.rw=a,a.ie(this))}),y.g(E,"toolManager",E.prototype.pb),y.defineProperty(E,{pb:"toolManager"},w("hu"),function(a){var b=this.hu;b!==a&&(y.l(a,Ee,E,"toolManager"),a.h!==q&&y.m("Cannot share ToolManagers between Diagrams: "+a.toString()),b!==q&&b.ie(q),this.hu=a,a.ie(this))}),y.g(E,"defaultTool",E.prototype.Gu),y.defineProperty(E,{Gu:"defaultTool"},w("zw"),function(a){var b=this.zw;b!==a&&(y.l(a,Pe,E,"defaultTool"),this.zw=a,this.Ma===b&&(this.Ma=a))}),y.g(E,"currentTool",E.prototype.Ma),y.defineProperty(E,{Ma:"currentTool"},w("uw"),function(a){var b=this.uw;b!==q&&(b.la&&b.doDeactivate(),b.cancelWaitAfter(),b.doStop()),a===q&&(a=this.Gu),a!==q&&(y.l(a,Pe,E,"currentTool"),this.uw=a,a.ie(this),a.doStart())}),y.A(E,{selection:"selection"},w("Xt")),y.g(E,"maxSelectionCount",E.prototype.$C),y.defineProperty(E,{$C:"maxSelectionCount"},w("vt"),function(a){var c,b=this.vt;if(b!==a)if(y.j(a,"number",E,"maxSelectionCount"),a>=0&&!isNaN(a)){if(this.vt=a,this.i("maxSelectionCount",b,a),!this.va.cb&&(a=this.selection.count-a,a>0)){for(this.Fa("ChangingSelection"),b=this.selection.Ee(),c=0;a>c;c++)b[c].Wa=s;this.Fa("ChangedSelection")}}else y.ka(a,">= 0",E,"maxSelectionCount")}),y.g(E,"nodeSelectionAdornmentTemplate",E.prototype.lD),y.defineProperty(E,{lD:"nodeSelectionAdornmentTemplate"},w("Gt"),function(a){var b=this.Gt;b!==a&&(y.l(a,Ge,E,"nodeSelectionAdornmentTemplate"),this.Gt=a,this.i("nodeSelectionAdornmentTemplate",b,a))}),y.g(E,"groupSelectionAdornmentTemplate",E.prototype.vC),y.defineProperty(E,{vC:"groupSelectionAdornmentTemplate"},w("bt"),function(a){var b=this.bt;b!==a&&(y.l(a,Ge,E,"groupSelectionAdornmentTemplate"),this.bt=a,this.i("groupSelectionAdornmentTemplate",b,a))}),y.g(E,"linkSelectionAdornmentTemplate",E.prototype.XC),y.defineProperty(E,{XC:"linkSelectionAdornmentTemplate"},w("pt"),function(a){var b=this.pt;b!==a&&(y.l(a,Ge,E,"linkSelectionAdornmentTemplate"),this.pt=a,this.i("linkSelectionAdornmentTemplate",b,a))}),y.g(E,"isModified",E.prototype.Pl),y.defineProperty(E,{Pl:"isModified"},function(){var a=this.va;return a===q?this.Vw:a.wk!==q?h:this.Vw&&this.Yj!==a.sj},function(a){if(this.Vw!==a){y.j(a,"boolean",E,"isModified"),this.Vw=a;var b=this.va;!a&&b&&(this.Yj=b.sj)}}),y.g(E,"model",E.prototype.fa),y.defineProperty(E,{fa:"model"},w("Jd"),function(a){var c,b=this.Jd;b!==a&&(y.l(a,G,E,"model"),b!==q&&b.va!==a.va&&b.va.KG&&y.m("Do not replace a Diagram.model while a transaction is in progress."),this.fg=s,this.mp=h,this.Ef=s,c=this.od,this.od=h,b!==q&&(b.lz(this.LA),b instanceof O&&Bi(this,b.rg),Bi(this,b.Pf)),this.Jd=a,a.ay(this.KA),Ci(this,a.Pf),a instanceof O&&Di(this,a.rg),a.lz(this.KA),a.ay(this.LA),this.od=c,this.Yb||this.ta(),b!==q&&(a.va.isEnabled=b.va.isEnabled))}),y.defineProperty(E,{Ra:q},w("EA"),ba("EA")),E.prototype.clear=E.prototype.clear=function(){var b,c,a=q;for(this.Gc!==q&&(a=this.Gc.W),this.fa.clear(),b=this.zb.length,c=0;b>c;c++)this.zb.n[c].clear();this.xf.clear(),this.Am.clear(),this.Ht.clear(),this.mk.clear(),this.qt.clear(),this.lb.clear(),this.xh.clear(),this.Sj.clear(),this.gl.clear(),this.Xt.Pa(),this.Xt.clear(),this.Xt.freeze(),this.Hn=this.ez=q,y.nr=q,this.Us=new B(0/0,0/0,0/0,0/0).freeze(),a!==q&&(this.add(a),this.lb.remove(a)),this.ta()},E.prototype.reset=E.prototype.reset=function(){this.Yb=h,this.clear(),this.zb=new F(pe),this.nb=new A(0/0,0/0).freeze(),this.Qb=1,this.xt=1e-4,this.ut=100,this.nu=new A(0/0,0/0).freeze(),this.$s=new B(0/0,0/0,0/0,0/0).freeze(),this.Rk=Le,this.Vk=Ib,this.Zj=Le,this.Im=Ib,this.it=this.ht=Mb,this.Gs=new ab(16,16,16,16).freeze(),this.mt=h,this.ku=Nf,this.fp="auto",this.Jd=this.wh=this.Th=this.Gh=this.At=this.Hh=this.Ih=this.Jh=this.vh=this.zh=this.uh=q,this.ak=s,this.Cj=this.Bj=this.xs=this.Dh=h,this.zs=this.ys=s,this.Ds=this.As=this.et=this.dt=this.Es=this.Cs=this.Kj=this.Jj=this.Ij=this.Hj=this.Fj=this.Gj=this.Ej=this.Bs=this.Mj=this.Dj=this.Lj=h,this.Ut=this.Tt=16,this.ne=new ab(5).freeze(),this.vt=999999999,this.qd=q,ph(this),qh(this),this.Gc=q,this.fa=new O,this.Ph=h,this.Nb=new rh,this.Yb=this.Ph=s,this.ta()},E.prototype.rebuildParts=E.prototype.Wl=function(){var a,b,c;for(a=this.iv.k;a.next();)b=a.value,(!b.Pd()||b instanceof He)&&y.m('Invalid node template in Diagram.nodeTemplateMap: template for "'+a.key+'" must be a Node or a simple Part, not a Group or Link: '+b);for(a=this.Tu.k;a.next();)b=a.value,b instanceof He||y.m('Invalid group template in Diagram.groupTemplateMap: template for "'+a.key+'" must be a Group, not a normal Node or Link: '+b);for(a=this.ev.k;a.next();)b=a.value,b instanceof U||y.m('Invalid link template in Diagram.linkTemplateMap: template for "'+a.key+'" must be a Link, not a normal Node or simple Part: '+b);for(a=y.tb(),b=this.selection.k;b.next();)c=b.value.data,c&&a.push(c);for(b=this.fa,b instanceof O&&Bi(this,b.rg),Bi(this,b.Pf),Ci(this,b.Pf),b instanceof O&&Di(this,b.rg),b=0;b<a.length;b++)(c=this.pj(a[b]))&&(c.Wa=h);y.ya(a)},E.prototype.getCategoryForNodeData=function(a){var b=this.fa,c=b.getCategoryForNodeData(a),d=s;return b instanceof O&&(d=b.My(a)),d&&""===c&&(c="LinkLabel"),c},E.prototype.findTemplateForNodeData=function(a,b){var c=s,d=this.fa;return d instanceof O&&(c=d.Iy(a)),c?(c=this.Tu.wa(b),c===q&&(c=this.Tu.wa(""),c===q&&(y.zE||(y.zE=h,y.trace('No Group template found for category "'+b+'"'),y.trace("  Using default group template")),c=this.jA))):(c=this.iv.wa(b),c===q&&(c=this.iv.wa(""),c===q&&(y.CE||(y.CE=h,y.trace('No Node template found for category "'+b+'"'),y.trace("  Using default node template")),c=this.lA))),c instanceof R?c:q},E.prototype.getCategoryForLinkData=function(a){var b=this.fa,c="";return b instanceof O?c=b.getCategoryForLinkData(a):b instanceof zd&&(c=b.xG(a)),c},E.prototype.findTemplateForLinkData=function(a,b){var c=this.ev.wa(b);return c===q&&(c=this.ev.wa(""),c===q&&(y.BE||(y.BE=h,y.trace('No Link template found for category "'+b+'"'),y.trace("  Using default link template")),c=this.kA)),c instanceof U?c:q},E.prototype.findPartForKey=E.prototype.BI=function(a){return a===q||a===f?q:(a=this.fa.Te(a),a===q?q:(a=this.xh.wa(a),a instanceof R?a:q))},E.prototype.findNodeForKey=E.prototype.Jf=function(a){return a===q||a===f?q:(a=this.fa.Te(a),a===q?q:(a=this.xh.wa(a),a instanceof T?a:q))},E.prototype.findPartForData=E.prototype.pj=function(a){if(a===q)return q;var b=this.xh.wa(a);return b instanceof R?b:(b=this.Sj.wa(a),b instanceof R?b:q)},E.prototype.findNodeForData=E.prototype.vr=function(a){return a===q?q:(a=this.xh.wa(a),a instanceof T?a:q)},E.prototype.findLinkForData=E.prototype.pf=function(a){return a===q?q:(a=this.Sj.wa(a),a instanceof U?a:q)},y.g(E,"nodeTemplate",E.prototype.$G),y.defineProperty(E,{$G:"nodeTemplate"},function(){return this.Kh.wa("")},function(a){var b=this.Kh.wa("");b!==a&&(y.l(a,R,E,"nodeTemplate"),this.Kh.add("",a),this.i("nodeTemplate",b,a),this.va.cb||this.Wl())}),y.g(E,"nodeTemplateMap",E.prototype.iv),y.defineProperty(E,{iv:"nodeTemplateMap"},w("Kh"),function(a){var b=this.Kh;b!==a&&(y.l(a,ma,E,"nodeTemplateMap"),this.Kh=a,this.i("nodeTemplateMap",b,a),this.va.cb||this.Wl())}),y.g(E,"groupTemplate",E.prototype.AG),y.defineProperty(E,{AG:"groupTemplate"},function(){return this.Vj.wa("")},function(a){var b=this.Vj.wa("");b!==a&&(y.l(a,He,E,"groupTemplate"),this.Vj.add("",a),this.i("groupTemplate",b,a),this.va.cb||this.Wl())}),y.g(E,"groupTemplateMap",E.prototype.Tu),y.defineProperty(E,{Tu:"groupTemplateMap"},w("Vj"),function(a){var b=this.Vj;b!==a&&(y.l(a,ma,E,"groupTemplateMap"),this.Vj=a,this.i("groupTemplateMap",b,a),this.va.cb||this.Wl())}),y.g(E,"linkTemplate",E.prototype.UG),y.defineProperty(E,{UG:"linkTemplate"},function(){return this.Gi.wa("")},function(a){var b=this.Gi.wa("");b!==a&&(y.l(a,U,E,"linkTemplate"),this.Gi.add("",a),this.i("linkTemplate",b,a),this.va.cb||this.Wl())}),y.g(E,"linkTemplateMap",E.prototype.ev),y.defineProperty(E,{ev:"linkTemplateMap"},w("Gi"),function(a){var b=this.Gi;b!==a&&(y.l(a,ma,E,"linkTemplateMap"),this.Gi=a,this.i("linkTemplateMap",b,a),this.va.cb||this.Wl())}),y.g(E,"isMouseCaptured",E.prototype.gd),y.defineProperty(E,{gd:"isMouseCaptured"},w("CA"),function(a){var b=this.Da;b!==q&&(a?(this.Q.bubbles=s,b.removeEventListener("mousemove",this.mo,s),b.removeEventListener("mousedown",this.lo,s),b.removeEventListener("mouseup",this.oo,s),b.removeEventListener("mousewheel",this.ug,s),b.removeEventListener("DOMMouseScroll",this.ug,s),b.removeEventListener("mouseout",this.no,s),window.addEventListener("mousemove",this.mo,h),window.addEventListener("mousedown",this.lo,h),window.addEventListener("mouseup",this.oo,h),window.addEventListener("mousewheel",this.ug,h),window.addEventListener("DOMMouseScroll",this.ug,h),window.addEventListener("mouseout",this.no,h),window.addEventListener("selectstart",this.preventDefault,s)):(window.removeEventListener("mousemove",this.mo,h),window.removeEventListener("mousedown",this.lo,h),window.removeEventListener("mouseup",this.oo,h),window.removeEventListener("mousewheel",this.ug,h),window.removeEventListener("DOMMouseScroll",this.ug,h),window.removeEventListener("mouseout",this.no,h),window.removeEventListener("selectstart",this.preventDefault,s),b.addEventListener("mousemove",this.mo,s),b.addEventListener("mousedown",this.lo,s),b.addEventListener("mouseup",this.oo,s),b.addEventListener("mousewheel",this.ug,s),b.addEventListener("DOMMouseScroll",this.ug,s),b.addEventListener("mouseout",this.no,s)),this.CA=a)}),y.g(E,"position",E.prototype.position),y.defineProperty(E,{position:"position"},w("nb"),function(a){var c,b=this.nb;b.L(a)||(y.l(a,A,E,"position"),c=this.eb.copy(),c.x=b.x,c.y=b.y,a=a.copy(),b.nj(a)||(this.Yb||this.Da===q||(this.Yb=h,b=this.scale,Qh(this,a,this.fd,this.Da.width/b,this.Da.height/b,this.Vk),this.Yb=s),b=a),this.nb=b.U(),this.Yb||this.Zr(c,this.eb))}),y.g(E,"initialPosition",E.prototype.EC),y.defineProperty(E,{EC:"initialPosition"},w("Qw"),function(a){this.Qw.L(a)||(y.l(a,A,E,"initialPosition"),this.Qw=a.U())}),y.g(E,"initialScale",E.prototype.FC),y.defineProperty(E,{FC:"initialScale"},w("Rw"),function(a){this.Rw!==a&&(y.j(a,"number",E,"initialScale"),this.Rw=a)}),y.g(E,"grid",E.prototype.Wn),y.defineProperty(E,{Wn:"grid"},function(){return this.Gc===q&&Ih(this),this.Gc},function(a){var c,b=this.Gc;b!==a&&(b===q&&(Ih(this),b=this.Gc),y.l(a,D,E,"grid"),a.type!==Jh&&y.m("Diagram.grid must be a Panel of type Panel.Grid"),c=b.ga,c!==q&&c.remove(b),this.Gc=a,a.name="GRID",c!==q&&c.add(a),this.ta(),this.i("grid",b,a))}),y.A(E,{eb:"viewportBounds"},function(){var c,d,a=this.Da,b=this.rB;return a===q?b:(c=this.nb,d=this.Qb,b.q(c.x,c.y,Math.max(a.width,0)/d,Math.max(a.height,0)/d),b)}),y.g(E,"fixedBounds",E.prototype.yy),y.defineProperty(E,{yy:"fixedBounds"},w("$s"),function(a){var b=this.$s;b.L(a)||(y.l(a,B,E,"fixedBounds"),this.$s=a=a.U(),this.oc(),this.i("fixedBounds",b,a))}),y.A(E,{fd:"documentBounds"},w("Us")),y.g(E,"scale",E.prototype.scale),y.defineProperty(E,{scale:"scale"},w("Qb"),function(a){var c,d,e,f,g,b=this.Qb;if(y.p(a,E,"scale"),a<this.Nf&&(a=this.Nf),a>this.Mf&&(a=this.Mf),b!==a){if(c=this.Qb=a,!this.Yb&&!this.od&&(this.Yb=h,d=this.Da,d!==q)){if(a=this.eb.copy(),e=d.width/c,f=d.height/c,a.width=d.width/b,a.height=d.height/b,d=this.qh.copy(),isNaN(d.x))switch(this.Cu){case hc:d.x=0;break;case ic:d.x=e-1;break;case Sb:d.x=e/2;break;case Ib:case kc:d.x=e/2}if(isNaN(d.y))switch(this.Cu){case gc:d.y=0;break;case jc:d.y=f-1;break;case Sb:d.y=f/2;break;case Ib:case kc:d.y=f/2}g=this.position,b=new A(g.x+d.x/b-d.x/c,g.y+d.y/b-d.y/c),Qh(this,b,this.fd,e,f,this.Vk),this.position=b,this.Yb=s,this.Zr(a,this.eb)}this.ta(),Vh(this)}}),y.g(E,"autoScale",E.prototype.wl),y.defineProperty(E,{wl:"autoScale"},w("Rk"),function(a){var b=this.Rk;b!==a&&(y.rb(a,E,E,"autoScale"),this.Rk=a,this.i("autoScale",b,a),a!==Le&&Oh(this))}),y.g(E,"initialAutoScale",E.prototype.GG),y.defineProperty(E,{GG:"initialAutoScale"},w("Zj"),function(a){var b=this.Zj;b!==a&&(y.rb(a,E,E,"initialAutoScale"),this.Zj=a,this.i("initialAutoScale",b,a))}),y.g(E,"initialViewportSpot",E.prototype.GC),y.defineProperty(E,{GC:"initialViewportSpot"},w("it"),function(a){var b=this.it;b!==a&&(y.l(a,J,E,"initialViewportSpot"),yb(a)||y.m("initialViewportSpot must be a real Spot: "+a),this.it=a,this.i("initialViewportSpot",b,a))}),y.g(E,"initialDocumentSpot",E.prototype.DC),y.defineProperty(E,{DC:"initialDocumentSpot"},w("ht"),function(a){var b=this.ht;b!==a&&(y.l(a,J,E,"initialDocumentSpot"),yb(a)||y.m("initialViewportSpot must be a real Spot: "+a),this.ht=a,this.i("initialDocumentSpot",b,a))}),y.g(E,"minScale",E.prototype.Nf),y.defineProperty(E,{Nf:"minScale"},w("xt"),function(a){y.p(a,E,"minScale");var b=this.xt;b!==a&&a>0?(this.xt=a,this.i("minScale",b,a),a>this.scale&&(this.scale=a)):y.ka(a,"> 0",E,"minScale")}),y.g(E,"maxScale",E.prototype.Mf),y.defineProperty(E,{Mf:"maxScale"},w("ut"),function(a){y.p(a,E,"maxScale");var b=this.ut;b!==a&&a>0?(this.ut=a,this.i("maxScale",b,a),a<this.scale&&(this.scale=a)):y.ka(a,"> 0",E,"maxScale")}),y.g(E,"zoomPoint",E.prototype.qh),y.defineProperty(E,{qh:"zoomPoint"},w("nu"),function(a){this.nu.L(a)||(y.l(a,A,E,"zoomPoint"),this.nu=a=a.U())}),y.g(E,"contentAlignment",E.prototype.Cu),y.defineProperty(E,{Cu:"contentAlignment"},w("Vk"),function(a){var b=this.Vk;b.L(a)||(y.l(a,J,E,"contentAlignment"),this.Vk=a=a.U(),this.i("contentAlignment",b,a),Oh(this))}),y.g(E,"initialContentAlignment",E.prototype.HG),y.defineProperty(E,{HG:"initialContentAlignment"},w("Im"),function(a){var b=this.Im;b.L(a)||(y.l(a,J,E,"initialContentAlignment"),this.Im=a=a.U(),this.i("initialContentAlignment",b,a))}),y.g(E,"padding",E.prototype.padding),y.defineProperty(E,{padding:"padding"},w("ne"),function(a){"number"==typeof a?a=new ab(a):y.l(a,ab,E,"padding");var b=this.ne;b.L(a)||(this.ne=a=a.U(),this.oc(),this.i("padding",b,a))}),y.A(E,{uj:"nodes"},function(){return this.Ht.k}),y.A(E,{links:"links"},function(){return this.qt.k}),y.A(E,{as:"parts"},function(){return this.lb.k}),E.prototype.findTopLevelGroups=E.prototype.DI=function(){return this.mk.k},y.g(E,"layout",E.prototype.Nb),y.defineProperty(E,{Nb:"layout"},w("qd"),function(a){var b=this.qd;b!==a&&(y.l(a,rh,E,"layout"),b!==q&&(b.h=q,b.group=q),this.qd=a,a.h=this,a.group=q,this.Fs=h,this.i("layout",b,a),this.jc())}),E.prototype.layoutDiagram=E.prototype.WI=function(a){Mh(this),a&&Ni(this,h),Yh(this,s)},y.g(E,"isTreePathToChildren",E.prototype.Pc),y.defineProperty(E,{Pc:"isTreePathToChildren"},w("mt"),function(a){var b=this.mt;if(b!==a&&(y.j(a,"boolean",E,"isTreePathToChildren"),this.mt=a,this.i("isTreePathToChildren",b,a),!this.va.cb))for(a=this.uj;a.next();)Ri(a.value)}),E.prototype.findTreeRoots=E.prototype.HI=function(){var a,b,c;for(a=new F(T),b=this.uj.k;b.next();)c=b.value,c.$n&&c.yr()===q&&a.add(c);return a.k},y.g(E,"isCollapsingExpanding",E.prototype.xd),y.defineProperty(E,{xd:q},w("zA"),ba("zA")),E.prototype.addDiagramListener=E.prototype.wB=function(a,b){y.j(a,"string",E,"addDiagramListener:name"),y.j(b,"function",E,"addDiagramListener:listener");var c=Si(this,a);c!==q&&c.add(b)},E.prototype.removeDiagramListener=E.prototype.uD=function(a,b){y.j(a,"string",E,"removeDiagramListener:name"),y.j(b,"function",E,"addDiagramListener:listener");var c=Si(this,a);c!==q&&c.remove(b)},E.prototype.raiseDiagramEvent=E.prototype.Fa=function(a,b,c){var d,e,g;if(x&&y.j(a,"string",E,"raiseDiagramEvent:name"),d=Si(this,a),e=new ld,e.h=this,g=this.Aw.wa(a),a=g!==q?g:this.Aw.wa(a.toLowerCase()),e.name=a,b!==f&&(e.Bv=b),c!==f&&(e.mv=c),b=d.length,1===b)d=d.sa(0),d(e);else if(0!==b)for(c=d.Ee(),a=0;b>a;a++)d=c[a],d(e);return e.cancel},E.prototype.simulatedMouseMove=E.prototype.XD=function(a,b,c){if(df!==q){c instanceof E||(c=q);var d=ef,e=df.h;if(ef=c,c!==d){if(d!==q&&d!==e&&d.pb.ve!==q)return d.pb.ve.doSimulatedDragLeave(),s;c!==q&&c.pb.ve!==q&&c.pb.ve.doSimulatedDragEnter()}return c!==q&&c.ey&&c.tl&&!c.Za&&c!==e?(d=c.pb.ve,d!==q&&(a!==q&&(b=c.Ig(a)),c.Zb.T=b,c.Zb.mj=s,c.Zb.ni=s,d.doSimulatedDragOver()),h):s}return s},E.prototype.simulatedMouseUp=E.prototype.YD=function(a,b,c,d){if(df!==q){d===q&&(d=b),b=ef;var e=df.h;if(d!==b){if(b!==q&&b!==e&&b.pb.ve!==q)return b.pb.ve.doSimulatedDragLeave(),s;d!==q&&d.pb.ve!==q&&d.pb.ve.doSimulatedDragEnter()}if(ef=d,d===q)return df.doCancel(),h;if(d!==this)return a!==q&&(c=d.Ig(a)),d.Zb.T=c,d.Zb.mj=s,d.Zb.ni=h,a=d.pb.ve,a!==q&&a.doSimulatedDrop(),a=df,a!==q&&(d=a.mayCopy(),a.Fe=d?"Copy":"Move",a.stopTool()),h}return s},y.g(E,"autoScrollRegion",E.prototype.GB),y.defineProperty(E,{GB:"autoScrollRegion"},w("Gs"),function(a){"number"==typeof a?a=new ab(a):y.l(a,ab,E,"autoScrollRegion");var b=this.Gs;b.L(a)||(this.Gs=a=a.U(),this.oc(),this.i("autoScrollRegion",b,a))}),E.prototype.makeImage=E.prototype.YI=function(a){var b=document.createElement("img");return b.src=this.VG(a),b instanceof HTMLImageElement?b:q},E.prototype.makeImageData=E.prototype.VG=function(a){var b,c,d,e,g,i,j,k,l,m,n,o,p,r,t,u,v;if(this.li(),this.Da===q)return"";if(a===f&&(a={}),"object"!=typeof a&&y.m("properties argument must be an Object."),b=s,c=a.size||q,d=a.scale||q,e=a.maxSize||new ha(2e3,2e3),a.maxSize===f&&(b=h),g=a.position||q,i=a.parts||q,j=a.padding||1,k=a.background||q,l=a.omitTemporary,l===f&&(l=h),m=a.showTemporary,m===f&&(m=!l),l=a.showGrid,l===f&&(l=m),c!==q&&isNaN(c.width)&&isNaN(c.height)&&(c=q),j&&"number"==typeof j&&(j=new ab(j)),j||(j=new ab(0)),j.left=Math.max(j.left,0),j.right=Math.max(j.right,0),j.top=Math.max(j.top,0),j.bottom=Math.max(j.bottom,0),this.Ws=s,Hh(this),n=document.createElement("canvas"),o=n.getContext("2d"),!(c||d||i||g))return n.width=this.Da.width+Math.ceil(j.left+j.right),n.height=this.Da.height+Math.ceil(j.top+j.bottom),gi(this,o,j,new ha(n.width,n.height),this.Qb,this.nb,i,k,m,l),this.Ws=h,n.toDataURL(a.type,a.details);if(r=new A(0,0),p=this.fd.copy(),p.zH(this.padding),g!==q&&g.V()?(r=g,d||(d=1)):(r.x=p.x,r.y=p.y),p.width-=r.x,p.height-=r.y,i){for(g=h,i=i.k,i.reset();i.next();)u=i.value,u instanceof R&&(v=u.layer,(!v||v.visible)&&(v&&v.bc||!u.xb()||(u=u.ua,u.V()&&(g?(g=s,t=u.copy()):t.zj(u)))));g&&(t=new B(0,0,0,0)),p.width=t.width,p.height=t.height,r.x=t.x,r.y=t.y}return g=t=0,j&&(t=j.left+j.right,g=j.top+j.bottom),u=v=0,c&&(v=c.width,u=c.height,isFinite(v)&&(v=Math.max(0,v-t)),isFinite(u)&&(u=Math.max(0,u-g))),c&&d?c.V()?(c=v,p=u):isNaN(u)?(c=v,p=p.height*d):(c=p.width*d,p=u):c?c.V()?(d=Math.min(v/p.width,u/p.height),c=v,p=u):isNaN(u)?(d=v/p.width,c=v,p=p.height*d):(d=u/p.height,c=p.width*d,p=u):d?(c=p.width*d,p=p.height*d):(d=1,c=p.width,p=p.height),j?(c+=t,p+=g):j=new ab(0),e&&(t=e.width,e=e.height,b&&!y.yE&&(c>t||p>e)&&(x.trace("Diagram.makeImage(data): Diagram width or height is larger than the default max size. ("+c+"x"+p+" vs 2000x2000) Consider increasing the max size."),y.yE=h),isNaN(t)&&(t=2e3),isNaN(e)&&(e=2e3),isFinite(t)&&(c=Math.min(c,t)),isFinite(e)&&(p=Math.min(p,e))),n.width=Math.ceil(c),n.height=Math.ceil(p),gi(this,o,j,new ha(Math.ceil(c),Math.ceil(p)),d,r,i,k,m,l),this.Ws=h,n.toDataURL(a.type,a.details)},E.inherit=function(a,b){y.j(a,"function",E,"inherit"),y.j(b,"function",E,"inherit"),y.Ka(a,b)},y.ba("Palette",Yi),y.Ka(Yi,E),y.ba("Overview",ji),y.Ka(ji,E),ji.prototype.we=function(){var a,b,c,d,e,g,i,j,k,l,m,n,o,p,r,t,u;if(this.qb===q&&y.m("No div specified"),this.Da===q&&y.m("No canvas specified"),this.me&&(a=this.Lh,a!==q)){for(b=a.Wn,(b&&b.visible&&isNaN(b.width)||isNaN(b.height))&&Xh(a),c=this.Da,b=this.si,d=this.Lx,e=this.cF,d.width=c.width,d.height=c.height,b.hw="",b.setTransform(1,0,0,1,0,0),b.clearRect(0,0,this.Da.width,this.Da.height),g=this.Xc,g.reset(),1!==this.Qb&&g.scale(this.scale),(0!==this.position.x||0!==this.position.y)&&g.translate(-this.nb.x,-this.nb.y),b.setTransform(g.m11,g.m12,g.m21,g.m22,g.dx,g.dy),i=this.Xs,j=this.eb,k=a.zb.length,g=0;k>g;g++)if(l=a.zb.n[g],m=b,n=j,o=i,o===f&&(o=h),o||!l.bc)for(l=l.lb,o=this.scale,p=l.length,r=0;p>r;r++)t=l.n[r],u=t.ua,u.qf(n)&&(1<u.width*o||1<u.height*o?t.we(m,this):ih(t,m));for(e.drawImage(c,0,0),x&&x.ky&&(e.fillStyle="red",e.fillRect(0,d.height/2,d.width,4)),a=this.zb.length,g=0;a>g;g++)this.zb.n[g].we(b,this);this.me=this.$j=s}},y.g(ji,"observed",ji.prototype.aH),y.defineProperty(ji,{aH:"observed"},w("Lh"),function(a){var b=this.Lh;a!==q&&y.l(a,E,ji,"observed"),b!==a&&!(a instanceof ji)&&(b!==q&&(this.remove(this.Hf),b.uD("ViewportBoundsChanged",this.nD),b.uD("DocumentBoundsChanged",this.mD),b.an.remove(this)),this.Lh=a,a!==q&&(a.wB("ViewportBoundsChanged",this.nD),a.wB("DocumentBoundsChanged",this.mD),a.an.add(this),this.add(this.Hf),aj(this)),this.oc(),this.i("observed",b,a))
}),y.g(ji,"box",ji.prototype.Hf),y.defineProperty(ji,{Hf:"box"},w("mm"),function(a){var b=this.mm;b!==a&&(this.mm=a,this.i("box",b,a))}),y.g(ji,"drawsTemporaryLayers",ji.prototype.mG),y.defineProperty(ji,{mG:"drawsTemporaryLayers"},w("Xs"),function(a){this.Xs!==a&&(this.Xs=a,this.kz())}),ji.prototype.Qe=function(){var a=this.Lh;return a===q?H.OE:a.fd},ji.prototype.Zr=function(a){this.Yb||(Kh(this),this.ta(),Vh(this),this.oc(),aj(this),this.Fa("ViewportBoundsChanged",a))},y.Ka($i,Pe),$i.prototype.doStart=function(){this.la=this.h.gd=h},$i.prototype.doMouseMove=function(){var a,b,c,d;this.la&&(a=this.h,a!==q&&a.Lh!==q&&(b=a.Lh,c=b.eb,d=a.Q.T,b.position=new A(d.x-c.width/2,d.y-c.height/2),a.jc()))},$i.prototype.doMouseUp=function(){this.la&&this.doMouseMove(),this.stopTool()},$i.prototype.doStop=function(){this.la=s;var a=this.h;a.gd=s,aj(a)},y.ba("Brush",Hd),Hd.Solid=Jd=y.w(Hd,"Solid",0),Hd.Linear=Kd=y.w(Hd,"Linear",1),Hd.Radial=Ld=y.w(Hd,"Radial",2),Hd.Pattern=bj=y.w(Hd,"Pattern",2),Hd.prototype.copy=function(){var a=new Hd;return a.Y=this.Y,a.pm=this.pm,a.kn=this.kn,a.Cm=this.Cm,a.$t=this.$t,a.Ys=this.Ys,this.ag!==q&&(a.ag=this.ag.copy()),a.Pt=this.Pt,a},Hd.prototype.Ja=function(){return this.freeze(),Object.freeze(this),this},Hd.prototype.freeze=function(){return this.$a=h,this.ag!==q&&this.ag.freeze(),this},Hd.prototype.Pa=function(){return Object.isFrozen(this)&&y.m("cannot thaw constant: "+this),this.$a=s,this.ag!==q&&this.ag.Pa(),this},Hd.prototype.toString=function(){var b,a="Brush(";if(this.type===Jd)a+=this.color;else if(a=this.type===Kd?a+"Linear ":this.type===Ld?a+"Radial ":this.type===bj?a+"Pattern ":a+"(unknown) ",a+=this.start+" "+this.end,this.Fn!==q)for(b=this.Fn.k;b.next();)a+=" "+b.key+":"+b.value;return a+")"},Hd.prototype.addColorStop=Hd.prototype.addColorStop=function(a,b){y.K(this),("number"!=typeof a||!isFinite(a)||a>1||0>a)&&y.ka(a,"0 <= loc <= 1",Hd,"addColorStop:loc"),y.j(b,"string",Hd,"addColorStop:color"),this.ag===q&&(this.ag=new ma("number","string")),this.ag.add(a,b),this.Y===Jd&&(this.type=Kd),this.bg=q},y.g(Hd,"type",Hd.prototype.type),y.defineProperty(Hd,{type:"type"},w("Y"),function(a){y.K(this,a),y.rb(a,Hd,Hd,"type"),this.Y=a,Cb(this.start)&&(a===Kd?this.start=Ob:a===Ld&&(this.start=Sb)),Cb(this.end)&&(a===Kd?this.end=Wb:a===Ld&&(this.end=Sb)),this.bg=q}),y.g(Hd,"color",Hd.prototype.color),y.defineProperty(Hd,{color:"color"},w("pm"),function(a){y.K(this,a),y.j(a,"string",Hd,"color"),this.pm=a,this.bg=q}),y.g(Hd,"start",Hd.prototype.start),y.defineProperty(Hd,{start:"start"},w("kn"),function(a){y.K(this,a),a instanceof J||y.Kb(a,"Spot",Hd,"start"),this.kn=a.U(),this.bg=q}),y.g(Hd,"end",Hd.prototype.end),y.defineProperty(Hd,{end:"end"},w("Cm"),function(a){y.K(this,a),a instanceof J||y.Kb(a,"Spot",Hd,"end"),this.Cm=a.U(),this.bg=q}),y.g(Hd,"startRadius",Hd.prototype.Co),y.defineProperty(Hd,{Co:"startRadius"},w("$t"),function(a){y.K(this,a),y.p(a,Hd,"startRadius"),0>a&&y.ka(a,">= zero",Hd,"startRadius"),this.$t=a,this.bg=q}),y.g(Hd,"endRadius",Hd.prototype.Ln),y.defineProperty(Hd,{Ln:"endRadius"},w("Ys"),function(a){y.K(this,a),y.p(a,Hd,"endRadius"),0>a&&y.ka(a,">= zero",Hd,"endRadius"),this.Ys=a,this.bg=q}),y.g(Hd,"colorStops",Hd.prototype.Fn),y.defineProperty(Hd,{Fn:"colorStops"},w("ag"),function(a){y.K(this,a),x&&y.l(a,ma,Hd,"colorStops"),this.ag=a,this.bg=q}),y.g(Hd,"pattern",Hd.prototype.pattern),y.defineProperty(Hd,{pattern:"pattern"},w("Pt"),function(a){y.K(this,a),this.Pt=a,this.bg=q}),Hd.randomColor=function(a,b){a===f&&(a=128),x&&(y.p(a,Hd,"randomColor:min"),(0>a||a>255)&&y.ka(a,"0 <= min <= 255",Hd,"randomColor:min")),b===f&&(b=Math.max(a,255)),x&&(y.p(b,Hd,"randomColor:max"),(a>b||b>255)&&y.ka(b,"min <= max <= 255",Hd,"randomColor:max"));var c=Math.abs(b-a),d=Math.floor(a+Math.random()*c).toString(16),e=Math.floor(a+Math.random()*c).toString(16),c=Math.floor(a+Math.random()*c).toString(16);return 2>d.length&&(d="0"+d),2>e.length&&(e="0"+e),2>c.length&&(c="0"+c),"#"+d+e+c},y.ba("GraphObject",P),P.prototype.cloneProtected=function(a){var b,c;if(a.na=6144|this.na,a.Gb=this.Gb,a.Uc=this.Uc,a.Ge=this.Ge,a.nb.assign(this.nb),a.He.assign(this.He),a.Hd=this.Hd.U(),a.Ki=this.Ki.U(),a.dk=this.dk.copy(),a.Qb=this.Qb,a.lm=this.lm,a.Ug=this.Ug,a.Up=this.Up.U(),a.wc.assign(this.wc),a.Ob.assign(this.Ob),a.Ic.assign(this.Ic),a.oq=this.oq,a.Ud=this.Ud.U(),a.Qo=this.Qo.U(),a.zq=this.zq,a.lk=this.lk,a.Wo=this.Wo,a.Pj=this.Pj,a.Cq=this.Cq,a.Bq=this.Bq,a.Dq=this.Dq.U(),a.Eq=this.Eq,a.bp=this.bp,this.O!==q&&(b=this.O,a.O={uh:b.uh,zh:b.zh,vh:b.vh,eq:b.eq,fq:b.fq,Jh:b.Jh,Ih:b.Ih,Hh:b.Hh,cq:b.cq,dq:b.dq,Gh:b.Gh,Mo:b.Mo,No:b.No,Oo:b.Oo,Lo:b.Lo,Th:b.Th,wh:b.wh}),this.P!==q&&(b=this.P,a.P={zi:b.zi.U(),Zi:b.Zi.U(),xi:b.xi,Xi:b.Xi,wi:b.wi,Wi:b.Wi,yi:b.yi,Yi:b.Yi}),a.np=this.np,a.op=this.op,a.Uq=this.Uq,a.Vq=this.Vq,a.rc=this.rc,Array.isArray(this.Wk))for(a.Wk=this.Wk.slice(0),b=0;b<this.Wk.length;b++)c=this.Wk[b],a[c]=this[c];this.Oj!==q&&(a.Oj=this.Oj.copy())},P.prototype.ah=function(a){a.Kd=q,a.nl=q,a.aa()},P.prototype.copy=function(){var a=new this.constructor;return this.cloneProtected(a),a},P.prototype.toString=function(){return y.bh(Object.getPrototypeOf(this))+"#"+y.ac(this)},P.None=dj=y.w(P,"None",0),P.Default=Bg=y.w(P,"Default",0),P.Vertical=ej=y.w(P,"Vertical",4),P.Horizontal=fj=y.w(P,"Horizontal",5),P.Fill=qc=y.w(P,"Fill",3),P.Uniform=Cg=y.w(P,"Uniform",1),P.UniformToFill=Dg=y.w(P,"UniformToFill",2),da=P.prototype,da.fe=function(){this.P={zi:Hb,Zi:Hb,xi:10,Xi:10,wi:hj,Wi:hj,yi:0,Yi:0}},da.Qc=function(a,b,c,d,e,f,g){var h=this.W;if(h!==q&&(h.Vl(a,b,c,d,e,f,g),0!==(1024&this.na)&&c===this&&a===sd&&(a=this.Rn(),a!==q)))for(c=this.rc.k;c.next();)d=c.value,e=a.data,f=d.ps,f!==q&&(e=a.xe(f)),e!==q&&(d.uE(this,e,b,f!==q?q:h.h),f!==q&&(e=a,""!==f&&(e=a.xe(f)),e!==q&&(f=d.Zl,g=a,""!==f&&(g=a.xe(f)),g!==q&&d.vE(g,e,b))))},da.i=function(a,b,c){this.Qc(sd,a,this,b,c)},da.jC=function(a,b,c){var d,e;return this.$e===s?s:(d=this.Ta,b=a.xk(b),e=s,c&&(e=Ua(a.x,a.y,0,0,0,d.height)<b||Ua(a.x,a.y,0,d.height,d.width,d.height)<b||Ua(a.x,a.y,d.width,d.height,d.width,0)<b||Ua(a.x,a.y,d.width,0,0,0)<b),c||(e=Ua(a.x,a.y,0,0,0,d.height)<b&&Ua(a.x,a.y,0,d.height,d.width,d.height)<b&&Ua(a.x,a.y,d.width,d.height,d.width,0)<b&&Ua(a.x,a.y,d.width,0,0,0)<b),e)},da.mi=ca(h),P.prototype.containsPoint=P.prototype.Ea=function(a){var b,c,d,e,g;return x&&y.l(a,A,P,"containsPoint:p"),b=y.M(),b.assign(a),this.transform.Qa(b),c=this.ua,c.V()?y.zz&&(d=this.Ta,e=this.rj()*(this.h!==q?this.h.scale:1),g=1/e,10>d.width*e&&10>d.height*e)?(a=kb(c.x-5*g,c.y-5*g,c.width+10*g,c.height+10*g,b.x,b.y),y.B(b),a):(this.zc!==f||this instanceof V?kb(c.x-5,c.y-5,c.width+10,c.height+10,b.x,b.y):c.Ea(b))?this.Oj&&!this.Oj.Ea(b)?s:this.Ge!==q&&c.Ea(b)||this.Uc!==q&&this.Ic.Ea(a)?h:(y.B(b),this.hj(a)):(y.B(b),s):s},P.prototype.hj=function(a){var b=this.Ta;return kb(0,0,b.width,b.height,a.x,a.y)},P.prototype.containsRect=P.prototype.ij=function(a){if(x&&y.l(a,B,P,"containsRect:r"),0===this.angle)return this.ua.ij(a);var b=this.Ta,b=y.xj(0,0,b.width,b.height),c=this.transform,d=s,e=y.dc(a.x,a.y);return b.Ea(c.gi(e))&&(e.q(a.x,a.bottom),b.Ea(c.gi(e))&&(e.q(a.right,a.bottom),b.Ea(c.gi(e))&&(e.q(a.right,a.y),b.Ea(c.gi(e))&&(d=h)))),y.B(e),y.Bc(b),d},P.prototype.containedInRect=P.prototype.Bl=function(a,b){if(x&&y.l(a,B,P,"containedInRect:r"),b===f)return a.ij(this.ua);var c=this.Ta,d=s,e=y.dc(0,0);return a.Ea(b.Qa(e))&&(e.q(0,c.height),a.Ea(b.Qa(e))&&(e.q(c.width,c.height),a.Ea(b.Qa(e))&&(e.q(c.width,0),a.Ea(b.Qa(e))&&(d=h)))),d},P.prototype.intersectsRect=P.prototype.qf=function(a,b){var c,d,e,g,i,j,k,l;return x&&y.l(a,B,P,"intersectsRect:r"),b===f&&(b=this.transform,0===this.angle)?a.qf(this.ua):(c=this.Ta,d=b,e=y.dc(0,0),g=y.dc(0,c.height),i=y.dc(c.width,c.height),j=y.dc(c.width,0),k=s,a.Ea(d.Qa(e))||a.Ea(d.Qa(g))||a.Ea(d.Qa(i))||a.Ea(d.Qa(j))?k=h:(c=y.xj(0,0,c.width,c.height),l=y.dc(a.x,a.y),c.Ea(d.gi(l))?k=h:(l.q(a.x,a.bottom),c.Ea(d.gi(l))?k=h:(l.q(a.right,a.bottom),c.Ea(d.gi(l))?k=h:(l.q(a.right,a.y),c.Ea(d.gi(l))&&(k=h)))),y.B(l),y.Bc(c),!k&&(H.Wu(a,e,g)||H.Wu(a,g,i)||H.Wu(a,i,j)||H.Wu(a,j,e))&&(k=h)),y.B(e),y.B(g),y.B(i),y.B(j),k)},P.prototype.getDocumentPoint=P.prototype.hb=function(a,b){b===f&&(b=new A),Cb(a)&&y.m("Spot must be real");var c=this.Ta;return b.q(a.x*c.width+a.offsetX,a.y*c.height+a.offsetY),this.oe.Qa(b),b},P.prototype.getDocumentAngle=P.prototype.yk=function(){var a=this.oe,a=Math.atan2(a.m12,a.m11)*(180/Math.PI);return 0>a&&(a+=360),a},P.prototype.getDocumentScale=P.prototype.rj=function(){var a=this.Qb;return this.ga!==q?a*this.ga.rj():a},P.prototype.getLocalPoint=P.prototype.sC=function(a,b){return b===f&&(b=new A),b.assign(a),this.oe.gi(b),b},P.prototype.getNearestIntersectionPoint=P.prototype.Un=function(a,b,c){return this.Ar(a.x,a.y,b.x,b.y,c)},da=P.prototype,da.Ar=function(a,b,c,d,e){var g=this.transform,i=1/(g.m11*g.m22-g.m12*g.m21),j=g.m22*i,k=-g.m12*i,l=-g.m21*i,m=g.m11*i,n=i*(g.m21*g.dy-g.m22*g.dx),o=i*(g.m12*g.dx-g.m11*g.dy);if(this.ej!==q)return g=this.ua,H.Un(g.left,g.top,g.right,g.bottom,a,b,c,d,e);if(!(this instanceof D)||this instanceof D&&this.background!==q)return i=a*j+b*l+n,a=a*k+b*m+o,j=c*j+d*l+n,c=c*k+d*m+o,e.q(0,0),d=this.Ta,c=H.Un(0,0,d.width,d.height,i,a,j,c,e),e.transform(g),c;if(this instanceof D&&(this.ej===q||this.ej===f)){for(i=a*j+b*l+n,a=a*k+b*m+o,j=c*j+d*l+n,d=c*k+d*m+o,e.q(j,d),k=(j-i)*(j-i)+(d-a)*(d-a),c=s,m=this.za.n,o=m.length,l=y.M(),n=0;o>n;n++)b=m[n],b.visible&&b.Ar(i,a,j,d,l)&&(c=h,b=(i-l.x)*(i-l.x)+(a-l.y)*(a-l.y),k>b&&(k=b,e.set(l)));return y.B(l),e.transform(g),c}return y.m("Unknown GraphObject case"),s},da.tc=function(a,b,c,d,e){var g,i;oj(this),g=y.df(),g.assign(this.Ob),this.Ob.Pa(),bi(this)===s?(i=this.Ob,i.x=a,i.y=b,i.width=c,i.height=d):this.gj(a,b,c,d),this.Ob.freeze(),this.Oj=e===f?q:e,c=s,e!==f?c=h:this.ga&&(c=this.ga.Ic,e=this.Ba,this.ej!==q&&(e=this.Ob),d=b+e.height,i=a+e.width,c=!(a>=0&&i<=c.width&&b>=0&&d<=c.height),this instanceof oa&&(this.tt>e.height||this.Lp.ki>e.width))&&(c=h),this.na=c?256|this.na:-257&this.na,this.Ob.V()||y.m("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.Ob.toString()),rj(this,g,this.Ob),y.Bc(g)},da.gj=aa(),da.we=function(a,b){var c,d,e,f,g,i,j,k,l,m,n;if(this.visible)if(this instanceof D&&(this.type===Fj||this.type===Gj))c=this.Ob,0===c.width||0===c.height||isNaN(c.x)||isNaN(c.y)||(this.Ge!==q&&(Hj(this,a,this.Ge,h,h),a.fillRect(c.x,c.y,c.width,c.height)),this.Uc!==q&&(Hj(this,a,this.Uc,h),a.fillRect(c.x,c.y,c.width,c.height)),this.Hl(a,b));else if(c=this.Ob,!(0===c.width||0===c.height||isNaN(c.x)||isNaN(c.y))){if(d=this.transform,e=this.ga,f=this.km,f.reset(),e!==q&&(e.mi()?f.multiply(e.oe):e.ga!==q&&f.multiply(e.ga.oe)),f.multiply(this.Xc),f=0!==(256&this.na)){if(x&&x.lG&&x.trace("clip"+this.toString()),g=e.mi()?e.Ta:e.ua,this.Oj?(i=this.Oj,j=i.x,k=i.y,l=i.width,i=i.height):(j=Math.max(c.x,g.x),k=Math.max(c.y,g.y),l=Math.min(c.right,g.right)-j,i=Math.min(c.bottom,g.bottom)-k),j>c.width+c.x||c.x>g.width+g.x||k>c.height+c.y||c.y>g.height+g.y)return;a.save(),a.beginPath(),a.rect(j,k,l,i),a.clip()}if(g=s,this instanceof R){if(g=h,!this.xb())return;this.Ck&&(j=this.jn,a.shadowOffsetX=j.x*b.scale,a.shadowOffsetY=j.y*b.scale,a.shadowColor=this.hn,a.shadowBlur=this.gn)}j=s,this.W&&(j=this.W.Ck),this.Ge!==q&&(Hj(this,a,this.Ge,h,h),a.fillRect(c.x,c.y,c.width,c.height)),d.Ir()||a.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy),this.Uc!==q&&(i=this.Ta,k=c=0,l=i.width,i=i.height,m=0,this instanceof V&&(i=this.Na.Ib,c=i.x,k=i.y,l=i.width,i=i.height,m=this.Vg),Hj(this,a,this.Uc,h),a.fillRect(c-m/2,k-m/2,l+m,i+m)),j&&(this.Uc!==q||this.Ge!==q||e!==q&&0!==(512&e.na)||e!==q&&e.type===Ch&&e.Ui!==this)?(this.na|=512,n=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0):this.na&=-513,this.Hl(a,b),j&&0!==(512&this.na)===h&&(a.shadowOffsetX=n[0],a.shadowOffsetY=n[1],a.shadowBlur=n[2]),g&&j&&(a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),f?(a.restore(),Hh(b,a)):d.Ir()||(e=1/(d.m11*d.m22-d.m12*d.m21),a.transform(d.m22*e,-d.m12*e,-d.m21*e,d.m11*e,e*(d.m21*d.dy-d.m22*d.dx),e*(d.m12*d.dx-d.m11*d.dy)))}},da.Hl=aa(),P.prototype.isContainedBy=P.prototype.hi=function(a){if(a instanceof D)a:{if(this!==a&&a!==q)for(var b=this.ga;b!==q;){if(b===a){a=h;break a}b=b.ga}a=s}else a=s;return a},P.prototype.isVisibleObject=P.prototype.Dk=function(){if(!this.visible)return s;var a=this.ga;return a!==q?a.Dk():h},P.prototype.aa=function(a){var b,c,d;if(ai(this)!==h&&(nj(this,h),Bj(this,h),b=this.ga,b!==q?a||b.aa():(a=this.h,a!==q&&(a.xf.add(this),this instanceof T&&(a.va.cb||this.qg(),this.hd!==q&&Lj(this.hd)),a.jc())),this instanceof D))for(c=q,a=this.za,b=a.length,this.Y===Ch&&(c=Mj(this,a,b))&&c.aa(h),a=a.n,c=0;b>c;c++)d=a[c],ai(d)!==h&&(d.Aa.V()||(d instanceof Ag||d instanceof D||d instanceof oa||mj(d)!==dj)&&d.aa(h))},P.prototype.ta=function(){if(this instanceof R){var a=this.h;a!==q&&!bi(this)&&!ci(this)&&this.xb()&&this.Ob.V()&&a.ta(kh(this,this.Ob))}else this.W!==q&&this.W.ta()},y.g(P,"segmentOrientation",P.prototype.is),y.defineProperty(P,{is:"segmentOrientation"},w("Eq"),function(a){var b=this.Eq;b!==a&&(x&&y.rb(a,U,P,"segmentOrientation"),this.Eq=a,this.aa(),this.i("segmentOrientation",b,a))}),y.g(P,"segmentIndex",P.prototype.af),y.defineProperty(P,{af:"segmentIndex"},w("Cq"),function(a){x&&y.j(a,"number",P,"segmentIndex"),a=Math.round(a);var b=this.Cq;b!==a&&(this.Cq=a,this.aa(),this.i("segmentIndex",b,a))}),y.g(P,"segmentFraction",P.prototype.hs),y.defineProperty(P,{hs:"segmentFraction"},w("Bq"),function(a){x&&y.j(a,"number",P,"segmentFraction"),isNaN(a)?a=0:0>a?a=0:a>1&&(a=1);var b=this.Bq;b!==a&&(this.Bq=a,this.aa(),this.i("segmentFraction",b,a))}),y.g(P,"segmentOffset",P.prototype.pz),y.defineProperty(P,{pz:"segmentOffset"},w("Dq"),function(a){var b=this.Dq;b.L(a)||(x&&y.l(a,A,P,"segmentOffset"),this.Dq=a=a.U(),this.aa(),this.i("segmentOffset",b,a))}),y.g(P,"stretch",P.prototype.mh),y.defineProperty(P,{mh:"stretch"},w("Ug"),function(a){var b=this.Ug;b!==a&&(x&&y.rb(a,P,P,"stretch"),this.Ug=a,this.aa(),this.i("stretch",b,a))}),y.g(P,"name",P.prototype.name),y.defineProperty(P,{name:"name"},w("Gb"),function(a){var b=this.Gb;b!==a&&(x&&y.j(a,"string",P,"name"),this.Gb=a,this.W&&(this.W.gk=q),this.i("name",b,a))}),y.g(P,"visible",P.prototype.visible),y.defineProperty(P,{visible:"visible"},function(){return 0!==(1&this.na)},function(a){var b=0!==(1&this.na);b!==a&&(x&&y.j(a,"boolean",P,"visible"),this.na^=1,this.i("visible",b,a),b=this.ga,b!==q?b.aa():this instanceof R&&(this.aa(),Cj(this),a?(this.J(Rj),this.updateAdornments()):(this.J(Sj),this.be())),this.ta(),Tj(this))}),y.g(P,"pickable",P.prototype.$e),y.defineProperty(P,{$e:"pickable"},function(){return 0!==(2&this.na)},function(a){var b=0!==(2&this.na);b!==a&&(x&&y.j(a,"boolean",P,"pickable"),this.na^=2,this.i("pickable",b,a))}),y.g(P,"fromLinkableDuplicates",P.prototype.nC),y.defineProperty(P,{nC:"fromLinkableDuplicates"},function(){return 0!==(4&this.na)},function(a){var b=0!==(4&this.na);b!==a&&(x&&y.j(a,"boolean",P,"fromLinkableDuplicates"),this.na^=4,this.i("fromLinkableDuplicates",b,a))}),y.g(P,"fromLinkableSelfNode",P.prototype.oC),y.defineProperty(P,{oC:"fromLinkableSelfNode"},function(){return 0!==(8&this.na)},function(a){var b=0!==(8&this.na);b!==a&&(x&&y.j(a,"boolean",P,"fromLinkableSelfNode"),this.na^=8,this.i("fromLinkableSelfNode",b,a))}),y.g(P,"toLinkableDuplicates",P.prototype.gE),y.defineProperty(P,{gE:"toLinkableDuplicates"},function(){return 0!==(16&this.na)},function(a){var b=0!==(16&this.na);b!==a&&(x&&y.j(a,"boolean",P,"toLinkableDuplicates"),this.na^=16,this.i("toLinkableDuplicates",b,a))}),y.g(P,"toLinkableSelfNode",P.prototype.hE),y.defineProperty(P,{hE:"toLinkableSelfNode"},function(){return 0!==(32&this.na)},function(a){var b=0!==(32&this.na);b!==a&&(x&&y.j(a,"boolean",P,"toLinkableSelfNode"),this.na^=32,this.i("toLinkableSelfNode",b,a))}),y.g(P,"isPanelMain",P.prototype.ji),y.defineProperty(P,{ji:"isPanelMain"},function(){return 0!==(64&this.na)},function(a){var b=0!==(64&this.na);b!==a&&(x&&y.j(a,"boolean",P,"isPanelMain"),this.na^=64,this.aa(),this.i("isPanelMain",b,a))}),y.g(P,"isActionable",P.prototype.Xu),y.defineProperty(P,{Xu:"isActionable"},function(){return 0!==(128&this.na)},function(a){var b=0!==(128&this.na);b!==a&&(x&&y.j(a,"boolean",P,"isActionable"),this.na^=128,this.i("isActionable",b,a))}),y.g(P,"areaBackground",P.prototype.ej),y.defineProperty(P,{ej:"areaBackground"},w("Ge"),function(a){var b=this.Ge;b!==a&&(a===q||"string"==typeof a||a instanceof Hd)&&(a instanceof Hd&&a.freeze(),this.Ge=a,this.ta(),this.i("areaBackground",b,a))}),y.g(P,"background",P.prototype.background),y.defineProperty(P,{background:"background"},w("Uc"),function(a){var b=this.Uc;b!==a&&(a===q||"string"==typeof a||a instanceof Hd)&&(a instanceof Hd&&a.freeze(),this.Uc=a,this.ta(),this.i("background",b,a))}),y.A(P,{W:"part"},function(){if(this instanceof R)return this;if(this.nl)return this.nl;var a;for(a=this.ga;a;){if(a instanceof R)return this.nl=a;a=a.ga}return q}),P.prototype.Kk=ba("Nh"),y.A(P,{ga:"panel"},w("Nh")),y.A(P,{layer:"layer"},function(){var a=this.W;return a!==q?a.layer:q}),y.A(P,{h:"diagram"},function(){var a=this.W;return a!==q?a.h:q},{configurable:h}),y.g(P,"position",P.prototype.position),y.defineProperty(P,{position:"position"},w("nb"),function(a){var c,d,e,b=this.nb;b.L(a)||(x&&y.l(a,A,P,"position"),a=a.U(),this instanceof R?this instanceof U||!a.V()||(c=this.Fh,this.nb=a,bi(this)===s?(d=c.copy(),e=this.h,c.q(d.x+(a.x-b.x),d.y+(a.y-b.y)),Vj(this),oj(this),Wj(this),!c.L(d)&&e&&this.i("location",d,c)):c.q(0/0,0/0),this.i("position",b,a)):(this.nb=a,Lj(this),oj(this),this.i("position",b,a)))}),y.A(P,{ua:"actualBounds"},w("Ob")),y.g(P,"scale",P.prototype.scale),y.defineProperty(P,{scale:"scale"},w("Qb"),function(a){var b=this.Qb;b!==a&&(x&&y.p(a,P,"scale"),0>=a&&y.m("GraphObject.scale must be greater than zero"),this.Qb=a,oj(this),this.aa(),this.i("scale",b,a))}),y.g(P,"angle",P.prototype.angle),y.defineProperty(P,{angle:"angle"},w("lm"),function(a){var b=this.lm;b!==a&&(x&&y.p(a,P,"angle"),a%=360,0>a&&(a+=360),this.lm=a,this.aa(),oj(this),this.i("angle",b,a))}),y.g(P,"desiredSize",P.prototype.Aa),y.defineProperty(P,{Aa:"desiredSize"},w("He"),function(a){var b=this.He;b.L(a)||(x&&y.l(a,ha,P,"desiredSize"),this.He=a=a.U(),this.aa(),this instanceof V&&this.Lf(),this.i("desiredSize",b,a))}),y.g(P,"width",P.prototype.width),y.defineProperty(P,{width:"width"},function(){return this.He.width},function(a){if(this.He.width!==a){x&&y.j(a,"number",P,"width");var b=this.He;this.He=a=new ha(a,this.He.height).freeze(),this.aa(),this instanceof V&&this.Lf(),this.i("desiredSize",b,a)}}),y.g(P,"height",P.prototype.height),y.defineProperty(P,{height:"height"},function(){return this.He.height},function(a){if(this.He.height!==a){x&&y.j(a,"number",P,"height");var b=this.He;this.He=a=new ha(this.He.width,a).freeze(),this.aa(),this instanceof V&&this.Lf(),this.i("desiredSize",b,a)}}),y.g(P,"minSize",P.prototype.Ce),y.defineProperty(P,{Ce:"minSize"},w("Hd"),function(a){var b=this.Hd;b.L(a)||(x&&y.l(a,ha,P,"minSize"),a=a.copy(),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a.freeze(),this.Hd=a,this.aa(),this.i("minSize",b,a))}),y.g(P,"maxSize",P.prototype.he),y.defineProperty(P,{he:"maxSize"},w("Ki"),function(a){var b=this.Ki;b.L(a)||(x&&y.l(a,ha,P,"maxSize"),a=a.copy(),isNaN(a.width)&&(a.width=1/0),isNaN(a.height)&&(a.height=1/0),a.freeze(),this.Ki=a,this.aa(),this.i("maxSize",b,a))}),y.A(P,{Ba:"measuredBounds"},w("wc")),y.A(P,{Ta:"naturalBounds"},w("Ic"),{configurable:h}),y.g(P,"margin",P.prototype.margin),y.defineProperty(P,{margin:"margin"},w("Up"),function(a){"number"==typeof a?a=new ab(a):x&&y.l(a,ab,P,"margin");var b=this.Up;b.L(a)||(this.Up=a=a.U(),this.aa(),this.i("margin",b,a))}),y.A(P,{transform:q},function(){return 0!==(2048&this.na)===h&&Ij(this),this.Xc}),y.A(P,{oe:q},function(){return 0!==(4096&this.na)===h&&Ij(this),this.km}),y.g(P,"alignment",P.prototype.alignment),y.defineProperty(P,{alignment:"alignment"},w("Ud"),function(a){var b=this.Ud;b.L(a)||(x?y.l(a,J,P,"alignment"):Cb(a)&&!Db(a)&&y.m("alignment must be a real Spot or Spot.Default"),this.Ud=a=a.U(),Lj(this),this.i("alignment",b,a))}),y.g(P,"column",P.prototype.column),y.defineProperty(P,{column:"column"},w("Wo"),function(a){x&&y.p(a,P,"column"),a=Math.round(a);var b=this.Wo;b!==a&&(0>a&&y.ka(a,">= 0",P,"column"),this.Wo=a,this.aa(),this.i("column",b,a))}),y.g(P,"columnSpan",P.prototype.OB),y.defineProperty(P,{OB:"columnSpan"},w("Pj"),function(a){x&&y.p(a,P,"columnSpan"),a=Math.round(a);var b=this.Pj;b!==a&&(1>a&&y.ka(a,">= 1",P,"columnSpan"),this.Pj=a,this.aa(),this.i("columnSpan",b,a))}),y.g(P,"row",P.prototype.qc),y.defineProperty(P,{qc:"row"},w("zq"),function(a){x&&y.p(a,P,"row"),a=Math.round(a);var b=this.zq;b!==a&&(0>a&&y.ka(a,">= 0",P,"row"),this.zq=a,this.aa(),this.i("row",b,a))}),y.g(P,"rowSpan",P.prototype.rowSpan),y.defineProperty(P,{rowSpan:"rowSpan"},w("lk"),function(a){x&&y.p(a,P,"rowSpan"),a=Math.round(a);var b=this.lk;b!==a&&(1>a&&y.ka(a,">= 1",P,"rowSpan"),this.lk=a,this.aa(),this.i("rowSpan",b,a))}),y.g(P,"alignmentFocus",P.prototype.bj),y.defineProperty(P,{bj:"alignmentFocus"},w("Qo"),function(a){var b=this.Qo;b.L(a)||(x?y.l(a,J,P,"alignmentFocus"):Cb(a)&&!Db(a)&&y.m("alignmentFocus must be a real Spot or Spot.Default"),this.Qo=a=a.U(),this.aa(),this.i("alignmentFocus",b,a))}),y.g(P,"portId",P.prototype.Td),y.defineProperty(P,{Td:"portId"},w("oq"),function(a){var c,b=this.oq;b!==a&&(x&&a!==q&&y.j(a,"string",P,"portId"),c=this.W,c!==q&&!(c instanceof T)&&(y.m("portID being set on a Link: "+a),c=q),b!==q&&c&&Xj(c,this),this.oq=a,a!==q&&c&&(c.Bi=h,c.dd===q&&Yj(c),Zj(c,this)),this.i("portId",b,a))}),y.g(P,"toSpot",P.prototype.kb),y.defineProperty(P,{kb:"toSpot"},function(){return this.P!==q?this.P.Zi:Hb},function(a){this.P===q&&this.fe();var b=this.P.Zi;b.L(a)||(x&&y.l(a,J,P,"toSpot"),a=a.U(),this.P.Zi=a,this.i("toSpot",b,a),Tj(this))}),y.g(P,"toEndSegmentLength",P.prototype.cm),y.defineProperty(P,{cm:"toEndSegmentLength"},function(){return this.P!==q?this.P.Xi:10},function(a){this.P===q&&this.fe();var b=this.P.Xi;b!==a&&(x&&y.j(a,"number",P,"toEndSegmentLength"),0>a&&y.ka(a,">= 0",P,"toEndSegmentLength"),this.P.Xi=a,this.i("toEndSegmentLength",b,a),Tj(this))}),y.g(P,"toEndSegmentDirection",P.prototype.Dv),y.defineProperty(P,{Dv:"toEndSegmentDirection"},function(){return this.P!==q?this.P.Wi:hj},function(a){this.P===q&&this.fe();var b=this.P.Wi;b!==a&&(x&&y.rb(a,T,P,"toEndSegmentDirection"),this.P.Wi=a,this.i("toEndSegmentDirection",b,a),Tj(this))}),y.g(P,"toShortLength",P.prototype.Ev),y.defineProperty(P,{Ev:"toShortLength"},function(){return this.P!==q?this.P.Yi:0},function(a){this.P===q&&this.fe();var b=this.P.Yi;b!==a&&(x&&y.j(a,"number",P,"toShortLength"),this.P.Yi=a,this.i("toShortLength",b,a),Tj(this))}),y.g(P,"toLinkable",P.prototype.Dz),y.defineProperty(P,{Dz:"toLinkable"},w("Uq"),function(a){var b=this.Uq;b!==a&&(x&&a!==q&&y.j(a,"boolean",P,"toLinkable"),this.Uq=a,this.i("toLinkable",b,a))}),y.g(P,"toMaxLinks",P.prototype.iE),y.defineProperty(P,{iE:"toMaxLinks"},w("Vq"),function(a){var b=this.Vq;b!==a&&(x&&y.p(a,P,"toMaxLinks"),0>a&&y.ka(a,">= 0",P,"toMaxLinks"),this.Vq=a,this.i("toMaxLinks",b,a))}),y.g(P,"fromSpot",P.prototype.gb),y.defineProperty(P,{gb:"fromSpot"},function(){return this.P!==q?this.P.zi:Hb},function(a){this.P===q&&this.fe();var b=this.P.zi;b.L(a)||(x&&y.l(a,J,P,"fromSpot"),a=a.U(),this.P.zi=a,this.i("fromSpot",b,a),Tj(this))}),y.g(P,"fromEndSegmentLength",P.prototype.Kl),y.defineProperty(P,{Kl:"fromEndSegmentLength"},function(){return this.P!==q?this.P.xi:10},function(a){this.P===q&&this.fe();var b=this.P.xi;b!==a&&(x&&y.j(a,"number",P,"fromEndSegmentLength"),0>a&&y.ka(a,">= 0",P,"fromEndSegmentLength"),this.P.xi=a,this.i("fromEndSegmentLength",b,a),Tj(this))}),y.g(P,"fromEndSegmentDirection",P.prototype.Qu),y.defineProperty(P,{Qu:"fromEndSegmentDirection"},function(){return this.P!==q?this.P.wi:hj},function(a){this.P===q&&this.fe();var b=this.P.wi;b!==a&&(x&&y.rb(a,T,P,"fromEndSegmentDirection"),this.P.wi=a,this.i("fromEndSegmentDirection",b,a),Tj(this))}),y.g(P,"fromShortLength",P.prototype.Ru),y.defineProperty(P,{Ru:"fromShortLength"},function(){return this.P!==q?this.P.yi:0},function(a){this.P===q&&this.fe();var b=this.P.yi;b!==a&&(x&&y.j(a,"number",P,"fromShortLength"),this.P.yi=a,this.i("fromShortLength",b,a),Tj(this))}),y.g(P,"fromLinkable",P.prototype.Ay),y.defineProperty(P,{Ay:"fromLinkable"},w("np"),function(a){var b=this.np;b!==a&&(x&&a!==q&&y.j(a,"boolean",P,"fromLinkable"),this.np=a,this.i("fromLinkable",b,a))}),y.g(P,"fromMaxLinks",P.prototype.pC),y.defineProperty(P,{pC:"fromMaxLinks"},w("op"),function(a){var b=this.op;b!==a&&(x&&y.p(a,P,"fromMaxLinks"),0>a&&y.ka(a,">= 0",P,"fromMaxLinks"),this.op=a,this.i("fromMaxLinks",b,a))}),y.g(P,"cursor",P.prototype.cursor),y.defineProperty(P,{cursor:"cursor"},w("bp"),function(a){var b=this.bp;b!==a&&(y.j(a,"string",P,"cursor"),this.bp=a,this.i("cursor",b,a))}),y.g(P,"click",P.prototype.click),y.defineProperty(P,{click:"click"},function(){return this.O!==q?this.O.uh:q},function(a){this.O===q&&gj(this);var b=this.O.uh;b!==a&&(a!==q&&y.j(a,"function",P,"click"),this.O.uh=a,this.i("click",b,a))}),y.g(P,"doubleClick",P.prototype.Fl),y.defineProperty(P,{Fl:"doubleClick"},function(){return this.O!==q?this.O.zh:q},function(a){this.O===q&&gj(this);var b=this.O.zh;b!==a&&(a!==q&&y.j(a,"function",P,"doubleClick"),this.O.zh=a,this.i("doubleClick",b,a))}),y.g(P,"contextClick",P.prototype.qr),y.defineProperty(P,{qr:"contextClick"},function(){return this.O!==q?this.O.vh:q},function(a){this.O===q&&gj(this);var b=this.O.vh;b!==a&&(a!==q&&y.j(a,"function",P,"contextClick"),this.O.vh=a,this.i("contextClick",b,a))}),y.g(P,"mouseEnter",P.prototype.Wy),y.defineProperty(P,{Wy:"mouseEnter"},function(){return this.O!==q?this.O.eq:q},function(a){this.O===q&&gj(this);var b=this.O.eq;b!==a&&(a!==q&&y.j(a,"function",P,"mouseEnter"),this.O.eq=a,this.i("mouseEnter",b,a))}),y.g(P,"mouseLeave",P.prototype.Xy),y.defineProperty(P,{Xy:"mouseLeave"},function(){return this.O!==q?this.O.fq:q},function(a){this.O===q&&gj(this);var b=this.O.fq;b!==a&&(a!==q&&y.j(a,"function",P,"mouseLeave"),this.O.fq=a,this.i("mouseLeave",b,a))}),y.g(P,"mouseOver",P.prototype.Tr),y.defineProperty(P,{Tr:"mouseOver"},function(){return this.O!==q?this.O.Jh:q},function(a){this.O===q&&gj(this);var b=this.O.Jh;b!==a&&(a!==q&&y.j(a,"function",P,"mouseOver"),this.O.Jh=a,this.i("mouseOver",b,a))}),y.g(P,"mouseHover",P.prototype.Sr),y.defineProperty(P,{Sr:"mouseHover"},function(){return this.O!==q?this.O.Ih:q},function(a){this.O===q&&gj(this);var b=this.O.Ih;b!==a&&(a!==q&&y.j(a,"function",P,"mouseHover"),this.O.Ih=a,this.i("mouseHover",b,a))}),y.g(P,"mouseHold",P.prototype.Rr),y.defineProperty(P,{Rr:"mouseHold"},function(){return this.O!==q?this.O.Hh:q},function(a){this.O===q&&gj(this);var b=this.O.Hh;b!==a&&(a!==q&&y.j(a,"function",P,"mouseHold"),this.O.Hh=a,this.i("mouseHold",b,a))}),y.g(P,"mouseDragEnter",P.prototype.fD),y.defineProperty(P,{fD:"mouseDragEnter"},function(){return this.O!==q?this.O.cq:q},function(a){this.O===q&&gj(this);var b=this.O.cq;b!==a&&(a!==q&&y.j(a,"function",P,"mouseDragEnter"),this.O.cq=a,this.i("mouseDragEnter",b,a))}),y.g(P,"mouseDragLeave",P.prototype.Vy),y.defineProperty(P,{Vy:"mouseDragLeave"},function(){return this.O!==q?this.O.dq:q},function(a){this.O===q&&gj(this);var b=this.O.dq;b!==a&&(a!==q&&y.j(a,"function",P,"mouseDragLeave"),this.O.dq=a,this.i("mouseDragLeave",b,a))}),y.g(P,"mouseDrop",P.prototype.Qr),y.defineProperty(P,{Qr:"mouseDrop"},function(){return this.O!==q?this.O.Gh:q},function(a){this.O===q&&gj(this);var b=this.O.Gh;b!==a&&(a!==q&&y.j(a,"function",P,"mouseDrop"),this.O.Gh=a,this.i("mouseDrop",b,a))}),y.g(P,"actionDown",P.prototype.Yx),y.defineProperty(P,{Yx:"actionDown"},function(){return this.O!==q?this.O.Mo:q},function(a){this.O===q&&gj(this);var b=this.O.Mo;b!==a&&(a!==q&&y.j(a,"function",P,"actionDown"),this.O.Mo=a,this.i("actionDown",b,a))}),y.g(P,"actionUp",P.prototype.$x),y.defineProperty(P,{$x:"actionUp"},function(){return this.O!==q?this.O.Oo:q},function(a){this.O===q&&gj(this);var b=this.O.Oo;b!==a&&(a!==q&&y.j(a,"function",P,"actionUp"),this.O.Oo=a,this.i("actionUp",b,a))}),y.g(P,"actionMove",P.prototype.Zx),y.defineProperty(P,{Zx:"actionMove"},function(){return this.O!==q?this.O.No:q},function(a){this.O===q&&gj(this);var b=this.O.No;b!==a&&(a!==q&&y.j(a,"function",P,"actionMove"),this.O.No=a,this.i("actionMove",b,a))}),y.g(P,"actionCancel",P.prototype.Xx),y.defineProperty(P,{Xx:"actionCancel"},function(){return this.O!==q?this.O.Lo:q},function(a){this.O===q&&gj(this);var b=this.O.Lo;b!==a&&(a!==q&&y.j(a,"function",P,"actionCancel"),this.O.Lo=a,this.i("actionCancel",b,a))}),y.g(P,"toolTip",P.prototype.ts),y.defineProperty(P,{ts:"toolTip"},function(){return this.O!==q?this.O.Th:q},function(a){this.O===q&&gj(this);var b=this.O.Th;b!==a&&(a!==q&&y.l(a,Ge,P,"toolTip"),this.O.Th=a,this.i("toolTip",b,a))}),y.g(P,"contextMenu",P.prototype.contextMenu),y.defineProperty(P,{contextMenu:"contextMenu"},function(){return this.O!==q?this.O.wh:q},function(a){this.O===q&&gj(this);var b=this.O.wh;b!==a&&(a!==q&&y.l(a,Ge,P,"contextMenu"),this.O.wh=a,this.i("contextMenu",b,a))}),P.prototype.bind=P.prototype.bind=function(a){a.Cf=this;var b=this.Rn();b!==q&&ck(b)&&y.m("Cannot add a Binding to a template that has already been copied: "+a),this.rc===q&&(this.rc=new F(be)),this.rc.add(a)},P.prototype.findTemplateBinder=P.prototype.Rn=function(){for(var a=this instanceof D?this:this.ga;a!==q;){if(a.Sk!==q&&a instanceof D)return a;a=a.ga}return q},P.fromSvg=function(a){return dk(a)},P.setProperties=P.prototype.uJ=function(a){y.tv(this,a)},P.make=ek=function(a){var e,g,i,j,c=q,d=q;for("function"==typeof a?d=a:"string"==typeof a&&(e=fk.wa(a),"function"==typeof e?c=e():d=fa[a]),c===q&&(d===f&&(c=window.$,c!==f&&c.noop!==f&&y.m("GraphObject.make failed to complete. Is it conflicting with another $ var? (such as jQuery)"),y.m("GraphObject.make failed to complete, it may be conflicting with another var.")),(d===q||!d.constructor)&&y.m("GraphObject.make requires a class function or class name, not: "+a),c=new d),e=1,c instanceof E&&1<arguments.length&&(d=arguments[1],"string"==typeof d||d instanceof HTMLDivElement?(c.bi=q,th(c,d),e++):y.m("Unknown argument to Diagram constructor: "+d));e<arguments.length;e++)if(d=arguments[e],d===f)y.m("Undefined value at argument "+e+" for object being constructed by GraphObject.make: "+c);else if("string"==typeof d)c instanceof oa?c.text=d:c instanceof V?c.wb=d:c instanceof gk?c.source=d:c instanceof D?(g=y.Il(D,d),g!==q?c.type=g:y.m("Unknown Panel type as an argument to GraphObject.make: "+d)):c instanceof Hd?(g=y.Il(Hd,d),g!==q?c.type=g:y.m("Unknown Brush type as an argument to GraphObject.make: "+d)):c instanceof nc?(g=y.Il(nc,d),g!==q?c.type=g:y.m("Unknown Geometry type as an argument to GraphObject.make: "+d)):c instanceof hd?(g=y.Il(hd,d),g!==q?c.type=g:y.m("Unknown PathSegment type as an argument to GraphObject.make: "+d)):y.m("Unable to use a string as an argument to GraphObject.make: "+d);else if(d instanceof P)c instanceof D||y.m("A GraphObject can only be added to a Panel, not to: "+c),c.add(d);else if(d instanceof hk)c instanceof D||y.m("A RowColumnDefinition can only be added to a Panel, not to: "+c),g=d.eh?c.Od(d.index):c.Nd(d.index),y.l(d,hk,hk,"copyFrom:pd"),d.eh?g.height=d.height:g.width=d.width,g.gh=d.gh,g.Xe=d.Xe,g.alignment=d.alignment,g.ns=d.ns,g.Si=d.Si===q?q:d.Si.U(),g.Xl=d.Xl,g.Yl=d.Yl,g.Qg=q,d.Qg&&(g.Qg=d.Qg.slice(0)),g.background=d.background,g.Eu=d.Eu,g.rc=d.rc;else if(d instanceof ga)c instanceof U&&d.re===U?d===ik||d===xf?c.jh=d:d===vg||d===jk||d===kk?c.Se=d:d===lk||d===mk||d===nk?c.pu=d:d===ok||d===cj||y.m("Unknown Link enum value for a Link property: "+d):c instanceof D&&d.re===D?c.type=d:c instanceof oa&&d.re===oa?c.Iz=d:c instanceof P&&d.re===U?0===d.name.indexOf("Orient")?c.is=d:y.m("Unknown Link enum value for GraphObject.segmentOrientation property: "+d):c instanceof P&&d.re===P?c.mh=d:c instanceof E&&d.re===E?c.wl=d:c instanceof Hd&&d.re===Hd?c.type=d:c instanceof nc&&d.re===nc?c.type=d:c instanceof hd&&d.re===hd?c.type=d:c instanceof be&&d.re===be?c.mode=d:c instanceof md&&d.re===md?c.Yc=d:c instanceof Y&&d.re===Y?0===d.name.indexOf("Alignment")?c.alignment=d:0===d.name.indexOf("Arrangement")?c.qe=d:0===d.name.indexOf("Compaction")?c.compaction=d:0===d.name.indexOf("Path")?c.path=d:0===d.name.indexOf("Sorting")?c.sorting=d:0===d.name.indexOf("Style")?c.rE=d:y.m("Unknown enum value: "+d):c instanceof pk&&d.re===pk?0===d.name.indexOf("Aggressive")?c.AB=d:0===d.name.indexOf("Cycle")?c.WB=d:0===d.name.indexOf("Init")?c.HC=d:0===d.name.indexOf("Layer")?c.RC=d:y.m("Unknown enum value: "+d):c instanceof Zi&&d.re===Zi?d===qk||d===rk||d===sk||d===tk?c.sorting=d:d===uk||d===vk?c.qe=d:d===wk||d===xk?c.alignment=d:y.m("Unknown enum value: "+d):c instanceof yk&&d.re===yk?d===zk||d===Ak||d===Bk||d===Ck||d===Dk?c.sorting=d:d===Ek||d===Fk||d===Gk||d===Hk?c.direction=d:d===Ik||d===Jk||d===Kk||d===Lk?c.qe=d:d===Mk||d===Nk?c.Xr=d:y.m("Unknown enum value: "+d):y.m("No property to set for this enum value: "+d);
else if(d instanceof be)c instanceof P||c instanceof hk?c.bind(d):y.m("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+c);else if(d instanceof pc)c instanceof nc?c.fb.add(d):y.m("A PathFigure can only be added to a Geometry, not to: "+c);else if(d instanceof hd)c instanceof pc?c.Ca.add(d):y.m("A PathSegment can only be added to a PathFigure, not to: "+c);else if(y.sb(d))if(c instanceof Hd){g={};for(i in d)j=parseFloat(i),isNaN(j)?g[i]=d[i]:c.addColorStop(j,d[i]);y.tv(c,g)}else c instanceof hk?(d.row!==f?(g=d.row,(g===f||g===q||1/0===g||isNaN(g)||0>g)&&y.m("Must specify non-negative integer row for RowColumnDefinition "+d),c.dl=h,c.Vd=g):d.column!==f?(g=d.column,(g===f||g===q||1/0===g||isNaN(g)||0>g)&&y.m("Must specify non-negative integer column for RowColumnDefinition "+d),c.dl=s,c.Vd=g):y.m("Must specify row or column value in a RowColumnDefinition "+d),g=y.OF(d,"row","column"),y.tv(c,g)):y.tv(c,d);else y.m('Unknown initializer "'+d+'" for object being constructed by GraphObject.make: '+c);return c},P.Builders=fk=new ma("string","function"),fk.add("Button",function(){var b,c,a=new Hd(Kd);return a.addColorStop(0,"white"),a.addColorStop(1,"lightgray"),b=new Hd(Kd),b.addColorStop(0,"white"),b.addColorStop(1,"dodgerblue"),c=ek(D,Ch,{Xu:h},ek(V,{name:"ButtonBorder",wb:"RoundedRectangle",fill:a,stroke:"gray"})),c.Wy=function(a,c){var d=c.sa(0),e=c._buttonFillOver;e===f&&(e=b),c._buttonFillNormal=d.fill,d.fill=e,e=c._buttonStrokeOver,e===f&&(e="blue"),c._buttonStrokeNormal=d.stroke,d.stroke=e},c.Xy=function(b,c){var d=c.sa(0),e=c._buttonFillNormal;e===f&&(e=a),d.fill=e,e=c._buttonStrokeNormal,e===f&&(e="gray"),d.stroke=e},c}),fk.add("TreeExpanderButton",function(){var a=ek("Button",ek(V,{name:"ButtonIcon",wb:"MinusLine",Aa:H.fm},new be("figure","isTreeExpanded",function(a,b){var c=q,d=b.ga;return d&&(c=a?d._treeExpandedFigure:d._treeCollapsedFigure),c||(c=a?"MinusLine":"PlusLine"),c}).bz("")),{visible:s},new be("visible","isTreeLeaf",function(a){return!a}).bz(""));return a.click=function(a,b){var d,c=b.W;c instanceof T&&(d=c.h,d===q||d.Za||(a.ee=h,c.Cc?d.Pe.collapseTree(c):d.Pe.expandTree(c)))},a}),fk.add("SubGraphExpanderButton",function(){var a=ek("Button",ek(V,{name:"ButtonIcon",wb:"MinusLine",Aa:H.fm},new be("figure","isSubGraphExpanded",function(a,b){var c=q,d=b.ga;return d&&(c=a?d._subGraphExpandedFigure:d._subGraphCollapsedFigure),c||(c=a?"MinusLine":"PlusLine"),c}).bz("")));return a.click=function(a,b){var d,c=b.W;c instanceof He&&(d=c.h,d===q||d.Za||(a.ee=h,c.Ue?d.Pe.collapseSubGraph(c):d.Pe.expandSubGraph(c)))},a}),fk.add("ContextMenuButton",function(){var b,a=ek("Button");return a.mh=fj,b=a.xe("ButtonBorder"),b instanceof V&&(b.wb="Rectangle",b.G=new J(0,0,2,2),b.H=new J(1,1,-2,-2)),a}),y.ba("Panel",D),y.Ka(D,P),D.prototype.cloneProtected=function(a){var b,c,d,e,g;if(P.prototype.cloneProtected.call(this,a),a.Y=this.Y,a.ne=this.ne.U(),a.gg=this.gg,a.mf=this.mf,a.ep=this.ep.U(),a.ec=this.ec,a.Y===Pj){if(a.ti=this.ti.U(),a.Fg=this.Fg,a.yh=this.yh,a.Zk=this.Zk,a.Eg=this.Eg,a.Dg=this.Dg,a.Yk=this.Yk,b=[],0<this.Kc.length)for(c=this.Kc,d=c.length,e=0;d>e;e++)c[e]!==f&&(g=c[e].copy(),g.Kk(a),b[e]=g);if(a.Kc=b,b=[],0<this.Ec.length)for(c=this.Ec,d=c.length,e=0;d>e;e++)c[e]!==f&&(g=c[e].copy(),g.Kk(a),b[e]=g);a.Ec=b,a.ol=this.ol,a.Uk=this.Uk,a.$i=this.$i,a.Ei=this.Ei}a.rn=this.rn,a.sp.assign(this.sp),a.tp=this.tp.U(),a.rm=this.rm,a.Sk=this.Sk,a.$w=this.$w,a.bk=this.bk,a.hg=this.hg,a.Om=this.Om,a.Uh.assign(this.Uh),a.Bi=this.Bi,this._buttonFillNormal&&(a._buttonFillNormal=this._buttonFillNormal),this._buttonFillOver&&(a._buttonFillOver=this._buttonFillOver),this._buttonStrokeNormal&&(a._buttonStrokeNormal=this._buttonStrokeNormal),this._buttonStrokeOver&&(a._buttonStrokeOver=this._buttonStrokeOver),this._treeExpandedFigure&&(a._treeExpandedFigure=this._treeExpandedFigure),this._treeCollapsedFigure&&(a._treeCollapsedFigure=this._treeCollapsedFigure),this._subGraphExpandedFigure&&(a._subGraphExpandedFigure=this._subGraphExpandedFigure),this._subGraphCollapsedFigure&&(a._subGraphCollapsedFigure=this._subGraphCollapsedFigure)},D.prototype.ah=function(a){P.prototype.ah.call(this,a),a.za=this.za;for(var b=a.za.k;b.next();)b.value.Nh=a},D.prototype.copy=function(){var b,c,d,e,f,g,i,j,a=P.prototype.copy.call(this);if(a instanceof D){if(b=this.za,0<b.length)for(c=b.length,d=0;c>d;d++)e=b.n[d].copy(),f=a,e.Kk(f),e.nl=q,g=f.za,i=g.count,g.wd(i,e),g=f.W,g!==q&&(g.gk=q,e.Td!==q&&g instanceof T&&(g.Bi=h),j=f.h,j!==q&&j.va.cb||g.Qc(td,"elements",f,q,e,q,i));return a}return q},D.prototype.toString=function(){return"Panel("+this.type+")#"+y.ac(this)},D.Position=Fg=y.w(D,"Position",0),D.Horizontal=y.w(D,"Horizontal",1),D.Vertical=uh=y.w(D,"Vertical",2),D.Spot=zg=y.w(D,"Spot",3),D.Auto=Ch=y.w(D,"Auto",4),D.Table=Pj=y.w(D,"Table",5),D.Viewbox=y.w(D,"Viewbox",6),D.TableRow=Fj=y.w(D,"TableRow",7),D.TableColumn=Gj=y.w(D,"TableColumn",8),D.Link=ig=y.w(D,"Link",9),D.Grid=Jh=y.w(D,"Grid",10),y.g(D,"type",D.prototype.type),y.defineProperty(D,{type:"type"},w("Y"),function(a){var b=this.Y;b!==a&&(x&&y.rb(a,D,D,"type"),(b===Fj||b===Gj)&&y.m("Cannot change Panel.type when it is already a TableRow or a TableColumn: "+a),this.Y=a,this.Y===Jh?this.gg=h:this.Y===Pj&&Ok(this),this.aa(),this.i("type",b,a))}),y.A(D,{elements:"elements"},function(){return this.za.k}),y.A(D,{Ta:"naturalBounds"},w("Ic")),y.g(D,"padding",D.prototype.padding),y.defineProperty(D,{padding:"padding"},w("ne"),function(a){"number"==typeof a?(0>a&&y.ka(a,">= 0",D,"padding"),a=new ab(a)):(y.l(a,ab,D,"padding"),0>a.left&&y.ka(a.left,">= 0",D,"padding:val.left"),0>a.right&&y.ka(a.right,">= 0",D,"padding:val.right"),0>a.top&&y.ka(a.top,">= 0",D,"padding:val.top"),0>a.bottom&&y.ka(a.bottom,">= 0",D,"padding:val.bottom"));var b=this.ne;b.L(a)||(this.ne=a=a.U(),this.aa(),this.i("padding",b,a))}),y.g(D,"defaultAlignment",D.prototype.kj),y.defineProperty(D,{kj:"defaultAlignment"},w("ep"),function(a){var b=this.ep;b.L(a)||(x&&y.l(a,J,D,"defaultAlignment"),this.ep=a=a.U(),this.aa(),this.i("defaultAlignment",b,a))}),y.g(D,"defaultStretch",D.prototype.sy),y.defineProperty(D,{sy:"defaultStretch"},w("ec"),function(a){var b=this.ec;b!==a&&(y.rb(a,P,D,"defaultStretch"),this.ec=a,this.aa(),this.i("defaultStretch",b,a))}),y.g(D,"defaultSeparatorPadding",D.prototype.cG),y.defineProperty(D,{cG:"defaultSeparatorPadding"},function(){return this.ti===f?H.Ko:this.ti},function(a){if(this.ti!==f){"number"==typeof a?a=new ab(a):x&&y.l(a,ab,D,"defaultSeparatorPadding");var b=this.ti;b.L(a)||(this.ti=a=a.U(),this.i("defaultSeparatorPadding",b,a))}}),y.g(D,"defaultRowSeparatorStroke",D.prototype.aG),y.defineProperty(D,{aG:"defaultRowSeparatorStroke"},function(){return this.yh===f?q:this.yh},function(a){var b=this.yh;b!==a&&(a===q||"string"==typeof a||a instanceof Hd)&&(a instanceof Hd&&a.freeze(),this.yh=a,this.i("defaultRowSeparatorStroke",b,a))}),y.g(D,"defaultRowSeparatorStrokeWidth",D.prototype.bG),y.defineProperty(D,{bG:"defaultRowSeparatorStrokeWidth"},function(){return this.Fg===f?1:this.Fg},function(a){if(this.Fg!==f){var b=this.Fg;b!==a&&(this.Fg=a,this.i("defaultRowSeparatorStrokeWidth",b,a))}}),y.g(D,"defaultRowSeparatorDashArray",D.prototype.$F),y.defineProperty(D,{$F:"defaultRowSeparatorDashArray"},function(){return this.Zk===f?q:this.Zk},function(a){if(this.Zk!==f){var b=this.Zk;b!==a&&(a instanceof Array||y.Kb(a,"Array",D,"defaultRowSeparatorDashArray:val"),this.Zk=a,this.i("defaultRowSeparatorDashArray",b,a))}}),y.g(D,"defaultColumnSeparatorStroke",D.prototype.TF),y.defineProperty(D,{TF:"defaultColumnSeparatorStroke"},function(){return this.Dg===f?q:this.Dg},function(a){if(this.Dg!==f){var b=this.Dg;b!==a&&(a===q||"string"==typeof a||a instanceof Hd)&&(a instanceof Hd&&a.freeze(),this.Dg=a,this.i("defaultColumnSeparatorStroke",b,a))}}),y.g(D,"defaultColumnSeparatorStrokeWidth",D.prototype.UF),y.defineProperty(D,{UF:"defaultColumnSeparatorStrokeWidth"},function(){return this.Eg===f?1:this.Eg},function(a){if(this.Eg!==f){var b=this.Eg;b!==a&&(this.Eg=a,this.i("defaultColumnSeparatorStrokeWidth",b,a))}}),y.g(D,"defaultColumnSeparatorDashArray",D.prototype.SF),y.defineProperty(D,{SF:"defaultColumnSeparatorDashArray"},function(){return this.Yk===f?q:this.Yk},function(a){if(this.Yk!==f){var b=this.Yk;b!==a&&(a instanceof Array||y.Kb(a,"Array",D,"defaultColumnSeparatorDashArray:val"),this.Yk=a,this.i("defaultColumnSeparatorDashArray",b,a))}}),y.g(D,"viewboxStretch",D.prototype.IH),y.defineProperty(D,{IH:"viewboxStretch"},w("rn"),function(a){var b=this.rn;b!==a&&(y.rb(a,P,D,"viewboxStretch"),this.rn=a,this.i("viewboxStretch",b,a))}),y.g(D,"gridCellSize",D.prototype.Br),y.defineProperty(D,{Br:"gridCellSize"},w("sp"),function(a){var b=this.sp;b.L(a)||(y.l(a,ha,D,"gridCellSize"),(!a.V()||0===a.width||0===a.height)&&y.m("Invalid Panel.gridCellSize: "+a),this.sp=a.U(),this.h!==q&&this===this.h.Wn&&Xh(this.h),this.ta(),this.i("gridCellSize",b,a))}),y.g(D,"gridOrigin",D.prototype.Dy),y.defineProperty(D,{Dy:"gridOrigin"},w("tp"),function(a){var b=this.tp;b.L(a)||(y.l(a,A,D,"gridOrigin"),a.V()||y.m("Invalid Panel.gridOrigin: "+a),this.tp=a.U(),this.ta(),this.i("gridOrigin",b,a))}),D.prototype.Hl=function(a,b){var e,g,i,j,k,l,m,n,o,p,r,t,u,v,w,z,A,B,c=this.opacity,d=1;if(1!==c&&(d=a.globalAlpha,a.globalAlpha=d*c),this.Y===Jh){for(c=this.rj()*b.scale,0>=c&&(c=1),e=this.Br,d=e.width,e=e.height,g=this.Ta,i=g.width,g=g.height,j=Math.ceil(i/d),k=Math.ceil(g/e),l=this.Dy,a.save(),a.beginPath(),a.rect(0,0,i,g),a.clip(),m=[],n=this.za.n,o=this.za.length,p=0;o>p;p++)if(r=[],m.push(r),t=n[p],t.visible)for(t="LineV"===t.wb,u=p+1;o>u;u++)v=n[u],v.visible&&"LineV"===v.wb===t&&(v=v.fi,v>=2&&r.push(v));for(n=this.za.length,o=0;n>o;o++)if(p=this.za.n[o],p.visible){if(r=m[o],t=p.fi,u=s,v=p.yz,v!==q&&(w=u=h,a.setLineDash!==f?(a.setLineDash(v),a.lineDashOffset=p.Lc):a.webkitLineDash!==f?(a.webkitLineDash=v,a.webkitLineDashOffset=p.Lc):a.mozDash!==f?(a.mozDash=v,a.mozDashOffset=p.Lc):w=s),a.lineWidth=p.jb,Hj(this,a,p.stroke,s),a.beginPath(),"LineV"===p.wb)for(z=Math.floor(-l.x/d),A=z;z+j>=A&&(B=A*d+l.x,!(B>=0&&i>B&&Qk(A,t,r)&&(u&&!w?ij(a,B,0,B,g,v,p.Lc):(a.moveTo(B,0),a.lineTo(B,g)),2>d*t*c)));A++);else for(A=z=Math.floor(-l.y/e);z+k>=A&&(B=A*e+l.y,!(B>=0&&g>=B&&Qk(A,t,r)&&(u&&!w?ij(a,0,B,i,B,v,p.Lc):(a.moveTo(0,B),a.lineTo(i,B)),2>e*t*c)));A++);a.stroke(),u&&(a.setLineDash!==f?(a.setLineDash(y.rh),a.lineDashOffset=0):a.webkitLineDash!==f?(a.webkitLineDash=y.rh,a.webkitLineDashOffset=0):a.mozDash!==f&&(a.mozDash=q,a.mozDashOffset=0))}a.restore(),Hh(b,a)}else{for(this.Y===Pj&&(a.lineCap="butt",Rk(this,a,h,this.Kc,h),Rk(this,a,s,this.Ec,h),Sk(this,a,h,this.Kc),Sk(this,a,s,this.Ec),Rk(this,a,h,this.Kc,s),Rk(this,a,s,this.Ec,s)),w=this.za.length,e=0;w>e;e++)this.za.n[e].we(a,b);x&&x.nI&&this instanceof U&&x.mI(a,b,this),1!==c&&(a.globalAlpha=d)}},D.prototype.Nr=function(a,b,c,d){var g,i,j,k,l,m,n,o,p,r,t,u,v,w,x,z,A,C,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,pb,qb,jb,kb,lb,mb,nb,ob,rb,sb,tb,ub,vb,wb,xb,zb,Ab,Bb,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Tb,Ub,Vb,Wb,Xb,Yb,Zb,$b,_b,ac,bc,ec,fc,cc,dc,gc,hc,ic,jc,kc,lc,mc,nc,oc,pc,rc,sc,tc,uc,vc,wc,xc,yc,zc,Ac,Bc,Cc,Dc,Ec,Fc,Gc,Hc,Ic,Jc,Kc,Lc,Mc,Nc,Oc,Pc,Qc,Rc,Sc,Tc,Uc,Vc,Wc,Xc,Yc,Zc,$c,_c,ad,bd,cd,dd,ed,fd,gd,hd,id,jd,kd,ld,md,nd,od,pd,qd,rd,sd,td,ud,vd,wd,xd,yd,zd,Ad,Bd,Cd,Dd,Ed,Fd,Gd,Hd,Id,Jd,Kd,Ld,Md,Nd,Od,Pd,Qd,Rd,Sd,Td,Ud,Xd,Yd,Vd,Wd,Zd,$d,_d,ae,be,ce,de,ee,fe,ge,he,ie,je,ke,le,me,ne,oe,e=this.Uh;if(e.width=0,e.height=0,g=this.Aa,i=this.Ce,c===f&&(c=i.width,d=i.height),c=Math.max(c,i.width),d=Math.max(d,i.height),j=this.he,isNaN(g.width)||(a=Math.min(g.width,j.width)),isNaN(g.height)||(b=Math.min(g.height,j.height)),a=Math.max(c,a),b=Math.max(d,b),k=this.padding,a=Math.max(a-k.left-k.right,0),b=Math.max(b-k.top-k.bottom,0),l=this.za,m=l.length,0===m)n=this.Ic,Za(n,isNaN(g.width)?0:a,isNaN(g.height)?0:b),jj(this,0,0,n.width,n.height);else{switch(o=this.Y.Gb){case"Position":for(p=a,r=b,t=c,u=d,e.x=0,e.y=0,e.width=0,v=e.height=0;m>v;v++)w=l.n[v],(w.visible||w===this.Vb)&&(x=w.margin,z=x.right+x.left,A=x.top+x.bottom,ch(w,p,r,t,u),C=w.Ba,E=Math.max(C.width+z,0),F=Math.max(C.height+A,0),G=w.position.x,H=w.position.y,isFinite(G)||(G=0),isFinite(H)||(H=0),w instanceof V&&w.Hy&&(I=w.jb/2,G-=I,H-=I),ib(e,G,H,E,F));break;case"Vertical":for(J=a,K=c,L=y.tb(),M=0;m>M;M++)N=l.n[M],(N.visible||N===this.Vb)&&(O=mj(N),O!==dj&&O!==ej?L.push(N):(P=N.margin,Q=P.right+P.left,R=P.top+P.bottom,ch(N,J,1/0,K,0),S=N.Ba,T=Math.max(S.width+Q,0),U=Math.max(S.height+R,0),e.width=Math.max(e.width,T),e.height+=U));if(W=L.length,0!==W){for(this.Aa.width?J=Math.min(this.Aa.width,this.he.width):0!==e.width&&(J=Math.min(e.width,this.he.width)),M=0;W>M;M++)N=L[M],(N.visible||N===this.Vb)&&(P=N.margin,Q=P.right+P.left,R=P.top+P.bottom,ch(N,J,1/0,K,0),S=N.Ba,T=Math.max(S.width+Q,0),U=Math.max(S.height+R,0),e.width=Math.max(e.width,T),e.height+=U);y.ya(L)}break;case"Horizontal":for(X=b,Y=d,Z=y.tb(),$=0;m>$;$++)_=l.n[$],(_.visible||_===this.Vb)&&(ab=mj(_),ab!==dj&&ab!==fj?Z.push(_):(bb=_.margin,cb=bb.right+bb.left,db=bb.top+bb.bottom,ch(_,1/0,X,0,Y),eb=_.Ba,fb=Math.max(eb.width+cb,0),gb=Math.max(eb.height+db,0),e.width+=fb,e.height=Math.max(e.height,gb)));if(hb=Z.length,0!==hb){for(this.Aa.height?X=Math.min(this.Aa.height,this.he.height):0!==e.height&&(X=Math.min(e.height,this.he.height)),$=0;hb>$;$++)_=Z[$],(_.visible||_===this.Vb)&&(bb=_.margin,cb=bb.right+bb.left,db=bb.top+bb.bottom,ch(_,1/0,X,0,Y),eb=_.Ba,fb=Math.max(eb.width+cb,0),gb=Math.max(eb.height+db,0),e.width+=fb,e.height=Math.max(e.height,gb));y.ya(Z)}break;case"Spot":a:{for(jb=a,kb=b,lb=c,mb=d,nb=Mj(this,l,m),ob=nb.margin,rb=ob.right+ob.left,sb=ob.top+ob.bottom,ch(nb,jb,kb,lb,mb),tb=nb.Ba,ub=tb.width,vb=tb.height,wb=Math.max(ub+rb,0),xb=Math.max(vb+sb,0),e.x=-ob.left,e.y=-ob.top,e.width=wb,e.height=xb,zb=0;m>zb;zb++)Ab=l.n[zb],Ab===nb||!Ab.visible&&Ab!==this.Vb||(ob=Ab.margin,pb=ob.right+ob.left,qb=ob.top+ob.bottom,ch(Ab,jb,kb,0,0),tb=Ab.Ba,wb=Math.max(tb.width+pb,0),xb=Math.max(tb.height+qb,0),Bb=Ab.alignment,Db(Bb)&&(Bb=this.kj),yb(Bb)||(Bb=Sb),Eb=Ab.bj,Db(Eb)&&(Eb=Sb),ib(e,Bb.x*ub+Bb.offsetX-(Eb.x*tb.width-Eb.offsetX)-ob.left,Bb.y*vb+Bb.offsetY-(Eb.y*tb.height-Eb.offsetY)-ob.top,wb,xb));switch(Fb=nb.mh,Fb===Bg&&(Fb=mj(nb)),Fb){case dj:break a;case qc:if(!isFinite(jb)&&!isFinite(kb))break a;break;case fj:if(!isFinite(jb))break a;break;case ej:if(!isFinite(kb))break a}for(tb=nb.Ba,ub=tb.width,vb=tb.height,wb=Math.max(ub+rb,0),xb=Math.max(vb+sb,0),ob=nb.margin,e.x=-ob.left,e.y=-ob.top,e.width=wb,e.height=xb,zb=0;m>zb;zb++)Ab=l.n[zb],Ab===nb||!Ab.visible&&Ab!==this.Vb||(ob=Ab.margin,pb=ob.right+ob.left,qb=ob.top+ob.bottom,tb=Ab.Ba,wb=Math.max(tb.width+pb,0),xb=Math.max(tb.height+qb,0),Bb=Ab.alignment,Db(Bb)&&(Bb=this.kj),yb(Bb)||(Bb=Sb),Eb=Ab.bj,Db(Eb)&&(Eb=Sb),ib(e,Bb.x*ub+Bb.offsetX-(Eb.x*tb.width-Eb.offsetX)-ob.left,Bb.y*vb+Bb.offsetY-(Eb.y*tb.height-Eb.offsetY)-ob.top,wb,xb))}break;case"Auto":for(Gb=a,Hb=b,Ib=c,Jb=d,Kb=Mj(this,l,m),Lb=Kb.margin,Mb=Lb.right+Lb.left,Nb=Lb.top+Lb.bottom,ch(Kb,Gb,Hb,Ib,Jb),Ob=Kb.Ba,Pb=Math.max(Ob.width+Mb,0),Qb=Math.max(Ob.height+Nb,0),Rb=Uk(Kb),Tb=Rb.x*Pb+Rb.offsetX,Ub=Rb.y*Qb+Rb.offsetY,Rb=Vk(Kb),Vb=Rb.x*Pb+Rb.offsetX,Wb=Rb.y*Qb+Rb.offsetY,Xb=Gb,Yb=Hb,isFinite(Gb)&&(Xb=Math.abs(Tb-Vb)),isFinite(Hb)&&(Yb=Math.abs(Ub-Wb)),Zb=y.Nk(),Zb.q(0,0),$b=0;m>$b;$b++)_b=l.n[$b],_b===Kb||!_b.visible&&_b!==this.Vb||(Lb=_b.margin,ac=Lb.right+Lb.left,bc=Lb.top+Lb.bottom,ch(_b,Xb,Yb,Ib,Jb),Ob=_b.Ba,Pb=Math.max(Ob.width+ac,0),Qb=Math.max(Ob.height+bc,0),Zb.q(Math.max(Pb,Zb.width),Math.max(Qb,Zb.height)));if(1===m)e.width=Pb,e.height=Qb,y.qj(Zb);else{switch(cc=Uk(Kb),dc=Vk(Kb),dc.x!==cc.x&&dc.y!==cc.y&&(ec=Zb.width/Math.abs(dc.x-cc.x),fc=Zb.height/Math.abs(dc.y-cc.y)),y.qj(Zb),gc=0,Kb instanceof V&&(gc=Kb.jb*Kb.scale,Wk(Kb)===Cg&&(ec=Math.max(ec,fc),fc=Math.max(ec,fc))),ec+=Math.abs(cc.offsetX)+Math.abs(dc.offsetX)+gc,fc+=Math.abs(cc.offsetY)+Math.abs(dc.offsetY)+gc,hc=Kb.mh,hc===Bg&&(hc=mj(Kb)),hc){case dj:Jb=Ib=0;break;case qc:isFinite(Gb)&&(ec=Gb),isFinite(Hb)&&(fc=Hb);break;case fj:isFinite(Gb)&&(ec=Gb),Jb=0;break;case ej:Ib=0,isFinite(Hb)&&(fc=Hb)}Kb instanceof V&&!Kb.Aa.V()&&(Kb.ng?Kb.Qj=q:Kb.Na=q),Nj(Kb),ch(Kb,ec,fc,Ib,Jb),e.width=Kb.Ba.width+Mb,e.height=Kb.Ba.height+Nb}break;case"Table":for(ic=a,jc=b,kc=m,lc=c,mc=d,nc=y.tb(),oc=y.tb(),pc=0;kc>pc;pc++)if(rc=l.n[pc],rc instanceof D&&(rc.type===Fj||rc.type===Gj)&&rc.visible)for(oc.push(rc),sc=rc.za,tc=sc.length,uc=0;tc>uc;uc++)vc=sc.n[uc],rc.type===Fj?vc.qc=rc.qc:rc.type===Gj&&(vc.column=rc.column),nc.push(vc);else nc.push(rc);for(kc=nc.length,wc=[],pc=0;kc>pc;pc++)rc=nc[pc],nj(rc,h),Bj(rc,h),wc[rc.qc]||(wc[rc.qc]=[]),wc[rc.qc][rc.column]||(wc[rc.qc][rc.column]=[]),wc[rc.qc][rc.column].push(rc);for(y.ya(nc),xc=y.tb(),yc=y.tb(),zc=y.tb(),Ac={count:0},Bc={count:0},Cc=ic,Dc=jc,Ec=this.Kc,kc=Ec.length,pc=0;kc>pc;pc++)Fc=Ec[pc],Fc!==f&&Xk(Fc,0);for(Ec=this.Ec,kc=Ec.length,pc=0;kc>pc;pc++)Fc=Ec[pc],Fc!==f&&Xk(Fc,0);for(Hc=wc.length,pc=0;Hc>pc;pc++)if(wc[pc])for(Ic=wc[pc].length,Jc=this.Od(pc),Xk(Jc,0),uc=0;Ic>uc;uc++)if(wc[pc][uc])for(Kc=this.Nd(uc),xc[uc]===f&&(Xk(Kc,0),xc[uc]=h),Lc=wc[pc][uc],Mc=Lc.length,Nc=0;Mc>Nc;Nc++)rc=Lc[Nc],(rc.visible||rc===this.Vb)&&(1<rc.lk||1<rc.Pj?yc.push(rc):(Oc=Qj(rc,Jc,Kc),Oc===dj||rc.Aa.V()?(Pc=isFinite(Kc.width)?Kc.width:ic,Qc=isFinite(Jc.height)?Jc.height:jc,Rc=rc.margin,Sc=Rc.right+Rc.left,Tc=Rc.top+Rc.bottom,ch(rc,1/0,1/0,lc,mc),Uc=rc.Ba,Vc=Math.max(Uc.width+Sc,0),Wc=Math.max(Uc.height+Tc,0),Fc=this.Od(pc),Gc=Math.max(Wc-Fc.Bb,0),Gc>Dc&&(Gc=Dc),Xk(Fc,Fc.Bb+Gc),Dc=Math.max(Dc-Gc,0),Fc=this.Nd(uc),Gc=Math.max(Vc-Fc.Bb,0),Gc>Cc&&(Gc=Cc),Xk(Fc,Fc.Bb+Gc),Cc=Math.max(Cc-Gc,0)):(Ac[uc]===f&&(Ac[uc]=-1,Ac.count++),Bc[pc]===f&&(Bc[pc]=-1,Bc.count++),zc.push(rc),ch(rc,1/0,1/0,lc,mc))));for(y.ya(xc),Xc=0,Yc=0,kc=this.Au,pc=0;kc>pc;pc++)this.Ec[pc]!==f&&(Xc+=this.Nd(pc).ub);for(kc=this.qv,pc=0;kc>pc;pc++)this.Kc[pc]!==f&&(Yc+=this.Od(pc).ub);for(Cc=Math.max(ic-Xc,0),Dc=Math.max(jc-Yc,0),kc=zc.length,pc=0;kc>pc;pc++)rc=zc[pc],Jc=this.Od(rc.qc),Kc=this.Nd(rc.column),Zc=rc.Ba,Rc=rc.margin,Sc=Rc.right+Rc.left,Tc=Rc.top+Rc.bottom,Ac[rc.column]=Math.max(Zc.width+Sc-Kc.Bb,0),Bc[rc.qc]=Math.max(Zc.height+Tc-Jc.Bb,0);$c=0,_c=0;for(pc in Bc)"count"!==pc&&($c+=Bc[pc]);for(pc in Ac)"count"!==pc&&(_c+=Ac[pc]);for(ad=y.Nk(),pc=0;kc>pc;pc++)if(rc=zc[pc],rc.visible||rc===this.Vb){switch(Jc=this.Od(rc.qc),Kc=this.Nd(rc.column),Pc=isFinite(Kc.width)?Kc.width:isFinite(Cc)?0===_c?Kc.Bb+Cc:Kc.Bb+Ac[rc.column]/_c*Cc:Kc.Bb||Cc,Qc=isFinite(Jc.height)?Jc.height:isFinite(Dc)?0===$c?Jc.Bb+Dc:Jc.Bb+Bc[rc.qc]/$c*Dc:Jc.Bb||Dc,Pc=Math.max(0,Pc-Tk(Kc)),Qc=Math.max(0,Qc-Tk(Jc)),ad.q(Math.max(Kc.gh,Math.min(Pc,Kc.Xe)),Math.max(Jc.gh,Math.min(Qc,Jc.Xe))),Oc=Qj(rc,Jc,Kc)){case fj:ad.height=1/0;break;case ej:ad.width=1/0}Rc=rc.margin,Sc=Rc.right+Rc.left,Tc=Rc.top+Rc.bottom,Nj(rc),ch(rc,ad.width,ad.height,Kc.gh,Jc.gh),Uc=rc.Ba,Vc=Math.max(Uc.width+Sc,0),Wc=Math.max(Uc.height+Tc,0),isFinite(Cc)&&(Vc=Math.min(Vc,ad.width)),isFinite(Dc)&&(Wc=Math.min(Wc,ad.height)),bd=Jc.Bb,Xk(Jc,Math.max(Jc.Bb,Wc)),Gc=Jc.Bb-bd,Dc=Math.max(Dc-Gc,0),bd=Kc.Bb,Xk(Kc,Math.max(Kc.Bb,Vc)),Gc=Kc.Bb-bd,Cc=Math.max(Cc-Gc,0)}for(y.ya(zc),cd=y.Nk(),kc=yc.length,pc=0;kc>pc;pc++)if(rc=yc[pc],rc.visible||rc===this.Vb){switch(Jc=this.Od(rc.qc),Kc=this.Nd(rc.column),ad.q(Math.max(Kc.gh,Math.min(ic,Kc.Xe)),Math.max(Jc.gh,Math.min(jc,Jc.Xe))),Oc=Qj(rc,Jc,Kc)){case qc:0!==Kc.Bb&&(ad.width=Math.min(ad.width,Kc.Bb)),0!==Jc.Bb&&(ad.height=Math.min(ad.height,Jc.Bb));break;case fj:0!==Kc.Bb&&(ad.width=Math.min(ad.width,Kc.Bb));break;case ej:0!==Jc.Bb&&(ad.height=Math.min(ad.height,Jc.Bb))}for(isFinite(Kc.width)&&(ad.width=Kc.width),isFinite(Jc.height)&&(ad.height=Jc.height),cd.q(0,0),dd=1;dd<rc.lk&&!(rc.qc+dd>=this.qv);dd++)Fc=this.Od(rc.qc+dd),cd.height+=Math.max(Fc.gh,isNaN(Fc.nf)?Fc.Xe:Math.min(Fc.nf,Fc.Xe));for(dd=1;dd<rc.Pj&&!(rc.column+dd>=this.Au);dd++)Fc=this.Nd(rc.column+dd),cd.width+=Math.max(Fc.gh,isNaN(Fc.nf)?Fc.Xe:Math.min(Fc.nf,Fc.Xe));for(ad.width+=cd.width,ad.height+=cd.height,Rc=rc.margin,Sc=Rc.right+Rc.left,Tc=Rc.top+Rc.bottom,ch(rc,ad.width,ad.height,lc,mc),Uc=rc.Ba,Vc=Math.max(Uc.width+Sc,0),Wc=Math.max(Uc.height+Tc,0),ed=0,dd=0;dd<rc.lk;dd++)Fc=this.Od(rc.qc+dd),ed+=Fc.total||0;if(Wc>ed)for(fd=Wc-ed;fd>0&&(gd=Fc.ub||0,isNaN(Fc.height)&&Fc.Xe>gd&&(Xk(Fc,Math.min(Fc.Xe,gd+fd)),Fc.ub!==gd&&(fd-=Fc.ub-gd)),-1!==Fc.index-1);)Fc=this.Od(Fc.index-1);for(hd=0,dd=0;dd<rc.Pj;dd++)Fc=this.Nd(rc.column+dd),hd+=Fc.total||0;if(Vc>hd)for(fd=Vc-hd;fd>0&&(gd=Fc.ub||0,isNaN(Fc.width)&&Fc.Xe>gd&&(Xk(Fc,Math.min(Fc.Xe,gd+fd)),Fc.ub!==gd&&(fd-=Fc.ub-gd)),-1!==Fc.index-1);)Fc=this.Nd(Fc.index-1)}for(y.ya(yc),y.qj(cd),y.qj(ad),id=0,jd=0,Oc=mj(this),kd=this.Aa,ld=this.he,md=Yc=Xc=0,nd=0,kc=this.Au,pc=0;kc>pc;pc++)this.Ec[pc]!==f&&(Fc=this.Nd(pc),isFinite(Fc.width)?md+=Fc.width:Yk(Fc)===Zk?md+=Fc.ub:0!==Fc.ub&&(Xc+=Fc.ub,Xc+=Tk(Fc)));for(id=isFinite(kd.width)?Math.min(kd.width,ld.width):Oc!==dj&&isFinite(ic)?ic:Xc,id=Math.max(id,this.Ce.width),id=Math.max(id-md,0),od=Math.max(id/Xc,1),isFinite(od)||(od=1),pc=0;kc>pc;pc++)this.Ec[pc]!==f&&(Fc=this.Nd(pc),!isFinite(Fc.width)&&Yk(Fc)!==Zk&&Xk(Fc,Fc.ub*od),Fc.nb=e.width,0!==Fc.ub&&(e.width+=Fc.ub,e.width+=Tk(Fc)));for(kc=this.qv,pc=0;kc>pc;pc++)this.Kc[pc]!==f&&(Fc=this.Od(pc),isFinite(Fc.height)?nd+=Fc.height:Yk(Fc)===Zk?nd+=Fc.ub:0!==Fc.ub&&(Yc+=Fc.ub,Yc+=Tk(Fc)));for(jd=isFinite(kd.height)?Math.min(kd.height,ld.height):Oc!==dj&&isFinite(jc)?jc:Yc,jd=Math.max(jd,this.Ce.height),jd=Math.max(jd-nd,0),pd=Math.max(jd/Yc,1),isFinite(pd)||(pd=1),pc=0;kc>pc;pc++)this.Kc[pc]!==f&&(Fc=this.Od(pc),!isFinite(Fc.height)&&Yk(Fc)!==Zk&&Xk(Fc,Fc.ub*pd),Fc.nb=e.height,0!==Fc.ub&&(e.height+=Fc.ub,e.height+=Tk(Fc)));for(kc=oc.length,pc=0;kc>pc;pc++)qd=oc[pc],qd.type===Fj?(Pc=e.width,Fc=this.Od(qd.qc),Qc=Fc.Bb):(Fc=this.Nd(qd.column),Pc=Fc.Bb,Qc=e.height),qd.wc.q(0,0,Pc,Qc),nj(qd,s),wc[qd.qc]||(wc[qd.qc]=[]),wc[qd.qc][qd.column]||(wc[qd.qc][qd.column]=[]),wc[qd.qc][qd.column].push(qd);y.ya(oc),this.aF=wc;break;case"Viewbox":rd=a,sd=b,td=c,ud=d,m>1&&y.m("Viewbox Panel cannot contain more than one GraphObject."),vd=l.n[0],vd.Qb=1,Nj(vd),ch(vd,1/0,1/0,td,ud),wd=vd.Ba,xd=vd.margin,yd=xd.right+xd.left,zd=xd.top+xd.bottom,(isFinite(rd)||isFinite(sd))&&(Ad=vd.scale,Bd=wd.width,Cd=wd.height,Dd=Math.max(rd-yd,0),Ed=Math.max(sd-zd,0),vd.Qb=this.rn===Cg?vd.Qb*Math.min(Dd/Bd,Ed/Cd):vd.Qb*Math.max(Dd/Bd,Ed/Cd),Ad!==vd.scale&&(nj(vd,h),ch(vd,1/0,1/0,td,ud))),wd=vd.Ba,e.width=isFinite(rd)?rd:Math.max(wd.width+yd,0),e.height=isFinite(sd)?sd:Math.max(wd.height+zd,0);break;case"Link":if(Fd=this instanceof Ge?this.aj:this,0===m)Gd=this.Ic,Za(Gd,0,0),Hd=this.Ba,Hd.q(0,0,0,0);else{for(Id=this.rp(),Jd=this.Ai(),Kd=this.Uh,Kd.assign(Jd),Kd.x=0,Kd.y=0,Md=this.Lw(),Ld=this.qa!==f?this.qa:Md.count,this.Fh.q(Jd.x,Jd.y),this.th.clear(),Id!==q&&($k(Id,Jd.width,Jd.height),Hd=Id.Ba,Kd.zj(Hd),this.th.add(Hd)),Nd=y.xg(),Od=y.M(),Pd=y.M(),Qd=0;m>Qd;Qd++)Rd=l.n[Qd],Rd!==Id&&(Rd.ji&&Rd instanceof V?($k(Rd,Jd.width,Jd.height),Hd=Rd.Ba,Kd.zj(Hd),this.th.add(Hd)):2>Ld?(ch(Rd,1/0,1/0),Hd=Rd.Ba,Kd.zj(Hd),this.th.add(Hd)):(Sd=Rd.af,Td=Rd.hs,Ud=Rd.bj,Cb(Ud)&&(Ud=Sb),Vd=Rd.is,Wd=Rd.pz,Zd=0,-Ld>Sd||Sd>=Ld?($d=Fd.dD,_d=Fd.cD,Vd!==cj&&(Zd=Fd.computeAngle(Rd,Vd,_d),Rd.angle=Zd),Xd=$d.x-Jd.x,Yd=$d.y-Jd.y):(Sd>=0?(ae=Md.n[Sd],be=Ld-1>Sd?Md.n[Sd+1]:ae):(ce=Ld+Sd,ae=Md.n[ce],be=ce>0?Md.n[ce-1]:ae),_d=Sd>=0?ae.ai(be):be.ai(ae),Vd!==cj&&(Zd=Fd.computeAngle(Rd,Vd,_d),Rd.lm=Zd),Xd=ae.x+(be.x-ae.x)*Td-Jd.x,Yd=ae.y+(be.y-ae.y)*Td-Jd.y),ch(Rd,1/0,1/0),Hd=Rd.Ba,Gd=Rd.Ta,de=0,Rd instanceof V&&(de=Rd.jb),ee=Gd.width+de,fe=Gd.height+de,Nd.reset(),Nd.translate(-Hd.x,-Hd.y),Nd.scale(Rd.scale,Rd.scale),Nd.rotate(Rd.angle,ee/2,fe/2),ge=new B(0,0,ee,fe),Od.ls(ge,Ud),Nd.Qa(Od),he=-Od.x+de/2,ie=-Od.y+de/2,Pd.assign(Wd),isNaN(Pd.x)&&(Pd.x=Sd>=0?Od.x+3:-(Od.x+3)),isNaN(Pd.y)&&(Pd.y=-(Od.y+3)),Pd.rotate(_d),Xd+=Pd.x,Yd+=Pd.y,ge.set(Hd),ge.x=Xd+he,ge.y=Yd+ie,this.th.add(ge),Kd.zj(ge)));if(this.Ke)for(je=this.tj;je.next();)ch(je.value,1/0,1/0);this.Uh=Kd,ke=this.Fh,ke&&ke.q(ke.x+Kd.x,ke.y+Kd.y),Za(e,Kd.width||0,Kd.height||0),y.ye(Nd),y.B(Od),y.B(Pd)}break;case"Grid":break;case"TableRow":case"TableColumn":y.m(this.toString()+" is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");break;default:y.m("Unknown panel type: "+o)}le=e.width,me=e.height,ne=this.padding,oe=ne.top+ne.bottom,le+=ne.left+ne.right,me+=oe,isFinite(g.width)&&(le=g.width),isFinite(g.height)&&(me=g.height),le=Math.min(j.width,le),me=Math.min(j.height,me),le=Math.max(i.width,le),me=Math.max(i.height,me),le=Math.max(c,le),me=Math.max(d,me),e.width=le,e.height=me,n=this.Ic,Za(n,le,me),jj(this,0,0,le,me)}},D.prototype.findMainElement=D.prototype.qG=function(){return this.Ui===q&&Mj(this,this.za,this.za.length),this.Ui},D.prototype.gj=function(a,b,c,d){var k,l,m,n,o,p,r,t,u,v,w,x,z,A,C,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,jb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,zb,Ab,Bb,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Tb,Yb,Zb,Ub,Vb,Wb,Xb,$b,_b,ac,bc,cc,dc,ec,fc,gc,hc,ic,jc,kc,lc,mc,nc,oc,pc,rc,sc,tc,uc,Ac,Bc,Cc,Dc,vc,wc,xc,yc,zc,Ec,Fc,Gc,Hc,Ic,Jc,Kc,Lc,Mc,Nc,Oc,Pc,Qc,Rc,Sc,Tc,Uc,Vc,Wc,Xc,Yc,Zc,$c,_c,ad,bd,cd,dd,ed,fd,gd,hd,id,jd,kd,ld,md,nd,od,pd,qd,rd,sd,td,ud,vd,wd,xd,yd,zd,e=this.Uh,g=this.za,i=g.length,j=y.xj(0,0,0,0);if(0===i)k=this.ua,k.x=a,k.y=b,k.width=c,k.height=d;else{if(!this.Aa.V())switch(l=mj(this),m=this.wc,n=m.width,o=m.height,p=this.margin,r=p.left+p.right,t=p.top+p.bottom,n===c&&o===d&&(l=dj),l){case dj:(n>c||o>d)&&(this.aa(),ch(this,n>c?c:n,o>d?d:o));break;case qc:nj(this,h),ch(this,c+r,d+t,0,0);break;case fj:nj(this,h),ch(this,c+r,o+t,0,0);break;case ej:nj(this,h),ch(this,n+r,d+t,0,0)}switch(k=this.ua,k.x=a,k.y=b,k.width=c,k.height=d,u=this.Y.Gb){case"Position":for(v=e.x-this.padding.left,w=e.y-this.padding.top,x=0;i>x;x++)z=g.n[x],A=z.Ba,C=z.margin,E=z.position.x,F=z.position.y,j.x=isNaN(E)?-v:E-v,j.y=isNaN(F)?-w:F-w,z instanceof V&&z.Hy&&(G=z.jb/2,j.x-=G,j.y-=G),j.x+=C.left,j.y+=C.top,j.width=A.width,j.height=A.height,z.visible&&z.tc(j.x,j.y,j.width,j.height);break;case"Vertical":for(H=this.padding.left,I=this.padding.top,J=0;i>J;J++)K=H,L=g.n[J],M=L.Ba,N=L.margin,O=N.left+N.right,P=H+this.padding.right,Q=M.width,R=mj(L),(isNaN(L.Aa.width)&&R===qc||R===fj)&&(Q=Math.max(e.width-O-P,0)),S=Q+O+P,T=L.alignment,Db(T)&&(T=this.kj),yb(T)||(T=Sb),j.x=K+T.offsetX+N.left+(e.width*T.x-S*T.x),j.y=I+T.offsetY+N.top,j.width=Q,j.height=M.height,L.visible&&(L.tc(j.x,j.y,j.width,j.height),I+=M.height+N.bottom+N.top);break;case"Horizontal":for(U=this.padding.top,W=this.padding.left,X=0;i>X;X++)Y=U,Z=g.n[X],$=Z.Ba,_=Z.margin,ab=_.top+_.bottom,bb=U+this.padding.bottom,cb=$.height,db=mj(Z),(isNaN(Z.Aa.height)&&db===qc||db===ej)&&(cb=Math.max(e.height-ab-bb,0)),eb=cb+ab+bb,fb=Z.alignment,Db(fb)&&(fb=this.kj),yb(fb)||(fb=Sb),j.x=W+fb.offsetX+_.left,j.y=Y+fb.offsetY+_.top+(e.height*fb.y-eb*fb.y),j.width=$.width,j.height=cb,Z.visible&&(Z.tc(j.x,j.y,j.width,j.height),W+=$.width+_.left+_.right);break;case"Spot":for(gb=Mj(this,g,i),hb=gb.Ba,jb=hb.width,lb=hb.height,mb=this.padding,nb=mb.left,ob=mb.top,j.x=nb-e.x,j.y=ob-e.y,gb.tc(j.x,j.y,jb,lb),pb=0;i>pb;pb++)qb=g.n[pb],qb!==gb&&(rb=qb.Ba,sb=rb.width,tb=rb.height,ub=qb.alignment,Db(ub)&&(ub=this.kj),yb(ub)||(ub=Sb),vb=qb.bj,Db(vb)&&(vb=Sb),j.x=ub.x*jb+ub.offsetX-(vb.x*sb-vb.offsetX),j.y=ub.y*lb+ub.offsetY-(vb.y*tb-vb.offsetY),j.x-=e.x,j.y-=e.y,qb.visible&&qb.tc(nb+j.x,ob+j.y,sb,tb));break;case"Auto":for(wb=Mj(this,g,i),xb=wb.Ba,zb=y.df(),zb.q(0,0,1,1),Ab=wb.margin,Bb=Ab.left,Eb=Ab.top,Fb=this.padding,Gb=Fb.left,Hb=Fb.top,j.x=Bb,j.y=Eb,j.width=xb.width,j.height=xb.height,wb.tc(Gb+j.x,Hb+j.y,j.width,j.height),Ib=Uk(wb),Jb=Vk(wb),Kb=0+Ib.y*xb.height+Ib.offsetY,Lb=0+Jb.x*xb.width+Jb.offsetX,Mb=0+Jb.y*xb.height+Jb.offsetY,zb.x=0+Ib.x*xb.width+Ib.offsetX,zb.y=Kb,ib(zb,Lb,Mb,0,0),zb.x+=Bb+Gb,zb.y+=Eb+Hb,Nb=0;i>Nb;Nb++)Ob=g.n[Nb],Ob!==wb&&(Pb=Ob.Ba,Ab=Ob.margin,Qb=Math.max(Pb.width+Ab.right+Ab.left,0),Rb=Math.max(Pb.height+Ab.top+Ab.bottom,0),Tb=Ob.alignment,Db(Tb)&&(Tb=this.kj),yb(Tb)||(Tb=Sb),j.x=zb.width*Tb.x+Tb.offsetX-Qb*Tb.x+Ab.left+zb.x,j.y=zb.height*Tb.y+Tb.offsetY-Rb*Tb.y+Ab.top+zb.y,j.width=zb.width,j.height=zb.height,Ob.visible&&(kb(zb.x,zb.y,zb.width,zb.height,j.x,j.y,Pb.width,Pb.height)?Ob.tc(j.x,j.y,Pb.width,Pb.height):Ob.tc(j.x,j.y,Pb.width,Pb.height,new B(zb.x,zb.y,zb.width,zb.height))));y.Bc(zb);break;case"Table":for(Ub=this.padding,Vb=Ub.left,Wb=Ub.top,Xb=this.aF,$b=Xb.length,_b=0,ac=0;$b>ac;ac++)Xb[ac]&&(_b=Math.max(_b,Xb[ac].length));for(bc=Math.min(this.$i,$b-1);bc!==$b&&(this.Kc[bc]===f||0===this.Kc[bc].ub);)bc++;for(bc=Math.min(bc,$b-1),cc=-this.Kc[bc].nb,dc=Math.min(this.Ei,_b-1);dc!==_b&&(this.Ec[dc]===f||0===this.Ec[dc].ub);)dc++;for(dc=Math.min(dc,_b-1),ec=-this.Ec[dc].nb,fc=y.Nk(),ac=0;$b>ac;ac++)if(Xb[ac])for(_b=Xb[ac].length,gc=this.Od(ac),Zb=gc.nb+cc+Wb+al(gc),hc=0;_b>hc;hc++)if(Xb[ac][hc])for(ic=this.Nd(hc),Yb=ic.nb+ec+Vb+al(ic),jc=Xb[ac][hc],kc=jc.length,lc=0;kc>lc;lc++)if(mc=jc[lc],nc=mc.Ba,mc instanceof D&&(mc.type===Fj||mc.type===Gj))mc.Ob.Pa(),oc=mc.Ob,oc.x=mc.type===Fj?Vb:Yb,oc.y=mc.type===Gj?Wb:Zb,oc.width=nc.width,oc.height=nc.height,mc.Ob.freeze(),Bj(mc,s);else{for(fc.q(0,0),pc=1;pc<mc.rowSpan&&!(ac+pc>=this.qv);pc++)rc=this.Od(ac+pc),fc.height+=rc.total;for(pc=1;pc<mc.OB&&!(hc+pc>=this.Au);pc++)sc=this.Nd(hc+pc),fc.width+=sc.total;tc=ic.ub+fc.width,uc=gc.ub+fc.height,j.x=Yb,j.y=Zb,j.width=tc,j.height=uc,Zb+uc>e.height&&(uc=Math.max(e.height-Zb,0)),Yb+tc>e.width&&(tc=Math.max(e.width-Yb,0)),vc=Yb,wc=Zb,xc=tc,yc=uc,zc=mc.alignment,Db(zc)?(zc=this.kj,yb(zc)||(zc=Sb),Ac=zc.x,Bc=zc.y,Cc=zc.offsetX,Dc=zc.offsetY,Ec=ic.alignment,Fc=gc.alignment,yb(Ec)&&(Ac=Ec.x,Cc=Ec.offsetX),yb(Fc)&&(Bc=Fc.y,Dc=Fc.offsetY)):(Ac=zc.x,Bc=zc.y,Cc=zc.offsetX,Dc=zc.offsetY),(isNaN(Ac)||isNaN(Bc))&&(Bc=Ac=.5,Dc=Cc=0),Gc=nc.width,Hc=nc.height,Ic=mc.he,Jc=mc.Ce,Gc=Math.min(Ic.width,Gc),Hc=Math.min(Ic.height,Hc),Gc=Math.max(Jc.width,Gc),Hc=Math.max(Jc.height,Hc),Kc=mc.margin,Lc=Kc.left+Kc.right,Mc=Kc.top+Kc.bottom,Nc=Qj(mc,gc,ic),(isNaN(mc.Aa.width)&&Nc===qc||Nc===fj)&&(Gc=Math.max(tc-Lc,0)),(isNaN(mc.Aa.height)&&Nc===qc||Nc===ej)&&(Hc=Math.max(uc-Mc,0)),Oc=Hc+Mc,j.x+=j.width*Ac-(Gc+Lc)*Ac+Cc+Kc.left,j.y+=j.height*Bc-Oc*Bc+Dc+Kc.top,mc.visible&&(kb(vc,wc,xc,yc,j.x,j.y,Gc,Hc)?mc.tc(j.x,j.y,Gc,Hc):mc.tc(j.x,j.y,Gc,Hc,new B(vc,wc,xc,yc)))}for(y.qj(fc),ac=0;i>ac;ac++)mc=g.n[ac],mc instanceof D&&(mc.type===Fj||mc.type===Gj)&&(oc=mc.Ob,mc.Ic.Pa(),mc.Ic.Ao(0,0,oc.width,oc.height),mc.Ic.freeze());break;case"Viewbox":Pc=g.n[0],Qc=Pc.Ba,Rc=Pc.margin,Sc=Rc.top+Rc.bottom,Tc=Math.max(Qc.width+(Rc.right+Rc.left),0),Uc=Math.max(Qc.height+Sc,0),Vc=Pc.alignment,Db(Vc)&&(Vc=this.kj),yb(Vc)||(Vc=Sb),j.x=e.width*Vc.x-Tc*Vc.x+Vc.offsetX,j.y=e.height*Vc.y-Uc*Vc.y+Vc.offsetY,j.width=Qc.width,j.height=Qc.height,Pc.tc(j.x,j.y,j.width,j.height);break;case"Link":for(Wc=this.rp(),Xc=0,Wc!==q&&Xc<this.th.count&&(Yc=this.th.n[Xc],Xc++,Wc.tc(Yc.x-this.Uh.x,Yc.y-this.Uh.y,Yc.width,Yc.height)),Zc=0;i>Zc;Zc++)$c=g.n[Zc],$c!==Wc&&Xc<this.th.count&&(Yc=this.th.n[Xc],Xc++,$c.tc(Yc.x-this.Uh.x,Yc.y-this.Uh.y,Yc.width,Yc.height));if(_c=this.Lw(),ad=_c.count,ad>=2&&this.Ke)for(bd=this.tj;bd.next();)cd=bd.value,dd=ad,ed=_c,fd=cd.af,gd=cd.hs,hd=cd.bj,Cb(hd)&&(hd=Sb),id=cd.is,jd=cd.pz,kd=f,ld=f,md=0,-dd>fd||fd>=dd?(nd=this.dD,od=this.cD,id!==cj&&(md=this.computeAngle(cd,id,od),cd.angle=md),kd=nd.x,ld=nd.y):(pd=f,qd=f,fd>=0?(pd=ed.n[fd],qd=dd-1>fd?ed.n[fd+1]:pd):(rd=dd+fd,pd=ed.n[rd],qd=rd>0?ed.n[rd-1]:pd),od=fd>=0?pd.ai(qd):qd.ai(pd),id!==cj&&(md=this.computeAngle(cd,id,od),cd.angle=md),kd=pd.x+(qd.x-pd.x)*gd,ld=pd.y+(qd.y-pd.y)*gd),sd=y.xg(),sd.reset(),sd.scale(cd.scale,cd.scale),sd.rotate(cd.angle,0,0),td=cd.Ta,ud=y.xj(0,0,td.width,td.height),vd=y.M(),vd.ls(ud,hd),sd.Qa(vd),wd=-vd.x,xd=-vd.y,yd=jd.copy(),isNaN(yd.x)&&(yd.x=fd>=0?vd.x+3:-(vd.x+3)),isNaN(yd.y)&&(yd.y=-(vd.y+3)),yd.rotate(od),kd+=yd.x,ld+=yd.y,sd.oE(ud),wd+=ud.x,xd+=ud.y,zd=y.dc(kd+wd,ld+xd),cd.move(zd),y.B(zd),y.B(vd),y.Bc(ud),y.ye(sd);
this.gv();break;case"Grid":break;case"TableRow":case"TableColumn":y.m(this.toString()+" is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");break;default:y.m("Unknown panel type: "+u)}y.Bc(j)}},D.prototype.hj=function(a){var c,d,b=this.Ta;if(kb(0,0,b.width,b.height,a.x,a.y)){for(c=this.za.length,b=y.dc(0,0);c--;)if(d=this.za.n[0],(d.visible||d===this.Vb)&&(Ta(b.set(a),d.transform),d.Ea(b)))return y.B(b),h;return y.B(b),this.Uc===q&&this.Ge===q?s:h}return s},D.prototype.findObject=D.prototype.xe=function(a){var b,c,d,e;if(this.name===a)return this;for(b=this.za.n,c=b.length,d=0;c>d;d++){if(e=b[d],e.name===a)return e;if(e instanceof D&&!e.MC()&&(e=e.xe(a),e!==q))return e}return q},da=D.prototype,da.mi=function(){return!(this.type===Fj||this.type===Gj)},da.vd=function(a,b,c){var d,e,g,i,j,k,l;if(this.$e===s)return q;if(b===f&&(b=q),c===f&&(c=q),bi(this))return q;if(d=this.Ta,e=1/this.rj(),g=this.mi(),i=g?a:Ta(y.dc(a.x,a.y),this.transform),kb(-(5*e),-(5*e),d.width+10*e,d.height+10*e,i.x,i.y)){if(!this.gg){for(j=this.za.length,e=y.M();j--;)if(k=this.za.n[j],(k.visible||k===this.Vb)&&(k.mi()?Ta(e.set(a),k.transform):e.set(a),l=q,k instanceof D?l=k.vd(e,b,c):k.$e===h&&k.Ea(e)&&(l=k),l!==q&&(b!==q&&(l=b(l)),l&&(c===q||c(l)))))return y.B(e),g||y.B(i),l;y.B(e)}return this.background===q&&this.ej===q?(g||y.B(i),q):(a=kb(0,0,d.width,d.height,i.x,i.y)?this:q,g||y.B(i),a)}return g||y.B(i),q},da.On=function(a,b,c,d){var e,g,h,i,j;if(this.$e===s)return s;if(b===f&&(b=q),c===f&&(c=q),!(d instanceof F||d instanceof na||!(d=new F(P))),e=this.Ta,g=this.mi(),h=g?a:Ta(y.dc(a.x,a.y),this.transform),kb(0,0,e.width,e.height,h.x,h.y)){if(!this.gg){for(i=this.za.length,e=y.M();i--;)j=this.za.n[i],(j.visible||j===this.Vb)&&(j.mi()?Ta(e.set(a),j.transform):e.set(a),(j instanceof D?j.On(e,b,c,d):j.Ea(e))&&j.$e!==s&&(b!==q&&(j=b(j)),j&&(c===q||c(j))&&d.add(j)));y.B(e)}return g||y.B(h),this.background!==q||this.ej!==q}return g||y.B(h),s},da.oj=function(a,b,c,d,e,g){var i,j,k,l,m;if(this.$e===s)return s;if(b===f&&(b=q),c===f&&(c=q),i=g,g===f&&(i=y.xg(),i.reset()),i.multiply(this.transform),this.Bl(a,i))return gl(this,b,c,e),g===f&&y.ye(i),h;if(this.qf(a,i)){if(!this.gg)for(j=this.za.length;j--;)k=this.za.n[j],(k.visible||k===this.Vb)&&(l=k.ua,m=this.Ta,l.x>m.width||l.y>m.height||0>l.x+l.width||0>l.y+l.height||(l=y.xg(),l.set(i),(k instanceof D?k.oj(a,b,c,d,e,l):lj(k,a,d,l))&&(b!==q&&(k=b(k)),k&&(c===q||c(k))&&e.add(k)),y.ye(l)));return g===f&&y.ye(i),d}return g===f&&y.ye(i),s},da.Pn=function(a,b,c,d,e,g){var h,i,j,k,l,m,n,o;if(this.$e===s)return s;if(c===f&&(c=q),d===f&&(d=q),h=this.Ta,i=this.mi(),j=i?a:Ta(y.dc(a.x,a.y),this.transform),k=i?b:Ta(y.dc(b.x,b.y),this.transform),l=j.xk(k),m=0<j.x&&j.x<h.width&&0<j.y&&j.y<h.height||Ua(j.x,j.y,0,0,0,h.height)<l||Ua(j.x,j.y,0,h.height,h.width,h.height)<l||Ua(j.x,j.y,h.width,h.height,h.width,0)<l||Ua(j.x,j.y,h.width,0,0,0)<l,h=0<j.x&&j.x<h.width&&0<j.y&&j.y<h.height&&Ua(j.x,j.y,0,0,0,h.height)<l&&Ua(j.x,j.y,0,h.height,h.width,h.height)<l&&Ua(j.x,j.y,h.width,h.height,h.width,0)<l&&Ua(j.x,j.y,h.width,0,0,0)<l,i||(y.B(j),y.B(k)),m){if(!this.gg){for(i=y.M(),j=y.M(),k=this.za.length;k--;)l=this.za.n[k],(l.visible||l===this.Vb)&&(n=l.ua,o=this.Ta,n.x>o.width||n.y>o.height||0>n.x+n.width||0>n.y+n.height||(l.mi()?(n=l.transform,Ta(i.set(a),n),Ta(j.set(b),n)):(i.set(a),j.set(b)),(l instanceof D?l.Pn(i,j,c,d,e,g):l.jC(i,j,e))&&(c!==q&&(l=c(l)),l&&(d===q||d(l))&&g.add(l))));y.B(i),y.B(j)}return e?m:h}return s},D.prototype.add=D.prototype.add=function(a){y.l(a,P,D,"add:element"),this.wd(this.za.count,a)},D.prototype.elt=D.prototype.sa=function(a){return this.za.sa(a)},D.prototype.insertAt=D.prototype.wd=function(a,b){var c,d,e,f,g,i;if(b instanceof R&&y.m("Cannot add a Part to a Panel: "+b),(this===b||this.hi(b))&&(this===b&&y.m("Cannot make a Panel contain itself: "+this.toString()),y.m("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+b.toString())),c=b.ga,c!==q&&c!==this&&y.m("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+b.toString()+", already contained by "+c.toString()+", cannot be shared by this Panel: "+this.toString()),this.Y===Jh&&!(b instanceof V)&&y.m("Can only add Shapes to a Grid Panel, not: "+b),b.Kk(this),b.nl=q,this.Oy!==q&&(d=b.data,d!==q&&"object"==typeof d&&(this.yf===q&&(this.yf=new ma(Object,D)),this.yf.add(d,b))),e=this.za,d=-1,c===this){for(f=-1,g=e.count,i=0;g>i;i++)if(e.n[i]===b){f=i;break}if(-1!==f){if(f===a||f+1>=e.count&&a>=e.count)return;e.kd(f),d=f}else y.m("element "+b.toString()+" has panel "+c.toString()+" but is not contained by it.")}(0>a||a>e.count)&&(a=e.count),e.wd(a,b),this.aa(),b.aa(),b.Td!==q&&(this.Bi=h),b instanceof D&&b.Bi===h&&(this.Bi=h),c=this.W,c!==q&&(c.gk=q,c.Ji=0/0,b.Td!==q&&c instanceof T&&(c.Bi=h),e=this.h,e!==q&&e.va.cb||(-1!==d&&c.Qc(ud,"elements",this,b,q,d,q),c.Qc(td,"elements",this,q,b,q,a)))},D.prototype.remove=D.prototype.remove=function(a){y.l(a,P,D,"remove:element");for(var b=this.za,c=b.count,d=-1,e=0;c>e;e++)if(b.n[e]===a){d=e;break}-1!==d&&this.ze(d)},D.prototype.removeAt=D.prototype.kd=function(a){x&&y.p(a,D,"removeAt:idx"),a>=0&&this.ze(a)},D.prototype.ze=function(a){var d,b=this.za,c=b.sa(a);c.nl=q,c.Kk(q),this.yf!==q&&(d=c.data,"object"==typeof d&&this.yf.remove(d)),b.kd(a),nj(this,s),this.aa(),b=this.W,b!==q&&(b.gk=q,b.Ji=0/0,d=this.h,d!==q&&d.va.cb||b.Qc(ud,"elements",this,c,q,a,q))},y.A(D,{qv:"rowCount"},function(){return this.Kc===f?0:this.Kc.length}),D.prototype.getRowDefinition=D.prototype.Od=function(a){var b,c;return this.Kc===f?q:(x&&y.p(a,D,"getRowDefinition:idx"),0>a&&y.ka(a,">= 0",D,"getRowDefinition:idx"),a=Math.round(a),b=this.Kc,b[a]===f&&(c=new hk,c.Kk(this),c.dl=h,c.Vd=a,b[a]=c),b[a])},D.prototype.removeRowDefinition=D.prototype.rJ=function(a){if(this.Kc!==f){x&&y.p(a,D,"removeRowDefinition:idx"),0>a&&y.ka(a,">= 0",D,"removeRowDefinition:idx"),a=Math.round(a);var b=this.Kc;b[a]&&(b[a]=f)}},y.A(D,{Au:"columnCount"},function(){return this.Ec===f?0:this.Ec.length}),D.prototype.getColumnDefinition=D.prototype.Nd=function(a){var b,c;return this.Ec===f?q:(x&&y.p(a,D,"getColumnDefinition:idx"),0>a&&y.ka(a,">= 0",D,"getColumnDefinition:idx"),a=Math.round(a),b=this.Ec,b[a]===f&&(c=new hk,c.Kk(this),c.dl=s,c.Vd=a,b[a]=c),b[a])},D.prototype.removeColumnDefinition=D.prototype.qJ=function(a){if(this.Ec!==f){x&&y.p(a,D,"removeColumnDefinition:idx"),0>a&&y.ka(a,">= 0",D,"removeColumnDefinition:idx"),a=Math.round(a);var b=this.Ec;b[a]&&(b[a]=f)}},y.g(D,"rowSizing",D.prototype.MD),y.defineProperty(D,{MD:"rowSizing"},function(){return this.ol===f?Pk:this.ol},function(a){if(this.ol!==f){var b=this.ol;b!==a&&(a!==Pk&&a!==Zk&&y.m("rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.ol=a,this.aa(),this.i("rowSizing",b,a))}}),y.g(D,"columnSizing",D.prototype.NB),y.defineProperty(D,{NB:"columnSizing"},function(){return this.Uk===f?Pk:this.Uk},function(a){if(this.Uk!==f){var b=this.Uk;b!==a&&(a!==Pk&&a!==Zk&&y.m("columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.Uk=a,this.aa(),this.i("columnSizing",b,a))}}),y.g(D,"topIndex",D.prototype.GH),y.defineProperty(D,{GH:"topIndex"},function(){return this.$i===f?0:this.$i},function(a){if(this.$i!==f){var b=this.$i;b!==a&&((!isFinite(a)||0>a)&&y.m("topIndex must be greater than zero and a real number. Was "+a),this.$i=a,Lj(this),this.i("topIndex",b,a))}}),y.g(D,"leftIndex",D.prototype.TG),y.defineProperty(D,{TG:"leftIndex"},function(){return this.Ei===f?0:this.Ei},function(a){if(this.Ei!==f){var b=this.Ei;b!==a&&((!isFinite(a)||0>a)&&y.m("leftIndex must be greater than zero and a real number. Was "+a),this.Ei=a,Lj(this),this.i("leftIndex",b,a))}}),D.prototype.findRowForLocalY=D.prototype.CI=function(a){var b,c,d,e,g;if(0>a)return-1;if(this.type!==Pj)return 0/0;for(b=0,c=this.Kc,d=c.length,e=this.$i;d>e;e++)if(g=c[e],g!==f&&(b+=g.total,b>a))return e;return-1},D.prototype.findColumnForLocalX=D.prototype.uI=function(a){var b,c,d,e,g;if(0>a)return-1;if(this.type!==Pj)return 0/0;for(b=0,c=this.Ec,d=c.length,e=this.Ei;d>e;e++)if(g=c[e],g!==f&&(b+=g.total,b>a))return e;return-1},y.g(D,"data",D.prototype.data),y.defineProperty(D,{data:"data"},w("rm"),function(a){var c,d,b=this.rm;b!==a&&(c=this instanceof R&&!(this instanceof Ge),c&&y.j(a,"object",D,"data"),Je(this),this.rm=a,d=this.h,d!==q&&(c?this instanceof U?(b!==q&&d.Sj.remove(b),a!==q&&d.Sj.add(a,this)):(b!==q&&d.xh.remove(b),a!==q&&d.xh.add(a,this)):(c=this.ga,c!==q&&c.yf!==q&&(b!==q&&c.yf.remove(b),a!==q&&c.yf.add(a,this)))),this.i("data",b,a),d!==q&&d.va.cb||a!==q&&this.yb())}),D.prototype.updateTargetBindings=D.prototype.yb=function(a){var c,d,e,g,b=this.Sk;if(b!==q)for(a===f&&(a=""),b=b.k;b.next();)if(c=b.value,d=c.wz,!(""!==a&&d!==a||(d=c.Az,c.PB===q&&""===d)))if(d=this.data,e=c.ps,e!==q&&(d=this.xe(e)),d===q)x&&y.trace("Binding error: missing GraphObject named "+e+" in "+this.toString());else{if(e=this,g=c.Zl,""!==g){if(e=this.xe(g),e===q)continue}else c.Cf!==q&&(e=c.Cf);if(g=c.Jx,0!==g){if(!(e instanceof D))continue;1===g?e=e.Nd(c.du):2===g&&(e=e.Od(c.du))}e!==f&&c.vE(e,d)}},y.g(D,"itemArray",D.prototype.Oy),y.defineProperty(D,{Oy:"itemArray"},w("bk"),function(a){var c,b=this.bk;b!==a&&(x&&a!==q&&!y.isArray(a)&&y.m("Panel.itemArray must be an Array-like object or null, not: "+a),c=this.h,c!==q&&b!==q&&yi(c,this),this.bk=a,c!==q&&a!==q&&wi(c,this),this.i("itemArray",b,a),c!==q&&c.va.cb||this.jz())}),D.prototype.rebuildItemElements=D.prototype.jz=function(){var b,c,a=0;for((this.type===zg||this.type===Ch||this.type===ig)&&(a=1);this.za.length>a;)this.ze(a);if(a=this.Oy,a!==q)for(b=y.Sb(a),c=0;b>c;c++)Ji(this,y.Hb(a,c))},D.prototype.isItemPanel=D.prototype.MC=function(){return this.bk!==q||this.hg!==q},y.g(D,"itemTemplate",D.prototype.PG),y.defineProperty(D,{PG:"itemTemplate"},function(){return this.hg===q?q:this.hg.wa("")},function(a){if(this.hg===q){if(a===q)return;this.hg=new ma("string",D)}var b=this.hg.wa("");b!==a&&(y.l(a,D,D,"itemTemplate"),a instanceof R&&y.m("itemTemplate must not be a Part: "+a),this.hg.add("",a),this.i("itemTemplate",b,a),a=this.h,a!==q&&a.va.cb||this.jz())}),y.g(D,"itemTemplateMap",D.prototype.PC),y.defineProperty(D,{PC:"itemTemplateMap"},w("hg"),function(a){var c,d,b=this.hg;if(b!==a){for(y.l(a,ma,D,"itemTemplateMap"),c=a.k;c.next();)d=c.value,d instanceof R&&y.m("Template in itemTemplateMap must not be a Part: "+d);this.hg=a,this.i("itemTemplateMap",b,a),a=this.h,a!==q&&a.va.cb||this.jz()}}),y.g(D,"itemCategoryProperty",D.prototype.OG),y.defineProperty(D,{OG:"itemCategoryProperty"},w("Om"),function(a){var b=this.Om;b!==a&&("string"!=typeof a&&"function"!=typeof a&&y.Kb(a,"string or function",D,"itemCategoryProperty"),this.Om=a,this.i("itemCategoryProperty",b,a))}),D.prototype.getCategoryForItemData=function(a){if(a===q)return"";var b=this.Om;if("function"==typeof b)b=b(a);else{if("string"!=typeof b||"object"!=typeof a)return"";if(""===b)return"";b=y.Xa(a,b)}return b===f?"":"string"==typeof b?b:(x&&y.trace("Panel.getCategoryForItemData found a non-string category for "+a+": "+b),"")},D.prototype.findTemplateForItemData=function(a,b){var c=this.PC,d=q;return c!==q&&(d=c.wa(b)),d===q&&(y.AE||(y.AE=h,y.trace('No item template Panel found for category "'+b+'" on '+this),y.trace("  Using default item template."),c=new D,d=new oa,d.bind(new be("text","",vd)),c.add(d),y.YB=c),d=y.YB),d instanceof D?d:q},y.g(D,"isAtomic",D.prototype.JG),y.defineProperty(D,{JG:"isAtomic"},w("gg"),function(a){var b=this.gg;b!==a&&(y.j(a,"boolean",D,"isAtomic"),this.gg=a,this.i("isAtomic",b,a))}),y.g(D,"opacity",D.prototype.opacity),y.defineProperty(D,{opacity:"opacity"},w("mf"),function(a){var b=this.mf;b!==a&&(y.j(a,"number",D,"opacity"),(0>a||a>1)&&y.ka(a,"0 <= val <= 1",D,"opacity"),this.mf=a,this.i("opacity",b,a),a=this.h,b=this.W,a!==q&&b!==q&&a.ta(kh(b,b.ua)))}),y.ba("RowColumnDefinition",hk),hk.prototype.copy=function(){var a=new hk;return a.dl=this.dl,a.Vd=this.Vd,a.nf=this.nf,a.jl=this.jl,a.il=this.il,a.Ud=this.Ud,a.ub=this.ub,a.nb=this.nb,a.Ug=this.Ug,a.Mq=this.Mq,a.Si=this.Si===q?q:this.Si.U(),a.Jq=this.Jq,a.Kq=this.Kq,a.Qg=q,this.Qg&&(a.Qg=this.Qg.slice(0)),a.Uc=this.Uc,a.ap=this.ap,a.rc=this.rc,a},hk.prototype.toString=function(){return"RowColumnDefinition "+(this.eh?"(Row ":"(Column ")+this.index+") #"+y.ac(this)},hk.Default=ll=y.w(hk,"Default",0),hk.None=Zk=y.w(hk,"None",1),hk.ProportionalExtra=Pk=y.w(hk,"ProportionalExtra",2),hk.prototype.Kk=ba("Nh"),hk.prototype.xc=function(a,b,c,d,e){var g,h,i,j,k,f=this.Nh;if(f!==q){for(f.aa(),g=this.eh,h=f.za,i=h.length,j=0;i>j;j++)k=h.n[j],(g?k.qc:k.column)===this.index&&k.aa();if(f.Qc(sd,a,this,b,c,d,e),this.rc!==q&&(b=f.Rn(),b!==q&&(b=b.data,b!==q)))for(c=this.rc.k;c.next();)c.value.uE(this,b,a,q)}},y.A(hk,{ga:"panel"},w("Nh")),y.A(hk,{eh:"isRow"},w("dl")),y.A(hk,{index:"index"},w("Vd")),y.g(hk,"height",hk.prototype.height),y.defineProperty(hk,{height:"height"},w("nf"),function(a){var b=this.nf;b!==a&&(x&&y.j(a,"number",hk,"height"),0>a&&y.ka(a,">= 0",hk,"height"),this.nf=a,Xk(this,this.ub),this.xc("size",b,a))}),y.g(hk,"width",hk.prototype.width),y.defineProperty(hk,{width:"width"},w("nf"),function(a){var b=this.nf;b!==a&&(x&&y.j(a,"number",hk,"width"),0>a&&y.ka(a,">= 0",hk,"width"),this.nf=a,Xk(this,this.ub),this.xc("size",b,a))}),y.g(hk,"minimum",hk.prototype.gh),y.defineProperty(hk,{gh:"minimum"},w("jl"),function(a){var b=this.jl;b!==a&&(x&&y.j(a,"number",hk,"minimum"),(0>a||!isFinite(a))&&y.ka(a,">= 0",hk,"minimum"),this.jl=a,Xk(this,this.ub),this.xc("minimum",b,a))}),y.g(hk,"maximum",hk.prototype.Xe),y.defineProperty(hk,{Xe:"maximum"},w("il"),function(a){var b=this.il;b!==a&&(x&&y.j(a,"number",hk,"maximum"),0>a&&y.ka(a,">= 0",hk,"maximum"),this.il=a,Xk(this,this.ub),this.xc("maximum",b,a))}),y.g(hk,"alignment",hk.prototype.alignment),y.defineProperty(hk,{alignment:"alignment"},w("Ud"),function(a){var b=this.Ud;b.L(a)||(x&&y.l(a,J,hk,"alignment"),this.Ud=a.U(),this.xc("alignment",b,a))}),y.g(hk,"stretch",hk.prototype.mh),y.defineProperty(hk,{mh:"stretch"},w("Ug"),function(a){var b=this.Ug;b!==a&&(x&&y.rb(a,P,hk,"stretch"),this.Ug=a,this.xc("stretch",b,a))}),y.g(hk,"separatorPadding",hk.prototype.qz),y.defineProperty(hk,{qz:"separatorPadding"},w("Si"),function(a){"number"==typeof a?a=new ab(a):a!==q&&x&&y.l(a,ab,hk,"separatorPadding");var b=this.Si;a!==q&&b!==q&&b.L(a)||(a!==q&&(a=a.U()),this.Si=a,this.xc("separatorPadding",b,a))}),y.g(hk,"separatorStroke",hk.prototype.Xl),y.defineProperty(hk,{Xl:"separatorStroke"},w("Jq"),function(a){var b=this.Jq;b!==a&&(a===q||"string"==typeof a||a instanceof Hd)&&(a instanceof Hd&&a.freeze(),this.Jq=a,this.ga&&this.ga.ta(),this.xc("separatorStroke",b,a))}),y.g(hk,"separatorStrokeWidth",hk.prototype.Yl),y.defineProperty(hk,{Yl:"separatorStrokeWidth"},w("Kq"),function(a){var b=this.Kq;b!==a&&(this.Kq=a,this.ga&&this.ga.ta(),this.xc("separatorStrokeWidth",b,a))}),y.g(hk,"separatorDashArray",hk.prototype.TD),y.defineProperty(hk,{TD:"separatorDashArray"},w("Qg"),function(a){var b=this.Qg;b!==a&&(a instanceof Array||y.Kb(a,"Array",hk,"separatorDashArray:val"),this.Qg=a,this.ga&&this.ga.ta(),this.xc("separatorDashArray",b,a))}),y.g(hk,"background",hk.prototype.background),y.defineProperty(hk,{background:"background"},w("Uc"),function(a){var b=this.Uc;b!==a&&(a===q||"string"==typeof a||a instanceof Hd)&&(a instanceof Hd&&a.freeze(),this.Uc=a,this.ga&&this.ga.ta(),this.xc("background",b,a))}),y.g(hk,"coversSeparators",hk.prototype.Eu),y.defineProperty(hk,{Eu:"coversSeparators"},w("ap"),function(a){var b=this.ap;b!==a&&(y.j(a,"boolean",hk,"coversSeparators"),this.ap=a,this.xc("coversSeparators",b,a))}),y.g(hk,"sizing",hk.prototype.ns),y.defineProperty(hk,{ns:"sizing"},w("Mq"),function(a){var b=this.Mq;b!==a&&(x&&y.rb(a,hk,hk,"sizing"),this.Mq=a,this.xc("sizing",b,a))}),y.A(hk,{Bb:"actual"},w("ub")),y.A(hk,{total:"total"},function(){return this.ub+Tk(this)}),y.A(hk,{position:"position"},w("nb")),hk.prototype.bind=hk.prototype.bind=function(a){a.Cf=this;var b=this.ga;b!==q&&(b=b.Rn(),b!==q&&ck(b)&&y.m("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+a)),this.rc===q&&(this.rc=new F(be)),this.rc.add(a)},y.ba("Shape",V),y.Ka(V,P),V.prototype.cloneProtected=function(a){P.prototype.cloneProtected.call(this,a),a.Na=this.Na,a.Dm=this.Dm,a.ng=this.ng,a.qp=this.qp,a.Qj=this.Qj,a.Je=this.Je,a.nc=this.nc,a.Vg=this.Vg,a.mn=this.mn,a.nn=this.nn,a.rl=this.rl,a.ql=q,this.ql&&(a.ql=this.ql.slice(0)),a.Lc=this.Lc,a.Qh=this.Qh.U(),a.Rh=this.Rh.U(),a.kq=this.kq,a.lq=this.lq,a.wp=this.wp,a.Bp=this.Bp,a.nq=this.nq,a.on=this.on,a.Fm=this.Fm,a.up=this.up},V.prototype.toString=function(){return"Shape("+("None"!==this.wb?this.wb:"None"!==this.bm?this.bm:this.Pu)+")#"+y.ac(this)},V.prototype.Hl=function(a,b){var c,d,e,g,i,j,k,l,m,n,o,p,r,t,u,v,w,x,z,A,B,C;if((this.nc!==q||this.Je!==q)&&(this.Je!==q&&Hj(this,a,this.Je,h),this.nc!==q&&Hj(this,a,this.nc,s),c=this.Vg,0===c&&(d=this.W,d instanceof Ge&&d.type===ig&&d.zc instanceof V&&(c=d.zc.jb)),a.lineWidth=c,a.lineJoin=this.nn,a.lineCap=this.mn,a.miterLimit=this.rl,e=s,this.W&&(e=this.W.Ck),g=h,this.nc!==q&&this.Je===q&&(g=s),c=s,d=this.yz,d!==q&&(i=c=h,a.setLineDash!==f?(a.setLineDash(d),a.lineDashOffset=this.Lc):a.webkitLineDash!==f?(a.webkitLineDash=d,a.webkitLineDashOffset=this.Lc):a.mozDash!==f?(a.mozDash=d,a.mozDashOffset=this.Lc):i=s),j=this.Na,j!==q)){if(j.Y===wc)a.beginPath(),c&&!i?ij(a,j.Rb,j.$b,j.Vc,j.cd,d,this.Lc):(a.moveTo(j.Rb,j.$b),a.lineTo(j.Vc,j.cd)),this.Je!==q&&a.fill(),this.nc!==q&&a.stroke();else if(j.Y===xc)k=j.Rb,l=j.$b,m=j.Vc,j=j.cd,n=Math.min(k,m),o=Math.min(l,j),k=Math.abs(m-k),l=Math.abs(j-l),this.Je!==q&&a.fillRect(n,o,k,l),this.nc!==q&&(g&&e&&(p=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),c&&!i?(i=[[n,o],[n+k,o],[n+k,o+l],[n,o+l],[n,o]],a.beginPath(),nl(a,i,d,this.Lc),a.stroke()):a.strokeRect(n,o,k,l),g&&e&&(a.shadowOffsetX=p[0],a.shadowOffsetY=p[1],a.shadowBlur=p[2]));else if(j.Y===yc)k=j.Rb,l=j.$b,m=j.Vc,j=j.cd,n=Math.abs(m-k)/2,o=Math.abs(j-l)/2,k=Math.min(k,m)+n,l=Math.min(l,j)+o,a.beginPath(),a.moveTo(k,l-o),a.bezierCurveTo(k+H.ra*n,l-o,k+n,l-H.ra*o,k+n,l),a.bezierCurveTo(k+n,l+H.ra*o,k+H.ra*n,l+o,k,l+o),a.bezierCurveTo(k-H.ra*n,l+o,k-n,l+H.ra*o,k-n,l),a.bezierCurveTo(k-n,l-H.ra*o,k-H.ra*n,l-o,k,l-o),a.closePath(),this.Je!==q&&a.fill(),c&&!i&&(i=y.tb(),H.ae(k,l-o,k+H.ra*n,l-o,k+n,l-H.ra*o,k+n,l,.5,i),H.ae(k+n,l,k+n,l+H.ra*o,k+H.ra*n,l+o,k,l+o,.5,i),H.ae(k,l+o,k-H.ra*n,l+o,k-n,l+H.ra*o,k-n,l,.5,i),H.ae(k-n,l,k-n,l-H.ra*o,k-H.ra*n,l-o,k,l-o,.5,i),a.beginPath(),nl(a,i,d,this.Lc),y.ya(i)),this.nc!==q&&(g&&e&&(p=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),a.stroke(),g&&e&&(a.shadowOffsetX=p[0],a.shadowOffsetY=p[1],a.shadowBlur=p[2]));else if(j.Y===oc){for(n=j.Uj,o=n.length,r=0;o>r;r++){for(t=n.n[r],a.beginPath(),a.moveTo(t.ha,t.ia),u=t.Ca.n,v=u.length,w=q,x=0;v>x;x++){switch(z=u[x],z.Y){case Wc:a.moveTo(z.D,z.F);break;case Ec:a.lineTo(z.D,z.F);break;case Xc:a.bezierCurveTo(z.lg,z.mg,z.jk,z.kk,z.Xd,z.Yd);break;case cd:a.quadraticCurveTo(z.lg,z.mg,z.Xd,z.Yd);break;case dd:if(z.radiusX===z.radiusY)w=Math.PI/180,a.arc(z.nm,z.om,z.radiusX,z.Vf*w,(z.Vf+z.nh)*w,0>z.nh);else for(w=fd(z,t),A=w.length,B=0;A>B;B++)C=w[B],0===B&&a.lineTo(C.x1,C.y1),a.bezierCurveTo(C.x2,C.y2,C.Bd,C.Cd,C.Db,C.Eb);break;case ed:for(w&&w.type===dd?(w=fd(w,t),w=w[w.length-1]||q,w!==q&&(k=w.Db,m=w.Eb)):(k=w?w.D:t.ha,m=w?w.F:t.ia),w=gd(z,t,k,m),A=w.length,B=0;A>B;B++)C=w[B],a.bezierCurveTo(C.x2,C.y2,C.Bd,C.Cd,C.Db,C.Eb);break;default:y.m("Segment not of valid type")}z.Kg&&a.closePath(),w=z}e?t.Mm?(t.bl===h&&this.Je!==q?(a.fill(),g=h):g=s,this.nc!==q&&(g&&(p=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),(!c||i)&&a.stroke(),g&&(a.shadowOffsetX=p[0],a.shadowOffsetY=p[1],a.shadowBlur=p[2]))):(g&&(p=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),t.bl===h&&this.Je!==q&&a.fill(),this.nc!==q&&(!c||i)&&a.stroke(),g&&(a.shadowOffsetX=p[0],a.shadowOffsetY=p[1],a.shadowBlur=p[2])):(t.bl===h&&this.Je!==q&&a.fill(),this.nc!==q&&(!c||i)&&a.stroke())}if(c&&!i)for(p=g,i=j.Uj,g=i.length,j=0;g>j;j++){for(k=i.n[j],a.beginPath(),m=y.tb(),m.push([k.ha,k.ia]),n=k.ha,o=k.ia,r=n,t=o,u=k.Ca.n,v=u.length,x=0;v>x;x++){switch(z=u[x],z.Y){case Wc:nl(a,m,d,this.Lc),m.length=0,m.push([z.D,z.F]),n=z.D,o=z.F,r=n,t=o;break;case Ec:m.push([z.D,z.F]),n=z.D,o=z.F;break;case Xc:H.ae(n,o,z.lg,z.mg,z.jk,z.kk,z.Xd,z.Yd,.5,m),n=z.D,o=z.F;break;case cd:H.uo(n,o,z.lg,z.mg,z.Xd,z.Yd,.5,m),n=z.D,o=z.F;break;case dd:for(w=fd(z,k),A=w.length,B=0;A>B;B++)C=w[B],H.ae(n,o,C.x2,C.y2,C.Bd,C.Cd,C.Db,C.Eb,.5,m),n=C.Db,o=C.Eb;break;case ed:for(w=gd(z,k,n,o),A=w.length,B=0;A>B;B++)C=w[B],H.ae(n,o,C.x2,C.y2,C.Bd,C.Cd,C.Db,C.Eb,.5,m),n=C.Db,o=C.Eb;break;default:y.m("Segment not of valid type")}z.Kg&&(m.push([r,t]),nl(a,m,d,this.Lc))}nl(a,m,d,this.Lc),y.ya(m),this.nc!==q&&(p&&e&&(l=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),a.stroke(),p&&e&&(a.shadowOffsetX=l[0],a.shadowOffsetY=l[1],a.shadowBlur=l[2]))}}if(c&&(a.setLineDash!==f?(a.setLineDash(y.rh),a.lineDashOffset=0):a.webkitLineDash!==f?(a.webkitLineDash=y.rh,a.webkitLineDashOffset=0):a.mozDash!==f&&(a.mozDash=q,a.mozDashOffset=0)),this.cz){for(c=this.cz,ch(c,1/0,1/0),d=c.Ba,c.tc(0,0,d.width,d.height),a.save(),d=this.Oc.fb.ob(),a.beginPath(),l=y.tb(),l.push([d.ha,d.ia]),p=d.ha,e=d.ia,i=p,g=e,j=d.Ca.n,k=j.length,m=0;k>m;m++){switch(n=j[m],n.Y){case Wc:ml(a,b,l,c),l.length=0,l.push([n.D,n.F]),p=n.D,e=n.F,i=p,g=e;break;case Ec:l.push([n.D,n.F]),p=n.D,e=n.F;break;case Xc:H.ae(p,e,n.lg,n.mg,n.jk,n.kk,n.Xd,n.Yd,.5,l),p=n.D,e=n.F;break;case cd:H.uo(p,e,n.lg,n.mg,n.Xd,n.Yd,.5,l),p=n.D,e=n.F;break;case dd:for(o=fd(n,d),r=o.length,t=0;r>t;t++)u=o[t],H.ae(p,e,u.x2,u.y2,u.Bd,u.Cd,u.Db,u.Eb,.5,l),p=u.Db,e=u.Eb;break;case ed:for(o=gd(n,d,p,e),r=o.length,t=0;r>t;t++)u=o[t],H.ae(p,e,u.x2,u.y2,u.Bd,u.Cd,u.Db,u.Eb,.5,l),p=u.Db,e=u.Eb;break;default:y.m("Segment not of valid type")}n.Kg&&(l.push([i,g]),ml(a,b,l,c))}ml(a,b,l,c),y.ya(l),a.restore()}}},V.prototype.getDocumentPoint=V.prototype.hb=function(a,b){b===f&&(b=new A),Cb(a)&&y.m("Spot must be real");var c=this.Ta,d=this.jb;return b.q(a.x*(c.width+d)-d/2+c.x+a.offsetX,a.y*(c.height+d)-d/2+c.y+a.offsetY),this.oe.Qa(b),b},V.prototype.hj=function(a,b){var d,e,f,g,h,i,j,k,c=this.Na;if(c===q||this.fill===q&&this.stroke===q)return s;if(d=c.Ib,e=this.jb/2,c.type===wc&&!b&&(e+=2),f=y.df(),f.assign(d),f.pg(e+2,e+2),!f.Ea(a))return y.Bc(f),s;if(d=e+1e-4,c.type===wc)return this.stroke===q?s:(f=(c.D-c.ha)*(a.x-c.ha)+(c.F-c.ia)*(a.y-c.ia),0>(c.ha-c.D)*(a.x-c.D)+(c.ia-c.F)*(a.y-c.F)||0>f?s:H.jd(c.ha,c.ia,c.D,c.F,e,a.x,a.y));if(c.type===xc){if(g=c.ha,h=c.ia,i=c.D,j=c.F,c=Math.min(g,i),k=Math.min(h,j),g=Math.abs(i-g),h=Math.abs(j-h),f.x=c,f.y=k,f.width=g,f.height=h,this.fill===q){if(f.pg(-d,-d),f.Ea(a))return s;f.pg(d,d)}return this.stroke!==q&&f.pg(e,e),e=f.Ea(a),y.Bc(f),e}if(c.type===yc){if(g=c.ha,h=c.ia,i=c.D,j=c.F,c=Math.min(g,i),k=Math.min(h,j),g=Math.abs(i-g),h=Math.abs(j-h),f=g/2,h/=2,c=a.x-(c+f),k=a.y-(k+h),this.fill===q){if(f-=d,h-=d,0>=f||0>=h||1>=c*c/(f*f)+k*k/(h*h))return s;f+=d,h+=d}return this.stroke!==q&&(f+=e,h+=e),0>=f||0>=h?s:1>=c*c/(f*f)+k*k/(h*h)}return c.type===oc?this.fill===q?jd(c,a.x,a.y,e):c.Ea(a,e,1<this.jb,b):(y.m("Unknown Geometry type"),s)},V.prototype.Nr=function(a,b,c,d){var h,i,j,k,l,m,n,o,p,r,s,e=this.Aa,g=this.Vg;switch(a=Math.max(a,0),b=Math.max(b,0),this.ng?h=this.Na.Ib:(i=this.wb,j=H.dz[i],j===f&&(k=H.ei[i],"string"==typeof k&&(k=H.ei[k]),"function"==typeof k?(j=k(q,100,100),H.dz[i]=j):y.m("Unsupported Figure:"+i)),h=j.Ib),i=h.width,j=h.height,k=h.width,l=h.height,mj(this)){case dj:d=c=0;break;case qc:k=Math.max(a-g,0),l=Math.max(b-g,0);break;case fj:k=Math.max(a-g,0),d=0;break;case ej:c=0,l=Math.max(b-g,0)}switch(isFinite(e.width)&&(k=e.width),isFinite(e.height)&&(l=e.height),e=this.he,h=this.Ce,c=Math.max(c,h.width)-g,d=Math.max(d,h.height)-g,k=Math.min(e.width,k),l=Math.min(e.height,l),k=isFinite(k)?Math.max(c,k):Math.max(i,c),l=isFinite(l)?Math.max(d,l):Math.max(j,d),c=Wk(this)){case dj:break;case qc:i=k,j=l;break;case Cg:c=Math.min(k/i,l/j),isFinite(c)||(c=1),i*=c,j*=c;break;default:y.m(c+" is not a valid geometryStretch.")}if(this.ng){if(h=this.Oc,d=i,e=j,c=h.copy(),h=h.Ib,d/=h.width,e/=h.height,isFinite(d)||(d=1),isFinite(e)||(e=1),1!==d||1!==e)switch(c.type){case wc:case xc:case yc:c.ha*=d,c.ia*=e,c.D*=d,c.F*=e;break;case oc:for(h=c.fb,m=h.length,n=0;m>n;n++)for(o=h.n[n],o.ha*=d,o.ia*=e,o=o.Ca,p=o.length,r=0;p>r;r++)switch(s=o.n[r],s.type){case Ec:case Wc:s.D*=d,s.F*=e;break;case Xc:s.ib*=d,s.Ab*=e,s.Rd*=d,s.Sd*=e,s.D*=d,s.F*=e;break;case cd:s.ib*=d,s.Ab*=e,s.D*=d,s.F*=e;break;case dd:s.xa*=d,s.Ga*=e,s.radiusX*=d,s.radiusY!==f&&(s.radiusY*=e);break;case ed:s.D*=d,s.F*=e,s.radiusX*=d,s.radiusY*=e;break;default:y.m("Unknown Segment type: "+s.type)}}this.Na=c}else(this.Na===q||this.Na.kt!==a-g||this.Na.jt!==b-g)&&(this.Na=H.makeGeometry(this,i,j));h=this.Na.Ib,1/0===a||1/0===b?jj(this,h.x-g/2,h.y-g/2,0===a&&0===i?0:h.width+g,0===b&&0===j?0:h.height+g):jj(this,-(g/2),-(g/2),k+g,l+g)},V.prototype.gj=function(a,b,c,d){Aj(this,a,b,c,d)},V.prototype.getNearestIntersectionPoint=V.prototype.Un=function(a,b,c){return this.Ar(a.x,a.y,b.x,b.y,c)},V.prototype.Ar=function(a,b,c,d,e){var o,p,r,t,u,v,w,x,z,D,E,B,C,F,G,I,J,f=this.transform,g=1/(f.m11*f.m22-f.m12*f.m21),i=f.m22*g,j=-f.m12*g,k=-f.m21*g,l=f.m11*g,m=g*(f.m21*f.dy-f.m22*f.dx),n=g*(f.m12*f.dx-f.m11*f.dy);if(f=a*i+b*k+m,g=a*j+b*l+n,i=c*i+d*k+m,j=c*j+d*l+n,k=this.jb/2,m=this.Na,m===q&&(ch(this,1/0,1/0),m=this.Na),n=m.Ib,l=s,m.type===wc)if(1.5>=this.jb)l=H.vg(m.Rb,m.$b,m.Vc,m.cd,f,g,i,j,e);else{if(m.Rb===m.Vc?(o=k,p=0):(b=(m.cd-m.$b)/(m.Vc-m.Rb),p=k/Math.sqrt(1+b*b),o=p*b),d=y.tb(),b=new A,H.vg(m.Rb+o,m.$b+p,m.Vc+o,m.cd+p,f,g,i,j,b)&&d.push(b),b=new A,H.vg(m.Rb-o,m.$b-p,m.Vc-o,m.cd-p,f,g,i,j,b)&&d.push(b),b=new A,H.vg(m.Rb+o,m.$b+p,m.Rb-o,m.$b-p,f,g,i,j,b)&&d.push(b),b=new A,H.vg(m.Vc+o,m.cd+p,m.Vc-o,m.cd-p,f,g,i,j,b)&&d.push(b),b=d.length,0===b)return y.ya(d),s;for(l=h,p=1/0,o=0;b>o;o++)i=d[o],r=(i.x-f)*(i.x-f)+(i.y-g)*(i.y-g),p>r&&(p=r,e.x=i.x,e.y=i.y);y.ya(d)}else if(m.type===xc)b=n.x-k,l=H.Un(b,n.y-k,n.x+n.width+k,n.y+n.height+k,f,g,i,j,e);else if(m.type===yc)a:if(b=n.copy().pg(k,k),0===b.width)l=H.vg(b.x,b.y,b.x,b.y+b.height,f,g,i,j,e);else if(0===b.height)l=H.vg(b.x,b.y,b.x+b.width,b.y,f,g,i,j,e);else{if(a=b.width/2,t=b.height/2,d=b.x+a,b=b.y+t,c=9999,f!==i&&(c=(g-j)/(f-i)),9999>Math.abs(c)){if(l=g-b-c*(f-d),0>a*a*c*c+t*t-l*l){e.x=0/0,e.y=0/0,l=s;break a}k=Math.sqrt(a*a*c*c+t*t-l*l),i=(-(a*a*c*l)+a*t*k)/(t*t+a*a*c*c)+d,a=(-(a*a*c*l)-a*t*k)/(t*t+a*a*c*c)+d,j=c*(i-d)+l+b,b=c*(a-d)+l+b,d=Math.abs((f-i)*(f-i))+Math.abs((g-j)*(g-j)),g=Math.abs((f-a)*(f-a))+Math.abs((g-b)*(g-b)),g>d?(e.x=i,e.y=j):(e.x=a,e.y=b)}else{if(i=t*t,j=f-d,i-=i/(a*a)*j*j,0>i){e.x=0/0,e.y=0/0,l=s;break a}k=Math.sqrt(i),j=b+k,b-=k,d=Math.abs(j-g),g=Math.abs(b-g),g>d?(e.x=f,e.y=j):(e.x=f,e.y=b)}l=h}else if(m.type===oc){for(n=y.M(),o=i-f,p=j-g,p=o*o+p*p,e.x=i,e.y=j,o=0;o<m.fb.count;o++)for(x=m.fb.n[o],z=x.Ca,u=x.ha,v=x.ia,B=u,C=v,F=0;F<z.count;F++){switch(D=z.n[F],E=D.type,r=D.D,w=D.F,G=s,E){case Wc:B=r,C=w;break;case Ec:G=ol(u,v,r,w,f,g,i,j,n);break;case Xc:G=D.ib,E=D.Ab,I=D.Rd,J=D.Sd,G=H.kr(u,v,G,E,I,J,r,w,f,g,i,j,.5,n);break;case cd:G=(u+2*D.ib)/3,E=(v+2*D.Ab)/3,I=(2*D.ib+r)/3,J=(2*D.ib+r)/3,G=H.kr(u,v,G,E,I,J,r,w,f,g,i,j,.5,n);break;case dd:case ed:for(w=D.type===dd?fd(D,x):gd(D,x,u,v),E=w.length,I=0;E>I;I++)t=w[I],0===I&&ol(u,v,t.x1,t.y1,f,g,i,j,n)&&(r=pl(f,g,n,p,e),p>r&&(p=r,l=h)),H.kr(t.x1,t.y1,t.x2,t.y2,t.Bd,t.Cd,t.Db,t.Eb,f,g,i,j,.5,n)&&(r=pl(f,g,n,p,e),p>r&&(p=r,l=h));r=t.Db,w=t.Eb;break;default:y.m("Unknown Segment type: "+D.type)}u=r,v=w,G&&(r=pl(f,g,n,p,e),p>r&&(p=r,l=h)),D.Hr&&(r=B,w=C,ol(u,v,r,w,f,g,i,j,n)&&(r=pl(f,g,n,p,e),p>r&&(p=r,l=h)))}f=c-a,g=d-b,b=Math.sqrt(f*f+g*g),0!==b&&(f/=b,g/=b),e.x-=f*k,e.y-=g*k,y.B(n)}else y.m("Invalid Geometry type");return l?(this.transform.Qa(e),h):s},V.prototype.containedInRect=V.prototype.Bl=function(a,b){var c,d,e,g;return b===f?a.ij(this.ua):(c=this.Na,c===q&&(ch(this,1/0,1/0),c=this.Na),c=c.Ib,d=this.jb/2,e=s,g=y.M(),g.q(c.x-d,c.y-d),a.Ea(b.Qa(g))&&(g.q(c.x-d,c.bottom+d),a.Ea(b.Qa(g))&&(g.q(c.right+d,c.bottom+d),a.Ea(b.Qa(g))&&(g.q(c.right+d,c.y-d),a.Ea(b.Qa(g))&&(e=h)))),y.B(g),e)},V.prototype.intersectsRect=V.prototype.qf=function(a,b){var c,d,e,g,i,j,k,l,m;return this.Bl(a,b)||b===f&&(b=this.transform,a.ij(this.ua))?h:(c=y.xg(),c.set(b),c.Gy(),d=a.left,e=a.right,g=a.top,i=a.bottom,j=y.M(),j.q(d,g),c.Qa(j),this.hj(j,h)?(y.B(j),h):(j.q(e,g),c.Qa(j),this.hj(j,h)?(y.B(j),h):(j.q(d,i),c.Qa(j),this.hj(j,h)?(y.B(j),h):(j.q(e,i),c.Qa(j),this.hj(j,h)?(y.B(j),h):(k=y.M(),l=y.M(),c.set(b),c.iD(this.transform),c.Gy(),k.x=e,k.y=g,k.transform(c),j.x=d,j.y=g,j.transform(c),m=s,ql(this,j,k,l)?m=h:(j.x=e,j.y=i,j.transform(c),ql(this,j,k,l)?m=h:(k.x=d,k.y=i,k.transform(c),ql(this,j,k,l)?m=h:(j.x=d,j.y=g,j.transform(c),ql(this,j,k,l)&&(m=h)))),y.B(j),y.ye(c),y.B(k),y.B(l),m)))))},V.prototype.jC=function(a,b,c){function d(a,b){var c,d,f;for(c=a.length,d=0;c>d;d++)if(f=a[d],b.sr(f[0],f[1])>e)return h;return s}var e,f,g,i,j,k,l,m,n,o,p;if(c&&this.fill!==q&&this.hj(a,h))return h;if(e=a.xk(b),b=e,1.5<this.jb&&(e=this.jb/2+Math.sqrt(e),e*=e),f=this.Na,f===q&&(ch(this,1/0,1/0),f=this.Na),!c&&(g=f.Ib,i=g.x,j=g.y,k=g.x+g.width,g=g.y+g.height,Va(a.x,a.y,i,j)<=e&&Va(a.x,a.y,k,j)<=e&&Va(a.x,a.y,i,g)<=e&&Va(a.x,a.y,k,g)<=e))return h;if(i=f.Rb,j=f.$b,k=f.Vc,g=f.cd,f.type===wc){if(c=Ua(a.x,a.y,i,j,k,g),f=(i-k)*(a.x-k)+(j-g)*(a.y-g),c<=(0<=(k-i)*(a.x-i)+(g-j)*(a.y-j)&&f>=0?e:b))return h}else{if(f.type===xc)return b=s,c&&(b=Ua(a.x,a.y,i,j,i,g)<=e||Ua(a.x,a.y,i,j,k,j)<=e||Ua(a.x,a.y,k,j,k,g)<=e||Ua(a.x,a.y,i,g,k,g)<=e),b;if(f.type===yc){if(b=a.x-(i+k)/2,f=a.y-(j+g)/2,l=Math.abs(k-i)/2,m=Math.abs(g-j)/2,0===l||0===m)return c=Ua(a.x,a.y,i,j,k,g),e>=c?h:s;if(!c)return Va(b,f,-l,0)>=e||Va(b,f,0,-m)>=e||Va(b,f,0,m)>=e||Va(b,f,l,0)>=e?s:h;if(a=H.iG(l,m,b,f),e>=a*a)return h}else if(f.type===oc){if(g=f.Ib,i=g.x,j=g.y,k=g.x+g.width,g=g.y+g.height,a.x>k&&a.x<i&&a.y>g&&a.y<j&&Ua(a.x,a.y,i,j,i,g)>e&&Ua(a.x,a.y,i,j,k,j)>e&&Ua(a.x,a.y,k,g,i,g)>e&&Ua(a.x,a.y,k,g,k,j)>e)return s;if(b=Math.sqrt(e),!c){for(c=f.fb,b=0;b<c.count;b++){if(i=c.n[b],l=i.ha,m=i.ia,a.sr(l,m)>e)return s;for(j=i.Ca.n,k=j.length,g=0;k>g;g++)switch(n=j[g],n.type){case Wc:case Ec:if(l=n.D,m=n.F,a.sr(l,m)>e)return s;break;case Xc:if(f=y.tb(),H.ae(l,m,n.ib,n.Ab,n.Rd,n.Sd,n.D,n.F,.8,f),l=d(f,a),y.ya(f),l)return s;if(l=n.D,m=n.F,a.sr(l,m)>e)return s;break;case cd:if(f=y.tb(),H.uo(l,m,n.ib,n.Ab,n.D,n.F,.8,f),l=d(f,a),y.ya(f),l)return s;if(l=n.D,m=n.F,a.sr(l,m)>e)return s;break;case dd:case ed:for(n=n.type===dd?fd(n,i):gd(n,i,l,m),o=n.length,p=q,f=y.tb(),b=0;o>b;b++)if(p=n[b],f.length=0,H.ae(p.x1,p.y1,p.x2,p.y2,p.Bd,p.Cd,p.Db,p.Eb,.8,f),d(f,a))return y.ya(f),s;y.ya(f),p!==q&&(l=p.Db,m=p.Eb);break;default:y.m("Unknown Segment type: "+n.type)}}return h}if(this.fill===q?jd(f,a.x,a.y,b):f.Ea(a,b,h))return h}}return s},y.g(V,"geometry",V.prototype.Oc),y.defineProperty(V,{Oc:"geometry"},function(){return this.Qj?this.Qj:this.Na},function(a){var c,b=this.Na;b!==a&&(a!==q?(x&&y.l(a,nc,V,"geometry"),this.Qj=this.Na=a.freeze()):this.Qj=this.Na=q,c=this.W,c&&(c.Ji=0/0),this.ng=h,this.aa(),this.i("geometry",b,a))}),y.g(V,"geometryString",V.prototype.rC),y.defineProperty(V,{rC:"geometryString"},function(){return this.Oc.toString()},function(a){var c,b=Lc(a);a=b.normalize(),this.Oc=b,b=y.M(),c=this.position,c.V()?b.q(c.x-a.x,c.y-a.y):b.q(-a.x,-a.y),this.position=b,y.B(b)}),y.defineProperty(V,{Hy:"isGeometryPositioned"},w("wp"),function(a){x&&y.j(a,"boolean",V,"isGeometryPositioned");var b=this.wp;b!==a&&(this.wp=a,this.aa(),this.i("isGeometryPositioned",b,a))
}),V.prototype.Lf=function(){this.ng?this.Qj=q:this.Na=q,this.aa()},y.g(V,"fill",V.prototype.fill),y.defineProperty(V,{fill:"fill"},w("Je"),function(a){var b=this.Je;b!==a&&(a===q||"string"==typeof a||a instanceof Hd)&&(a instanceof Hd&&a.freeze(),this.Je=a,this.ta(),this.i("fill",b,a))}),y.g(V,"stroke",V.prototype.stroke),y.defineProperty(V,{stroke:"stroke"},w("nc"),function(a){var b=this.nc;b!==a&&(a===q||"string"==typeof a||a instanceof Hd)&&(a instanceof Hd&&a.freeze(),this.nc=a,this.ta(),this.i("stroke",b,a))}),y.g(V,"strokeWidth",V.prototype.jb),y.defineProperty(V,{jb:"strokeWidth"},w("Vg"),function(a){var c,b=this.Vg;b!==a&&(x&&y.p(a,V,"strokeWidth"),a>=0)&&(this.Vg=a,this.aa(),c=this.W,c&&(c.Ji=0/0),this.i("strokeWidth",b,a))}),y.g(V,"strokeCap",V.prototype.cE),y.defineProperty(V,{cE:"strokeCap"},w("mn"),function(a){var b=this.mn;b!==a&&("string"!=typeof a||"butt"!==a&&"round"!==a&&"square"!==a?y.ka(a,'"butt", "round", or "square"',V,"strokeCap"):(this.mn=a,this.ta(),this.i("strokeCap",b,a)))}),y.g(V,"strokeJoin",V.prototype.xH),y.defineProperty(V,{xH:"strokeJoin"},w("nn"),function(a){var b=this.nn;b!==a&&("string"!=typeof a||"miter"!==a&&"bevel"!==a&&"round"!==a?y.ka(a,'"miter", "bevel", or "round"',V,"strokeJoin"):(this.nn=a,this.ta(),this.i("strokeJoin",b,a)))}),y.g(V,"strokeMiterLimit",V.prototype.yH),y.defineProperty(V,{yH:"strokeMiterLimit"},w("rl"),function(a){var c,b=this.rl;b!==a&&(x&&y.p(a,V,"strokeMiterLimit"),a>0)&&(this.rl=a,this.ta(),c=this.W,c&&(c.Ji=0/0),this.i("strokeMiterLimit",b,a))}),y.g(V,"strokeDashArray",V.prototype.yz),y.defineProperty(V,{yz:"strokeDashArray"},w("ql"),function(a){var c,d,b=this.ql;if(b!==a){if(a!==q&&!(a instanceof Array)&&y.Kb(a,"Array",V,"strokeDashArray:val"),a!==q)for(c=a.length,d=0;c>d;d++)("number"!=typeof a[d]||0>=a[d])&&y.m("strokeDashArray:val "+a[d]+" is a negative number or not a number.");this.ql=a,this.ta(),this.i("strokeDashArray",b,a)}}),y.g(V,"strokeDashOffset",V.prototype.wH),y.defineProperty(V,{wH:"strokeDashOffset"},w("Lc"),function(a){var b=this.Lc;b!==a&&(x&&y.p(a,V,"strokeDashOffset"),a>0&&(this.Lc=a,this.ta(),this.i("strokeDashOffset",b,a)))}),y.g(V,"figure",V.prototype.wb),y.defineProperty(V,{wb:"figure"},w("Dm"),function(a){var c,b=this.Dm;b!==a&&(x&&y.j(a,"string",V,"figure"),c=H.ei[a],"function"==typeof c?c=a:(c=H.ei[a.toLowerCase()])||y.m("Unknown Shape.figure: "+a),b!==c&&((a=this.W)&&(a.Ji=0/0),this.Dm=c,this.ng=s,this.Lf(),this.i("figure",b,c)))}),y.g(V,"toArrow",V.prototype.bm),y.defineProperty(V,{bm:"toArrow"},w("on"),function(a){var c,b=this.on;a===h?a="Standard":a===s&&(a="None"),b!==a&&(x&&y.j(a,"string",V,"toArrow"),c=H.Nn(a),c instanceof nc?c=a:(c=H.Nn(a.toLowerCase()))||y.m("Unknown Shape.toArrow: "+a),b!==c&&(this.on=c,this.ng=s,this.Lf(),rl(this,c),this.i("toArrow",b,c)))}),y.g(V,"fromArrow",V.prototype.Pu),y.defineProperty(V,{Pu:"fromArrow"},w("Fm"),function(a){var c,b=this.Fm;a===h?a="Standard":a===s&&(a="None"),b!==a&&(x&&y.j(a,"string",V,"fromArrow"),c=H.Nn(a),c instanceof nc?c=a:(c=H.Nn(a.toLowerCase()))||y.m("Unknown Shape.fromArrow: "+a),b!==c&&(this.Fm=c,this.ng=s,this.Lf(),rl(this,c),this.i("fromArrow",b,c)))}),y.defineProperty(V,{G:"spot1"},w("Qh"),function(a){y.l(a,J,V,"spot1");var b=this.Qh;b.L(a)||(this.Qh=a=a.U(),this.aa(),this.i("spot1",b,a))}),y.defineProperty(V,{H:"spot2"},w("Rh"),function(a){y.l(a,J,V,"spot2");var b=this.Rh;b.L(a)||(this.Rh=a=a.U(),this.aa(),this.i("spot2",b,a))}),y.defineProperty(V,{ic:"parameter1"},w("kq"),function(a){var b=this.kq;b!==a&&(this.kq=a,this.aa(),this.i("parameter1",b,a))}),y.defineProperty(V,{$r:"parameter2"},w("lq"),function(a){var b=this.lq;b!==a&&(this.lq=a,this.aa(),this.i("parameter2",b,a))}),y.A(V,{Ta:"naturalBounds"},function(){if(this.Na!==q)return this.Ic.assign(this.Na.Ib),this.Ic;var a=this.Aa;return new B(0,0,a.width,a.height)}),y.g(V,"isRectangular",V.prototype.LG),y.defineProperty(V,{LG:"isRectangular"},w("Bp"),function(a){var b=this.Bp;b!==a&&(x&&y.j(a,"boolean",V,"isRectangular"),this.Bp=a,this.aa(),this.i("isRectangular",b,a))}),y.g(V,"pathObject",V.prototype.cz),y.defineProperty(V,{cz:"pathObject"},w("nq"),function(a){var b=this.nq;b!==a&&(x&&y.l(a,P,V,"pathObject"),this.nq=a,this.ta(),this.i("pathObject",b,a))}),y.g(V,"geometryStretch",V.prototype.Su),y.defineProperty(V,{Su:"geometryStretch"},w("qp"),function(a){var b=this.qp;b!==a&&(y.rb(a,P,V,"geometryStretch"),this.qp=a,this.i("geometryStretch",b,a))}),y.g(V,"interval",V.prototype.fi),y.defineProperty(V,{fi:"interval"},w("up"),function(a){var b=this.up;x&&y.p(a,V,"interval"),a=Math.floor(a),b!==a&&a>=0&&(this.up=a,this.aa(),this.i("interval",b,a))}),y.ba("TextBlock",oa),y.Ka(oa,P),oa.prototype.cloneProtected=function(a){P.prototype.cloneProtected.call(this,a),a.Ld=this.Ld,a.nc=this.nc,a.Bh=this.Bh,a.td=this.td,a.yp=this.yp,a.fl=this.fl,a.el=this.el,a.sl=this.sl,a.Kp=this.Kp,a.tt=this.tt,a.gx=this.gx,a.ex=this.ex,a.Em=this.Em,a.Lp=this.Lp,a.jp=this.jp,a.Tq=this.Tq,a.Vi=this.Vi,a.Ie=this.Ie},oa.prototype.toString=function(){return 22<this.Ld.length?'TextBlock("'+this.Ld.substring(0,20)+'"...)':'TextBlock("'+this.Ld+'")'},oa.None=ul=y.w(oa,"None",0),oa.WrapFit=vl=y.w(oa,"WrapFit",1),oa.WrapDesiredSize=tl=y.w(oa,"WrapDesiredSize",2),oa.prototype.aa=function(){P.prototype.aa.call(this),this.ex=this.gx=q},y.g(oa,"font",oa.prototype.font),y.defineProperty(oa,{font:"font"},w("Bh"),function(a){var b=this.Bh;b!==a&&(x&&y.j(a,"string",oa,"font"),this.Bh=a,this.Em=q,this.aa(),this.i("font",b,a))}),y.g(oa,"text",oa.prototype.text),y.defineProperty(oa,{text:"text"},w("Ld"),function(a){var b=this.Ld;a=a!==q&&a!==f?a.toString():"",b!==a&&(this.Ld=a,this.aa(),this.i("text",b,a))}),y.g(oa,"textAlign",oa.prototype.textAlign),y.defineProperty(oa,{textAlign:"textAlign"},w("td"),function(a){var b=this.td;b!==a&&(x&&y.j(a,"string",oa,"textAlign"),"start"===a||"end"===a||"left"===a||"right"===a||"center"===a?(this.td=a,this.ta(),this.i("textAlign",b,a)):y.ka(a,'"start", "end", "left", "right", or "center"',oa,"textAlign"))}),y.A(oa,{Ta:"naturalBounds"},function(){if(!this.Ic.V()){var a=wl(this,this.Ld,{},999999).width,b=xl(this,a,{}),c=this.Aa;isNaN(c.width)||(a=c.width),isNaN(c.height)||(b=c.height),Za(this.Ic,a,b)}return this.Ic}),y.g(oa,"isMultiline",oa.prototype.av),y.defineProperty(oa,{av:"isMultiline"},w("yp"),function(a){var b=this.yp;b!==a&&(x&&y.j(a,"boolean",oa,"isMultiline"),this.yp=a,this.aa(),this.i("isMultiline",b,a))}),y.g(oa,"isUnderline",oa.prototype.NG),y.defineProperty(oa,{NG:"isUnderline"},w("fl"),function(a){var b=this.fl;b!==a&&(x&&y.j(a,"boolean",oa,"isUnderline"),this.fl=a,this.ta(),this.i("isUnderline",b,a))}),y.g(oa,"isStrikethrough",oa.prototype.MG),y.defineProperty(oa,{MG:"isStrikethrough"},w("el"),function(a){var b=this.el;b!==a&&(x&&y.j(a,"boolean",oa,"isStrikethrough"),this.el=a,this.ta(),this.i("isStrikethrough",b,a))}),y.g(oa,"wrap",oa.prototype.Iz),y.defineProperty(oa,{Iz:"wrap"},w("sl"),function(a){var b=this.sl;b!==a&&(x&&y.rb(a,oa,oa,"wrap"),this.sl=a,this.aa(),this.i("wrap",b,a))}),y.g(oa,"stroke",oa.prototype.stroke),y.defineProperty(oa,{stroke:"stroke"},w("nc"),function(a){var b=this.nc;b!==a&&(a===q||"string"==typeof a||a instanceof Hd)&&(a instanceof Hd&&a.freeze(),this.nc=a,this.ta(),this.i("stroke",b,a))}),y.A(oa,{TC:"lineCount"},w("Kp")),y.g(oa,"editable",oa.prototype.Ju),y.defineProperty(oa,{Ju:"editable"},w("jp"),function(a){var b=this.jp;b!==a&&(x&&y.j(a,"boolean",oa,"editable"),this.jp=a,this.i("editable",b,a))}),y.g(oa,"textEditor",oa.prototype.Bz),y.defineProperty(oa,{Bz:"textEditor"},w("Tq"),function(a){var b=this.Tq;b!==a&&(a instanceof HTMLElement||y.m("textEditor must be an HTMLElement"),this.Tq=a,this.i("textEditor",b,a))}),y.g(oa,"errorFunction",oa.prototype.tr),y.defineProperty(oa,{tr:"errorFunction"},w("Ie"),function(a){var b=this.Ie;b!==a&&(a!==q&&y.j(a,"function",oa,"errorFunction"),this.Ie=a,this.i("errorFunction",b,a))}),oa.prototype.Hl=function(a,b){var c,d,e,f,g,i,j,k,l,m,n,o,p,r;if(this.nc!==q&&0!==this.Ld.length&&(c=this.Bh,c!==q))for(d=this.Ta.width,e=dh(this),a.hw!==c&&(a.font=c,a.hw=c),a.textAlign=this.td,Hj(this,a,this.nc,h),(this.fl||this.el)&&Hj(this,a,this.nc,s),c=this.Lp,f=0,g=s,i=y.dc(0,0),this.oe.Qa(i),j=y.dc(0,e),this.oe.Qa(j),k=i.xk(j),y.B(i),y.B(j),i=b.scale,8>k*i*i&&(g=h),k=c.fj.length,i=0;k>i;i++)l=c.fj[i],j=c.Cn[i],l>d&&(l=d),m=j,j=a,n=f,o=d,p=e,r=0,g?("start"===this.td||"left"===this.td?r=0:"end"===this.td||"right"===this.td?r=o-l:"center"===this.td?r=(o-l)/2:y.m("textAlign must be start, end, left, right, or center"),j.fillRect(0+r,n+.25*p,l,1)):("start"===this.td||"left"===this.td?r=0:"end"===this.td||"right"===this.td?r=o:"center"===this.td?r=o/2:y.m("textAlign must be start, end, left, right, or center"),j.fillText(m,0+r,n+p-.25*p),m=0|p/20,this.fl&&("end"===this.td||"right"===this.td?r-=l:"center"===this.td&&(r-=l/2),j.beginPath(),j.lineWidth=m,j.moveTo(0+r,n+p-.2*p),j.lineTo(0+r+l,n+p-.2*p),j.stroke()),this.el&&(j.beginPath(),j.lineWidth=m,n=0|n+p-p/2.2,0!==m%2&&(n+=.5),j.moveTo(0,n),j.lineTo(0+l,n),j.stroke())),f+=e},oa.prototype.Nr=function(a,b,c,d){var i,j,k,l,e={},f=0,g=0;if(isNaN(this.Aa.width)){if(f=this.Ld,0===f.length)f=0;else if(this.av){for(i=g=0,j=s,k={ph:0};!j;)l=yl(f,i,k),-1===l&&(l=f.length,j=h),i=zl(f.substr(i,l-i).replace(/^\s+|\s+$/g,""),this.Bh),i>g&&(g=i),i=k.ph;f=g}else g=yl(f,0,{}),g>=0&&(f=f.substr(0,g)),f=i=zl(f,this.Bh);f=Math.min(f,a/this.scale),f=Math.max(8,f)}else f=this.Aa.width;this.ga&&(f=Math.min(f,this.ga.he.width),f=Math.max(f,this.ga.Ce.width)),g=xl(this,f,e),g=isNaN(this.Aa.height)?Math.min(g,b/this.scale):this.Aa.height,(this.Iz===vl||isNaN(this.Aa.width))&&(f=e.ki,isNaN(this.Aa.width)&&(f=Math.max(8,f))),f=Math.max(c,f),g=Math.max(d,g),Za(this.Ic,f,g),jj(this,0,0,f,g),this.Lp=e},oa.prototype.gj=function(a,b,c,d){Aj(this,a,b,c,d)},y.g(oa,"textValidation",oa.prototype.ss),y.defineProperty(oa,{ss:"textValidation"},w("Vi"),function(a){var b=this.Vi;b!==a&&(a!==q&&y.j(a,"function",oa,"textValidation"),this.Vi=a,this.i("textValidation",b,a))}),y.ba("Picture",gk),y.Ka(gk,P),gk.prototype.cloneProtected=function(a){P.prototype.cloneProtected.call(this,a),a.element=this.Gg,a.Oq=this.Oq,a.Ti.assign(this.Ti),a.Hm=this.Hm,a.Ie=this.Ie},gk.prototype.toString=function(){return"Picture("+this.source+")#"+y.ac(this)},y.g(gk,"element",gk.prototype.element),y.defineProperty(gk,{element:"element"},w("Gg"),function(a){var c,b=this.Gg;b!==a&&(a instanceof HTMLImageElement||a instanceof HTMLVideoElement||a instanceof HTMLCanvasElement||y.m("Picture.element must be an instance of Image, Canvas, or Video."),c=this,a instanceof HTMLCanvasElement?this.lt=h:(this.lt=s,a.onerror=function(a){c.Ie!==q&&c.Ie(c,a)}),this.Gg=a,a.complete===h||a.complete===f?(this.Wm=h,this.Aa.V()||(nj(this,s),this.aa())):(y.Fz.push(this),y.nv===q&&(y.nv=setInterval(function(){var a,b,c,d,f,e,g,i,j,k;for(a=[],b=y.Fz,c=b.length,d=0;c>d;d++){if(e=b[d],f=e,g=f.Gg)if(g.complete){if(f.Wm=h,f.Aa.V()||(nj(f,s),f.aa()),f.h)f.Aa.V()||f.h.oc(),f.h.ta();else{if(f=y.eC,i=f.length,0===i)for(i=document.getElementsByTagName("canvas"),j=i.length,g=0;j>g;g++)k=i[g],k.parentElement&&k.parentElement.ca&&f.push(k.parentElement.ca);for(i=f.length,g=0;i>g;g++)f[g].ta()}f=h}else f=s;else f=h;f||a.push(e)}0===a.length&&(clearInterval(y.nv),y.nv=q),y.Fz=a},200))),this.i("element",b,a),this.ta())}),y.g(gk,"source",gk.prototype.source),y.defineProperty(gk,{source:"source"},w("Oq"),function(a){var c,d,b=this.Oq;b!==a&&(y.j(a,"string",gk,"source"),this.Oq=a,c=y.DG,c[a]!==f?this.element=c[a]:(d=document.createElement("img"),d.src=a,c[a]=d,d instanceof HTMLImageElement&&(this.element=d)),this.ta(),this.i("source",b,a))}),y.g(gk,"sourceRect",gk.prototype.lh),y.defineProperty(gk,{lh:"sourceRect"},w("Ti"),function(a){var b=this.Ti;b.L(a)||(y.l(a,B,gk,"sourceRect"),this.Ti=a=a.U(),this.ta(),this.i("sourceRect",b,a))}),y.g(gk,"imageStretch",gk.prototype.EG),y.defineProperty(gk,{EG:"imageStretch"},w("Hm"),function(a){var b=this.Hm;b!==a&&(y.rb(a,P,gk,"imageStretch"),this.Hm=a,this.ta(),this.i("imageStretch",b,a))}),y.g(gk,"errorFunction",gk.prototype.tr),y.defineProperty(gk,{tr:"errorFunction"},w("Ie"),function(a){var c,b=this.Ie;b!==a&&(a!==q&&y.j(a,"function",gk,"errorFunction"),this.Ie=a,this.Gg&&(c=this,this.Gg.onerror=function(a){c.Ie!==q&&c.Ie(c,a)}),this.i("errorFunction",b,a))}),gk.prototype.Hl=function(a,b){var c,e,g,i,j,k,l,m,n;if(!b.Ws){if(this.Rq===q)if(this.Gg===q)this.Rq=s;else{c=document.createElement("canvas").getContext("2d"),c.drawImage(this.Gg,0,0);try{c.getImageData(0,0,1,1),this.Rq=s}catch(d){this.Rq=h}}if(this.Rq)return}if(c=this.Gg,c!==q&&(e=c.src,(e===q||""===e)&&y.m("Element has no source attribute: "+c),e=this.Ta,g=0,i=0,j=this.lt,k=j?+c.width:c.naturalWidth,j=j?+c.height:c.naturalHeight,0!==k&&0!==j)){switch(k===f&&c.videoWidth&&(k=c.videoWidth||e.width),j===f&&c.videoHeight&&(j=c.videoHeight||e.height),this.lh.V()&&(g=this.Ti.x,i=this.Ti.y,k=this.Ti.width,j=this.Ti.height),l=k,m=j,n=this.Hm,n){case dj:if(this.lh.V())break;g+=Math.max((l-e.width)/2,0),i+=Math.max((m-e.height)/2,0),k=Math.min(e.width,l),j=Math.min(e.height,m);break;case qc:l=e.width,m=e.height;break;case Cg:case Dg:n===Cg?(n=Math.min(e.height/m,e.width/l),l*=n,m*=n):n===Dg&&(n=Math.max(e.height/m,e.width/l),l*=n,m*=n,g+=(l-e.width)/2,i+=(m-e.height)/2,k*=1/(l/e.width),j*=1/(m/e.height),l=e.width,m=e.height)}a.drawImage(c,g,i,k,j,Math.max((e.width-l)/2,0),Math.max((e.height-m)/2,0),Math.min(e.width,l),Math.min(e.height,m))}},y.A(gk,{Ta:"naturalBounds"},w("Ic")),gk.prototype.Nr=function(a,b,c,d){var e=this.Aa,f=mj(this),g=this.Gg,i=this.lt;(i||!this.Wm&&g&&g.complete)&&(this.Wm=h),g===q&&(b=a=0),f!==qc&&f!==fj?isFinite(e.width)?a=e.width:g!==q&&this.Wm!==s&&(a=this.lh.V()?this.lh.width:i?+g.width:g.naturalWidth):(isFinite(a)||(a=this.lh.V()?this.lh.width:i?+g.width:g.naturalWidth),c=0),f!==qc&&f!==ej?isFinite(e.height)?b=e.height:g!==q&&this.Wm!==s&&(b=this.lh.V()?this.lh.height:i?+g.height:g.naturalHeight):(isFinite(b)||(b=this.lh.V()?this.lh.height:i?+g.height:g.naturalHeight),d=0),e=this.he,f=this.Ce,c=Math.max(c,f.width),d=Math.max(d,f.height),a=Math.min(e.width,a),b=Math.min(e.height,b),a=Math.max(c,a),b=Math.max(d,b),g!==q&&!g.complete&&(isFinite(a)||(a=0),isFinite(b)||(b=0)),Za(this.Ic,a,b),jj(this,0,0,a,b)},gk.prototype.gj=function(a,b,c,d){Aj(this,a,b,c,d)},la.prototype.reset=function(){this.s=new nc,this.Fb=q},la.prototype.moveTo=function(a,b,c){this.s===q&&y.m("StreamGeometryContext has been closed"),this.Fb===q&&y.m("Need to call beginFigure first");var d=new hd(Wc);d.D=a,d.F=b,c&&d.close(),this.Fb.Ca.add(d)},la.prototype.lineTo=function(a,b,c){this.s===q&&y.m("StreamGeometryContext has been closed"),this.Fb===q&&y.m("Need to call beginFigure first");var d=new hd(Ec);d.D=a,d.F=b,c&&d.close(),this.Fb.Ca.add(d)},la.prototype.arcTo=function(a,b,c,d,e,f,g){this.s===q&&y.m("StreamGeometryContext has been closed"),this.Fb===q&&y.m("Need to call beginFigure first");var h=new hd(dd);h.Vf=a,h.nh=b,h.xa=c,h.Ga=d,h.radiusX=e,h.radiusY=f?f:e,g&&h.close(),this.Fb.Ca.add(h)},H.makeGeometry=function(a,b,c){var g,h,d=a.Aa,e=d.width;return d=d.height,b!==f&&!isNaN(b)&&isFinite(b)&&(e=b),c!==f&&!isNaN(c)&&isFinite(c)&&(d=c),isFinite(e)||(e=100),isFinite(d)||(d=100),g=f,"None"!==a.bm?g=H.Nn(a.bm):"None"!==a.Pu?g=H.Nn(a.Pu):(h=H.ei[a.wb],"string"==typeof h&&(h=H.ei[h]),h===f&&y.m("Unknown Shape.figure: "+a.wb),g=h(a,e,d),g.Hd=new ha(e,d)),g===f&&(h=H.ei.Rectangle)&&(g=h(a,e,d)),g.kt=b,g.jt=c,g},H.Yh=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=1-i;a=a*o+c*i,b=b*o+d*i,c=c*o+e*i,d=d*o+f*i,e=e*o+g*i,f=f*o+h*i,h=a*o+c*i,g=b*o+d*i,c=c*o+e*i,d=d*o+f*i,j.x=a,j.y=b,k.x=h,k.y=g,l.x=h*o+c*i,l.y=g*o+d*i,m.x=c,m.y=d,n.x=e,n.y=f},H.Gn=function(a){var b,c,d;for(a=H.Cl(a),b=y.tb(),b[0]=a[0],c=1,d=1;c<a.length;c+=2,d+=3)b[d]=a[c],b[d+1]=a[c],b[d+2]=a[c+1];return y.ya(a),b},H.Cl=function(a){var f,g,h,i,j,b=H.uk(a),c=y.tb(),d=Math.floor(b.length/2),e=b.length-1;for(a=0===a%2?2:1,f=0;e>f;f++)g=b[f],h=b[f+1],i=b[(d+f-1)%e],j=b[(d+f+a)%e],c[2*f]=g,c[2*f+1]=H.zk(g.x,g.y,i.x,i.y,h.x,h.y,j.x,j.y,new A);return c[c.length]=c[0],y.ya(b),c},H.zk=function(a,b,c,d,e,f,g,h,i){return c=a-c,g=e-g,0===c||0===g?0===c?(g=(f-h)/g,h=a,e=g*h+(f-g*e)):(d=(b-d)/c,h=e,e=d*h+(b-d*a)):(d=(b-d)/c,g=(f-h)/g,a=b-d*a,h=(f-g*e-a)/(d-g),e=d*h+a),i.q(h,e),i},H.uk=function(a){for(var b=y.tb(),c=1.5*Math.PI,d=0,e=0;a>e;e++)d=2*Math.PI/a*e+c,b[e]=new A(.5+.5*Math.cos(d),.5+.5*Math.sin(d));return b.push(b[0]),b},H.Mz=new J(.156,.156).Ja(),H.Nz=new J(.844,.844).Ja(),H.ei={None:"Rectangle",Rectangle:function(a,b,c){return a=new nc,a.type=xc,a.ha=0,a.ia=0,a.D=b,a.F=c,a},Square:function(a,b,c){return a=new nc,a.ec=Cg,a.type=xc,a.ha=0,a.ia=0,a.D=b,a.F=c,a},Ellipse:function(a,b,c){return a=new nc,a.type=yc,a.ha=0,a.ia=0,a.D=b,a.F=c,a.G=H.Mz,a.H=H.Nz,a},Circle:function(a,b,c){return a=new nc,a.ec=Cg,a.type=yc,a.ha=0,a.ia=0,a.D=b,a.F=c,a.G=H.Mz,a.H=H.Nz,a},Connector:"Ellipse",TriangleRight:function(a,b,c){a=new nc;var d=new pc,e=new hd;return e.D=b,e.F=.5*c,d.Ca.add(e),b=new hd,b.D=0,b.F=c,d.Ca.add(b.close()),a.fb.add(d),a.G=new J(0,.25),a.H=new J(.5,.75),a},TriangleDown:function(a,b,c){a=new nc;var d=new pc,e=new hd;return e.D=b,e.F=0,d.Ca.add(e),e=new hd,e.D=.5*b,e.F=c,d.Ca.add(e.close()),a.fb.add(d),a.G=new J(.25,0),a.H=new J(.75,.5),a},TriangleLeft:function(a,b,c){var d,e;return a=new nc,d=new pc,d.ha=b,d.ia=c,e=new hd,e.D=0,e.F=.5*c,d.Ca.add(e),c=new hd,c.D=b,c.F=0,d.Ca.add(c.close()),a.fb.add(d),a.G=new J(.5,.25),a.H=new J(1,.75),a},TriangleUp:function(a,b,c){var d,e;return a=new nc,d=new pc,d.ha=b,d.ia=c,e=new hd,e.D=0,e.F=c,d.Ca.add(e),c=new hd,c.D=.5*b,c.F=0,d.Ca.add(c.close()),a.fb.add(d),a.G=new J(.25,.5),a.H=new J(.75,1),a},Line1:function(a,b,c){return a=new nc,a.type=wc,a.ha=0,a.ia=0,a.D=b,a.F=c,a},Line2:function(a,b,c){return a=new nc,a.type=wc,a.ha=b,a.ia=0,a.D=0,a.F=c,a},MinusLine:"LineH",LineH:function(a,b,c){return a=new nc,a.type=wc,a.ha=0,a.ia=c/2,a.D=b,a.F=c/2,a},LineV:function(a,b,c){return a=new nc,a.type=wc,a.ha=b/2,a.ia=0,a.D=b/2,a.F=c,a},Curve1:function(a,b,c){var d=H.ra;return a=y.u(),M(a,0,0,s),N(a,d*b,0,1*b,(1-d)*c,b,c),b=a.s,y.v(a),b},Curve2:function(a,b,c){var d=H.ra;return a=y.u(),M(a,0,0,s),N(a,0,d*c,(1-d)*b,c,b,c),b=a.s,y.v(a),b},Curve3:function(a,b,c){var d=H.ra;return a=y.u(),M(a,1*b,0,s),N(a,1*b,d*c,d*b,1*c,0,1*c),b=a.s,y.v(a),b},Curve4:function(a,b,c){var d=H.ra;return a=y.u(),M(a,1*b,0,s),N(a,(1-d)*b,0,0,(1-d)*c,0,1*c),b=a.s,y.v(a),b},Alternative:"Triangle",Merge:"Triangle",Triangle:function(a,b,c){return a=y.u(),M(a,.5*b,0*c,h),a.lineTo(0*b,1*c),a.lineTo(1*b,1*c,h),b=a.s,b.G=new J(.25,.5),b.H=new J(.75,1),y.v(a),b},Decision:"Diamond",Diamond:function(a,b,c){return a=y.u(),M(a,.5*b,0,h),a.lineTo(0,.5*c),a.lineTo(.5*b,1*c),a.lineTo(1*b,.5*c,h),b=a.s,b.G=new J(.25,.25),b.H=new J(.75,.75),y.v(a),b},Pentagon:function(a,b,c){var e,d=H.uk(5);for(a=y.u(),M(a,d[0].x*b,d[0].y*c,h),e=1;5>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return y.ya(d),Rc(a),b=a.s,b.G=new J(.2,.22),b.H=new J(.8,.9),y.v(a),b},DataTransmission:"Hexagon",Hexagon:function(a,b,c){var e,d=H.uk(6);for(a=y.u(),M(a,d[0].x*b,d[0].y*c,h),e=1;6>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return y.ya(d),Rc(a),b=a.s,b.G=new J(.07,.25),b.H=new J(.93,.75),y.v(a),b},Heptagon:function(a,b,c){var e,d=H.uk(7);for(a=y.u(),M(a,d[0].x*b,d[0].y*c,h),e=1;7>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return y.ya(d),Rc(a),b=a.s,b.G=new J(.2,.15),b.H=new J(.8,.85),y.v(a),b},Octagon:function(a,b,c){var e,d=H.uk(8);for(a=y.u(),M(a,d[0].x*b,d[0].y*c,h),e=1;8>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return y.ya(d),Rc(a),b=a.s,b.G=new J(.15,.15),b.H=new J(.85,.85),y.v(a),b},Nonagon:function(a,b,c){var e,d=H.uk(9);for(a=y.u(),M(a,d[0].x*b,d[0].y*c,h),e=1;9>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return y.ya(d),Rc(a),b=a.s,b.G=new J(.17,.13),b.H=new J(.82,.82),y.v(a),b},Decagon:function(a,b,c){var e,d=H.uk(10);for(a=y.u(),M(a,d[0].x*b,d[0].y*c,h),e=1;10>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return y.ya(d),Rc(a),b=a.s,b.G=new J(.16,.16),b.H=new J(.84,.84),y.v(a),b},Dodecagon:function(a,b,c){var e,d=H.uk(12);for(a=y.u(),M(a,d[0].x*b,d[0].y*c,h),e=1;12>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return y.ya(d),Rc(a),b=a.s,b.G=new J(.16,.16),b.H=new J(.84,.84),y.v(a),b},FivePointedStar:function(a,b,c){var e,d=H.Cl(5);for(a=y.u(),M(a,d[0].x*b,d[0].y*c,h),e=1;10>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return y.ya(d),Rc(a),b=a.s,b.G=new J(.312,.383),b.H=new J(.693,.765),y.v(a),b},SixPointedStar:function(a,b,c){var e,d=H.Cl(6);for(a=y.u(),M(a,d[0].x*b,d[0].y*c,h),e=1;12>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return y.ya(d),Rc(a),b=a.s,b.G=new J(.17,.251),b.H=new J(.833,.755),y.v(a),b},SevenPointedStar:function(a,b,c){var e,d=H.Cl(7);for(a=y.u(),M(a,d[0].x*b,d[0].y*c,h),e=1;14>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return y.ya(d),Rc(a),b=a.s,b.G=new J(.363,.361),b.H=new J(.641,.709),y.v(a),b},EightPointedStar:function(a,b,c){var e,d=H.Cl(8);for(a=y.u(),M(a,d[0].x*b,d[0].y*c,h),e=1;16>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return y.ya(d),Rc(a),b=a.s,b.G=new J(.252,.255),b.H=new J(.75,.75),y.v(a),b},NinePointedStar:function(a,b,c){var e,d=H.Cl(9);for(a=y.u(),M(a,d[0].x*b,d[0].y*c,h),e=1;18>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return y.ya(d),Rc(a),b=a.s,b.G=new J(.355,.361),b.H=new J(.645,.651),y.v(a),b},TenPointedStar:function(a,b,c){var e,d=H.Cl(10);for(a=y.u(),M(a,d[0].x*b,d[0].y*c,h),e=1;20>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return y.ya(d),Rc(a),b=a.s,b.G=new J(.281,.261),b.H=new J(.723,.748),y.v(a),b},FivePointedBurst:function(a,b,c){var e,d=H.Gn(5);for(a=y.u(),M(a,d[0].x*b,d[0].y*c,h),e=1;e<d.length;e+=3)N(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);return y.ya(d),Rc(a),b=a.s,b.G=new J(.312,.383),b.H=new J(.693,.765),y.v(a),b},SixPointedBurst:function(a,b,c){var e,d=H.Gn(6);for(a=y.u(),M(a,d[0].x*b,d[0].y*c,h),e=1;e<d.length;e+=3)N(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);return y.ya(d),Rc(a),b=a.s,b.G=new J(.17,.251),b.H=new J(.833,.755),y.v(a),b},SevenPointedBurst:function(a,b,c){var e,d=H.Gn(7);for(a=y.u(),M(a,d[0].x*b,d[0].y*c,h),e=1;e<d.length;e+=3)N(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);return y.ya(d),Rc(a),b=a.s,b.G=new J(.363,.361),b.H=new J(.641,.709),y.v(a),b},EightPointedBurst:function(a,b,c){var e,d=H.Gn(8);for(a=y.u(),M(a,d[0].x*b,d[0].y*c,h),e=1;e<d.length;e+=3)N(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);return y.ya(d),Rc(a),b=a.s,b.G=new J(.252,.255),b.H=new J(.75,.75),y.v(a),b},NinePointedBurst:function(a,b,c){var e,d=H.Gn(9);for(a=y.u(),M(a,d[0].x*b,d[0].y*c,h),e=1;e<d.length;e+=3)N(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);return y.ya(d),Rc(a),b=a.s,b.G=new J(.355,.361),b.H=new J(.645,.651),y.v(a),b},TenPointedBurst:function(a,b,c){var e,d=H.Gn(10);for(a=y.u(),M(a,d[0].x*b,d[0].y*c,h),e=1;e<d.length;e+=3)N(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);return y.ya(d),Rc(a),b=a.s,b.G=new J(.281,.261),b.H=new J(.723,.748),y.v(a),b},Cloud:function(a,b,c){return a=y.u(),M(a,.08034461*b,.1944299*c,h),N(a,-.09239631*b,.07836421*c,.1406031*b,-.0542823*c,.2008615*b,.05349299*c),N(a,.2450511*b,-.00697547*c,.3776197*b,-.01112067*c,.4338609*b,.074219*c),N(a,.4539471*b,0,.6066018*b,-.02526587*c,.6558228*b,.07004196*c),N(a,.6914277*b,-.01904177*c,.8921095*b,-.01220843*c,.8921095*b,.08370865*c),N(a,1.036446*b,.04105738*c,1.020377*b,.3022052*c,.9147671*b,.3194596*c),N(a,1.04448*b,.360238*c,.992256*b,.5219009*c,.9082935*b,.562044*c),N(a,1.032337*b,.5771781*c,1.018411*b,.8120651*c,.9212406*b,.8217117*c),N(a,1.028411*b,.9571472*c,.8556702*b,1.052487*c,.7592566*b,.9156953*c),N(a,.7431877*b,1.009325*c,.5624123*b,1.021761*c,.5101666*b,.9310455*c),N(a,.4820677*b,1.031761*c,.3030112*b,1.002796*c,.2609328*b,.9344623*c),N(a,.2329994*b,1.01518*c,.03213784*b,1.01518*c,.08034461*b,.870098*c),N(a,-.02812061*b,.9032597*c,-.01205169*b,.6835638*c,.06829292*b,.6545475*c),N(a,-.01812061*b,.6089503*c,-.00606892*b,.4555777*c,.06427569*b,.4265613*c),N(a,-.01606892*b,.3892545*c,-.01205169*b,.1944299*c,.08034461*b,.1944299*c),Rc(a),b=a.s,b.G=new J(.1,.1),b.H=new J(.9,.9),y.v(a),b},Gate:"Crescent",Crescent:function(a,b,c){return a=y.u(),M(a,0,0,h),N(a,1*b,0,1*b,1*c,0,1*c),N(a,.5*b,.75*c,.5*b,.25*c,0,0),Rc(a),b=a.s,b.G=new J(.511,.19),b.H=new J(.776,.76),y.v(a),b},FramedRectangle:function(a,b,c){var d=y.u(),e=a?a.ic:0;return a=a?a.$r:0,0===e&&(e=.1),0===a&&(a=.1),M(d,0,0,h),d.lineTo(1*b,0),d.lineTo(1*b,1*c),d.lineTo(0,1*c,h),M(d,e*b,a*c,s,h),d.lineTo(e*b,(1-a)*c),d.lineTo((1-e)*b,(1-a)*c),d.lineTo((1-e)*b,a*c,h),b=d.s,b.G=new J(e,a),b.H=new J(1-e,1-a),y.v(d),b},Delay:"HalfEllipse",HalfEllipse:function(a,b,c){var d=H.ra;return a=y.u(),M(a,0,0,h),N(a,d*b,0,1*b,(.5-d/2)*c,1*b,.5*c),N(a,1*b,(.5+d/2)*c,d*b,1*c,0,1*c),Rc(a),b=a.s,b.G=new J(0,.2),b.H=new J(.75,.8),y.v(a),b},Heart:function(a,b,c){return a=y.u(),M(a,.5*b,1*c,h),N(a,.1*b,.8*c,0,.5*c,0*b,.3*c),N(a,0*b,0,.45*b,0,.5*b,.3*c),N(a,.55*b,0,1*b,0,1*b,.3*c),N(a,b,.5*c,.9*b,.8*c,.5*b,1*c),Rc(a),b=a.s,b.G=new J(.15,.29),b.H=new J(.86,.68),y.v(a),b},Spade:function(a,b,c){return a=y.u(),M(a,.5*b,0,h),a.lineTo(.51*b,.01*c),N(a,.6*b,.2*c,b,.25*c,b,.5*c),N(a,b,.8*c,.6*b,.8*c,.55*b,.7*c),N(a,.5*b,.75*c,.55*b,.95*c,.75*b,c),a.lineTo(.25*b,c),N(a,.45*b,.95*c,.5*b,.75*c,.45*b,.7*c),N(a,.4*b,.8*c,0,.8*c,0,.5*c),N(a,0,.25*c,.4*b,.2*c,.49*b,.01*c),Rc(a),b=a.s,b.G=new J(.19,.26),b.H=new J(.8,.68),y.v(a),b},Club:function(a,b,c){a=y.u(),M(a,.4*b,.6*c,h),N(a,.5*b,.75*c,.45*b,.95*c,.15*b,1*c),a.lineTo(.85*b,c),N(a,.55*b,.95*c,.5*b,.75*c,.6*b,.6*c);var d=.2,e=.3,f=0,g=d*(4*(Math.SQRT2-1)/3);return N(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c),N(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c),N(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c),N(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e+.05)*b,(.5-g+f-.02)*c,.65*b,.36771243*c),d=.2,e=0,f=-.3,g=d*(4*(Math.SQRT2-1)/3),N(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c),N(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c),N(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c),N(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,.35*b,.36771243*c),d=.2,e=-.3,f=0,g=d*(4*(Math.SQRT2-1)/3),N(a,(.5+d+e-.05)*b,(.5-g+f-.02)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c),N(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c),N(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c),N(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,.4*b,.6*c),Rc(a),b=a.s,b.G=new J(.06,.39),b.H=new J(.93,.58),y.v(a),b},YinYang:function(a,b,c){var e,d=.5;return a=y.u(),d=.5,M(a,.5*b,0,h),a.arcTo(270,180,.5*b,.5*b,.5*b),N(a,1*b,d*c,0,d*c,d*b,0,h),d=.1,e=.25,M(a,(.5+d)*b,e*c,h,h),a.arcTo(0,-360,.5*b,c*e,d*b),Rc(a),M(a,.5*b,0,s),a.arcTo(270,-180,.5*b,.5*b,.5*b),Tc(a),e=.75,M(a,(.5+d)*b,e*c,h),a.arcTo(0,360,.5*b,c*e,d*b),Rc(a),b=a.s,b.ec=Cg,y.v(a),b},Peace:function(a,b,c){var d,e,f,g;return a=y.u(),d=.5*(4*(Math.SQRT2-1)/3),M(a,b,.5*c,h),N(a,b,(.5-d)*c,(.5+d)*b,0,.5*b,0),N(a,(.5-d)*b,0,0,(.5-d)*c,0,.5*c),N(a,0,(.5+d)*c,(.5-d)*b,c,.5*b,c),N(a,(.5+d)*b,c,b,(.5+d)*c,b,.5*c),d=.4*(4*(Math.SQRT2-1)/3),M(a,.5*b,.1*c,h,h),N(a,(.5+d)*b,.1*c,.9*b,(.5-d)*c,.9*b,.5*c),N(a,.9*b,(.5+d)*c,(.5+d)*b,.9*c,.5*b,.9*c),N(a,(.5-d)*b,.9*c,.1*b,(.5+d)*c,.1*b,.5*c),N(a,.1*b,(.5-d)*c,(.5-d)*b,.1*c,.5*b,.1*c),d=.07,e=0,f=.11*-.707,g=d*(4*(Math.SQRT2-1)/3),M(a,(.5+d+e)*b,(.5+f)*c,h),N(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c),N(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c),N(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c),N(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c),d=.07,e=.11*-.707,f=.707*.11,g=d*(4*(Math.SQRT2-1)/3),M(a,(.5+d+e)*b,(.5+f)*c,h),N(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c),N(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c),N(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c),N(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c),d=.07,e=.707*.11,f=.707*.11,g=d*(4*(Math.SQRT2-1)/3),M(a,(.5+d+e)*b,(.5+f)*c,h),N(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c),N(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c),N(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c),N(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c),b=a.s,b.G=new J(.146,.146),b.H=new J(.853,.853),b.ec=Cg,y.v(a),b},NotAllowed:function(a,b,c){var g,i,j,k,l,m,n,o,p,q,r,s,d=H.ra,e=.5*d,f=.5;return a=y.u(),M(a,.5*b,(.5-f)*c,h),N(a,(.5-e)*b,(.5-f)*c,(.5-f)*b,(.5-e)*c,(.5-f)*b,.5*c),N(a,(.5-f)*b,(.5+e)*c,(.5-e)*b,(.5+f)*c,.5*b,(.5+f)*c),N(a,(.5+e)*b,(.5+f)*c,(.5+f)*b,(.5+e)*c,(.5+f)*b,.5*c),N(a,(.5+f)*b,(.5-e)*c,(.5+e)*b,(.5-f)*c,.5*b,(.5-f)*c),f=.4,e=.4*d,d=y.M(),g=y.M(),i=y.M(),j=y.M(),H.Yh(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.42,d,g,i,j,j),k=y.M(),l=y.M(),m=y.M(),H.Yh(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.58,j,j,m,k,l),n=y.M(),o=y.M(),p=y.M(),H.Yh(.5,.5+f,.5-e,.5+f,.5-f,.5+e,.5-f,.5,.42,n,o,p,j,j),q=y.M(),r=y.M(),s=y.M(),H.Yh(.5,.5+f,.5-e,.5+f,.5-f,.5+e,.5-f,.5,.58,j,j,s,q,r),M(a,s.x*b,s.y*c,h,h),N(a,q.x*b,q.y*c,r.x*b,r.y*c,(.5-f)*b,.5*c),N(a,(.5-f)*b,(.5-e)*c,(.5-e)*b,(.5-f)*c,.5*b,(.5-f)*c),N(a,d.x*b,d.y*c,g.x*b,g.y*c,i.x*b,i.y*c),a.lineTo(s.x*b,s.y*c),Rc(a),M(a,p.x*b,p.y*c,h,h),a.lineTo(m.x*b,m.y*c),N(a,k.x*b,k.y*c,l.x*b,l.y*c,(.5+f)*b,.5*c),N(a,(.5+f)*b,(.5+e)*c,(.5+e)*b,(.5+f)*c,.5*b,(.5+f)*c),N(a,n.x*b,n.y*c,o.x*b,o.y*c,p.x*b,p.y*c),Rc(a),y.B(d),y.B(g),y.B(i),y.B(j),y.B(k),y.B(l),y.B(m),y.B(n),y.B(o),y.B(p),y.B(q),y.B(r),y.B(s),b=a.s,y.v(a),b.ec=Cg,b},Fragile:function(a,b,c){return a=y.u(),M(a,0,0,h),a.lineTo(.25*b,0),a.lineTo(.2*b,.15*c),a.lineTo(.3*b,.25*c),a.lineTo(.29*b,.33*c),a.lineTo(.35*b,.25*c),a.lineTo(.3*b,.15*c),a.lineTo(.4*b,0),a.lineTo(1*b,0),N(a,1*b,.25*c,.75*b,.5*c,.55*b,.5*c),a.lineTo(.55*b,.9*c),a.lineTo(.7*b,.9*c),a.lineTo(.7*b,1*c),a.lineTo(.3*b,1*c),a.lineTo(.3*b,.9*c),a.lineTo(.45*b,.9*c),a.lineTo(.45*b,.5*c),N(a,.25*b,.5*c,0,.25*c,0,0),Rc(a),b=a.s,b.G=new J(.25,0),b.H=new J(.75,.4),y.v(a),b},HourGlass:function(a,b,c){return a=y.u(),M(a,.65*b,.5*c,h),a.lineTo(1*b,1*c),a.lineTo(0,1*c),a.lineTo(.35*b,.5*c),a.lineTo(0,0),a.lineTo(1*b,0),Rc(a),b=a.s,y.v(a),b},Lightning:function(a,b,c){return a=y.u(),M(a,0*b,.55*c,h),a.lineTo(.75*b,0),a.lineTo(.25*b,.45*c),a.lineTo(.9*b,.48*c),a.lineTo(.4*b,1*c),a.lineTo(.65*b,.55*c),Rc(a),b=a.s,y.v(a),b},Parallelogram1:function(a,b,c){a=a?a.ic:0,0===a&&(a=.1);var d=y.u();return M(d,a*b,0,h),d.lineTo(1*b,0),d.lineTo((1-a)*b,1*c),d.lineTo(0,1*c),Rc(d),b=d.s,b.G=new J(a,0),b.H=new J(1-a,1),y.v(d),b},Input:"Output",Output:function(a,b,c){return a=y.u(),M(a,0,1*c,h),a.lineTo(.1*b,0),a.lineTo(1*b,0),a.lineTo(.9*b,1*c),Rc(a),b=a.s,b.G=new J(.1,0),b.H=new J(.9,1),y.v(a),b},Parallelogram2:function(a,b,c){a=a?a.ic:0,0===a&&(a=.25);var d=y.u();return M(d,a*b,0,h),d.lineTo(1*b,0),d.lineTo((1-a)*b,1*c),d.lineTo(0,1*c),Rc(d),b=d.s,b.G=new J(a,0),b.H=new J(1-a,1),y.v(d),b},ThickCross:function(a,b,c){a=a?a.ic:0,0===a&&(a=.25);var d=y.u();return M(d,(.5-a/2)*b,0,h),d.lineTo((.5+a/2)*b,0),d.lineTo((.5+a/2)*b,(.5-a/2)*c),d.lineTo(1*b,(.5-a/2)*c),d.lineTo(1*b,(.5+a/2)*c),d.lineTo((.5+a/2)*b,(.5+a/2)*c),d.lineTo((.5+a/2)*b,1*c),d.lineTo((.5-a/2)*b,1*c),d.lineTo((.5-a/2)*b,(.5+a/2)*c),d.lineTo(0,(.5+a/2)*c),d.lineTo(0,(.5-a/2)*c),d.lineTo((.5-a/2)*b,(.5-a/2)*c),Rc(d),b=d.s,b.G=new J(.5-a/2,.5-a/2),b.H=new J(.5+a/2,.5+a/2),y.v(d),b},ThickX:function(a,b,c){a=.25/Math.SQRT2;var d=y.u();return M(d,.3*b,0,h),d.lineTo(.5*b,.2*c),d.lineTo(.7*b,0),d.lineTo(1*b,.3*c),d.lineTo(.8*b,.5*c),d.lineTo(1*b,.7*c),d.lineTo(.7*b,1*c),d.lineTo(.5*b,.8*c),d.lineTo(.3*b,1*c),d.lineTo(0,.7*c),d.lineTo(.2*b,.5*c),d.lineTo(0,.3*c),Rc(d),b=d.s,b.G=new J(.5-a,.5-a),b.H=new J(.5+a,.5+a),y.v(d),b},ThinCross:function(a,b,c){var d=a?a.ic:0;return 0===d&&(d=.1),a=y.u(),M(a,(.5-d/2)*b,0,h),a.lineTo((.5+d/2)*b,0),a.lineTo((.5+d/2)*b,(.5-d/2)*c),a.lineTo(1*b,(.5-d/2)*c),a.lineTo(1*b,(.5+d/2)*c),a.lineTo((.5+d/2)*b,(.5+d/2)*c),a.lineTo((.5+d/2)*b,1*c),a.lineTo((.5-d/2)*b,1*c),a.lineTo((.5-d/2)*b,(.5+d/2)*c),a.lineTo(0,(.5+d/2)*c),a.lineTo(0,(.5-d/2)*c),a.lineTo((.5-d/2)*b,(.5-d/2)*c),Rc(a),b=a.s,y.v(a),b
},ThinX:function(a,b,c){return a=y.u(),M(a,.1*b,0,h),a.lineTo(.5*b,.4*c),a.lineTo(.9*b,0),a.lineTo(1*b,.1*c),a.lineTo(.6*b,.5*c),a.lineTo(1*b,.9*c),a.lineTo(.9*b,1*c),a.lineTo(.5*b,.6*c),a.lineTo(.1*b,1*c),a.lineTo(0,.9*c),a.lineTo(.4*b,.5*c),a.lineTo(0,.1*c),Rc(a),a.s},RightTriangle:function(a,b,c){return a=y.u(),M(a,0,0,h),a.lineTo(1*b,1*c),a.lineTo(0,1*c),Rc(a),b=a.s,b.G=new J(0,.5),b.H=new J(.5,1),y.v(a),b},RoundedIBeam:function(a,b,c){return a=y.u(),M(a,0,0,h),a.lineTo(1*b,0),N(a,.5*b,.25*c,.5*b,.75*c,1*b,1*c),a.lineTo(0,1*c),N(a,.5*b,.75*c,.5*b,.25*c,0,0),Rc(a),b=a.s,y.v(a),b},RoundedRectangle:function(a,b,c){var e,d=a?a.ic:0;return 0>=d&&(d=5),d=Math.min(d,b/3),d=Math.min(d,c/3),a=d*H.ra,e=y.u(),M(e,d,0,h),e.lineTo(b-d,0),N(e,b-a,0,b,a,b,d),e.lineTo(b,c-d),N(e,b,c-a,b-a,c,b-d,c),e.lineTo(d,c),N(e,a,c,0,c-a,0,c-d),e.lineTo(0,d),N(e,0,a,a,0,d,0),Rc(e),b=e.s,a>1?(b.G=new J(0,0,a,a),b.H=new J(1,1,-a,-a)):(b.G=Mb,b.H=Zb),y.v(e),b},Border:function(a,b,c){var d=a?a.ic:0;return 0>=d&&(d=5),d=Math.min(d,b/3),d=Math.min(d,c/3),a=y.u(),M(a,d,0,h),a.lineTo(b-d,0),N(a,b-0,0,b,0,b,d),a.lineTo(b,c-d),N(a,b,c-0,b-0,c,b-d,c),a.lineTo(d,c),N(a,0,c,0,c-0,0,c-d),a.lineTo(0,d),N(a,0,0,0,0,d,0),Rc(a),b=a.s,b.G=Mb,b.H=Zb,y.v(a),b},SquareIBeam:function(a,b,c){var d=a?a.ic:0;return 0===d&&(d=.2),a=y.u(),M(a,0,0,h),a.lineTo(1*b,0),a.lineTo(1*b,d*c),a.lineTo((.5+d/2)*b,d*c),a.lineTo((.5+d/2)*b,(1-d)*c),a.lineTo(1*b,(1-d)*c),a.lineTo(1*b,1*c),a.lineTo(0,1*c),a.lineTo(0,(1-d)*c),a.lineTo((.5-d/2)*b,(1-d)*c),a.lineTo((.5-d/2)*b,d*c),a.lineTo(0,d*c),Rc(a),b=a.s,y.v(a),b},Trapezoid:function(a,b,c){a=a?a.ic:0,0===a&&(a=.2);var d=y.u();return M(d,a*b,0,h),d.lineTo((1-a)*b,0),d.lineTo(1*b,1*c),d.lineTo(0,1*c),Rc(d),b=d.s,b.G=new J(a,0),b.H=new J(1-a,1),y.v(d),b},ManualLoop:"ManualOperation",ManualOperation:function(a,b,c){var d=a?a.ic:0;return a=y.u(),M(a,d,0,h),a.lineTo(0,0),a.lineTo(1*b,0),a.lineTo(.9*b,1*c),a.lineTo(.1*b,1*c),Rc(a),b=a.s,b.G=new J(.1,0),b.H=new J(.9,1),y.v(a),b},GenderMale:function(a,b,c){var d,e,f,g,i,j,k,l,m;return a=y.u(),d=H.ra,e=.4*d,f=.4,g=y.M(),i=y.M(),j=y.M(),k=y.M(),M(a,(.5-f)*b,.5*c,h),N(a,(.5-f)*b,(.5-e)*c,(.5-e)*b,(.5-f)*c,.5*b,(.5-f)*c),H.Yh(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.44,j,k,i,g,g),N(a,j.x*b,j.y*c,k.x*b,k.y*c,i.x*b,i.y*c),l=y.dc(i.x,i.y),H.Yh(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.56,g,g,i,j,k),m=y.dc(i.x,i.y),a.lineTo((.1*l.x+.855)*b,.1*l.y*c),a.lineTo(.85*b,.1*l.y*c),a.lineTo(.85*b,0),a.lineTo(1*b,0),a.lineTo(1*b,.15*c),a.lineTo((.1*m.x+.9)*b,.15*c),a.lineTo((.1*m.x+.9)*b,(.1*m.y+.05*.9)*c),a.lineTo(m.x*b,m.y*c),N(a,j.x*b,j.y*c,k.x*b,k.y*c,(.5+f)*b,.5*c),N(a,(.5+f)*b,(.5+e)*c,(.5+e)*b,(.5+f)*c,.5*b,(.5+f)*c),N(a,(.5-e)*b,(.5+f)*c,(.5-f)*b,(.5+e)*c,(.5-f)*b,.5*c),f=.35,e=.35*d,M(a,.5*b,(.5-f)*c,h,h),N(a,(.5-e)*b,(.5-f)*c,(.5-f)*b,(.5-e)*c,(.5-f)*b,.5*c),N(a,(.5-f)*b,(.5+e)*c,(.5-e)*b,(.5+f)*c,.5*b,(.5+f)*c),N(a,(.5+e)*b,(.5+f)*c,(.5+f)*b,(.5+e)*c,(.5+f)*b,.5*c),N(a,(.5+f)*b,(.5-e)*c,(.5+e)*b,(.5-f)*c,.5*b,(.5-f)*c),M(a,(.5-f)*b,.5*c,h),y.B(g),y.B(i),y.B(j),y.B(k),y.B(l),y.B(m),b=a.s,b.G=new J(.202,.257),b.H=new J(.692,.839),b.ec=Cg,y.v(a),b},GenderFemale:function(a,b,c){a=y.u();var d=.375,e=0,f=-.125,g=d*(4*(Math.SQRT2-1)/3);return M(a,(.525+e)*b,(.5+d+f)*c,h),N(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c),N(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c),N(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c),N(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.475+e)*b,(.5+d+f)*c),a.lineTo(.475*b,.85*c),a.lineTo(.425*b,.85*c),a.lineTo(.425*b,.9*c),a.lineTo(.475*b,.9*c),a.lineTo(.475*b,1*c),a.lineTo(.525*b,1*c),a.lineTo(.525*b,.9*c),a.lineTo(.575*b,.9*c),a.lineTo(.575*b,.85*c),a.lineTo(.525*b,.85*c),Rc(a),d=.325,e=0,f=-.125,g=d*(4*(Math.SQRT2-1)/3),M(a,(.5+d+e)*b,(.5+f)*c,h,h),N(a,(.5+d+e)*b,(.5+g+f)*c,(.5+g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c),N(a,(.5-g+e)*b,(.5+d+f)*c,(.5-d+e)*b,(.5+g+f)*c,(.5-d+e)*b,(.5+f)*c),N(a,(.5-d+e)*b,(.5-g+f)*c,(.5-g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c),N(a,(.5+g+e)*b,(.5-d+f)*c,(.5+d+e)*b,(.5-g+f)*c,(.5+d+e)*b,(.5+f)*c),M(a,(.525+e)*b,(.5+d+f)*c,h),b=a.s,b.G=new J(.232,.136),b.H=new J(.782,.611),b.ec=Cg,y.v(a),b},PlusLine:function(a,b,c){return a=y.u(),M(a,0,.5*c,s),a.lineTo(1*b,.5*c),a.moveTo(.5*b,0),a.lineTo(.5*b,1*c),b=a.s,y.v(a),b},XLine:function(a,b,c){return a=y.u(),M(a,0,1*c,s),a.lineTo(1*b,0),a.moveTo(0,0),a.lineTo(1*b,1*c),b=a.s,y.v(a),b},AsteriskLine:function(a,b,c){a=y.u();var d=.2/Math.SQRT2;return M(a,d*b,(1-d)*c,s),a.lineTo((1-d)*b,d*c),a.moveTo(d*b,d*c),a.lineTo((1-d)*b,(1-d)*c),a.moveTo(0*b,.5*c),a.lineTo(1*b,.5*c),a.moveTo(.5*b,0*c),a.lineTo(.5*b,1*c),b=a.s,y.v(a),b},CircleLine:function(a,b,c){var d=.5*H.ra;return a=y.u(),M(a,1*b,.5*c,s),N(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),N(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c),N(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0),N(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c),b=a.s,b.G=new J(.146,.146),b.H=new J(.853,.853),b.ec=Cg,y.v(a),b},Pie:function(a,b,c){a=y.u();var d=.5*(4*(Math.SQRT2-1)/3);return M(a,(.5*Math.SQRT2/2+.5)*b,(.5-.5*Math.SQRT2/2)*c,h),N(a,.7*b,0*c,.5*b,0*c,.5*b,0*c),N(a,(.5-d+0)*b,0*c,0*b,(.5-d+0)*c,0*b,.5*c),N(a,0*b,(.5+d+0)*c,(.5-d+0)*b,1*c,.5*b,1*c),N(a,(.5+d+0)*b,1*c,1*b,(.5+d+0)*c,1*b,.5*c),a.lineTo(.5*b,.5*c),Rc(a),b=a.s,y.v(a),b},PiePiece:function(a,b,c){var d=.5*(H.ra/Math.SQRT2),e=Math.SQRT2/2,f=1-Math.SQRT2/2;return a=y.u(),M(a,b,c,h),N(a,b,(1-d)*c,(e+d)*b,(f+d)*c,e*b,f*c),a.lineTo(0,c),Rc(a),b=a.s,y.v(a),b},StopSign:function(a,b,c){a=1/(Math.SQRT2+2);var d=y.u();return M(d,a*b,0,h),d.lineTo((1-a)*b,0),d.lineTo(1*b,a*c),d.lineTo(1*b,(1-a)*c),d.lineTo((1-a)*b,1*c),d.lineTo(a*b,1*c),d.lineTo(0,(1-a)*c),d.lineTo(0,a*c),Rc(d),b=d.s,b.G=new J(a/2,a/2),b.H=new J(1-a/2,1-a/2),y.v(d),b},LogicImplies:function(a,b,c){var d=a?a.ic:0;return 0===d&&(d=.2),a=y.u(),M(a,(1-d)*b,0*c,s),a.lineTo(1*b,.5*c),a.lineTo((1-d)*b,c),a.moveTo(0,.5*c),a.lineTo(b,.5*c),b=a.s,b.G=Mb,b.H=new J(.8,.5),y.v(a),b},LogicIff:function(a,b,c){var d=a?a.ic:0;return 0===d&&(d=.2),a=y.u(),M(a,(1-d)*b,0*c,s),a.lineTo(1*b,.5*c),a.lineTo((1-d)*b,c),a.moveTo(0,.5*c),a.lineTo(b,.5*c),a.moveTo(d*b,0),a.lineTo(0,.5*c),a.lineTo(d*b,c),b=a.s,b.G=new J(.2,0),b.H=new J(.8,.5),y.v(a),b},LogicNot:function(a,b,c){return a=y.u(),M(a,0,0,s),a.lineTo(1*b,0),a.lineTo(1*b,1*c),b=a.s,y.v(a),b},LogicAnd:function(a,b,c){return a=y.u(),M(a,0,1*c,s),a.lineTo(.5*b,0),a.lineTo(1*b,1*c),b=a.s,b.G=new J(.25,.5),b.H=new J(.75,1),y.v(a),b},LogicOr:function(a,b,c){return a=y.u(),M(a,0,0,s),a.lineTo(.5*b,1*c),a.lineTo(1*b,0),b=a.s,b.G=new J(.219,0),b.H=new J(.78,.409),y.v(a),b},LogicXor:function(a,b,c){a=y.u(),M(a,.5*b,0,s),a.lineTo(.5*b,1*c),a.moveTo(0,.5*c),a.lineTo(1*b,.5*c);var d=.5*H.ra;return N(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),N(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c),N(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0),N(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c),b=a.s,b.ec=Cg,y.v(a),b},LogicTruth:function(a,b,c){return a=y.u(),M(a,0,0,s),a.lineTo(1*b,0),a.moveTo(.5*b,0),a.lineTo(.5*b,1*c),b=a.s,y.v(a),b},LogicFalsity:function(a,b,c){return a=y.u(),M(a,0,1*c,s),a.lineTo(1*b,1*c),a.moveTo(.5*b,1*c),a.lineTo(.5*b,0),b=a.s,y.v(a),b},LogicThereExists:function(a,b,c){return a=y.u(),M(a,0,0,s),a.lineTo(1*b,0),a.lineTo(1*b,.5*c),a.lineTo(0,.5*c),a.moveTo(1*b,.5*c),a.lineTo(1*b,1*c),a.lineTo(0,1*c),b=a.s,y.v(a),b},LogicForAll:function(a,b,c){return a=y.u(),M(a,0,0,s),a.lineTo(.5*b,1*c),a.lineTo(1*b,0),a.moveTo(.25*b,.5*c),a.lineTo(.75*b,.5*c),b=a.s,b.G=new J(.25,0),b.H=new J(.75,.5),y.v(a),b},LogicIsDefinedAs:function(a,b,c){return a=y.u(),M(a,0,0,s),a.lineTo(b,0),a.moveTo(0,.5*c),a.lineTo(b,.5*c),a.moveTo(0,c),a.lineTo(b,c),b=a.s,b.G=new J(.01,.01),b.H=new J(.99,.49),y.v(a),b},LogicIntersect:function(a,b,c){var d=.5*H.ra;return a=y.u(),M(a,0,1*c,s),a.lineTo(0,.5*c),N(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0),N(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c),a.lineTo(1*b,1*c),b=a.s,b.G=new J(0,.5),b.H=Zb,y.v(a),b},LogicUnion:function(a,b,c){var d=.5*H.ra;return a=y.u(),M(a,1*b,0,s),a.lineTo(1*b,.5*c),N(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),N(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c),a.lineTo(0,0),b=a.s,b.G=Mb,b.H=new J(1,.5),y.v(a),b},Arrow:function(a,b,c){var d=a?a.ic:0,e=a?a.$r:0;return 0===d&&(d=.3),0===e&&(e=.3),a=y.u(),M(a,0,(.5-e/2)*c,h),a.lineTo((1-d)*b,(.5-e/2)*c),a.lineTo((1-d)*b,0),a.lineTo(1*b,.5*c),a.lineTo((1-d)*b,1*c),a.lineTo((1-d)*b,(.5+e/2)*c),a.lineTo(0,(.5+e/2)*c),Rc(a),b=a.s,b.G=new J(0,.5-e/2),d=H.zk(0,.5+e/2,1,.5+e/2,1-d,1,1,.5,y.M()),b.H=new J(d.x,d.y),y.B(d),y.v(a),b},ISOProcess:"Chevron",Chevron:function(a,b,c){return a=y.u(),M(a,0,0,h),a.lineTo(.5*b,0),a.lineTo(1*b,.5*c),a.lineTo(.5*b,1*c),a.lineTo(0,1*c),a.lineTo(.5*b,.5*c),Rc(a),b=a.s,y.v(a),b},DoubleArrow:function(a,b,c){return a=y.u(),M(a,0,0,h),a.lineTo(.3*b,.214*c),a.lineTo(.3*b,0),a.lineTo(1*b,.5*c),a.lineTo(.3*b,1*c),a.lineTo(.3*b,.786*c),a.lineTo(0,1*c),Rc(a),M(a,.3*b,.214*c,s),a.lineTo(.3*b,.786*c),Tc(a),b=a.s,y.v(a),b},DoubleEndArrow:function(a,b,c){return a=y.u(),M(a,1*b,.5*c,h),a.lineTo(.7*b,1*c),a.lineTo(.7*b,.7*c),a.lineTo(.3*b,.7*c),a.lineTo(.3*b,1*c),a.lineTo(0,.5*c),a.lineTo(.3*b,0),a.lineTo(.3*b,.3*c),a.lineTo(.7*b,.3*c),a.lineTo(.7*b,0),Rc(a),b=a.s,c=H.zk(0,.5,.3,0,0,.3,.3,.3,y.M()),b.G=new J(c.x,c.y),c=H.zk(.7,1,1,.5,.7,.7,1,.7,c),b.H=new J(c.x,c.y),y.B(c),y.v(a),b},IBeamArrow:function(a,b,c){return a=y.u(),M(a,1*b,.5*c,h),a.lineTo(.7*b,1*c),a.lineTo(.7*b,.7*c),a.lineTo(.2*b,.7*c),a.lineTo(.2*b,1*c),a.lineTo(0,1*c),a.lineTo(0,0),a.lineTo(.2*b,0),a.lineTo(.2*b,.3*c),a.lineTo(.7*b,.3*c),a.lineTo(.7*b,0),Rc(a),b=a.s,b.G=new J(0,.3),c=H.zk(.7,1,1,.5,.7,.7,1,.7,y.M()),b.H=new J(c.x,c.y),y.B(c),y.v(a),b},Pointer:function(a,b,c){return a=y.u(),M(a,1*b,.5*c,h),a.lineTo(0,1*c),a.lineTo(.2*b,.5*c),a.lineTo(0,0),Rc(a),b=a.s,b.G=new J(.2,.35),c=H.zk(.2,.65,1,.65,0,1,1,.5,y.M()),b.H=new J(c.x,c.y),y.B(c),y.v(a),b},RoundedPointer:function(a,b,c){return a=y.u(),M(a,1*b,.5*c,h),a.lineTo(0,1*c),N(a,.5*b,.75*c,.5*b,.25*c,0,0),Rc(a),b=a.s,b.G=new J(.4,.35),c=H.zk(.2,.65,1,.65,0,1,1,.5,y.M()),b.H=new J(c.x,c.y),y.B(c),y.v(a),b},SplitEndArrow:function(a,b,c){return a=y.u(),M(a,1*b,.5*c,h),a.lineTo(.7*b,1*c),a.lineTo(.7*b,.7*c),a.lineTo(0,.7*c),a.lineTo(.2*b,.5*c),a.lineTo(0,.3*c),a.lineTo(.7*b,.3*c),a.lineTo(.7*b,0),Rc(a),b=a.s,b.G=new J(.2,.3),c=H.zk(.7,1,1,.5,.7,.7,1,.7,y.M()),b.H=new J(c.x,c.y),y.B(c),y.v(a),b},MessageToUser:"SquareArrow",SquareArrow:function(a,b,c){return a=y.u(),M(a,1*b,.5*c,h),a.lineTo(.7*b,1*c),a.lineTo(0,1*c),a.lineTo(0,0),a.lineTo(.7*b,0),Rc(a),b=a.s,b.G=Mb,b.H=new J(.7,1),y.v(a),b},Cone1:function(a,b,c){var e,d=H.ra;return a=.5*d,e=.1*d,d=y.u(),M(d,0,.9*c,h),d.lineTo(.5*b,0),d.lineTo(1*b,.9*c),N(d,1*b,(.9+e)*c,(.5+a)*b,1*c,.5*b,1*c),N(d,(.5-a)*b,1*c,0,(.9+e)*c,0,.9*c),Rc(d),b=d.s,b.G=new J(.25,.5),b.H=new J(.75,.97),y.v(d),b},Cone2:function(a,b,c){return a=y.u(),M(a,0,.9*c,h),N(a,(1-.85/.9)*b,1*c,.85/.9*b,1*c,1*b,.9*c),a.lineTo(.5*b,0),a.lineTo(0,.9*c),Rc(a),M(a,0,.9*c,s),N(a,(1-.85/.9)*b,.8*c,.85/.9*b,.8*c,1*b,.9*c),Tc(a),b=a.s,b.G=new J(.25,.5),b.H=new J(.75,.82),y.v(a),b},Cube1:function(a,b,c){return a=y.u(),M(a,.5*b,1*c,h),a.lineTo(1*b,.85*c),a.lineTo(1*b,.15*c),a.lineTo(.5*b,0*c),a.lineTo(0*b,.15*c),a.lineTo(0*b,.85*c),Rc(a),M(a,.5*b,1*c,s),a.lineTo(.5*b,.3*c),a.lineTo(0,.15*c),a.moveTo(.5*b,.3*c),a.lineTo(1*b,.15*c),Tc(a),b=a.s,b.G=new J(0,.3),b.H=new J(.5,.85),y.v(a),b},Cube2:function(a,b,c){return a=y.u(),M(a,0,.3*c,h),a.lineTo(0*b,1*c),a.lineTo(.7*b,c),a.lineTo(1*b,.7*c),a.lineTo(1*b,0*c),a.lineTo(.3*b,0*c),Rc(a),M(a,0,.3*c,s),a.lineTo(.7*b,.3*c),a.lineTo(1*b,0*c),a.moveTo(.7*b,.3*c),a.lineTo(.7*b,1*c),Tc(a),b=a.s,b.G=new J(0,.3),b.H=new J(.7,1),y.v(a),b},MagneticData:"Cylinder1",Cylinder1:function(a,b,c){var e,d=H.ra;return a=.5*d,e=.1*d,d=y.u(),M(d,0,.1*c,h),N(d,0,(.1-e)*c,(.5-a)*b,0,.5*b,0),N(d,(.5+a)*b,0,1*b,(.1-e)*c,1*b,.1*c),d.lineTo(b,.9*c),N(d,1*b,(.9+e)*c,(.5+a)*b,1*c,.5*b,1*c),N(d,(.5-a)*b,1*c,0,(.9+e)*c,0,.9*c),d.lineTo(0,.1*c),M(d,0,.1*c,s),N(d,0,(.1+e)*c,(.5-a)*b,.2*c,.5*b,.2*c),N(d,(.5+a)*b,.2*c,1*b,(.1+e)*c,1*b,.1*c),Tc(d),b=d.s,b.G=new J(0,.2),b.H=new J(1,.9),y.v(d),b},Cylinder2:function(a,b,c){var e,d=H.ra;return a=.5*d,e=.1*d,d=y.u(),M(d,0,.9*c,h),d.lineTo(0,.1*c),N(d,0,(.1-e)*c,(.5-a)*b,0,.5*b,0),N(d,(.5+a)*b,0,1*b,(.1-e)*c,1*b,.1*c),d.lineTo(1*b,.9*c),N(d,1*b,(.9+e)*c,(.5+a)*b,1*c,.5*b,1*c),N(d,(.5-a)*b,1*c,0,(.9+e)*c,0,.9*c),M(d,0,.9*c,s),N(d,0,(.9-e)*c,(.5-a)*b,.8*c,.5*b,.8*c),N(d,(.5+a)*b,.8*c,1*b,(.9-e)*c,1*b,.9*c),Tc(d),b=d.s,b.G=new J(0,.1),b.H=new J(1,.8),y.v(d),b},Cylinder3:function(a,b,c){var e,d=H.ra;return a=.1*d,e=.5*d,d=y.u(),M(d,.1*b,0,h),d.lineTo(.9*b,0),N(d,(.9+a)*b,0,1*b,(.5-e)*c,1*b,.5*c),N(d,1*b,(.5+e)*c,(.9+a)*b,1*c,.9*b,1*c),d.lineTo(.1*b,1*c),N(d,(.1-a)*b,1*c,0,(.5+e)*c,0,.5*c),N(d,0,(.5-e)*c,(.1-a)*b,0,.1*b,0),M(d,.1*b,0,s),N(d,(.1+a)*b,0,.2*b,(.5-e)*c,.2*b,.5*c),N(d,.2*b,(.5+e)*c,(.1+a)*b,1*c,.1*b,1*c),Tc(d),b=d.s,b.G=new J(.2,0),b.H=new J(.9,1),y.v(d),b},DirectData:"Cylinder4",Cylinder4:function(a,b,c){var e,d=H.ra;return a=.1*d,e=.5*d,d=y.u(),M(d,.9*b,0,h),N(d,(.9+a)*b,0,1*b,(.5-e)*c,1*b,.5*c),N(d,1*b,(.5+e)*c,(.9+a)*b,1*c,.9*b,1*c),d.lineTo(.1*b,1*c),N(d,(.1-a)*b,1*c,0,(.5+e)*c,0,.5*c),N(d,0,(.5-e)*c,(.1-a)*b,0,.1*b,0),d.lineTo(.9*b,0),M(d,.9*b,0,s),N(d,(.9-a)*b,0,.8*b,(.5-e)*c,.8*b,.5*c),N(d,.8*b,(.5+e)*c,(.9-a)*b,1*c,.9*b,1*c),Tc(d),b=d.s,b.G=new J(.1,0),b.H=new J(.8,1),y.v(d),b},Prism1:function(a,b,c){return a=y.u(),M(a,.25*b,.25*c,h),a.lineTo(.75*b,0),a.lineTo(b,.5*c),a.lineTo(.5*b,c),a.lineTo(0,c),Rc(a),M(a,.25*b,.25*c,s),a.lineTo(.5*b,c),Tc(a),b=a.s,b.G=new J(.408,.172),b.H=new J(.833,.662),y.v(a),b},Prism2:function(a,b,c){return a=y.u(),M(a,0,.25*c,h),a.lineTo(.75*b,0),a.lineTo(1*b,.25*c),a.lineTo(.75*b,.75*c),a.lineTo(0,1*c),Rc(a),M(a,0,c,s),a.lineTo(.25*b,.5*c),a.lineTo(b,.25*c),a.moveTo(0,.25*c),a.lineTo(.25*b,.5*c),Tc(a),b=a.s,b.G=new J(.25,.5),b.H=new J(.75,.75),y.v(a),b},Pyramid1:function(a,b,c){return a=y.u(),M(a,.5*b,0,h),a.lineTo(b,.75*c),a.lineTo(.5*b,1*c),a.lineTo(0,.75*c),Rc(a),M(a,.5*b,0,s),a.lineTo(.5*b,1*c),Tc(a),b=a.s,b.G=new J(.25,.367),b.H=new J(.75,.875),y.v(a),b},Pyramid2:function(a,b,c){return a=y.u(),M(a,.5*b,0,h),a.lineTo(b,.85*c),a.lineTo(.5*b,1*c),a.lineTo(0,.85*c),Rc(a),M(a,.5*b,0,s),a.lineTo(.5*b,.7*c),a.lineTo(0,.85*c),a.moveTo(.5*b,.7*c),a.lineTo(1*b,.85*c),Tc(a),b=a.s,b.G=new J(.25,.367),b.H=new J(.75,.875),y.v(a),b},Actor:function(a,b,c){var d=H.ra,e=.2*d,f=.1*d,g=.5,i=.1;return a=y.u(),M(a,g*b,(i+.1)*c,h),N(a,(g-e)*b,(i+.1)*c,(g-.2)*b,(i+f)*c,(g-.2)*b,i*c),N(a,(g-.2)*b,(i-f)*c,(g-e)*b,(i-.1)*c,g*b,(i-.1)*c),N(a,(g+e)*b,(i-.1)*c,(g+.2)*b,(i-f)*c,(g+.2)*b,i*c),N(a,(g+.2)*b,(i+f)*c,(g+e)*b,(i+.1)*c,g*b,(i+.1)*c),e=.05,f=d*e,M(a,.5*b,.2*c,h),a.lineTo(.95*b,.2*c),g=.95,i=.25,N(a,(g+f)*b,(i-e)*c,(g+e)*b,(i-f)*c,(g+e)*b,i*c),a.lineTo(1*b,.6*c),a.lineTo(.85*b,.6*c),a.lineTo(.85*b,.35*c),e=.025,f=d*e,g=.825,i=.35,N(a,(g+e)*b,(i-f)*c,(g+f)*b,(i-e)*c,g*b,(i-e)*c),N(a,(g-f)*b,(i-e)*c,(g-e)*b,(i-f)*c,(g-e)*b,i*c),a.lineTo(.8*b,1*c),a.lineTo(.55*b,1*c),a.lineTo(.55*b,.7*c),e=.05,f=d*e,g=.5,i=.7,N(a,(g+e)*b,(i-f)*c,(g+f)*b,(i-e)*c,g*b,(i-e)*c),N(a,(g-f)*b,(i-e)*c,(g-e)*b,(i-f)*c,(g-e)*b,i*c),a.lineTo(.45*b,1*c),a.lineTo(.2*b,1*c),a.lineTo(.2*b,.35*c),e=.025,f=d*e,g=.175,i=.35,N(a,(g+e)*b,(i-f)*c,(g+f)*b,(i-e)*c,g*b,(i-e)*c),N(a,(g-f)*b,(i-e)*c,(g-e)*b,(i-f)*c,(g-e)*b,i*c),a.lineTo(.15*b,.6*c),a.lineTo(0*b,.6*c),a.lineTo(0*b,.25*c),e=.05,f=d*e,g=.05,i=.25,N(a,(g-e)*b,(i-f)*c,(g-f)*b,(i-e)*c,g*b,(i-e)*c),a.lineTo(.5*b,.2*c),b=a.s,b.G=new J(.2,.2),b.H=new J(.8,.65),y.v(a),b},Card:function(a,b,c){return a=y.u(),M(a,1*b,0*c,h),a.lineTo(1*b,1*c),a.lineTo(0*b,1*c),a.lineTo(0*b,.2*c),a.lineTo(.2*b,0*c),Rc(a),b=a.s,b.G=new J(0,.2),b.H=Zb,y.v(a),b},Collate:function(a,b,c){return a=y.u(),M(a,.5*b,.5*c,h),a.lineTo(0,0),a.lineTo(1*b,0),a.lineTo(.5*b,.5*c),M(a,.5*b,.5*c,h),a.lineTo(1*b,1*c),a.lineTo(0,1*c),a.lineTo(.5*b,.5*c),b=a.s,b.G=new J(.25,0),b.H=new J(.75,.25),y.v(a),b},CreateRequest:function(a,b,c){a=a?a.ic:0,0===a&&(a=.1);var d=y.u();return M(d,0,0,h),d.lineTo(1*b,0),d.lineTo(1*b,1*c),d.lineTo(0,1*c),Rc(d),M(d,0,a*c,s),d.lineTo(1*b,a*c),d.moveTo(0,(1-a)*c),d.lineTo(1*b,(1-a)*c),Tc(d),b=d.s,b.G=new J(0,a),b.H=new J(1,1-a),y.v(d),b},Database:function(a,b,c){a=y.u();var d=H.ra,e=.5*d,d=.1*d;return M(a,1*b,.1*c,h),a.lineTo(1*b,.9*c),N(a,1*b,(.9+d)*c,(.5+e)*b,1*c,.5*b,1*c),N(a,(.5-e)*b,1*c,0,(.9+d)*c,0,.9*c),a.lineTo(0,.1*c),N(a,0,(.1-d)*c,(.5-e)*b,0,.5*b,0),N(a,(.5+e)*b,0,1*b,(.1-d)*c,1*b,.1*c),M(a,1*b,.1*c,s),N(a,1*b,(.1+d)*c,(.5+e)*b,.2*c,.5*b,.2*c),N(a,(.5-e)*b,.2*c,0,(.1+d)*c,0,.1*c),a.moveTo(1*b,.2*c),N(a,1*b,(.2+d)*c,(.5+e)*b,.3*c,.5*b,.3*c),N(a,(.5-e)*b,.3*c,0,(.2+d)*c,0,.2*c),a.moveTo(1*b,.3*c),N(a,1*b,(.3+d)*c,(.5+e)*b,.4*c,.5*b,.4*c),N(a,(.5-e)*b,.4*c,0,(.3+d)*c,0,.3*c),Tc(a),b=a.s,b.G=new J(0,.4),b.H=new J(1,.9),y.v(a),b},StoredData:"DataStorage",DataStorage:function(a,b,c){return a=y.u(),M(a,0,0,h),a.lineTo(.75*b,0),N(a,1*b,0,1*b,1*c,.75*b,1*c),a.lineTo(0,1*c),N(a,.25*b,.9*c,.25*b,.1*c,0,0),Rc(a),b=a.s,b.G=new J(.226,0),b.H=new J(.81,1),y.v(a),b},DiskStorage:function(a,b,c){a=y.u();var d=H.ra,e=.5*d,d=.1*d;return M(a,1*b,.1*c,h),a.lineTo(1*b,.9*c),N(a,1*b,(.9+d)*c,(.5+e)*b,1*c,.5*b,1*c),N(a,(.5-e)*b,1*c,0,(.9+d)*c,0,.9*c),a.lineTo(0,.1*c),N(a,0,(.1-d)*c,(.5-e)*b,0,.5*b,0),N(a,(.5+e)*b,0,1*b,(.1-d)*c,1*b,.1*c),M(a,1*b,.1*c,s),N(a,1*b,(.1+d)*c,(.5+e)*b,.2*c,.5*b,.2*c),N(a,(.5-e)*b,.2*c,0,(.1+d)*c,0,.1*c),a.moveTo(1*b,.2*c),N(a,1*b,(.2+d)*c,(.5+e)*b,.3*c,.5*b,.3*c),N(a,(.5-e)*b,.3*c,0,(.2+d)*c,0,.2*c),Tc(a),b=a.s,b.G=new J(0,.3),b.H=new J(1,.9),y.v(a),b},Display:function(a,b,c){return a=y.u(),M(a,.25*b,0,h),a.lineTo(.75*b,0),N(a,1*b,0,1*b,1*c,.75*b,1*c),a.lineTo(.25*b,1*c),a.lineTo(0,.5*c),Rc(a),b=a.s,b.G=new J(.25,0),b.H=new J(.75,1),y.v(a),b},DividedEvent:function(a,b,c){a=a?a.ic:0,0===a?a=.2:.15>a&&(a=.15);var d=y.u(),e=.2*H.ra;return M(d,0,.2*c,h),N(d,0,(.2-e)*c,(.2-e)*b,0,.2*b,0),d.lineTo(.8*b,0),N(d,(.8+e)*b,0,1*b,(.2-e)*c,1*b,.2*c),d.lineTo(1*b,.8*c),N(d,1*b,(.8+e)*c,(.8+e)*b,1*c,.8*b,1*c),d.lineTo(.2*b,1*c),N(d,(.2-e)*b,1*c,0,(.8+e)*c,0,.8*c),d.lineTo(0,.2*c),M(d,0,a*c,s),d.lineTo(1*b,a*c),Tc(d),b=d.s,b.G=new J(0,a),b.H=new J(1,1-a),y.v(d),b},DividedProcess:function(a,b,c){a=a?a.ic:0,.1>a&&(a=.1);var d=y.u();return M(d,0,0,h),d.lineTo(1*b,0),d.lineTo(1*b,1*c),d.lineTo(0,1*c),Rc(d),M(d,0,a*c,s),d.lineTo(1*b,a*c),Tc(d),b=d.s,b.G=new J(0,a),b.H=Zb,y.v(d),b},Document:function(a,b,c){return c/=.8,a=y.u(),M(a,0,.7*c,h),a.lineTo(0,0),a.lineTo(1*b,0),a.lineTo(1*b,.7*c),N(a,.5*b,.4*c,.5*b,1*c,0,.7*c),Rc(a),b=a.s,b.G=Mb,b.H=new J(1,.6),y.v(a),b},ExternalOrganization:function(a,b,c){a=a?a.ic:0,.2>a&&(a=.2);var d=y.u();return M(d,0,0,h),d.lineTo(1*b,0),d.lineTo(1*b,1*c),d.lineTo(0,1*c),Rc(d),M(d,a*b,0,s),d.lineTo(0,a*c),d.moveTo(1*b,a*c),d.lineTo((1-a)*b,0),d.moveTo(0,(1-a)*c),d.lineTo(a*b,1*c),d.moveTo((1-a)*b,1*c),d.lineTo(1*b,(1-a)*c),Tc(d),b=d.s,b.G=new J(a/2,a/2),b.H=new J(1-a/2,1-a/2),y.v(d),b},ExternalProcess:function(a,b,c){return a=y.u(),M(a,.5*b,0,h),a.lineTo(1*b,.5*c),a.lineTo(.5*b,1*c),a.lineTo(0,.5*c),Rc(a),M(a,.1*b,.4*c,s),a.lineTo(.1*b,.6*c),a.moveTo(.9*b,.6*c),a.lineTo(.9*b,.4*c),a.moveTo(.6*b,.1*c),a.lineTo(.4*b,.1*c),a.moveTo(.4*b,.9*c),a.lineTo(.6*b,.9*c),Tc(a),b=a.s,b.G=new J(.25,.25),b.H=new J(.75,.75),y.v(a),b},File:function(a,b,c){return a=y.u(),M(a,0,0,h),a.lineTo(.75*b,0),a.lineTo(1*b,.25*c),a.lineTo(1*b,1*c),a.lineTo(0,1*c),Rc(a),M(a,.75*b,0,s),a.lineTo(.75*b,.25*c),a.lineTo(1*b,.25*c),Tc(a),b=a.s,b.G=new J(0,.25),b.H=Zb,y.v(a),b},Interrupt:function(a,b,c){return a=y.u(),M(a,1*b,.5*c,h),a.lineTo(0,1*c),a.lineTo(0,0),a.lineTo(1*b,.5*c),M(a,1*b,.5*c,s),a.lineTo(1*b,1*c),M(a,1*b,.5*c,s),a.lineTo(1*b,0),b=a.s,b.G=new J(0,.25),b.H=new J(.5,.75),y.v(a),b},InternalStorage:function(a,b,c){var e,d=a?a.ic:0;return a=a?a.$r:0,0===d&&(d=.1),0===a&&(a=.1),e=y.u(),M(e,0,0,h),e.lineTo(1*b,0),e.lineTo(1*b,1*c),e.lineTo(0,1*c),Rc(e),M(e,d*b,0,s),e.lineTo(d*b,1*c),e.moveTo(0,a*c),e.lineTo(1*b,a*c),Tc(e),b=e.s,b.G=new J(d,a),b.H=Zb,y.v(e),b},Junction:function(a,b,c){a=y.u();var d=1/Math.SQRT2,e=(1-1/Math.SQRT2)/2,f=.5*H.ra;return M(a,1*b,.5*c,h),N(a,1*b,(.5+f)*c,(.5+f)*b,1*c,.5*b,1*c),N(a,(.5-f)*b,1*c,0,(.5+f)*c,0,.5*c),N(a,0,(.5-f)*c,(.5-f)*b,0,.5*b,0),N(a,(.5+f)*b,0,1*b,(.5-f)*c,1*b,.5*c),M(a,(e+d)*b,(e+d)*c,s),a.lineTo(e*b,e*c),a.moveTo(e*b,(e+d)*c),a.lineTo((e+d)*b,e*c),Tc(a),b=a.s,b.ec=Cg,y.v(a),b},LinedDocument:function(a,b,c){return c/=.8,a=y.u(),M(a,0,.7*c,h),a.lineTo(0,0),a.lineTo(1*b,0),a.lineTo(1*b,.7*c),N(a,.5*b,.4*c,.5*b,1*c,0,.7*c),Rc(a),M(a,.1*b,0,s),a.lineTo(.1*b,.75*c),Tc(a),b=a.s,b.G=new J(.1,0),b.H=new J(1,.6),y.v(a),b},LoopLimit:function(a,b,c){return a=y.u(),M(a,0,1*c,h),a.lineTo(0,.25*c),a.lineTo(.25*b,0),a.lineTo(.75*b,0),a.lineTo(1*b,.25*c),a.lineTo(1*b,1*c),Rc(a),b=a.s,b.G=new J(0,.25),b.H=Zb,y.v(a),b},SequentialData:"MagneticTape",MagneticTape:function(a,b,c){a=y.u();var d=.5*H.ra;return M(a,.5*b,1*c,h),N(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c),N(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0),N(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c),N(a,1*b,(.5+d)*c,(.5+d)*b,.9*c,.6*b,.9*c),a.lineTo(1*b,.9*c),a.lineTo(1*b,1*c),a.lineTo(.5*b,1*c),b=a.s,b.G=new J(.15,.15),b.H=new J(.85,.8),y.v(a),b},ManualInput:function(a,b,c){return a=y.u(),M(a,1*b,0,h),a.lineTo(1*b,1*c),a.lineTo(0,1*c),a.lineTo(0,.25*c),Rc(a),b=a.s,b.G=new J(0,.25),b.H=Zb,y.v(a),b},MessageFromUser:function(a,b,c){a=a?a.ic:0,0===a&&(a=.7);var d=y.u();return M(d,0,0,h),d.lineTo(1*b,0),d.lineTo(a*b,.5*c),d.lineTo(1*b,1*c),d.lineTo(0,1*c),Rc(d),b=d.s,b.G=Mb,b.H=new J(a,1),y.v(d),b},MicroformProcessing:function(a,b,c){a=a?a.ic:0,0===a&&(a=.25);var d=y.u();return M(d,0,0,h),d.lineTo(.5*b,a*c),d.lineTo(1*b,0),d.lineTo(1*b,1*c),d.lineTo(.5*b,(1-a)*c),d.lineTo(0,1*c),Rc(d),b=d.s,b.G=new J(0,a),b.H=new J(1,1-a),y.v(d),b},MicroformRecording:function(a,b,c){return a=y.u(),M(a,0,0,h),a.lineTo(.75*b,.25*c),a.lineTo(1*b,.15*c),a.lineTo(1*b,.85*c),a.lineTo(.75*b,.75*c),a.lineTo(0,1*c),Rc(a),b=a.s,b.G=new J(0,.25),b.H=new J(1,.75),y.v(a),b},MultiDocument:function(a,b,c){return c/=.8,a=y.u(),M(a,b,0,h),a.lineTo(b,.5*c),N(a,.96*b,.47*c,.93*b,.45*c,.9*b,.44*c),a.lineTo(.9*b,.6*c),N(a,.86*b,.57*c,.83*b,.55*c,.8*b,.54*c),a.lineTo(.8*b,.7*c),N(a,.4*b,.4*c,.4*b,1*c,0,.7*c),a.lineTo(0,.2*c),a.lineTo(.1*b,.2*c),a.lineTo(.1*b,.1*c),a.lineTo(.2*b,.1*c),a.lineTo(.2*b,0),Rc(a),M(a,.1*b,.2*c,s),a.lineTo(.8*b,.2*c),a.lineTo(.8*b,.54*c),a.moveTo(.2*b,.1*c),a.lineTo(.9*b,.1*c),a.lineTo(.9*b,.44*c),Tc(a),b=a.s,b.G=new J(0,.25),b.H=new J(.8,.77),y.v(a),b},MultiProcess:function(a,b,c){return a=y.u(),M(a,.1*b,.1*c,h),a.lineTo(.2*b,.1*c),a.lineTo(.2*b,0),a.lineTo(1*b,0),a.lineTo(1*b,.8*c),a.lineTo(.9*b,.8*c),a.lineTo(.9*b,.9*c),a.lineTo(.8*b,.9*c),a.lineTo(.8*b,1*c),a.lineTo(0,1*c),a.lineTo(0,.2*c),a.lineTo(.1*b,.2*c),Rc(a),M(a,.2*b,.1*c,s),a.lineTo(.9*b,.1*c),a.lineTo(.9*b,.8*c),a.moveTo(.1*b,.2*c),a.lineTo(.8*b,.2*c),a.lineTo(.8*b,.9*c),Tc(a),b=a.s,b.G=new J(0,.2),b.H=new J(.8,1),y.v(a),b},OfflineStorage:function(a,b,c){a=a?a.ic:0,0===a&&(a=.1);var d=1-a,e=y.u();return M(e,0,0,h),e.lineTo(1*b,0),e.lineTo(.5*b,1*c),Rc(e),M(e,.5*a*b,a*c,s),e.lineTo((1-.5*a)*b,a*c),Tc(e),b=e.s,b.G=new J(d/4+.5*a,a),b.H=new J(3*d/4+.5*a,a+.5*d),y.v(e),b},OffPageConnector:function(a,b,c){return a=y.u(),M(a,0,0,h),a.lineTo(.75*b,0),a.lineTo(1*b,.5*c),a.lineTo(.75*b,1*c),a.lineTo(0,1*c),Rc(a),b=a.s,b.G=Mb,b.H=new J(.75,1),y.v(a),b},Or:function(a,b,c){a=y.u();var d=.5*H.ra;return M(a,1*b,.5*c,h),N(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),N(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c),N(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0),N(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c),M(a,1*b,.5*c,s),a.lineTo(0,.5*c),a.moveTo(.5*b,1*c),a.lineTo(.5*b,0),Tc(a),b=a.s,b.ec=Cg,y.v(a),b},PaperTape:function(a,b,c){return c/=.8,a=y.u(),M(a,0,.7*c,h),a.lineTo(0,.3*c),N(a,.5*b,.6*c,.5*b,0,1*b,.3),a.lineTo(1*b,.7*c),N(a,.5*b,.4*c,.5*b,1*c,0,.7*c),Rc(a),b=a.s,b.G=new J(0,.49),b.H=new J(1,.75),y.v(a),b},PrimitiveFromCall:function(a,b,c){var e,d=a?a.ic:0;return a=a?a.$r:0,0===d&&(d=.1),0===a&&(a=.3),e=y.u(),M(e,0,0,h),e.lineTo(1*b,0),e.lineTo((1-a)*b,.5*c),e.lineTo(1*b,1*c),e.lineTo(0,1*c),Rc(e),b=e.s,b.G=new J(d,0),b.H=new J(1-a,1),y.v(e),b},PrimitiveToCall:function(a,b,c){var e,d=a?a.ic:0;return a=a?a.$r:0,0===d&&(d=.1),0===a&&(a=.3),e=y.u(),M(e,0,0,h),e.lineTo((1-a)*b,0),e.lineTo(1*b,.5*c),e.lineTo((1-a)*b,1*c),e.lineTo(0,1*c),Rc(e),b=e.s,b.G=new J(d,0),b.H=new J(1-a,1),y.v(e),b},Subroutine:"Procedure",Procedure:function(a,b,c){a=a?a.ic:0,0===a&&(a=.1);var d=y.u();return M(d,0,0,h),d.lineTo(1*b,0),d.lineTo(1*b,1*c),d.lineTo(0,1*c),Rc(d),M(d,(1-a)*b,0,s),d.lineTo((1-a)*b,1*c),d.moveTo(a*b,0),d.lineTo(a*b,1*c),Tc(d),b=d.s,b.G=new J(a,0),b.H=new J(1-a,1),y.v(d),b},Process:function(a,b,c){a=a?a.ic:0,0===a&&(a=.1);var d=y.u();return M(d,0,0,h),d.lineTo(1*b,0),d.lineTo(1*b,1*c),d.lineTo(0,1*c),Rc(d),M(d,a*b,0,s),d.lineTo(a*b,1*c),Tc(d),b=d.s,b.G=new J(a,0),b.H=Zb,y.v(d),b},Sort:function(a,b,c){return a=y.u(),M(a,.5*b,0,h),a.lineTo(1*b,.5*c),a.lineTo(.5*b,1*c),a.lineTo(0,.5*c),Rc(a),M(a,0,.5*c,s),a.lineTo(1*b,.5*c),Tc(a),b=a.s,b.G=new J(.25,.25),b.H=new J(.75,.5),y.v(a),b},Start:function(a,b,c){return a=y.u(),M(a,.25*b,0,h),a.lineTo(.75*b,0),N(a,1*b,0,1*b,1*c,.75*b,1*c),a.lineTo(.25*b,1*c),N(a,0,1*c,0,0,.25*b,0),M(a,.25*b,0,s),a.lineTo(.25*b,1*c),a.moveTo(.75*b,0),a.lineTo(.75*b,1*c),Tc(a),b=a.s,b.G=new J(.25,0),b.H=new J(.75,1),y.v(a),b},Terminator:function(a,b,c){return a=y.u(),M(a,.25*b,0,h),a.lineTo(.75*b,0),N(a,1*b,0,1*b,1*c,.75*b,1*c),a.lineTo(.25*b,1*c),N(a,0,1*c,0,0,.25*b,0),b=a.s,b.G=new J(.23,0),b.H=new J(.77,1),y.v(a),b},TransmittalTape:function(a,b,c){a=a?a.ic:0,0===a&&(a=.1);var d=y.u();return M(d,0,0,h),d.lineTo(1*b,0),d.lineTo(1*b,1*c),d.lineTo(.75*b,(1-a)*c),d.lineTo(0,(1-a)*c),Rc(d),b=d.s,b.G=Mb,b.H=new J(1,1-a),y.v(d),b},AndGate:function(a,b,c){a=y.u();var d=.5*H.ra;return M(a,0,0,h),a.lineTo(.5*b,0),N(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c),N(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),a.lineTo(0,1*c),Rc(a),b=a.s,b.G=Mb,b.H=new J(.55,1),y.v(a),b},Buffer:function(a,b,c){return a=y.u(),M(a,0,0,h),a.lineTo(1*b,.5*c),a.lineTo(0,1*c),Rc(a),b=a.s,b.G=new J(0,.25),b.H=new J(.5,.75),y.v(a),b},Clock:function(a,b,c){a=y.u();var d=.5*H.ra;return M(a,1*b,.5*c,h),N(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),N(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c),N(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0),N(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c),M(a,1*b,.5*c,s),a.lineTo(1*b,.5*c),M(a,.8*b,.75*c,s),a.lineTo(.8*b,.25*c),a.lineTo(.6*b,.25*c),a.lineTo(.6*b,.75*c),a.lineTo(.4*b,.75*c),a.lineTo(.4*b,.25*c),a.lineTo(.2*b,.25*c),a.lineTo(.2*b,.75*c),Tc(a),b=a.s,b.ec=Cg,y.v(a),b},Ground:function(a,b,c){return a=y.u(),M(a,.5*b,0,s),a.lineTo(.5*b,.4*c),a.moveTo(.2*b,.6*c),a.lineTo(.8*b,.6*c),a.moveTo(.3*b,.8*c),a.lineTo(.7*b,.8*c),a.moveTo(.4*b,1*c),a.lineTo(.6*b,1*c),b=a.s,y.v(a),b},Inverter:function(a,b,c){a=y.u();var d=.1*H.ra;return M(a,.8*b,.5*c,h),a.lineTo(0,1*c),a.lineTo(0,0),a.lineTo(.8*b,.5*c),M(a,1*b,.5*c,h),N(a,1*b,(.5+d)*c,(.9+d)*b,.6*c,.9*b,.6*c),N(a,(.9-d)*b,.6*c,.8*b,(.5+d)*c,.8*b,.5*c),N(a,.8*b,(.5-d)*c,(.9-d)*b,.4*c,.9*b,.4*c),N(a,(.9+d)*b,.4*c,1*b,(.5-d)*c,1*b,.5*c),b=a.s,b.G=new J(0,.25),b.H=new J(.4,.75),y.v(a),b},NandGate:function(a,b,c){a=y.u();var d=H.ra,e=.5*d,f=.4*d,d=.1*d;return M(a,.8*b,.5*c,h),N(a,.8*b,(.5+f)*c,(.4+e)*b,1*c,.4*b,1*c),a.lineTo(0,1*c),a.lineTo(0,0),a.lineTo(.4*b,0),N(a,(.4+e)*b,0,.8*b,(.5-f)*c,.8*b,.5*c),M(a,1*b,.5*c,h),N(a,1*b,(.5+d)*c,(.9+d)*b,.6*c,.9*b,.6*c),N(a,(.9-d)*b,.6*c,.8*b,(.5+d)*c,.8*b,.5*c),N(a,.8*b,(.5-d)*c,(.9-d)*b,.4*c,.9*b,.4*c),N(a,(.9+d)*b,.4*c,1*b,(.5-d)*c,1*b,.5*c),b=a.s,b.G=new J(0,.05),b.H=new J(.55,.95),y.v(a),b},NorGate:function(a,b,c){a=y.u();var d=H.ra,e=.5,f=d*e,g=0,i=.5;return M(a,.8*b,.5*c,h),N(a,.7*b,(i+f)*c,(g+f)*b,(i+e)*c,0,1*c),N(a,.25*b,.75*c,.25*b,.25*c,0,0),N(a,(g+f)*b,(i-e)*c,.7*b,(i-f)*c,.8*b,.5*c),e=.1,f=.1*d,g=.9,i=.5,M(a,(g-e)*b,i*c,h),N(a,(g-e)*b,(i-f)*c,(g-f)*b,(i-e)*c,g*b,(i-e)*c),N(a,(g+f)*b,(i-e)*c,(g+e)*b,(i-f)*c,(g+e)*b,i*c),N(a,(g+e)*b,(i+f)*c,(g+f)*b,(i+e)*c,g*b,(i+e)*c),N(a,(g-f)*b,(i+e)*c,(g-e)*b,(i+f)*c,(g-e)*b,i*c),b=a.s,b.G=new J(.2,.25),b.H=new J(.6,.75),y.v(a),b},OrGate:function(a,b,c){a=y.u();var d=.5*H.ra;return M(a,0,0,h),N(a,(0+d+d)*b,0*c,.8*b,(.5-d)*c,1*b,.5*c),N(a,.8*b,(.5+d)*c,(0+d+d)*b,1*c,0,1*c),N(a,.25*b,.75*c,.25*b,.25*c,0,0),Rc(a),b=a.s,b.G=new J(.2,.25),b.H=new J(.75,.75),y.v(a),b},XnorGate:function(a,b,c){a=y.u();var d=H.ra,e=.5,f=d*e,g=.2,i=.5;return M(a,.1*b,0,s),N(a,.35*b,.25*c,.35*b,.75*c,.1*b,1*c),M(a,.8*b,.5*c,h),N(a,.7*b,(i+f)*c,(g+f)*b,(i+e)*c,.2*b,1*c),N(a,.45*b,.75*c,.45*b,.25*c,.2*b,0),N(a,(g+f)*b,(i-e)*c,.7*b,(i-f)*c,.8*b,.5*c),e=.1,f=.1*d,g=.9,i=.5,M(a,(g-e)*b,i*c,h),N(a,(g-e)*b,(i-f)*c,(g-f)*b,(i-e)*c,g*b,(i-e)*c),N(a,(g+f)*b,(i-e)*c,(g+e)*b,(i-f)*c,(g+e)*b,i*c),N(a,(g+e)*b,(i+f)*c,(g+f)*b,(i+e)*c,g*b,(i+e)*c),N(a,(g-f)*b,(i+e)*c,(g-e)*b,(i+f)*c,(g-e)*b,i*c),b=a.s,b.G=new J(.4,.25),b.H=new J(.65,.75),y.v(a),b},XorGate:function(a,b,c){a=y.u();var d=.5*H.ra;return M(a,.1*b,0,s),N(a,.35*b,.25*c,.35*b,.75*c,.1*b,1*c),M(a,.2*b,0,h),N(a,(.2+d)*b,0*c,.9*b,(.5-d)*c,1*b,.5*c),N(a,.9*b,(.5+d)*c,(.2+d)*b,1*c,.2*b,1*c),N(a,.45*b,.75*c,.45*b,.25*c,.2*b,0),Rc(a),b=a.s,b.G=new J(.4,.25),b.H=new J(.8,.75),y.v(a),b},Capacitor:function(a,b,c){return a=y.u(),M(a,0,0,s),a.lineTo(0,1*c),a.moveTo(1*b,0),a.lineTo(1*b,1*c),b=a.s,y.v(a),b},Resistor:function(a,b,c){return a=y.u(),M(a,0,.5*c,s),a.lineTo(.1*b,0),a.lineTo(.2*b,1*c),a.lineTo(.3*b,0),a.lineTo(.4*b,1*c),a.lineTo(.5*b,0),a.lineTo(.6*b,1*c),a.lineTo(.7*b,.5*c),b=a.s,y.v(a),b},Inductor:function(a,b,c){a=y.u();var d=.1*H.ra,e=.1,f=.5;return M(a,(e-.5*d)*b,(f+.1)*c,s),N(a,(e-d)*b,(f+.1)*c,(e-.1)*b,(f+d)*c,(e+.1)*b,(f+d)*c),e=.3,f=.5,N(a,(e+.1)*b,(f+d)*c,(e+d)*b,(f+.1)*c,e*b,(f+.1)*c),N(a,(e-d)*b,(f+.1)*c,(e-.1)*b,(f+d)*c,(e+.1)*b,(f+d)*c),f=e=.5,N(a,(e+.1)*b,(f+d)*c,(e+d)*b,(f+.1)*c,e*b,(f+.1)*c),N(a,(e-d)*b,(f+.1)*c,(e-.1)*b,(f+d)*c,(e+.1)*b,(f+d)*c),e=.7,f=.5,N(a,(e+.1)*b,(f+d)*c,(e+d)*b,(f+.1)*c,e*b,(f+.1)*c),N(a,(e-d)*b,(f+.1)*c,(e-.1)*b,(f+d)*c,(e+.1)*b,(f+d)*c),e=.9,f=.5,N(a,(e+.1)*b,(f+d)*c,(e+d)*b,(f+.1)*c,(e+.5*d)*b,(f+.1)*c),b=a.s,y.v(a),b},ACvoltageSource:function(a,b,c){a=y.u();var d=.5*H.ra;return M(a,0*b,.5*c,s),N(a,0*b,(.5-d)*c,(.5-d)*b,0*c,.5*b,0*c),N(a,(.5+d)*b,0*c,1*b,(.5-d)*c,1*b,.5*c),N(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),N(a,(.5-d)*b,1*c,0*b,(.5+d)*c,0*b,.5*c),a.moveTo(.1*b,.5*c),N(a,.5*b,0*c,.5*b,1*c,.9*b,.5*c),b=a.s,b.ec=Cg,y.v(a),b},DCvoltageSource:function(a,b,c){return a=y.u(),M(a,0,.75*c,s),a.lineTo(0,.25*c),a.moveTo(1*b,0),a.lineTo(1*b,1*c),b=a.s,y.v(a),b},Diode:function(a,b,c){return a=y.u(),M(a,1*b,0,s),a.lineTo(1*b,.5*c),a.lineTo(0,1*c),a.lineTo(0,0),a.lineTo(1*b,.5*c),a.lineTo(1*b,1*c),b=a.s,b.G=new J(0,.25),b.H=new J(.5,.75),y.v(a),b},Wifi:function(a,b,c){var f,g,i,j,k,d=b,e=c;return b*=.38,c*=.6,a=y.u(),f=H.ra,g=.8*f,i=.8,j=0,k=.5,d=(d-b)/2,e=(e-c)/2,M(a,j*b+d,(k+i)*c+e,h),N(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e),N(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e),N(a,j*b+d,(k-i)*c+e,(j-i+.5*g)*b+d,(k-g)*c+e,(j-i+.5*g)*b+d,k*c+e),N(a,(j-i+.5*g)*b+d,(k+g)*c+e,j*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e),Rc(a),g=.4*f,i=.4,j=.2,k=.5,M(a,j*b+d,(k+i)*c+e,h),N(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e),N(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e),N(a,j*b+d,(k-i)*c+e,(j-i+.5*g)*b+d,(k-g)*c+e,(j-i+.5*g)*b+d,k*c+e),N(a,(j-i+.5*g)*b+d,(k+g)*c+e,j*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e),Rc(a),g=.2*f,i=.2,k=j=.5,M(a,(j-i)*b+d,k*c+e,h),N(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e),N(a,(j+g)*b+d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e),N(a,(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e),N(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e),g=.4*f,i=.4,j=.8,k=.5,M(a,j*b+d,(k-i)*c+e,h),N(a,(j+g)*b+d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e),N(a,(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e),N(a,j*b+d,(k+i)*c+e,(j+i-.5*g)*b+d,(k+g)*c+e,(j+i-.5*g)*b+d,k*c+e),N(a,(j+i-.5*g)*b+d,(k-g)*c+e,j*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e),Rc(a),g=.8*f,i=.8,j=1,k=.5,M(a,j*b+d,(k-i)*c+e,h),N(a,(j+g)*b+d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e),N(a,(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e),N(a,j*b+d,(k+i)*c+e,(j+i-.5*g)*b+d,(k+g)*c+e,(j+i-.5*g)*b+d,k*c+e),N(a,(j+i-.5*g)*b+d,(k-g)*c+e,j*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e),Rc(a),b=a.s,y.v(a),b
},Email:function(a,b,c){return a=y.u(),M(a,0,0,h),a.lineTo(1*b,0),a.lineTo(1*b,1*c),a.lineTo(0,1*c),a.lineTo(0,0),Rc(a),M(a,0,0,s),a.lineTo(.5*b,.6*c),a.lineTo(1*b,0),a.moveTo(0,1*c),a.lineTo(.45*b,.54*c),a.moveTo(1*b,1*c),a.lineTo(.55*b,.54*c),Tc(a),b=a.s,y.v(a),b},Ethernet:function(a,b,c){return a=y.u(),M(a,.35*b,0,h),a.lineTo(.65*b,0),a.lineTo(.65*b,.4*c),a.lineTo(.35*b,.4*c),a.lineTo(.35*b,0),Rc(a),M(a,.1*b,1*c,h,h),a.lineTo(.4*b,1*c),a.lineTo(.4*b,.6*c),a.lineTo(.1*b,.6*c),a.lineTo(.1*b,1*c),Rc(a),M(a,.6*b,1*c,h,h),a.lineTo(.9*b,1*c),a.lineTo(.9*b,.6*c),a.lineTo(.6*b,.6*c),a.lineTo(.6*b,1*c),Rc(a),M(a,0,.5*c,s),a.lineTo(1*b,.5*c),a.moveTo(.5*b,.5*c),a.lineTo(.5*b,.4*c),a.moveTo(.75*b,.5*c),a.lineTo(.75*b,.6*c),a.moveTo(.25*b,.5*c),a.lineTo(.25*b,.6*c),Tc(a),b=a.s,y.v(a),b},Power:function(a,b,c){var d,e,f,g,i,j,k,l;return a=y.u(),d=H.ra,e=.4*d,f=.4,g=y.M(),i=y.M(),j=y.M(),k=y.M(),H.Yh(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.5,g,g,i,j,k),l=y.dc(i.x,i.y),M(a,i.x*b,i.y*c,h),N(a,j.x*b,j.y*c,k.x*b,k.y*c,(.5+f)*b,.5*c),N(a,(.5+f)*b,(.5+e)*c,(.5+e)*b,(.5+f)*c,.5*b,(.5+f)*c),N(a,(.5-e)*b,(.5+f)*c,(.5-f)*b,(.5+e)*c,(.5-f)*b,.5*c),H.Yh(.5-f,.5,.5-f,.5-e,.5-e,.5-f,.5,.5-f,.5,j,k,i,g,g),N(a,j.x*b,j.y*c,k.x*b,k.y*c,i.x*b,i.y*c),e=.3*d,f=.3,H.Yh(.5-f,.5,.5-f,.5-e,.5-e,.5-f,.5,.5-f,.5,j,k,i,g,g),a.lineTo(i.x*b,i.y*c),N(a,k.x*b,k.y*c,j.x*b,j.y*c,(.5-f)*b,.5*c),N(a,(.5-f)*b,(.5+e)*c,(.5-e)*b,(.5+f)*c,.5*b,(.5+f)*c),N(a,(.5+e)*b,(.5+f)*c,(.5+f)*b,(.5+e)*c,(.5+f)*b,.5*c),H.Yh(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.5,g,g,i,j,k),N(a,k.x*b,k.y*c,j.x*b,j.y*c,i.x*b,i.y*c),Rc(a),M(a,.45*b,0,h),a.lineTo(.45*b,.5*c),a.lineTo(.55*b,.5*c),a.lineTo(.55*b,0),Rc(a),y.B(g),y.B(i),y.B(j),y.B(k),y.B(l),b=a.s,b.G=new J(.25,.55),b.H=new J(.75,.8),y.v(a),b},Fallout:function(a,b,c){var d,e;return a=y.u(),d=.5*H.ra,M(a,0*b,.5*c,h),N(a,0*b,(.5-d)*c,(.5-d)*b,0*c,.5*b,0*c),N(a,(.5+d)*b,0*c,1*b,(.5-d)*c,1*b,.5*c),N(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),N(a,(.5-d)*b,1*c,0*b,(.5+d)*c,0*b,.5*c),e=d=0,M(a,(.3+d)*b,(.8+e)*c,h,h),a.lineTo((.5+d)*b,(.5+e)*c),a.lineTo((.1+d)*b,(.5+e)*c),a.lineTo((.3+d)*b,(.8+e)*c),d=.4,e=0,Rc(a),M(a,(.3+d)*b,(.8+e)*c,h,h),a.lineTo((.5+d)*b,(.5+e)*c),a.lineTo((.1+d)*b,(.5+e)*c),a.lineTo((.3+d)*b,(.8+e)*c),d=.2,e=-.3,Rc(a),M(a,(.3+d)*b,(.8+e)*c,h,h),a.lineTo((.5+d)*b,(.5+e)*c),a.lineTo((.1+d)*b,(.5+e)*c),a.lineTo((.3+d)*b,(.8+e)*c),Rc(a),b=a.s,b.ec=Cg,y.v(a),b},IrritationHazard:function(a,b,c){return a=y.u(),M(a,.2*b,0*c,h),a.lineTo(.5*b,.3*c),a.lineTo(.8*b,0*c),a.lineTo(1*b,.2*c),a.lineTo(.7*b,.5*c),a.lineTo(1*b,.8*c),a.lineTo(.8*b,1*c),a.lineTo(.5*b,.7*c),a.lineTo(.2*b,1*c),a.lineTo(0*b,.8*c),a.lineTo(.3*b,.5*c),a.lineTo(0*b,.2*c),Rc(a),b=a.s,b.G=new J(.3,.3),b.H=new J(.7,.7),y.v(a),b},ElectricalHazard:function(a,b,c){return a=y.u(),M(a,.37,0*c,h),a.lineTo(.5*b,.11*c),a.lineTo(.77*b,.04*c),a.lineTo(.33*b,.49*c),a.lineTo(1*b,.37*c),a.lineTo(.63*b,.86*c),a.lineTo(.77*b,.91*c),a.lineTo(.34*b,1*c),a.lineTo(.34*b,.78*c),a.lineTo(.44*b,.8*c),a.lineTo(.65*b,.56*c),a.lineTo(0*b,.68*c),Rc(a),b=a.s,y.v(a),b},FireHazard:function(a,b,c){return a=y.u(),M(a,.1*b,1*c,h),N(a,-.25*b,.63*c,.45*b,.44*c,.29*b,0*c),N(a,.48*b,.17*c,.54*b,.35*c,.51*b,.42*c),N(a,.59*b,.29*c,.58*b,.28*c,.59*b,.18*c),N(a,.8*b,.34*c,.88*b,.43*c,.75*b,.6*c),N(a,.87*b,.48*c,.88*b,.43*c,.88*b,.31*c),N(a,1.17*b,.76*c,.82*b,.8*c,.9*b,1*c),Rc(a),b=a.s,b.G=new J(.05,.645),b.H=new J(.884,.908),y.v(a),b},BpmnActivityLoop:function(a,b,c){a=y.u();var d=.5*(4*(Math.SQRT2-1)/3);return M(a,(.5*Math.SQRT2/2+.5)*b,(1-(.5-.5*Math.SQRT2/2))*c,s),N(a,1*b,.7*c,1*b,.5*c,1*b,.5*c),N(a,1*b,(.5-d+0)*c,(.5+d+0)*b,0*c,.5*b,0*c),N(a,(.5-d+0)*b,0*c,0*b,(.5-d+0)*c,0*b,.5*c),N(a,0*b,(.5+d+0)*c,(.5-d+0)*b,1*c,.35*b,.98*c),a.moveTo(.35*b,.8*c),a.lineTo(.35*b,1*c),a.lineTo(.15*b,1*c),b=a.s,y.v(a),b},BpmnActivityParallel:function(a,b,c){return a=y.u(),M(a,0,0,s),a.lineTo(0,1*c),a.moveTo(.5*b,0),a.lineTo(.5*b,1*c),a.moveTo(1*b,0),a.lineTo(1*b,1*c),b=a.s,y.v(a),b},BpmnActivitySequential:function(a,b,c){return a=y.u(),M(a,0,0,s),a.lineTo(1*b,0),a.moveTo(0,.5*c),a.lineTo(1*b,.5*c),a.moveTo(0,1*c),a.lineTo(1*b,1*c),b=a.s,y.v(a),b},BpmnActivityAdHoc:function(a,b,c){return a=y.u(),M(a,0,0,s),M(a,1*b,1*c,s),M(a,0,.5*c,s),N(a,.2*b,.35*c,.3*b,.35*c,.5*b,.5*c),N(a,.7*b,.65*c,.8*b,.65*c,1*b,.5*c),b=a.s,y.v(a),b},BpmnActivityCompensation:function(a,b,c){return a=y.u(),M(a,0,.5*c,h),a.lineTo(.5*b,0),a.lineTo(.5*b,.5*c),a.lineTo(1*b,1*c),a.lineTo(1*b,0),a.lineTo(.5*b,.5*c),a.lineTo(.5*b,1*c),Rc(a),b=a.s,y.v(a),b},BpmnTaskMessage:function(a,b,c){return a=y.u(),M(a,0,.2*c,h),a.lineTo(1*b,.2*c),a.lineTo(1*b,.8*c),a.lineTo(0,.8*c),a.lineTo(0,.8*c),Rc(a),M(a,0,.2*c,s),a.lineTo(.5*b,.5*c),a.lineTo(1*b,.2*c),Tc(a),b=a.s,y.v(a),b},BpmnTaskScript:function(a,b,c){return a=y.u(),M(a,.7*b,1*c,h),a.lineTo(.3*b,1*c),N(a,.6*b,.5*c,0,.5*c,.3*b,0),a.lineTo(.7*b,0),N(a,.4*b,.5*c,1*b,.5*c,.7*b,1*c),Rc(a),M(a,.45*b,.73*c,s),a.lineTo(.7*b,.73*c),a.moveTo(.38*b,.5*c),a.lineTo(.63*b,.5*c),a.moveTo(.31*b,.27*c),a.lineTo(.56*b,.27*c),Tc(a),b=a.s,y.v(a),b},BpmnTaskUser:function(a,b,c){a=y.u(),M(a,0,0,s),M(a,.335*b,(1-.555)*c,h),a.lineTo(.335*b,.595*c),a.lineTo(.665*b,.595*c),a.lineTo(.665*b,(1-.555)*c),N(a,.88*b,.46*c,.98*b,.54*c,1*b,.68*c),a.lineTo(1*b,1*c),a.lineTo(0,1*c),a.lineTo(0,.68*c),N(a,.02*b,.54*c,.12*b,.46*c,.335*b,(1-.555)*c),a.lineTo(.365*b,.405*c);var d=.5-.285,e=Math.PI/4,f=4*(1-Math.cos(e))/(3*Math.sin(e)),e=f*d,f=f*d;return N(a,(.5-(e+d)/2)*b,(d+(d+f)/2)*c,(.5-d)*b,(d+f)*c,(.5-d)*b,d*c),N(a,(.5-d)*b,(d-f)*c,(.5-e)*b,(d-d)*c,.5*b,(d-d)*c),N(a,(.5+e)*b,(d-d)*c,(.5+d)*b,(d-f)*c,(.5+d)*b,d*c),N(a,(.5+d)*b,(d+f)*c,(.5+(e+d)/2)*b,(d+(d+f)/2)*c,.635*b,.405*c),a.lineTo(.635*b,.405*c),a.lineTo(.665*b,(1-.555)*c),a.lineTo(.665*b,.595*c),a.lineTo(.335*b,.595*c),M(a,.2*b,1*c,s),a.lineTo(.2*b,.8*c),M(a,.8*b,1*c,s),a.lineTo(.8*b,.8*c),b=a.s,y.v(a),b},BpmnEventConditional:function(a,b,c){return a=y.u(),M(a,.1*b,0,h),a.lineTo(.9*b,0),a.lineTo(.9*b,1*c),a.lineTo(.1*b,1*c),Rc(a),M(a,.2*b,.2*c,s),a.lineTo(.8*b,.2*c),a.moveTo(.2*b,.4*c),a.lineTo(.8*b,.4*c),a.moveTo(.2*b,.6*c),a.lineTo(.8*b,.6*c),a.moveTo(.2*b,.8*c),a.lineTo(.8*b,.8*c),Tc(a),b=a.s,y.v(a),b},BpmnEventError:function(a,b,c){return a=y.u(),M(a,0,1*c,h),a.lineTo(.33*b,0),a.lineTo(.66*b,.5*c),a.lineTo(1*b,0),a.lineTo(.66*b,1*c),a.lineTo(.33*b,.5*c),Rc(a),b=a.s,y.v(a),b},BpmnEventEscalation:function(a,b,c){return a=y.u(),M(a,0,0,s),M(a,1*b,1*c,s),M(a,.1*b,1*c,h),a.lineTo(.5*b,0),a.lineTo(.9*b,1*c),a.lineTo(.5*b,.5*c),Rc(a),b=a.s,y.v(a),b},BpmnEventTimer:function(a,b,c){a=y.u();var d=.5*H.ra;return M(a,1*b,.5*c,h),N(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),N(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c),N(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0),N(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c),M(a,.5*b,0,s),a.lineTo(.5*b,.15*c),a.moveTo(.5*b,1*c),a.lineTo(.5*b,.85*c),a.moveTo(0,.5*c),a.lineTo(.15*b,.5*c),a.moveTo(1*b,.5*c),a.lineTo(.85*b,.5*c),a.moveTo(.5*b,.5*c),a.lineTo(.58*b,.1*c),a.moveTo(.5*b,.5*c),a.lineTo(.78*b,.54*c),Tc(a),b=a.s,b.ec=Cg,y.v(a),b}};for(Bl in H.ei)H.ei[Bl.toLowerCase()]=Bl;H.uu={Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z",None:""},H.dz={},H.vu={},H.Nn=function(a){var b,c;if(H.uu){for(b in H.uu)c=Lc(H.uu[b],s),H.vu[b]=c,H.vu[b.toLowerCase()]=b;H.uu=f}return H.vu[a]},V.FigureGenerators=H.ei,V.ArrowheadGeometries=H.vu,y.ba("Part",R),y.Ka(R,D),R.prototype.cloneProtected=function(a){D.prototype.cloneProtected.call(this,a),a.Z=49152|-4097&this.Z,a.Bg=this.Bg,a.Sm=this.Sm,a.Ip=this.Ip,a.Gq=this.Gq,a.uq=this.uq,a.xq=this.xq,a.Iq=this.Iq,a.Hq=this.Hq,a.sh=q,a.wq=this.wq,a.vq.assign(this.vq),a.yq=this.yq,a.Ld=this.Ld,a.Zo=this.Zo,a.Fh.assign(this.Fh),a.Sp=this.Sp,a.Tp=this.Tp.U(),a.bq=this.bq.U(),a.Vp=this.Vp.U(),a.gp=this.gp,a.Jp=this.Jp,a.jn.assign(this.jn),a.hn=this.hn,a.gn=this.gn},R.prototype.ah=function(a){D.prototype.ah.call(this,a),Cj(a),a.pl=q,a.dn=q,a.en=q,a.ek=q,a.gk=q},R.prototype.toString=function(){var a=y.bh(Object.getPrototypeOf(this))+"#"+y.ac(this);return this.data&&(a+="("+vd(this.data)+")"),a},R.LayoutNone=0,R.LayoutAdded=ui=1,R.LayoutRemoved=zi=2,R.LayoutShown=Rj=4,R.LayoutHidden=Sj=8,R.LayoutNodeSized=16,R.LayoutGroupLayout=Qi=32,R.LayoutStandard=Cl=16|(ui|zi|Rj|Sj)|Qi,R.prototype.Vl=function(a,b,c,d,e,f,g){var h=this.h;h!==q&&(a===td&&"elements"===b?e instanceof D&&vi(e,function(a){wi(h,a)}):a===ud&&"elements"===b&&e instanceof D&&vi(e,function(a){yi(h,a)}),h.Qc(a,b,c,d,e,f,g))},R.prototype.updateTargetBindings=R.prototype.yb=function(a){if(D.prototype.yb.call(this,a),this.data!==q)for(a=this.elements;a.next();){var b=a.value;b instanceof D&&vi(b,function(a){a.data!==q&&a.yb()})}},y.A(R,{qu:"adornments"},function(){return this.sh===q?y.Zf:this.sh.k}),R.prototype.findAdornment=R.prototype.Mn=function(a){x&&y.j(a,"string",R,"findAdornment:category");var b=this.sh;return b===q?q:b.wa(a)},R.prototype.addAdornment=R.prototype.ok=function(a,b){var c,d,e;b!==q&&(x&&(y.j(a,"string",R,"addAdornment:category"),y.l(b,Ge,R,"addAdornment:ad")),c=q,d=this.sh,d!==q&&(c=d.wa(a)),c!==b&&(c!==q&&(e=c.h,e!==q&&e.remove(c)),d===q&&(this.sh=d=new ma("string",Ge)),b.Bg!==a&&(b.Ac=a),d.add(a,b),c=this.h,c!==q&&(c.add(b),b.data=this.data)))},R.prototype.removeAdornment=R.prototype.Ik=function(a){var b,c,d;x&&y.j(a,"string",R,"removeAdornment:category"),b=this.sh,b!==q&&(c=b.wa(a),c!==q&&(d=c.h,d!==q&&d.remove(c)),b.remove(a),0===b.count&&(this.sh=q))},R.prototype.clearAdornments=R.prototype.be=function(){var b,c,a=this.sh;if(a!==q){for(b=y.tb(),a=a.k;a.next();)b.push(a.key);for(a=b.length,c=0;a>c;c++)this.Ik(b[c]);y.ya(b)}},R.prototype.updateAdornments=function(){var b,c,d,e,f,g,a=this.h;if(a!==q){a:if(b=q,this.Wa&&this.QD){if(c=this.js,c!==q&&this.ua.V()&&this.xb()&&c.Dk()&&c.ua.V()){if(b=this.Mn("Selection"),b===q){if(b=this.RD,b===q&&(this instanceof U?b=a.XC:this instanceof R&&(b=this instanceof He?a.vC:a.lD)),!(b instanceof Ge))break a;if(Je(b),b=b.copy(),!(b instanceof Ge))break a;b.Ac="Selection",b.Ql=h,b.zc=c}b!==q&&(d=b.placeholder,d!==q&&(e=c.rj(),f=0,c instanceof V&&(f=c.jb),g=y.Nk(),g.q((c.Ta.width+f)*e,(c.Ta.height+f)*e),d.Aa=g,y.qj(g)),b.angle=c.yk(),b.type!==ig?(d=y.M(),b.location=c.hb(Mb,d),y.B(d)):b.aa()),this.ok("Selection",b)}}else this.Ik("Selection");for(a=a.pb.Ze.n,c=a.length,b=0;c>b;b++)d=a[b],d.isEnabled&&d.updateAdornments(this);for(a=this.qu;a.next();)c=a.value,c.Ql||c.mb!==q&&c.aa()}},y.A(R,{layer:"layer"},w("Rm")),y.A(R,{h:"diagram"},function(){var a=this.Rm;return a!==q?a.h:q}),y.g(R,"layerName",R.prototype.ge),y.defineProperty(R,{ge:"layerName"},w("Sm"),function(a){var c,d,e,b=this.Sm;b!==a&&(y.j(a,"string",R,"layerName"),c=this.h,c!==q&&c.ur(a)===q||(this.Sm=a,this.i("layerName",b,a),b=this.layer,b===q||b.name===a||(c=b.h,c===q||(a=c.ur(a),a===q||a===b)))||(d=b.ze(-1,this,h),d>=0&&c.Qc(ud,"parts",b,this,q,d,h),d=a.Ol(99999999,this,h),d>=0&&c.Qc(td,"parts",a,q,this,h,d),d=this.bo,d!==q&&(e=c.Ra,c.Ra=h,d(this,b,a),c.Ra=e)))}),y.g(R,"layerChanged",R.prototype.bo),y.defineProperty(R,{bo:"layerChanged"},w("Ip"),function(a){var b=this.Ip;b!==a&&(a!==q&&y.j(a,"function",R,"layerChanged"),this.Ip=a,this.i("layerChanged",b,a))}),y.A(R,{bc:"isTemporary"},function(){return this.Rm!==q?this.Rm.bc:s}),y.g(R,"location",R.prototype.location),y.defineProperty(R,{location:"location"},w("Fh"),function(a){var c,d,e,f,g,b=this.Fh;b.L(a)||this instanceof U||(x&&y.l(a,A,R,"location"),a=a.U(),c=this.h,this.Fh=a,bi(this)===s&&(d=this.nb,e=a.x-b.x,f=a.y-b.y,g=d.copy(),d.q(g.x+e,g.y+f),Vj(this),!d.L(g)&&c&&this.i("position",g,d)),this.i("location",b,a))}),y.A(R,{Vb:"locationObject"},function(){if(this.ek===q){var a=this.fv;a!==f&&a!==q&&""!==a?(a=this.xe(a),this.ek=a!==q?a:this):this.ek=this instanceof Ge&&this.Y!==ig&&this.mb!==q?this.mb:this}return this.ek.visible?this.ek:this}),y.g(R,"minLocation",R.prototype.eD),y.defineProperty(R,{eD:"minLocation"},w("bq"),function(a){var b=this.bq;b.L(a)||(x&&y.l(a,A,R,"minLocation"),this.bq=a=a.U(),this.i("minLocation",b,a))}),y.g(R,"maxLocation",R.prototype.ZC),y.defineProperty(R,{ZC:"maxLocation"},w("Vp"),function(a){var b=this.Vp;b.L(a)||(x&&y.l(a,A,R,"maxLocation"),this.Vp=a=a.U(),this.i("maxLocation",b,a))}),y.g(R,"locationObjectName",R.prototype.fv),y.defineProperty(R,{fv:"locationObjectName"},w("Sp"),function(a){var b=this.Sp;b!==a&&(x&&y.j(a,"string",R,"locationObjectName"),this.Sp=a,this.ek=q,Lj(this),this.i("locationObjectName",b,a))}),y.g(R,"locationSpot",R.prototype.We),y.defineProperty(R,{We:"locationSpot"},w("Tp"),function(a){var b=this.Tp;b.L(a)||(x&&(y.l(a,J,R,"locationSpot"),yb(a)||y.m("Part.locationSpot must be a specific Spot value, not: "+a)),this.Tp=a=a.U(),Lj(this),this.i("locationSpot",b,a))}),R.prototype.move=R.prototype.move=ba("position"),R.prototype.moveTo=R.prototype.moveTo=function(a,b){var c=y.dc(a,b);this.move(c),y.B(c)},R.prototype.isVisible=R.prototype.xb=function(){var a,b,c;if(!this.visible)return s;if(a=this.layer,a!==q&&!a.visible)return s;if(a=this.bb,!(a===q||a.Ue&&a.xb()))return s;if(this instanceof T){if(a=this.lC(),a!==q&&!a.Cc)return s;if(a=this.hd,a!==q)return b={},b[y.ac(this)]=h,Gl(a,b)}else if(this instanceof U){if(b=h,c=this.h,c!==q&&(b=c.Pc),c=this.da,c!==q){if(this.hc&&b&&!c.Cc)return s;if(c=Hl(c),c===q||c===a)return s}if(c=this.ja,c!==q){if(this.hc&&!b&&!c.Cc)return s;if(b=Hl(c),b===q||b===a)return s}}return h},R.prototype.findObject=R.prototype.xe=function(a){var b,c,d,e,g;if(this.name===a)return this;if(this.gk===q&&(this.gk={}),b=this.gk,b[a]!==f)return b[a];for(c=this.za.n,d=c.length,e=0;d>e;e++){if(g=c[e],g.name===a)return b[a]=g;if(g instanceof D&&!g.MC()&&(g=g.xe(a),g!==q))return b[a]=g}return b[a]=q},R.prototype.ensureBounds=R.prototype.ci=function(){ch(this,1/0,1/0),this.tc()},R.prototype.tc=function(){var a,b,c,d;oj(this),bi(this)===s?Wj(this):(a=y.df(),a.assign(this.Ob),Ij(this),this.Ob.Pa(),b=gh(this),this.gj(0,0,this.wc.width,this.wc.height),c=this.position,Fl(this,c,this.location),d=this.Ob,d.x=c.x,d.y=c.y,d.freeze(),oj(this),rj(this,a,d),a.L(d)?this.uf(b):this.Pd()&&(!H.I(a.width,d.width)||!H.I(a.height,d.height))&&this.J(16),y.Bc(a),El(this,s))},R.prototype.Bk=ca(h),R.prototype.Pd=ca(h),y.g(R,"category",R.prototype.Ac),y.defineProperty(R,{Ac:"category"},w("Bg"),function(a){var c,d,e,b=this.Bg;b!==a&&(y.j(a,"string",R,"category"),this.Bg=a,this.i("category",b,a),c=this.h,d=this.data,c!==q&&d!==q&&(e=c.fa,this instanceof U?(e instanceof O?e.UD(d,a):e instanceof zd&&e.tH(d,a),c=c.findTemplateForLinkData(d,a),c instanceof U&&(Je(c),c=c.copy(),c instanceof U&&Jl(this,c,b,a))):this instanceof Ge||(e!==q&&e.sv(d,a),c=c.findTemplateForNodeData(d,a),c instanceof R&&(Je(c),c=c.copy(),c instanceof R&&!(c instanceof U)&&Jl(this,c,b,a)))),this instanceof Ge&&(a=this.aj,a!==q&&(c=a.sh,c!==q&&c.remove(b),a.ok(this.Bg,this))))}),R.prototype.canCopy=function(){if(!this.TB)return s;var a=this.layer;return a===q?h:a.cj?(a=a.h,a===q?h:a.cj?h:s):s},R.prototype.canDelete=function(){if(!this.$B)return s;var a=this.layer;return a===q?h:a.rk?(a=a.h,a===q?h:a.rk?h:s):s},R.prototype.canEdit=function(){if(!this.fE)return s;var a=this.layer;return a===q?h:a.zn?(a=a.h,a===q?h:a.zn?h:s):s},R.prototype.canGroup=function(){if(!this.wC)return s;var a=this.layer;return a===q?h:a.vn?(a=a.h,a===q?h:a.vn?h:s):s},R.prototype.canMove=function(){if(!this.hD)return s;var a=this.layer;return a===q?h:a.sk?(a=a.h,a===q?h:a.sk?h:s):s},R.prototype.canReshape=function(){if(!this.zD)return s;var a=this.layer;return a===q?h:a.wn?(a=a.h,a===q?h:a.wn?h:s):s},R.prototype.canResize=function(){if(!this.AD)return s;var a=this.layer;return a===q?h:a.xn?(a=a.h,a===q?h:a.xn?h:s):s},R.prototype.canRotate=function(){if(!this.GD)return s;var a=this.layer;return a===q?h:a.yn?(a=a.h,a===q?h:a.yn?h:s):s},R.prototype.canSelect=function(){if(!this.Jk)return s;var a=this.layer;return a===q?h:a.pe?(a=a.h,a===q?h:a.pe?h:s):s},y.g(R,"copyable",R.prototype.TB),y.defineProperty(R,{TB:"copyable"},function(){return 0!==(1&this.Z)},function(a){var b=0!==(1&this.Z);b!==a&&(x&&y.j(a,"boolean",R,"copyable"),this.Z^=1,this.i("copyable",b,a))}),y.g(R,"deletable",R.prototype.$B),y.defineProperty(R,{$B:"deletable"},function(){return 0!==(2&this.Z)},function(a){var b=0!==(2&this.Z);b!==a&&(x&&y.j(a,"boolean",R,"deletable"),this.Z^=2,this.i("deletable",b,a))}),y.g(R,"textEditable",R.prototype.fE),y.defineProperty(R,{fE:"textEditable"},function(){return 0!==(4&this.Z)},function(a){var b=0!==(4&this.Z);b!==a&&(x&&y.j(a,"boolean",R,"textEditable"),this.Z^=4,this.i("textEditable",b,a),this.updateAdornments())}),y.g(R,"groupable",R.prototype.wC),y.defineProperty(R,{wC:"groupable"},function(){return 0!==(8&this.Z)},function(a){var b=0!==(8&this.Z);b!==a&&(x&&y.j(a,"boolean",R,"groupable"),this.Z^=8,this.i("groupable",b,a))}),y.g(R,"movable",R.prototype.hD),y.defineProperty(R,{hD:"movable"},function(){return 0!==(16&this.Z)},function(a){var b=0!==(16&this.Z);b!==a&&(x&&y.j(a,"boolean",R,"movable"),this.Z^=16,this.i("movable",b,a))}),y.g(R,"selectionAdorned",R.prototype.QD),y.defineProperty(R,{QD:"selectionAdorned"},function(){return 0!==(32&this.Z)},function(a){var b=0!==(32&this.Z);b!==a&&(x&&y.j(a,"boolean",R,"selectionAdorned"),this.Z^=32,this.i("selectionAdorned",b,a),this.updateAdornments())}),y.g(R,"isInDocumentBounds",R.prototype.Jy),y.defineProperty(R,{Jy:"isInDocumentBounds"},function(){return 0!==(64&this.Z)},function(a){var b=0!==(64&this.Z);b!==a&&(x&&y.j(a,"boolean",R,"isInDocumentBounds"),this.Z^=64,this.i("isInDocumentBounds",b,a))}),y.g(R,"isLayoutPositioned",R.prototype.Ly),y.defineProperty(R,{Ly:"isLayoutPositioned"},function(){return 0!==(128&this.Z)},function(a){var b=0!==(128&this.Z);b!==a&&(x&&y.j(a,"boolean",R,"isLayoutPositioned"),this.Z^=128,this.i("isLayoutPositioned",b,a),this.J(a?Rj:Sj))}),y.g(R,"selectable",R.prototype.Jk),y.defineProperty(R,{Jk:"selectable"},function(){return 0!==(256&this.Z)},function(a){var b=0!==(256&this.Z);b!==a&&(x&&y.j(a,"boolean",R,"selectable"),this.Z^=256,this.i("selectable",b,a),this.updateAdornments())}),y.g(R,"reshapable",R.prototype.zD),y.defineProperty(R,{zD:"reshapable"},function(){return 0!==(512&this.Z)},function(a){var b=0!==(512&this.Z);b!==a&&(x&&y.j(a,"boolean",R,"selectable"),this.Z^=512,this.i("selectable",b,a),this.updateAdornments())}),y.g(R,"resizable",R.prototype.AD),y.defineProperty(R,{AD:"resizable"},function(){return 0!==(1024&this.Z)},function(a){var b=0!==(1024&this.Z);b!==a&&(x&&y.j(a,"boolean",R,"selectable"),this.Z^=1024,this.i("selectable",b,a),this.updateAdornments())}),y.g(R,"rotatable",R.prototype.GD),y.defineProperty(R,{GD:"rotatable"},function(){return 0!==(2048&this.Z)},function(a){var b=0!==(2048&this.Z);b!==a&&(x&&y.j(a,"boolean",R,"selectable"),this.Z^=2048,this.i("selectable",b,a),this.updateAdornments())}),y.g(R,"isSelected",R.prototype.Wa),y.defineProperty(R,{Wa:"isSelected"},function(){return 0!==(4096&this.Z)},function(a){var c,d,e,b=0!==(4096&this.Z);b!==a&&(x&&y.j(a,"boolean",R,"isSelected"),c=this.h,a&&(!this.canSelect()||c!==q&&c.selection.count>=c.$C)||(this.Z^=4096,d=s,c!==q&&(d=c.Wb,c.Wb=h,e=c.selection,e.Pa(),a?e.add(this):e.remove(this),e.freeze()),this.i("isSelected",b,a),Dl(this),a=this.SD,a!==q&&a(this),c!==q&&(c.jc(),c.Wb=d)))}),y.g(R,"isShadowed",R.prototype.Ck),y.defineProperty(R,{Ck:"isShadowed"},function(){return 0!==(8192&this.Z)},function(a){var b=0!==(8192&this.Z);b!==a&&(x&&y.j(a,"boolean",R,"isShadowed"),this.Z^=8192,this.i("isShadowed",b,a),this.ta())}),R.prototype.uf=function(a){this.Z=a?131072|this.Z:-131073&this.Z},y.g(R,"selectionObjectName",R.prototype.ks),y.defineProperty(R,{ks:"selectionObjectName"},w("Iq"),function(a){var b=this.Iq;b!==a&&(x&&y.j(a,"string",R,"selectionObjectName"),this.Iq=a,this.pl=q,this.i("selectionObjectName",b,a))}),y.g(R,"selectionAdornmentTemplate",R.prototype.RD),y.defineProperty(R,{RD:"selectionAdornmentTemplate"},w("Gq"),function(a){var b=this.Gq;b!==a&&(x&&y.l(a,Ge,R,"selectionAdornmentTemplate"),this instanceof U&&(a.type=ig),this.Gq=a,this.i("selectionAdornmentTemplate",b,a))}),y.A(R,{js:"selectionObject"},function(){if(this.pl===q){var a=this.ks;a!==q&&""!==a?(a=this.xe(a),this.pl=a!==q?a:this):this instanceof U?(a=this.path,this.pl=a!==q?a:this):this.pl=this}return this.pl}),y.g(R,"selectionChanged",R.prototype.SD),y.defineProperty(R,{SD:"selectionChanged"},w("Hq"),function(a){var b=this.Hq;b!==a&&(a!==q&&y.j(a,"function",R,"selectionChanged"),this.Hq=a,this.i("selectionChanged",b,a))}),y.g(R,"resizeAdornmentTemplate",R.prototype.BD),y.defineProperty(R,{BD:"resizeAdornmentTemplate"},w("uq"),function(a){var b=this.uq;b!==a&&(x&&y.l(a,Ge,R,"resizeAdornmentTemplate"),this.uq=a,this.i("resizeAdornmentTemplate",b,a))}),y.g(R,"resizeObjectName",R.prototype.ED),y.defineProperty(R,{ED:"resizeObjectName"},w("wq"),function(a){var b=this.wq;b!==a&&(x&&y.j(a,"string",R,"resizeObjectName"),this.wq=a,this.dn=q,this.i("resizeObjectName",b,a))}),y.A(R,{DD:"resizeObject"},function(){if(this.dn===q){var a=this.ED;a!==q&&""!==a?(a=this.xe(a),this.dn=a!==q?a:this):this.dn=this}return this.dn}),y.g(R,"resizeCellSize",R.prototype.CD),y.defineProperty(R,{CD:"resizeCellSize"},w("vq"),function(a){var b=this.vq;b.L(a)||(x&&y.l(a,ha,R,"resizeCellSize"),this.vq=a=a.U(),this.i("resizeCellSize",b,a))}),y.g(R,"rotateAdornmentTemplate",R.prototype.HD),y.defineProperty(R,{HD:"rotateAdornmentTemplate"},w("xq"),function(a){var b=this.xq;b!==a&&(x&&y.l(a,Ge,R,"rotateAdornmentTemplate"),this.xq=a,this.i("rotateAdornmentTemplate",b,a))}),y.g(R,"rotateObjectName",R.prototype.KD),y.defineProperty(R,{KD:"rotateObjectName"},w("yq"),function(a){var b=this.yq;b!==a&&(x&&y.j(a,"string",R,"rotateObjectName"),this.yq=a,this.en=q,this.i("rotateObjectName",b,a))}),y.A(R,{JD:"rotateObject"},function(){if(this.en===q){var a=this.KD;a!==q&&""!==a?(a=this.xe(a),this.en=a!==q?a:this):this.en=this}return this.en}),y.g(R,"text",R.prototype.text),y.defineProperty(R,{text:"text"},w("Ld"),function(a){var b=this.Ld;b!==a&&(x&&y.j(a,"string",R,"text"),this.Ld=a,this.i("text",b,a))}),y.g(R,"containingGroup",R.prototype.bb),y.defineProperty(R,{bb:"containingGroup"},w("Rj"),function(a){var b,c,d,e;if(this.Pd()){if(b=this.Rj,b!==a){if(x&&a!==q&&y.l(a,He,R,"containingGroup"),a===q||this!==a&&!a.Jr(this)||(this===a&&y.m("Cannot make a Group a member of itself: "+this.toString()),y.m("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+a.toString())),this.J(zi),c=this.h,b!==q?Kl(b,this):this instanceof He&&c!==q&&c.mk.remove(this),this.Rj=a,a!==q?Ll(a,this):this instanceof He&&c!==q&&c.mk.add(this),this.J(ui),c!==q&&(d=this.data,e=c.fa,d!==q&&e instanceof O&&e.sz(d,e.Cb(a!==q?a.data:q))),d=this.py,d!==q&&(e=h,c!==q&&(e=c.Ra,c.Ra=h),d(this,b,a),c!==q&&(c.Ra=e)),this instanceof He)for(c=new na(R),Fe(c,this,h,0),c=c.k;c.next();)if(d=c.value,d instanceof T)for(d=d.Qd;d.next();)e=d.value,Mi(e);if(this instanceof T)for(d=this.Qd;d.next();)e=d.value,Mi(e);this.i("containingGroup",b,a),a!==q&&a.zv()}}else y.m("cannot set the Part.containingGroup of a Link or Adornment")}),R.prototype.Er=function(){var a=this.Rj;a!==q&&Ll(a,this)},R.prototype.Fr=function(){var a=this.Rj;a!==q&&Kl(a,this)},R.prototype.El=function(){var b,a=this.data;a!==q&&(b=this.h,b!==q&&(b=b.fa,b!==q&&b.wD(a)))},y.g(R,"containingGroupChanged",R.prototype.py),y.defineProperty(R,{py:"containingGroupChanged"},w("Zo"),function(a){var b=this.Zo;b!==a&&(a!==q&&y.j(a,"function",R,"containingGroupChanged"),this.Zo=a,this.i("containingGroupChanged",b,a))}),y.A(R,{xJ:"topLevelPart"},function(){return Ml(this,this)}),R.prototype.findTopLevelPart=R.prototype.EI=function(){return Ml(this,this)},y.A(R,{$n:"isTopLevel"},function(){return this.bb!==q||this instanceof T&&this.ii?s:h}),R.prototype.isMemberOf=R.prototype.Jr=function(a){return a instanceof He?Nl(this,this,a):s},R.prototype.findCommonContainingGroup=R.prototype.oG=function(a){return Ol(this,this,a)},y.g(R,"layoutConditions",R.prototype.SC),y.defineProperty(R,{SC:"layoutConditions"},w("Jp"),function(a){var b=this.Jp;b!==a&&(x&&y.j(a,"number",R,"layoutConditions"),this.Jp=a,this.i("layoutConditions",b,a))}),R.prototype.canLayout=function(){if(!this.Ly||!this.xb())return s;var a=this.layer;return a!==q&&a.bc||this instanceof T&&this.ii?s:h},R.prototype.invalidateLayout=R.prototype.J=function(a){var b,c;a===f&&(a=16777215),this.Ly&&0!==(a&this.SC)?(b=this.layer,b!==q&&b.bc||this instanceof T&&this.ii?b=s:(b=this.h,b=b!==q&&b.va.cb?s:h)):b=s,b&&(b=this.Rj,b!==q?(c=b.Nb,c!==q?c.J():b.J(a)):(a=this.h,a!==q&&(c=a.Nb,c!==q&&c.J())))},y.g(R,"dragComputation",R.prototype.ty),y.defineProperty(R,{ty:"dragComputation"},w("gp"),function(a){var b=this.gp;b!==a&&(a!==q&&y.j(a,"function",R,"dragComputation"),this.gp=a,this.i("dragComputation",b,a))}),y.g(R,"shadowOffset",R.prototype.WD),y.defineProperty(R,{WD:"shadowOffset"},w("jn"),function(a){var b=this.jn;b.L(a)||(x&&y.l(a,A,R,"shadowOffset"),this.jn=a=a.U(),this.ta(),this.i("shadowOffset",b,a))}),y.g(R,"shadowColor",R.prototype.shadowColor),y.defineProperty(R,{shadowColor:"shadowColor"},w("hn"),function(a){var b=this.hn;b!==a&&(x&&y.j(a,"string",R,"shadowColor"),this.hn=a,this.ta(),this.i("shadowColor",b,a))}),y.g(R,"shadowBlur",R.prototype.shadowBlur),y.defineProperty(R,{shadowBlur:"shadowBlur"},w("gn"),function(a){var b=this.gn;b!==a&&(x&&y.j(a,"number",R,"shadowBlur"),this.gn=a,this.ta(),this.i("shadowBlur",b,a))}),y.ba("Adornment",Ge),y.Ka(Ge,R),da=Ge.prototype,da.toString=function(){var a=this.aj;return"Adornment("+this.Ac+")"+(a!==q?a.toString():"")},da.Ai=function(){return this.La&&this.La.W instanceof U?this.La.W.Ai():q},da.rp=ca(q),da.gv=function(){var c,d,e,a=this.zc.W,b=this.zc;if(a instanceof U&&b instanceof V)for(c=a.path,b=c.Na,a.gv(),b=c.Na,a=this.za,c=a.length,d=0;c>d;d++)e=a.n[d],e.ji&&e instanceof V&&(e.Na=b)},da.Lw=function(){var a=this.aj;return a instanceof U?a.sc:q},y.A(Ge,{placeholder:"placeholder"},w("mb")),y.g(Ge,"isStandard",Ge.prototype.Ql),y.defineProperty(Ge,{Ql:"isStandard"},w("Xw"),function(a){var b=this.Xw;b!==a&&(x&&y.j(a,"boolean",Ge,"isStandard"),this.Xw=a,this.i("isStandard",b,a))}),y.g(Ge,"adornedObject",Ge.prototype.zc),y.defineProperty(Ge,{zc:"adornedObject"},w("La"),function(a){x&&a!==q&&y.l(a,P,R,"adornedObject:val");var b=this.aj,c=q;a!==q&&(c=a.W),b!==q&&(a===q||b!==c)&&b.Ik(this.Ac),this.La=a,c&&c.ok(this.Ac,this)}),y.A(Ge,{aj:"adornedPart"},function(){var a=this.La;return a!==q?a.W:q}),Ge.prototype.Bk=function(){var a=this.La;return a===q?h:(a=a.W,a===q||!bi(a))},Ge.prototype.Pd=ca(s),y.A(Ge,{bb:"containingGroup"},ca(q)),Ge.prototype.Vl=function(a,b,c,d,e,f,g){if(a===td&&"elements"===b){if(e instanceof Ag)this.mb===q?this.mb=e:this.mb!==e&&y.m("Cannot insert a second Placeholder into the visual tree of an Adornment.");else if(e instanceof D){var h=dl(e,e,function(a){return a instanceof Ag});h instanceof Ag&&(this.mb===q?this.mb=h:this.mb!==h&&y.m("Cannot insert a second Placeholder into the visual tree of an Adornment."))}}else a===ud&&"elements"===b&&this.mb!==q&&(d===this.mb?this.mb=q:d instanceof D&&this.mb.hi(d)&&(this.mb=q));R.prototype.Vl.call(this,a,b,c,d,e,f,g)},Ge.prototype.updateAdornments=aa(),Ge.prototype.El=aa(),y.ba("Node",T),y.Ka(T,R),T.prototype.cloneProtected=function(a){R.prototype.cloneProtected.call(this,a),a.Np=this.Np,a.Op=this.Op,a.Dp=this.Dp,a.br=this.br,a.Xq=this.Xq,a.Ep=this.Ep,a.Uo=this.Uo,a.Vo=this.Vo.U()},T.prototype.ah=function(a){R.prototype.ah.call(this,a),a.qg(),a.Ag=this.Ag,a.dd=q},T.DirectionDefault=Pl=y.w(T,"DirectionDefault",0),T.DirectionAbsolute=y.w(T,"DirectionAbsolute",1),T.DirectionRotatedNode=Ql=y.w(T,"DirectionRotatedNode",2),T.DirectionRotatedNodeOrthogonal=hj=y.w(T,"DirectionRotatedNodeOrthogonal",3),T.prototype.Vl=function(a,b,c,d,e,f,g){a===td&&"elements"===b?this.dd=q:a===ud&&"elements"===b&&(this.h===q?this.dd=q:d instanceof P&&bl(this,d,function(a,b){Xj(a,b,h)
})),R.prototype.Vl.call(this,a,b,c,d,e,f,g)},T.prototype.invalidateConnectedLinks=T.prototype.qg=function(a){var b,c,d,e;for(a===f&&(a=q),b=this.Qd;b.next();)c=b.value,a!==q&&a.contains(c)||(d=c.Nc,d!==q&&(d.Kd=q),e=c.Ad,e!==q&&e!==d&&(e.Kd=q),c.Ub())},T.prototype.Bk=ca(h),y.g(T,"avoidable",T.prototype.jy),y.defineProperty(T,{jy:"avoidable"},w("Uo"),function(a){var c,b=this.Uo;b!==a&&(x&&y.j(a,"boolean",T,"avoidable"),this.Uo=a,c=this.h,c!==q&&Vi(c,this),this.i("avoidable",b,a))}),y.g(T,"avoidableMargin",T.prototype.HB),y.defineProperty(T,{HB:"avoidableMargin"},w("Vo"),function(a){var b,c;"number"==typeof a?a=new ab(a):y.l(a,ab,T,"avoidableMargin"),b=this.Vo,b.L(a)||(this.Vo=a=a.U(),c=this.h,c!==q&&Vi(c,this),this.i("avoidableMargin",b,a))}),T.prototype.canAvoid=function(){return this.jy&&!this.ii},T.prototype.getAvoidableRectangle=T.prototype.uG=function(a){return a.set(this.ua),a.ou(this.HB),a},y.A(T,{Qd:"linksConnected"},function(){return this.Pb.k}),T.prototype.findLinksConnected=T.prototype.pG=function(a){if(a===f&&(a=q),a===q)return this.Pb.k;x&&y.j(a,"string",T,"findLinksConnected:pid");var b=new Ea(this.Pb),c=this;return b.Hk=function(b){return b.da===c&&b.Kf===a||b.ja===c&&b.yg===a},b},T.prototype.findLinksOutOf=T.prototype.Nu=function(a){a===f&&(a=q),x&&a!==q&&y.j(a,"string",T,"findLinksOutOf:pid");var b=new Ea(this.Pb),c=this;return b.Hk=function(b){return b.da!==c?s:a===q?h:b.Kf===a},b},T.prototype.findLinksInto=T.prototype.If=function(a){a===f&&(a=q),x&&a!==q&&y.j(a,"string",T,"findLinksInto:pid");var b=new Ea(this.Pb),c=this;return b.Hk=function(b){return b.ja!==c?s:a===q?h:b.yg===a},b},T.prototype.findNodesConnected=T.prototype.iC=function(a){var b,c,d,e;for(a===f&&(a=q),x&&a!==q&&y.j(a,"string",T,"findNodesConnected:pid"),b=q,c=q,d=this.Pb.k;d.next();)e=d.value,e.da===this?(a===q||e.Kf===a)&&(e=e.ja,b!==q?b.add(e):c!==q&&c!==e?(b=new na(T),b.add(c),b.add(e)):c=e):e.ja!==this||a!==q&&e.yg!==a||(e=e.da,b!==q?b.add(e):c!==q&&c!==e?(b=new na(T),b.add(c),b.add(e)):c=e);return b!==q?b.k:c!==q?new Da(c):y.Zf},T.prototype.findNodesOutOf=T.prototype.AI=function(a){var b,c,d,e;for(a===f&&(a=q),x&&a!==q&&y.j(a,"string",T,"findNodesOutOf:pid"),b=q,c=q,d=this.Pb.k;d.next();)e=d.value,e.da!==this||a!==q&&e.Kf!==a||(e=e.ja,b!==q?b.add(e):c!==q&&c!==e?(b=new na(T),b.add(c),b.add(e)):c=e);return b!==q?b.k:c!==q?new Da(c):y.Zf},T.prototype.findNodesInto=T.prototype.zI=function(a){var b,c,d,e;for(a===f&&(a=q),x&&a!==q&&y.j(a,"string",T,"findNodesInto:pid"),b=q,c=q,d=this.Pb.k;d.next();)e=d.value,e.ja!==this||a!==q&&e.yg!==a||(e=e.da,b!==q?b.add(e):c!==q&&c!==e?(b=new na(T),b.add(c),b.add(e)):c=e);return b!==q?b.k:c!==q?new Da(c):y.Zf},T.prototype.findLinksBetween=T.prototype.xI=function(a,b,c){b===f&&(b=q),c===f&&(c=q),x&&(y.l(a,T,T,"findLinksBetween:othernode"),b!==q&&y.j(b,"string",T,"findLinksBetween:pid"),c!==q&&y.j(c,"string",T,"findLinksBetween:otherpid"));var d=new Ea(this.Pb),e=this;return d.Hk=function(d){return(d.da!==e||d.ja!==a||b!==q&&d.Kf!==b||c!==q&&d.yg!==c)&&(d.da!==a||d.ja!==e||c!==q&&d.Kf!==c||b!==q&&d.yg!==b)?s:h},d},T.prototype.findLinksTo=T.prototype.yI=function(a,b,c){b===f&&(b=q),c===f&&(c=q),x&&(y.l(a,T,T,"findLinksTo:othernode"),b!==q&&y.j(b,"string",T,"findLinksTo:pid"),c!==q&&y.j(c,"string",T,"findLinksTo:otherpid"));var d=new Ea(this.Pb),e=this;return d.Hk=function(d){return d.da!==e||d.ja!==a||b!==q&&d.Kf!==b||c!==q&&d.yg===c?s:h},d},y.g(T,"linkConnected",T.prototype.UC),y.defineProperty(T,{UC:"linkConnected"},w("Np"),function(a){var b=this.Np;b!==a&&(a!==q&&y.j(a,"function",T,"linkConnected"),this.Np=a,this.i("linkConnected",b,a))}),y.g(T,"linkDisconnected",T.prototype.VC),y.defineProperty(T,{VC:"linkDisconnected"},w("Op"),function(a){var b=this.Op;b!==a&&(a!==q&&y.j(a,"function",T,"linkDisconnected"),this.Op=a,this.i("linkDisconnected",b,a))}),T.prototype.Er=function(){R.prototype.Er.call(this),Ri(this);var a=this.Pm;a!==q&&Vl(a,this)},T.prototype.Fr=function(){R.prototype.Fr.call(this);var a=this.Pm;a!==q&&a.Ke!==q&&(a.Ke.remove(this),a.aa())},T.prototype.El=function(){var a,b;if(0<this.Pb.count){if(a=this.h,a===q)return;for(b=this.Pb.copy().k;b.next();)a.remove(b.value)}this.hd=q,R.prototype.El.call(this)},y.A(T,{ii:"isLinkLabel"},function(){return this.Pm!==q}),y.g(T,"labeledLink",T.prototype.hd),y.defineProperty(T,{hd:"labeledLink"},w("Pm"),function(a){var c,d,e,g,h,b=this.Pm;b!==a&&(x&&a!==q&&y.l(a,U,T,"labeledLink"),c=this.h,d=this.data,b===q||(b.Ke!==q&&(b.Ke.remove(this),b.aa()),c===q||d===q||c.va.cb)||(e=b.data,g=c.fa,e!==q&&g instanceof O&&(h=g.Cb(d),h!==f&&g.mH(e,h))),this.Pm=a,a!==q&&(Vl(a,this),c!==q&&d!==q&&!c.va.cb&&(e=a.data,g=c.fa,e!==q&&g instanceof O&&(h=g.Cb(d),h!==f&&g.xB(e,h)))),Lj(this),this.i("labeledLink",b,a))}),T.prototype.findPort=T.prototype.xr=function(a){if(x&&y.j(a,"string",T,"findPort:pid"),this.dd===q){if(""===a&&this.Bi===s)return this;Yj(this)}if(this.dd!==q){var b=this.dd.wa(a);if(b!==q)return b}return""!==a&&this.dd!==q&&(b=this.dd.wa(""),b!==q)?b:(this.dd===q&&Yj(this),this)},y.A(T,{port:"port"},function(){return this.xr("")}),y.A(T,{ports:"ports"},function(){return this.dd===q&&Yj(this),this.dd!==q?this.dd.k:y.Zf}),T.prototype.isInTreeOf=T.prototype.TI=function(a){var b,c,d,e;if(a===q||a===this)return s;if(b=h,c=this.h,c!==q&&(b=c.Pc),c=this,b)for(;c!==a;){for(b=q,d=c.Pb.k;d.next()&&(e=d.value,!e.hc||(b=e.da,b===c||b===this)););if(b===this||b===q||b===c)return s;c=b}else for(;c!==a;){for(b=q,d=c.Pb.k;d.next()&&(e=d.value,!(e.hc&&(b=e.ja,b!==c&&b!==this))););if(b===this||b===q||b===c)return s;c=b}return h},T.prototype.findTreeRoot=T.prototype.GI=function(){var c,d,a=h,b=this.h;if(b!==q&&(a=b.Pc),b=this,a)for(;;){for(a=q,c=b.Pb.k;c.next()&&(d=c.value,!d.hc||(a=d.da,a===b||a===this)););if(a===this)return this;if(a===q||a===b)return b;b=a}else for(;;){for(a=q,c=b.Pb.k;c.next()&&(d=c.value,!(d.hc&&(a=d.ja,a!==b&&a!==this))););if(a===this)return this;if(a===q||a===b)return b;b=a}},T.prototype.findTreeParentLink=T.prototype.yr=function(){var a=h,b=this.h;if(b!==q&&(a=b.Pc),b=this.Pb.k,a){for(;b.next();)if(a=b.value,a.hc&&a.da!==this)return a}else for(;b.next();)if(a=b.value,a.hc&&a.ja!==this)return a;return q},T.prototype.findTreeParentNode=T.prototype.lC=function(){var a,b,c,d;if(this.Xg===q||this.Xg instanceof T)return this.Xg;if(a=h,b=this.h,b!==q&&(a=b.Pc),b=this.Pb.n,c=b.length,a){for(a=0;c>a;a++)if(d=b[a],d.hc&&(d=d.da,d!==this))return this.Xg=d}else for(a=0;c>a;a++)if(d=b[a],d.hc&&(d=d.ja,d!==this))return this.Xg=d;return this.Xg=q},T.prototype.findTreeChildrenLinks=T.prototype.Ou=function(){var c,a=h,b=this.h;return b!==q&&(a=b.Pc),a?(a=new Ea(this.Pb),c=this,a.Hk=function(a){return a.hc&&a.da===c?h:s}):(a=new Ea(this.Pb),c=this,a.Hk=function(a){return a.hc&&a.ja===c?h:s}),a},T.prototype.findTreeChildrenNodes=T.prototype.kC=function(){var c,d,a=h,b=this.h;if(b!==q&&(a=b.Pc),c=b=q,d=this.Pb.k,a)for(;d.next();)a=d.value,a.hc&&a.da===this&&(a=a.ja,b!==q?b.add(a):c!==q&&c!==a?(b=new F(T),b.add(c),b.add(a)):c=a);else for(;d.next();)a=d.value,a.hc&&a.ja===this&&(a=a.da,b!==q?b.add(a):c!==q&&c!==a?(b=new F(T),b.add(c),b.add(a)):c=a);return b!==q?b.k:c!==q?new Da(c):y.Zf},T.prototype.findTreeParts=T.prototype.FI=function(a){a===f&&(a=1/0),y.j(a,"number",T,"collapseTree:level");var b=new na(R);return Fe(b,this,s,a),b},T.prototype.collapseTree=T.prototype.collapseTree=function(a){var b,c,d;a===f&&(a=1),y.p(a,T,"collapseTree:level"),1>a&&(a=1),b=this.h,b===q||b.xd||(b.xd=h,c=b.Pc,d=new na(T),d.add(this),Wl(this,d,c,a,this.Cc),b.xd=s,b.ta())},T.prototype.expandTree=T.prototype.expandTree=function(a){var b,c,d;a===f&&(a=2),y.p(a,T,"collapseTree:level"),2>a&&(a=2),b=this.h,b===q||b.xd||(b.xd=h,c=b.Pc,d=new na(T),d.add(this),Yl(this,d,c,a,this.Cc),b.xd=s)},y.g(T,"isTreeExpanded",T.prototype.Cc),y.defineProperty(T,{Cc:"isTreeExpanded"},w("Dp"),function(a){var c,d,b=this.Dp;b!==a&&(x&&y.j(a,"boolean",T,"isTreeExpanded"),this.Dp=a,c=this.h,this.i("isTreeExpanded",b,a),b=this.qE,b!==q&&(d=h,c!==q&&(d=c.Ra,c.Ra=h),b(this),c!==q&&(c.Ra=d)),c!==q&&c.va.cb||(a?(a=2,2>a&&(a=2),c!==q&&!c.xd&&(c.xd=h,b=c.Pc,d=new na(T),d.add(this),Yl(this,d,b,a,s),c.xd=s)):(a=1,1>a&&(a=1),c!==q&&!c.xd&&(c.xd=h,b=c.Pc,d=new na(T),d.add(this),Wl(this,d,b,a,h),c.xd=s))))}),y.g(T,"wasTreeExpanded",T.prototype.dm),y.defineProperty(T,{dm:"wasTreeExpanded"},w("br"),function(a){var b=this.br;b!==a&&(x&&y.j(a,"boolean",T,"wasTreeExpanded"),this.br=a,this.i("wasTreeExpanded",b,a))}),y.g(T,"treeExpandedChanged",T.prototype.qE),y.defineProperty(T,{qE:"treeExpandedChanged"},w("Xq"),function(a){var b=this.Xq;b!==a&&(a!==q&&y.j(a,"function",T,"treeExpandedChanged"),this.Xq=a,this.i("treeExpandedChanged",b,a))}),y.g(T,"isTreeLeaf",T.prototype.fh),y.defineProperty(T,{fh:"isTreeLeaf"},w("Ep"),function(a){var b=this.Ep;b!==a&&(x&&y.j(a,"boolean",T,"isTreeLeaf"),this.Ep=a,this.i("isTreeLeaf",b,a))}),y.ba("Link",U),y.Ka(U,R),U.prototype.cloneProtected=function(a){R.prototype.cloneProtected.call(this,a),a.Hg=this.Hg,a.pp=this.pp,a.Wg=this.Wg,a.Wq=this.Wq,a.rq=this.rq,a.sq=this.sq,a.tq=this.tq,a.Fp=this.Fp,a.Po=this.Po,a.$o=this.$o,a.cp=this.cp,a.dp=this.dp,a.fn=this.fn,a.Nq=this.Nq},U.prototype.ah=function(a){R.prototype.ah.call(this,a),this.Hg=a.Hg,this.Wg=a.Wg,a.Oh=q,a.Wd=q,a.Ub(),a.Tk=this.Tk,a.ke=this.ke},U.Normal=ok=y.w(U,"Normal",1),U.Orthogonal=ik=y.w(U,"Orthogonal",2),U.AvoidsNodes=xf=y.w(U,"AvoidsNodes",3),U.None=cj=y.w(U,"None",0),U.Bezier=vg=y.w(U,"Bezier",9),U.JumpGap=jk=y.w(U,"JumpGap",10),U.JumpOver=kk=y.w(U,"JumpOver",11),U.End=lk=y.w(U,"End",17),U.Scale=mk=y.w(U,"Scale",18),U.Stretch=nk=y.w(U,"Stretch",19),U.OrientAlong=sl=y.w(U,"OrientAlong",21),U.OrientPlus90=Zl=y.w(U,"OrientPlus90",22),U.OrientMinus90=$l=y.w(U,"OrientMinus90",23),U.OrientOpposite=am=y.w(U,"OrientOpposite",24),U.OrientUpright=bm=y.w(U,"OrientUpright",25),U.OrientPlus90Upright=cm=y.w(U,"OrientPlus90Upright",26),U.OrientMinus90Upright=dm=y.w(U,"OrientMinus90Upright",27),U.OrientUpright45=em=y.w(U,"OrientUpright45",28),U.prototype.fe=function(){this.P={zi:Ib,Zi:Ib,xi:0/0,Xi:0/0,wi:Pl,Wi:Pl,yi:0/0,Yi:0/0}},U.prototype.Bk=function(){var a=this.da;return a!==q&&(bi(a)||ci(a))?s:(a=this.ja,a!==q&&(bi(a)||ci(a))?s:h)},U.prototype.Pd=ca(s),U.prototype.computeAngle=function(a,b,c){switch(b){default:case cj:a=0;break;case sl:a=c;break;case Zl:a=c+90;break;case $l:a=c-90;break;case am:a=c+180;break;case bm:a=H.Yr(c),a>90&&270>a&&(a-=180);break;case cm:a=H.Yr(c+90),a>90&&270>a&&(a-=180);break;case dm:a=H.Yr(c-90),a>90&&270>a&&(a-=180);break;case em:if(a=H.Yr(c),a>45&&135>a||a>225&&315>a)return 0;a>90&&270>a&&(a-=180)}return H.Yr(a)},y.g(U,"fromNode",U.prototype.da),y.defineProperty(U,{da:"fromNode"},w("wf"),function(a){var c,d,e,g,i,b=this.wf;b!==a&&(x&&a!==q&&y.l(a,T,U,"fromNode"),c=this.Nc,b!==q&&(this.Df!==b&&Ul(b,this,c),c!==q&&(c.Kd=q),fm(this),b.J(zi)),this.wf=a,this.Ah=q,this.Ub(),d=this.h,d!==q&&(e=this.data,g=d.fa,e!==q&&(g instanceof O?(i=a!==q?a.data:q,g.rz(e,g.Cb(i))):g instanceof zd&&(i=a!==q?a.data:q,d.Pc?g.kh(e,g.Cb(i)):(b!==q&&g.kh(b.data,f),g.kh(i,g.Cb(this.Df!==q?this.Df.data:q)))))),e=this.Nc,g=this.By,g!==q&&(i=h,d!==q&&(i=d.Ra,d.Ra=h),g(this,c,e),d!==q&&(d.Ra=i)),a!==q&&(this.Df!==a&&Tl(a,this,e),e!==q&&(e.Kd=q),gm(this),a.J(ui)),this.i("fromNode",b,a),Mi(this))}),y.g(U,"fromPortId",U.prototype.Kf),y.defineProperty(U,{Kf:"fromPortId"},w("Hg"),function(a){var c,d,e,f,g,b=this.Hg;b!==a&&(x&&y.j(a,"string",U,"fromPortId"),c=this.Nc,c!==q&&(c.Kd=q),fm(this),this.Hg=a,d=this.Nc,d!==q&&(d.Kd=q),e=this.h,e!==q&&(f=this.data,g=e.fa,f!==q&&g instanceof O&&g.vv(f,a)),c!==d&&(this.Ah=q,this.Ub(),f=this.By,f!==q&&(g=h,e!==q&&(g=e.Ra,e.Ra=h),f(this,c,d),e!==q&&(e.Ra=g))),gm(this),this.i("fromPortId",b,a))}),y.A(U,{Nc:"fromPort"},function(){var a=this.wf;return a===q?q:a.xr(this.Hg)}),y.g(U,"fromPortChanged",U.prototype.By),y.defineProperty(U,{By:"fromPortChanged"},w("pp"),function(a){var b=this.pp;b!==a&&(a!==q&&y.j(a,"function",U,"fromPortChanged"),this.pp=a,this.i("fromPortChanged",b,a))}),y.g(U,"toNode",U.prototype.ja),y.defineProperty(U,{ja:"toNode"},w("Df"),function(a){var c,d,e,g,i,b=this.Df;b!==a&&(x&&a!==q&&y.l(a,T,U,"toNode"),c=this.Ad,b!==q&&(this.wf!==b&&Ul(b,this,c),c!==q&&(c.Kd=q),fm(this),b.J(zi)),this.Df=a,this.Ah=q,this.Ub(),d=this.h,d!==q&&(e=this.data,g=d.fa,e!==q&&(g instanceof O?(i=a!==q?a.data:q,g.vz(e,g.Cb(i))):g instanceof zd&&(i=a!==q?a.data:q,d.Pc?(b!==q&&g.kh(b.data,f),g.kh(i,g.Cb(this.wf!==q?this.wf.data:q))):g.kh(e,g.Cb(i))))),e=this.Ad,g=this.Ez,g!==q&&(i=h,d!==q&&(i=d.Ra,d.Ra=h),g(this,c,e),d!==q&&(d.Ra=i)),a!==q&&(this.wf!==a&&Tl(a,this,e),e!==q&&(e.Kd=q),gm(this),a.J(ui)),this.i("toNode",b,a),Mi(this))}),y.g(U,"toPortId",U.prototype.yg),y.defineProperty(U,{yg:"toPortId"},w("Wg"),function(a){var c,d,e,f,g,b=this.Wg;b!==a&&(x&&y.j(a,"string",U,"toPortId"),c=this.Ad,c!==q&&(c.Kd=q),fm(this),this.Wg=a,d=this.Ad,d!==q&&(d.Kd=q),e=this.h,e!==q&&(f=this.data,g=e.fa,f!==q&&g instanceof O&&g.wv(f,a)),c!==d&&(this.Ah=q,this.Ub(),f=this.Ez,f!==q&&(g=h,e!==q&&(g=e.Ra,e.Ra=h),f(this,c,d),e!==q&&(e.Ra=g))),gm(this),this.i("toPortId",b,a))}),y.A(U,{Ad:"toPort"},function(){var a=this.Df;return a===q?q:a.xr(this.Wg)}),y.g(U,"toPortChanged",U.prototype.Ez),y.defineProperty(U,{Ez:"toPortChanged"},w("Wq"),function(a){var b=this.Wq;b!==a&&(a!==q&&y.j(a,"function",U,"toPortChanged"),this.Wq=a,this.i("toPortChanged",b,a))}),y.defineProperty(U,{gb:"fromSpot"},function(){return this.P!==q?this.P.zi:Ib},function(a){this.P===q&&this.fe();var b=this.P.zi;b.L(a)||(x&&y.l(a,J,U,"fromSpot"),a=a.U(),this.P.zi=a,this.i("fromSpot",b,a),this.Ub())}),y.defineProperty(U,{Kl:"fromEndSegmentLength"},function(){return this.P!==q?this.P.xi:0/0},function(a){this.P===q&&this.fe();var b=this.P.xi;b!==a&&(x&&y.j(a,"number",U,"fromEndSegmentLength"),0>a&&y.ka(a,">= 0",U,"fromEndSegmentLength"),this.P.xi=a,this.i("fromEndSegmentLength",b,a),this.Ub())}),y.defineProperty(U,{Qu:"fromEndSegmentDirection"},function(){return this.P!==q?this.P.wi:Pl},function(a){this.P===q&&this.fe();var b=this.P.wi;b!==a&&(x&&y.rb(a,T,U,"fromEndSegmentDirection"),this.P.wi=a,this.i("fromEndSegmentDirection",b,a),this.Ub())}),y.defineProperty(U,{Ru:"fromShortLength"},function(){return this.P!==q?this.P.yi:0/0},function(a){this.P===q&&this.fe();var b=this.P.yi;b!==a&&(x&&y.j(a,"number",U,"fromShortLength"),this.P.yi=a,this.i("fromShortLength",b,a),this.Ub())}),y.defineProperty(U,{kb:"toSpot"},function(){return this.P!==q?this.P.Zi:Ib},function(a){this.P===q&&this.fe();var b=this.P.Zi;b.L(a)||(x&&y.l(a,J,U,"toSpot"),a=a.U(),this.P.Zi=a,this.i("toSpot",b,a),this.Ub())}),y.defineProperty(U,{cm:"toEndSegmentLength"},function(){return this.P!==q?this.P.Xi:0/0},function(a){this.P===q&&this.fe();var b=this.P.Xi;b!==a&&(x&&y.j(a,"number",U,"toEndSegmentLength"),0>a&&y.ka(a,">= 0",U,"toEndSegmentLength"),this.P.Xi=a,this.i("toEndSegmentLength",b,a),this.Ub())}),y.defineProperty(U,{Dv:"toEndSegmentDirection"},function(){return this.P!==q?this.P.Wi:Pl},function(a){this.P===q&&this.fe();var b=this.P.Wi;b!==a&&(x&&y.rb(a,T,U,"toEndSegmentDirection"),this.P.Wi=a,this.i("toEndSegmentDirection",b,a),this.Ub())}),y.defineProperty(U,{Ev:"toShortLength"},function(){return this.P!==q?this.P.Yi:0/0},function(a){this.P===q&&this.fe();var b=this.P.Yi;b!==a&&(x&&y.j(a,"number",U,"toShortLength"),this.P.Yi=a,this.i("toShortLength",b,a),this.Ub())}),U.prototype.getOtherNode=U.prototype.Cy=function(a){x&&y.l(a,T,U,"getOtherNode:node");var b=this.da;return a===b?this.ja:b},U.prototype.getOtherPort=U.prototype.JI=function(a){x&&y.l(a,P,U,"getOtherPort:port");var b=this.Nc;return a===b?this.Ad:b},y.A(U,{UI:"isLabeledLink"},function(){return this.Ke===q?s:0<this.Ke.count}),y.A(U,{tj:"labelNodes"},function(){return this.Ke===q?y.Zf:this.Ke.k}),U.prototype.Er=function(){var a,b,c;R.prototype.Er.call(this),im(this)&&jg(this,this.ua),a=this.wf,b=this.Df,a!==q&&(c=this.Nc,c!==q&&(c.Kd=q),Tl(a,this,c),gm(this)),b!==q&&(c=this.Ad,c!==q&&(c.Kd=q),Tl(b,this,c),gm(this))},U.prototype.Fr=function(){var a,b,c;R.prototype.Fr.call(this),im(this)&&jg(this,this.ua),a=this.wf,b=this.Df,a!==q&&(c=this.Nc,c!==q&&(c.Kd=q),Ul(a,this,c),fm(this)),b!==q&&(c=this.Ad,c!==q&&(c.Kd=q),Ul(b,this,c),fm(this))},U.prototype.El=function(){var a,b;if(this.Ke!==q){if(a=this.h,a===q)return;for(b=this.Ke.copy().k;b.next();)a.remove(b.value)}b=this.data,b!==q&&(a=this.h,a!==q&&(a=a.fa,a instanceof O?a.nH(b):a instanceof zd&&a.kh(b,f)))},U.prototype.move=U.prototype.move=function(a){var d,e,b=this.position,c=b.x;for(isNaN(c)&&(c=0),b=b.y,isNaN(b)&&(b=0),c=a.x-c,b=a.y-b,R.prototype.move.call(this,a),this.Ek(c,b),a=this.tj;a.next();)d=a.value,e=d.position,d.moveTo(e.x+c,e.y+b)},y.g(U,"relinkableFrom",U.prototype.rD),y.defineProperty(U,{rD:"relinkableFrom"},w("rq"),function(a){var b=this.rq;b!==a&&(x&&y.j(a,"boolean",U,"relinkableFrom"),this.rq=a,this.i("relinkableFrom",b,a))}),y.g(U,"relinkableTo",U.prototype.sD),y.defineProperty(U,{sD:"relinkableTo"},w("sq"),function(a){var b=this.sq;b!==a&&(x&&y.j(a,"boolean",U,"relinkableTo"),this.sq=a,this.i("relinkableTo",b,a))}),U.prototype.canRelinkFrom=function(){if(!this.rD)return s;var a=this.layer;return a===q||a.dj?(a=a.h,a===q||a.dj?h:s):s},U.prototype.canRelinkTo=function(){if(!this.sD)return s;var a=this.layer;return a===q||a.dj?(a=a.h,a===q||a.dj?h:s):s},y.g(U,"resegmentable",U.prototype.ov),y.defineProperty(U,{ov:"resegmentable"},w("tq"),function(a){var b=this.tq;b!==a&&(x&&y.j(a,"boolean",U,"resegmentable"),this.tq=a,this.i("resegmentable",b,a))}),y.g(U,"isTreeLink",U.prototype.hc),y.defineProperty(U,{hc:"isTreeLink"},w("Fp"),function(a){var b=this.Fp;b!==a&&(x&&y.j(a,"boolean",U,"isTreeLink"),this.Fp=a,this.i("isTreeLink",b,a))}),y.A(U,{path:"path"},function(){var a=this.Oh;return a!==q?a:(a=this.za,a=Mj(this,a,a.length),a instanceof V?this.Oh=a:q)}),U.prototype.rp=w("path"),U.prototype.Lw=w("sc"),U.prototype.Ai=function(){this.updateRoute();var a=new B;return this.Qe(a),this.vx=a},U.prototype.Qe=function(a){var e,f,g,h,i,b=1/0,c=1/0,d=this.qa;if(0===d)return a.q(0/0,0/0,0,0),a;if(1===d)d=this.o(0),b=Math.min(d.x,b),c=Math.min(d.y,c),a.q(d.x,d.y,0,0);else if(2===d)e=this.o(0),f=this.o(1),b=Math.min(e.x,f.x),c=Math.min(e.y,f.y),a.q(e.x,e.y,0,0),a.yj(f);else if(this.computeCurve()===vg&&d>=3&&!this.Jb)if(e=this.o(0),b=e.x,c=e.y,a.q(b,c,0,0),3===d)d=this.o(1),b=Math.min(d.x,b),c=Math.min(d.y,c),f=this.o(2),b=Math.min(f.x,b),c=Math.min(f.y,c),H.Dn(e.x,e.y,d.x,d.y,d.x,d.y,f.x,f.y,.5,a);else for(i=3;d>i;i+=3)g=this.o(i-2),i+3>=d&&(i=d-1),h=this.o(i-1),f=this.o(i),H.Dn(e.x,e.y,g.x,g.y,h.x,h.y,f.x,f.y,.5,a),b=Math.min(f.x,b),c=Math.min(f.y,c),e=f;else for(e=this.o(0),f=this.o(1),b=Math.min(e.x,f.x),c=Math.min(e.y,f.y),a.q(e.x,e.y,0,0),a.yj(f),i=2;d>i;i++)e=this.o(i),b=Math.min(e.x,b),c=Math.min(e.y,c),a.yj(e);return this.Mx.q(b-a.x,c-a.y),a},y.A(U,{dD:"midPoint"},function(){return this.updateRoute(),this.computeMidPoint(new A)}),U.prototype.computeMidPoint=function(a){var c,d,e,f,g,b=this.qa;if(0===b)return a.assign(H.KE),a;if(1===b)return a.assign(this.o(0)),a;if(2===b)return c=this.o(0),d=this.o(1),a.q((c.x+d.x)/2,(c.y+d.y)/2),a;if(this.computeCurve()===vg&&b>=3&&!this.Jb)return 3===b?this.o(1):(b=0|(b-1)/3,e=3*(0|b/2),1===b%2?(c=this.o(e),d=this.o(e+1),b=this.o(e+2),e=this.o(e+3),H.IF(c.x,c.y,d.x,d.y,b.x,b.y,e.x,e.y,a)):a.assign(this.o(e)),a);for(e=0,f=y.tb(),g=0;b-1>g;g++)c=this.o(g),d=this.o(g+1),H.Ha(c.x,d.x)?(c=d.y-c.y,0>c&&(c=-c)):H.Ha(c.y,d.y)?(c=d.x-c.x,0>c&&(c=-c)):c=Math.sqrt(c.xk(d)),f.push(c),e+=c;for(d=g=c=0;e/2>c&&b>g&&(d=f[g],!(c+d>e/2));)c+=d,g++;return y.ya(f),b=this.o(g),f=this.o(g+1),b.x===f.x?b.y>f.y?a.q(b.x,b.y-(e/2-c)):a.q(b.x,b.y+(e/2-c)):b.y===f.y?b.x>f.x?a.q(b.x-(e/2-c),b.y):a.q(b.x+(e/2-c),b.y):(e=(e/2-c)/d,a.q(b.x+e*(f.x-b.x),b.y+e*(f.y-b.y))),a},y.A(U,{cD:"midAngle"},function(){return this.updateRoute(),this.computeMidAngle()}),U.prototype.computeMidAngle=function(){var b,c,d,e,a=this.qa;if(2>a)return 0/0;if(this.computeCurve()===vg&&a>=4&&!this.Jb){if(b=0|(a-1)/3,c=3*(0|b/2),1===b%2)return c=Math.floor(c),a=this.o(c),b=this.o(c+1),d=this.o(c+2),c=this.o(c+3),H.HF(a.x,a.y,b.x,b.y,d.x,d.y,c.x,c.y);if(c>0&&a>c+1)return a=this.o(c-1),b=this.o(c+1),a.ai(b)}return d=0|a/2,0===a%2?(a=this.o(d-1),b=this.o(d),a.ai(b)):(a=this.o(d-1),b=this.o(d),d=this.o(d+1),c=a.xk(b),e=b.xk(d),c>e?a.ai(b):b.ai(d))},y.g(U,"points",U.prototype.points),y.defineProperty(U,{points:"points"},w("sc"),function(a){var b,c;if(x&&y.l(a,F,U,"points"),b=this.sc,b!==a&&a!==q){for(a=a.copy(),c=a.k;c.next();)c.value.freeze();a.freeze(),this.sc=a,this.Lf(),jm(this),this.i("points",b,a)}}),y.A(U,{qa:"pointsCount"},function(){return this.sc.count}),U.prototype.getPoint=U.prototype.o=function(a){return this.sc.n[a]},U.prototype.setPoint=U.prototype.bf=function(a,b){x&&(y.l(b,A,U,"setPoint"),b.V()||y.m("Link.setPoint called with a Point that does not have real numbers: "+b.toString())),this.Wd===q&&y.m("Call Link.startRoute before modifying the points of the route."),this.sc.Uf(a,b)},U.prototype.setPointAt=U.prototype.R=function(a,b,c){x&&(y.p(b,U,"setPointAt:x"),y.p(c,U,"setPointAt:y")),this.Wd===q&&y.m("Call Link.startRoute before modifying the points of the route."),this.sc.Uf(a,new A(b,c))},U.prototype.insertPoint=U.prototype.OI=function(a,b){x&&(y.l(b,A,U,"insertPoint"),b.V()||y.m("Link.insertPoint called with a Point that does not have real numbers: "+b.toString())),this.Wd===q&&y.m("Call Link.startRoute before modifying the points of the route."),this.sc.wd(a,b)},U.prototype.insertPointAt=U.prototype.C=function(a,b,c){x&&(y.p(b,U,"insertPointAt:x"),y.p(c,U,"insertPointAt:y")),this.Wd===q&&y.m("Call Link.startRoute before modifying the points of the route."),this.sc.wd(a,new A(b,c))},U.prototype.addPoint=U.prototype.Zg=function(a){x&&(y.l(a,A,U,"addPoint"),a.V()||y.m("Link.addPoint called with a Point that does not have real numbers: "+a.toString())),this.Wd===q&&y.m("Call Link.startRoute before modifying the points of the route."),this.sc.add(a)},U.prototype.addPointAt=U.prototype.pk=function(a,b){x&&(y.p(a,U,"insertPointAt:x"),y.p(b,U,"insertPointAt:y")),this.Wd===q&&y.m("Call Link.startRoute before modifying the points of the route."),this.sc.add(new A(a,b))},U.prototype.removePoint=U.prototype.xD=function(a){this.Wd===q&&y.m("Call Link.startRoute before modifying the points of the route."),this.sc.kd(a)},U.prototype.clearPoints=U.prototype.En=function(){this.Wd===q&&y.m("Call Link.startRoute before modifying the points of the route."),this.sc.clear()},U.prototype.movePoints=U.prototype.Ek=function(a,b){var c,d,e;for(c=new F(A),d=this.sc.k;d.next();)e=d.value,c.add(new A(e.x+a,e.y+b));this.points=c},U.prototype.startRoute=U.prototype.Mk=function(){this.Wd===q&&(this.Wd=this.sc,this.sc=this.sc.copy())},U.prototype.commitRoute=U.prototype.Zh=function(){var a,b,c,d,e,f,g,h,i,j;if(this.Wd!==q){for(a=this.Wd,b=this.sc,c=1/0,d=1/0,e=a.count,f=0;e>f;f++)g=a.n[f],c=Math.min(g.x,c),d=Math.min(g.y,d);for(h=1/0,i=1/0,j=b.count,f=0;j>f;f++)g=b.n[f],h=Math.min(g.x,h),i=Math.min(g.y,i),g.freeze();if(b.freeze(),j===e)for(f=0;j>f;f++)if(e=a.n[f],g=b.n[f],e.x-c!==g.x-h||e.y-d!==g.y-i){this.Lf();break}this.Wd=q,jm(this),this.i("points",a,b)}},U.prototype.rollbackRoute=U.prototype.pH=function(){this.Wd!==q&&(this.sc=this.Wd,this.Wd=q)},U.prototype.invalidateRoute=U.prototype.Ub=function(){if(!(this.Hx||this.h&&this.h.va.cb)){var a=this.rp();a!==q&&(this.Yg=s,this.Lf(),a.aa())}},y.defineProperty(U,{rs:q},w("Hx"),ba("Hx")),U.prototype.updateRoute=function(){if(!this.Yg&&!this.sw){var a=h;try{this.sw=h,this.Mk(),a=this.computePoints()}finally{this.sw=s,a?this.Zh():this.pH()}}},U.prototype.computePoints=function(){var c,d,e,f,g,i,j,k,l,m,n,o,p,r,t,u,v,w,x,z,a=this.da,b=q;return b=a===q?q:this.Nc,b!==q&&(c=ak(b),c!==a&&a.xb()?b=c:(c=Hl(a),c!==q&&c!==a?(a=c,b=c.xr("")):a=c)),this.jB=a,a!==q&&b!==q&&a.location.V()?(c=this.ja,d=q,d=c===q?q:this.Ad,d!==q&&(e=ak(d),e!==c&&c.xb()?d=e:(e=Hl(c),e!==q&&e!==c?(c=e,d=e.xr("")):c=e)),this.lB=c,c!==q&&d!==q&&c.location.V()?(e=this.qa,f=lm(this,b),g=mm(this,d),i=b===d,j=this.Jb,k=this.Se===vg,this.Ah=i&&!j?k=h:s,l=this.pu===cj||i,j||f!==Hb||g!==Hb||i?(k=this.jh===xf,l&&(j&&k||i)&&this.En(),u=this.computeCurviness(),m=this.getLinkPoint(a,b,f,h,j,c,d),n=p=o=0,(j||f!==Hb||i)&&(r=this.computeEndSegmentLength(a,b,f,h),n=this.getLinkDirection(a,b,m,f,h,j,c,d),i&&(n-=j?90:30,0>u&&(n-=180)),0>n?n+=360:n>=360&&(n-=360),i&&(r+=Math.abs(u)),0===n?o=r:90===n?p=r:180===n?o=-r:270===n?p=-r:(o=r*Math.cos(n*Math.PI/180),p=r*Math.sin(n*Math.PI/180)),Cb(f)&&i&&(v=b.hb(Sb,y.M()),w=y.dc(v.x+1e3*o,v.y+1e3*p),this.getLinkPointFromPoint(a,b,v,w,h,m),y.B(v),y.B(w))),r=this.getLinkPoint(c,d,g,s,j,a,b),x=t=0,z=0,(j||g!==Hb||i)&&(v=this.computeEndSegmentLength(c,d,g,s),z=this.getLinkDirection(c,d,r,g,s,j,a,b),i&&(z+=j?0:30,0>u&&(z+=180)),0>z?z+=360:z>=360&&(z-=360),i&&(v+=Math.abs(u)),0===z?t=v:90===z?x=v:180===z?t=-v:270===z?x=-v:(t=v*Math.cos(z*Math.PI/180),x=v*Math.sin(z*Math.PI/180)),Cb(g)&&i&&(v=d.hb(Sb,y.M()),w=y.dc(v.x+1e3*t,v.y+1e3*x),this.getLinkPointFromPoint(c,d,v,w,s,r),y.B(v),y.B(w))),d=m,(j||f!==Hb||i)&&(d=new A(m.x+o,m.y+p)),b=r,(j||g!==Hb||i)&&(b=new A(r.x+t,r.y+x)),!l&&!j&&Cb(f)&&e>3&&this.adjustPoints(0,m,e-2,b)?this.bf(e-1,r):!l&&!j&&Cb(g)&&e>3&&this.adjustPoints(1,d,e-1,r)?this.bf(0,m):!l&&!j&&e>4&&this.adjustPoints(1,d,e-2,b)?(this.bf(0,m),this.bf(e-1,r)):!l&&j&&e>=6&&!k&&this.adjustPoints(1,d,e-2,b)?(this.bf(0,m),this.bf(e-1,r)):(this.En(),this.Zg(m),(j||f!==Hb||i)&&this.Zg(d),j&&this.addOrthoPoints(d,n,b,z,a,c),(j||g!==Hb||i)&&this.Zg(b),this.Zg(r))):(f=s,!l&&e>=3&&(l=this.getLinkPoint(a,b,Hb,h,s,c,d),f=this.getLinkPoint(c,d,Hb,s,s,a,b),f=this.adjustPoints(0,l,e-1,f)),f||(this.En(),k?(e=this.getLinkPoint(a,b,Hb,h,s,c,d),l=this.getLinkPoint(c,d,Hb,s,s,a,b),f=l.x-e.x,g=l.y-e.y,i=this.computeCurviness(),k=j=0,m=e.x+f/3,n=e.y+g/3,o=m,p=n,H.I(g,0)?p=f>0?p-i:p+i:(j=-f/g,k=Math.sqrt(i*i/(j*j+1)),0>i&&(k=-k),o=(0>g?-1:1)*k+m,p=j*(o-m)+n),m=e.x+2*f/3,n=e.y+2*g/3,r=m,t=n,H.I(g,0)?t=f>0?t-i:t+i:(r=(0>g?-1:1)*k+m,t=j*(r-m)+n),this.En(),this.Zg(e),this.pk(o,p),this.pk(r,t),this.Zg(l),this.bf(0,this.getLinkPoint(a,b,Hb,h,s,c,d)),this.bf(3,this.getLinkPoint(c,d,Hb,s,s,a,b))):(e=c,c=this.getLinkPoint(a,b,Hb,h,s,e,d),d=this.getLinkPoint(e,d,Hb,s,s,a,b),!isNaN(this.Fu)||0!==this.ke&&!this.Jb?(g=d.x-c.x,a=d.y-c.y,b=this.computeCurviness(),e=c.x+g/2,l=c.y+a/2,f=e,i=l,H.I(a,0)?i=g>0?i-b:i+b:(g=-g/a,f=Math.sqrt(b*b/(g*g+1)),0>b&&(f=-f),f=(0>a?-1:1)*f+e,i=g*(f-e)+l),this.Zg(c),this.pk(f,i)):this.Zg(c),this.Zg(d)))),h):s):s},U.prototype.getLinkPointFromPoint=function(a,b,c,d,e,g){var h,i,j,k,l,m;return g===f&&(g=new A),a===q||b===q?(g.assign(c),g):(a.xb()||(e=Hl(a),e!==q&&e!==a&&(b=e.port)),a=q,b.ga===q?(e=d.x,d=d.y,h=c.x,c=c.y):(a=b.ga.oe,e=1/(a.m11*a.m22-a.m12*a.m21),h=a.m22*e,i=-a.m12*e,j=-a.m21*e,k=a.m11*e,l=e*(a.m21*a.dy-a.m22*a.dx),m=e*(a.m12*a.dx-a.m11*a.dy),e=d.x*h+d.y*j+l,d=d.x*i+d.y*k+m,h=c.x*h+c.y*j+l,c=c.x*i+c.y*k+m),b.Ar(e,d,h,c,g),a&&g.transform(a),g)},U.prototype.getLinkPoint=function(a,b,c,d,e,g,h,i){return i===f&&(i=new A),yb(c)?(b.hb(c,i),i):Bb(c)&&(c=om(b,this),c!==q)?(i.assign(c.io),i):(c=b.hb(Sb,y.M()),g=q,this.qa>(e?6:2)?(h=d?this.o(1):this.o(this.qa-2),e&&(h=nm(c,h.copy()))):(g=y.M(),h=h.hb(Sb,g),e&&(h=nm(c,h))),this.getLinkPointFromPoint(a,b,c,h,d,i),y.B(c),g!==q&&y.B(g),i)},U.prototype.getLinkDirection=function(a,b,c,d,e,f,g,h){a:if(yb(d))c=d.x>d.y?d.x>1-d.y?0:d.x<1-d.y?270:315:d.x<d.y?d.x>1-d.y?90:d.x<1-d.y?180:135:.5>d.x?225:.5<d.x?45:0;else{if(Bb(d)&&(a=om(b,this),a!==q))switch(a.je){case y.ld:c=270;break a;case y.Sc:c=180;break a;default:case y.ad:c=0;break a;case y.$c:c=90;break a}a=b.hb(Sb,y.M()),d=q,this.qa>(f?6:2)?(h=e?this.o(1):this.o(this.qa-2),h=f?nm(a,h.copy()):c):(d=y.M(),h=h.hb(Sb,d)),c=Math.abs(h.x-a.x)>Math.abs(h.y-a.y)?h.x>=a.x?0:180:h.y>=a.y?90:270,y.B(a),d!==q&&y.B(d)}switch(f=Pl,f=e?this.Qu:this.Dv,f===Pl&&(f=e?b.Qu:b.Dv),f){case Ql:b=b.yk(),c+=b,c>=360&&(c-=360);break;case Pl:case hj:if(b=b.yk(),0===b)break;b>=45&&135>b?c+=90:b>=135&&225>b?c+=180:b>=225&&315>b&&(c+=270),c>=360&&(c-=360)}return c},U.prototype.computeEndSegmentLength=function(a,b,c,d){return Bb(c)&&(a=om(b,this),a!==q)?a.Ku:(a=0/0,a=d?this.Kl:this.cm,isNaN(a)&&(a=d?b.Kl:b.cm),isNaN(a)&&(a=10),a)},U.prototype.computeSpot=function(a){return a?lm(this,this.Nc):mm(this,this.Ad)},U.prototype.computeShortLength=function(a){return a?rm(this):sm(this)},U.prototype.oj=function(a,b,c,d,e,g){var i,j,k,l,m,n,o,p,r,t,u,v,w,x;if(this.$e===s)return s;if(b===f&&(b=q),c===f&&(c=q),i=g,g===f&&(i=y.xg(),i.reset()),i.multiply(this.transform),this.Bl(a,i))return gl(this,b,c,e),g===f&&y.ye(i),h;if(this.qf(a,i)){if(j=s,!this.gg)for(k=this.za.length;k--;)if(l=this.za.n[k],!(!l.visible&&l!==this.Vb||(m=l.ua,n=this.Ta,m.x>n.width||m.y>n.height||0>m.x+m.width||0>m.y+m.height))){if(m=y.xg(),m.set(i),l instanceof D)j=l.oj(a,b,c,d,e,m);else if(this.path===l)if(j=l,o=a,p=d,n=m,j.$e===s)j=s;else if(n.multiply(j.transform),p)a:if(r=o,t=n,j.Bl(r,t))j=h;else{if(t===f&&(t=j.transform,r.ij(j.ua))){j=h;break a}n=r.left,o=r.right,p=r.top,r=r.bottom,u=y.M(),v=y.M(),w=y.M(),x=y.xg(),x.set(t),x.iD(j.transform),x.Gy(),v.x=o,v.y=p,v.transform(x),u.x=n,u.y=p,u.transform(x),t=s,ql(j,u,v,w)?t=h:(u.x=o,u.y=r,u.transform(x),ql(j,u,v,w)?t=h:(v.x=n,v.y=r,v.transform(x),ql(j,u,v,w)?t=h:(u.x=n,u.y=p,u.transform(x),ql(j,u,v,w)&&(t=h)))),y.ye(x),y.B(u),y.B(v),y.B(w),j=t}else j=j.Bl(o,n);else j=lj(l,a,d,m);j&&(b!==q&&(l=b(l)),l&&(c===q||c(l))&&e.add(l)),y.ye(m)}return g===f&&y.ye(i),j||this.background!==q||this.ej!==q}return g===f&&y.ye(i),s},y.A(U,{Jb:"isOrthogonal"},function(){var a=this.fn;return a===ik||a===xf}),U.prototype.computeCurve=function(){if(this.Ah===q){var a=this.Jb;this.Ah=this.Nc===this.Ad&&!a}return this.Ah?vg:this.Se},U.prototype.computeCorner=function(){if(this.Se===vg)return 0;var a=this.UB;return(isNaN(a)||0>a)&&(a=10),a},U.prototype.computeCurviness=function(){var b,c,a=this.Fu;return isNaN(a)&&(b=this.ke,0!==b?(c=this.Tk,a=c!==q?c.spacing:10,c=Math.abs(b),a=a/2+(0|(c-1)/2)*a,0===c%2&&(a=-a),0>b&&(a=-a)):a=10),a},U.prototype.adjustPoints=function(a,b,c,d){var f,g,i,j,k,l,m,n,o,p,q,r,t,u,v,e=this.pu;if(this.Jb){if(e===mk)return s;e===nk&&(e=lk)}switch(e){case mk:if(f=this.o(a),g=this.o(c),!(f.L(b)&&g.L(d)||(e=f.x,f=f.y,i=g.x-e,j=g.y-f,k=Math.sqrt(i*i+j*j),H.I(k,0)))){for(H.I(i,0)?l=0>j?-Math.PI/2:Math.PI/2:(l=Math.atan(j/Math.abs(i)),0>i&&(l=Math.PI-l)),g=b.x,m=b.y,i=d.x-g,n=d.y-m,j=Math.sqrt(i*i+n*n),H.I(i,0)?n=0>n?-Math.PI/2:Math.PI/2:(n=Math.atan(n/Math.abs(i)),0>i&&(n=Math.PI-n)),k=j/k,l=n-l,this.bf(a,b),a+=1;c>a;a++)b=this.o(a),i=b.x-e,j=b.y-f,b=Math.sqrt(i*i+j*j),H.I(b,0)||(H.I(i,0)?j=0>j?-Math.PI/2:Math.PI/2:(j=Math.atan(j/Math.abs(i)),0>i&&(j=Math.PI-j)),i=j+l,b*=k,this.R(a,g+b*Math.cos(i),m+b*Math.sin(i)));this.bf(c,d)}return h;case nk:if(f=this.o(a),m=this.o(c),!f.L(b)||!m.L(d)){for(e=f.x,f=f.y,g=m.x,m=m.y,k=(g-e)*(g-e)+(m-f)*(m-f),i=b.x,l=b.y,j=d.x,n=d.y,o=0,p=1,o=0!==j-i?(n-l)/(j-i):9e9,0!==o&&(p=Math.sqrt(1+1/(o*o))),this.bf(a,b),a+=1;c>a;a++)b=this.o(a),q=b.x,r=b.y,t=.5,0!==k&&(t=((e-q)*(e-g)+(f-r)*(f-m))/k),u=e+t*(g-e),v=f+t*(m-f),b=Math.sqrt((q-u)*(q-u)+(r-v)*(r-v)),o*(q-u)+v>r&&(b=-b),o>0&&(b=-b),q=i+t*(j-i),t=l+t*(n-l),0!==o?(b=q+b/p,this.R(a,b,t-(b-q)/o)):this.R(a,q,t+b);this.bf(c,d)}return h;case lk:return this.Jb&&(e=this.o(a),f=this.o(a+1),g=this.o(a+2),H.I(e.y,f.y)?H.I(f.x,g.x)?this.R(a+1,f.x,b.y):H.I(f.y,g.y)&&this.R(a+1,b.x,f.y):H.I(e.x,f.x)&&(H.I(f.y,g.y)?this.R(a+1,b.x,f.y):H.I(f.x,g.x)&&this.R(a+1,f.x,b.y)),e=this.o(c),f=this.o(c-1),g=this.o(c-2),H.I(e.y,f.y)?H.I(f.x,g.x)?this.R(c-1,f.x,d.y):H.I(f.y,g.y)&&this.R(c-1,d.x,f.y):H.I(e.x,f.x)&&(H.I(f.y,g.y)?this.R(c-1,d.x,f.y):H.I(f.x,g.x)&&this.R(c-1,f.x,d.y))),this.bf(a,b),this.bf(c,d),h;default:return s}},U.prototype.addOrthoPoints=function(a,b,c,d,e,f){var g,i,j,k,l,m,n,o,p,r;if(b=b>=-45&&45>b?0:b>=45&&135>b?90:b>=135&&225>b?180:270,d=d>=-45&&45>d?0:d>=45&&135>d?90:d>=135&&225>d?180:270,g=e.ua.copy(),i=f.ua.copy(),g.V()&&i.V()){if(g.pg(8,8),i.pg(8,8),g.yj(a),i.yj(c),0===b?c.x>a.x||270===d&&c.y<a.y&&i.right>a.x||90===d&&c.y>a.y&&i.right>a.x?(j=new A(c.x,a.y),k=new A(c.x,(a.y+c.y)/2),180===d?(j.x=this.computeMidOrthoPosition(a.x,c.x,s),k.x=j.x,k.y=c.y):270===d&&c.y<a.y||90===d&&c.y>a.y?(j.x=a.x<i.left?this.computeMidOrthoPosition(a.x,i.left,s):a.x<i.right&&(270===d&&a.y<i.top||90===d&&a.y>i.bottom)?this.computeMidOrthoPosition(a.x,c.x,s):i.right,k.x=j.x,k.y=c.y):0===d&&a.x<i.left&&a.y>i.top&&a.y<i.bottom&&(j.x=a.x,j.y=a.y<c.y?Math.min(c.y,i.top):Math.max(c.y,i.bottom),k.y=j.y)):(j=new A(a.x,c.y),k=new A((a.x+c.x)/2,c.y),(180===d||90===d&&c.y<g.top||270===d&&c.y>g.bottom)&&(180===d&&(i.Ea(a)||g.Ea(c))?j.y=this.computeMidOrthoPosition(a.y,c.y,h):c.y<a.y&&(180===d||90===d)?j.y=this.computeMidOrthoPosition(g.top,Math.max(c.y,i.bottom),h):c.y>a.y&&(180===d||270===d)&&(j.y=this.computeMidOrthoPosition(g.bottom,Math.min(c.y,i.top),h)),k.x=c.x,k.y=j.y),j.y>g.top&&j.y<g.bottom&&(c.x>=g.left&&c.x<=a.x||a.x<=i.right&&a.x>=c.x?(90===d||270===d)&&(j=new A(Math.max((a.x+c.x)/2,a.x),a.y),k=new A(j.x,c.y)):(j.y=270===d||(0===d||180===d)&&c.y<a.y?Math.min(c.y,0===d?g.top:Math.min(g.top,i.top)):Math.max(c.y,0===d?g.bottom:Math.max(g.bottom,i.bottom)),k.x=c.x,k.y=j.y))):180===b?c.x<a.x||270===d&&c.y<a.y&&i.left<a.x||90===d&&c.y>a.y&&i.left<a.x?(j=new A(c.x,a.y),k=new A(c.x,(a.y+c.y)/2),0===d?(j.x=this.computeMidOrthoPosition(a.x,c.x,s),k.x=j.x,k.y=c.y):270===d&&c.y<a.y||90===d&&c.y>a.y?(j.x=a.x>i.right?this.computeMidOrthoPosition(a.x,i.right,s):a.x>i.left&&(270===d&&a.y<i.top||90===d&&a.y>i.bottom)?this.computeMidOrthoPosition(a.x,c.x,s):i.left,k.x=j.x,k.y=c.y):180===d&&a.x>i.right&&a.y>i.top&&a.y<i.bottom&&(j.x=a.x,j.y=a.y<c.y?Math.min(c.y,i.top):Math.max(c.y,i.bottom),k.y=j.y)):(j=new A(a.x,c.y),k=new A((a.x+c.x)/2,c.y),(0===d||90===d&&c.y<g.top||270===d&&c.y>g.bottom)&&(0===d&&(i.Ea(a)||g.Ea(c))?j.y=this.computeMidOrthoPosition(a.y,c.y,h):c.y<a.y&&(0===d||90===d)?j.y=this.computeMidOrthoPosition(g.top,Math.max(c.y,i.bottom),h):c.y>a.y&&(0===d||270===d)&&(j.y=this.computeMidOrthoPosition(g.bottom,Math.min(c.y,i.top),h)),k.x=c.x,k.y=j.y),j.y>g.top&&j.y<g.bottom&&(c.x<=g.right&&c.x>=a.x||a.x>=i.left&&a.x<=c.x?(90===d||270===d)&&(j=new A(Math.min((a.x+c.x)/2,a.x),a.y),k=new A(j.x,c.y)):(j.y=270===d||(0===d||180===d)&&c.y<a.y?Math.min(c.y,180===d?g.top:Math.min(g.top,i.top)):Math.max(c.y,180===d?g.bottom:Math.max(g.bottom,i.bottom)),k.x=c.x,k.y=j.y))):90===b?c.y>a.y||180===d&&c.x<a.x&&i.bottom>a.y||0===d&&c.x>a.x&&i.bottom>a.y?(j=new A(a.x,c.y),k=new A((a.x+c.x)/2,c.y),270===d?(j.y=this.computeMidOrthoPosition(a.y,c.y,h),k.x=c.x,k.y=j.y):180===d&&c.x<a.x||0===d&&c.x>a.x?(j.y=a.y<i.top?this.computeMidOrthoPosition(a.y,i.top,h):a.y<i.bottom&&(180===d&&a.x<i.left||0===d&&a.x>i.right)?this.computeMidOrthoPosition(a.y,c.y,h):i.bottom,k.x=c.x,k.y=j.y):90===d&&a.y<i.top&&a.x>i.left&&a.x<i.right&&(j.x=a.x<c.x?Math.min(c.x,i.left):Math.max(c.x,i.right),j.y=a.y,k.x=j.x)):(j=new A(c.x,a.y),k=new A(c.x,(a.y+c.y)/2),(270===d||0===d&&c.x<g.left||180===d&&c.x>g.right)&&(270===d&&(i.Ea(a)||g.Ea(c))?j.x=this.computeMidOrthoPosition(a.x,c.x,s):c.x<a.x&&(270===d||0===d)?j.x=this.computeMidOrthoPosition(g.left,Math.max(c.x,i.right),s):c.x>a.x&&(270===d||180===d)&&(j.x=this.computeMidOrthoPosition(g.right,Math.min(c.x,i.left),s)),k.x=j.x,k.y=c.y),j.x>g.left&&j.x<g.right&&(c.y>=g.top&&c.y<=a.y||a.y<=i.bottom&&a.y>=c.y?(0===d||180===d)&&(j=new A(a.x,Math.max((a.y+c.y)/2,a.y)),k=new A(c.x,j.y)):(j.x=180===d||(90===d||270===d)&&c.x<a.x?Math.min(c.x,90===d?g.left:Math.min(g.left,i.left)):Math.max(c.x,90===d?g.right:Math.max(g.right,i.right)),k.x=j.x,k.y=c.y))):c.y<a.y||180===d&&c.x<a.x&&i.top<a.y||0===d&&c.x>a.x&&i.top<a.y?(j=new A(a.x,c.y),k=new A((a.x+c.x)/2,c.y),90===d?(j.y=this.computeMidOrthoPosition(a.y,c.y,h),k.x=c.x,k.y=j.y):180===d&&c.x<a.x||0===d&&c.x>=a.x?(j.y=a.y>i.bottom?this.computeMidOrthoPosition(a.y,i.bottom,h):a.y>i.top&&(180===d&&a.x<i.left||0===d&&a.x>i.right)?this.computeMidOrthoPosition(a.y,c.y,h):i.top,k.x=c.x,k.y=j.y):270===d&&a.y>i.bottom&&a.x>i.left&&a.x<i.right&&(j.x=a.x<c.x?Math.min(c.x,i.left):Math.max(c.x,i.right),j.y=a.y,k.x=j.x)):(j=new A(c.x,a.y),k=new A(c.x,(a.y+c.y)/2),(90===d||0===d&&c.x<g.left||180===d&&c.x>g.right)&&(90===d&&(i.Ea(a)||g.Ea(c))?j.x=this.computeMidOrthoPosition(a.x,c.x,s):c.x<a.x&&(90===d||0===d)?j.x=this.computeMidOrthoPosition(g.left,Math.max(c.x,i.right),s):c.x>a.x&&(90===d||180===d)&&(j.x=this.computeMidOrthoPosition(g.right,Math.min(c.x,i.left),s)),k.x=j.x,k.y=c.y),j.x>g.left&&j.x<g.right&&(c.y<=g.bottom&&c.y>=a.y||a.y>=i.top&&a.y<=c.y?(0===d||180===d)&&(j=new A(a.x,Math.min((a.y+c.y)/2,a.y)),k=new A(c.x,j.y)):(j.x=180===d||(90===d||270===d)&&c.x<a.x?Math.min(c.x,270===d?g.left:Math.min(g.left,i.left)):Math.max(c.x,270===d?g.right:Math.max(g.right,i.right)),k.x=j.x,k.y=c.y))),l=j,m=k,this.jh!==xf)a=s;
else if(n=this.h,n===q||g.Ea(c)||i.Ea(a)||e===f||this.layer.bc)a=s;else{if(n.sd===q&&(n.sd=new tm),e=this!==q?this.bb:q,n.sd.Gr||n.sd.group!==e){if(e===q)for(f=n.Ci?Nh(n):n.fd.copy(),f.pg(100,100),n.sd.initialize(f),f=y.df(),o=n.uj;o.next();)p=o.value,r=p.layer,r===q||!r.visible||r.bc||Ti(n,p,q,f);else for(f=e.ua.copy(),f.pg(20,20),n.sd.initialize(f),f=y.df(),o=e.Dc;o.next();)p=o.value,p instanceof T&&Ti(n,p,q,f);y.Bc(f),n.sd.group=e,n.sd.Gr=s}else um(n.sd);n=n.sd,vm(n,Math.min(a.x,l.x),Math.min(a.y,l.y),Math.abs(a.x-l.x),Math.abs(a.y-l.y))&&vm(n,Math.min(l.x,m.x),Math.min(l.y,m.y),Math.abs(l.x-m.x),Math.abs(l.y-m.y))&&vm(n,Math.min(m.x,c.x),Math.min(m.y,c.y),Math.abs(m.x-c.x),Math.abs(m.y-c.y))?a=s:(g=g.copy().zj(i),g.pg(2*n.yl,2*n.xl),wm(n,a,b,c,d,g),i=xm(n,c.x,c.y),!n.abort&&i===ym&&(um(n),i=n.ZD,g.pg(n.yl*i,n.xl*i),wm(n,a,b,c,d,g),i=xm(n,c.x,c.y)),!n.abort&&i===ym&&(um(n),i=n.QC,g.pg(n.yl*i,n.xl*i),wm(n,a,b,c,d,g),i=xm(n,c.x,c.y)),!n.abort&&i===ym&&n.EE&&(um(n),wm(n,a,b,c,d,n.Ib),i=xm(n,c.x,c.y)),!n.abort&&ym>i&&0!==xm(n,c.x,c.y)?(zm(this,n,c.x,c.y,d,h),d=this.o(2),4>this.qa?(0===b||180===b?(d.x=a.x,d.y=c.y):(d.x=c.x,d.y=a.y),this.R(2,d.x,d.y),this.C(3,d.x,d.y)):(c=this.o(3),0===b||180===b?H.I(d.x,c.x)?(b=0===b?Math.max(d.x,a.x):Math.min(d.x,a.x),this.R(2,b,a.y),this.R(3,b,c.y)):H.I(d.y,c.y)?(Math.abs(a.y-d.y)<=n.xl/2&&(this.R(2,d.x,a.y),this.R(3,c.x,a.y)),this.C(2,d.x,a.y)):this.R(2,a.x,d.y):(90===b||270===b)&&(H.I(d.y,c.y)?(b=90===b?Math.max(d.y,a.y):Math.min(d.y,a.y),this.R(2,a.x,b),this.R(3,c.x,b)):H.I(d.x,c.x)?(Math.abs(a.x-d.x)<=n.yl/2&&(this.R(2,a.x,d.y),this.R(3,a.x,c.y)),this.C(2,a.x,d.y)):this.R(2,d.x,a.y))),a=h):a=s)}a||(this.Zg(j),this.Zg(k))}},U.prototype.computeMidOrthoPosition=function(a,b){if(!isNaN(this.Fu)||0!==this.ke&&!this.Jb){var c=this.computeCurviness();return(a+b)/2+c}return(a+b)/2},U.prototype.findClosestSegment=U.prototype.tI=function(a){var b,c,d,e,f,g,h;for(x&&y.l(a,A,U,"findClosestSegment:p"),b=a.x,a=a.y,c=this.o(0),d=this.o(1),e=Ua(b,a,c.x,c.y,d.x,d.y),f=0,g=1;g<this.qa-1;g++)c=this.o(g+1),h=Ua(b,a,d.x,d.y,c.x,c.y),d=c,e>h&&(f=g,e=h);return f},U.prototype.invalidateGeometry=U.prototype.Lf=function(){this.Oh=this.Na=q,this.aa()},y.A(U,{Oc:"geometry"},function(){return this.Na===q&&(this.updateRoute(),this.Na=this.makeGeometry()),this.Na}),U.prototype.gv=function(){var a,b,c,d,e;if(this.Na===q&&this.Yg!==s&&(this.Na=this.makeGeometry(),a=this.rp(),a!==q))for(a.Na=this.Na,b=this.za,c=b.length,d=0;c>d;d++)e=b.n[d],e!==a&&e.ji&&e instanceof V&&(e.Na=this.Na)},U.prototype.makeGeometry=function(){var b,c,d,e,f,g,i,j,k,l,m,n,o,p,r,t,u,v,w,x,a=this.qa;if(2>a)return b=new nc(oc),c=new pc(0,0),b.fb.add(c),b;if(d=this.o(0).copy(),e=d.copy(),f=this.computeCurve(),f===vg&&a>=3&&!H.Ha(this.os,0))if(3===a)g=this.o(1),b=Math.min(d.x,g.x),c=Math.min(d.y,g.y),g=this.o(2),b=Math.min(b,g.x),c=Math.min(c,g.y);else{if(this.Jb)for(g=0;a>g;g++)b=this.sc.n[g],e.x=Math.min(b.x,e.x),e.y=Math.min(b.y,e.y);else for(g=3;a>g;g+=3)g+3>=a&&(g=a-1),i=this.o(g),e.x=Math.min(i.x,e.x),e.y=Math.min(i.y,e.y);b=e.x,c=e.y}else{for(g=0;a>g;g++)b=this.sc.n[g],e.x=Math.min(b.x,e.x),e.y=Math.min(b.y,e.y);b=e.x,c=e.y}if(b-=this.Mx.x,c-=this.Mx.y,d.x-=b,d.y-=c,2===a)j=this.o(1).copy(),j.x-=b,j.y-=c,0!==rm(this)&&Cm(this,d,h,e),0!==sm(this)&&Cm(this,j,s,e),b=new nc(wc),b.ha=d.x,b.ia=d.y,b.D=j.x,b.F=j.y;else{if(j=y.u(),0!==rm(this)&&Cm(this,d,h,e),M(j,d.x,d.y,s,s),f===vg&&a>=3&&!H.Ha(this.os,0))if(3===a)g=this.o(1),a=g.x-b,d=g.y-c,g=this.o(2).copy(),g.x-=b,g.y-=c,0!==sm(this)&&Cm(this,g,s,e),N(j,a,d,a,d,g.x,g.y);else if(this.Jb){for(d=new A(b,c),f=this.o(1).copy(),i=new A(b,c),a=new A(b,c),e=this.o(0),k=q,l=this.os/3,g=1;g<this.qa-1;g++)k=this.o(g),m=e,n=k,o=this.o(Dm(this,k,g,s)),H.Ha(m.x,n.x)&&H.Ha(n.x,o.x)||H.Ha(m.y,n.y)&&H.Ha(n.y,o.y)||(p=l,r=i,t=a,isNaN(p)&&(p=this.os/3),u=m.x,m=m.y,v=n.x,n=n.y,w=o.x,o=o.y,x=p*Em(u,m,v,n),p*=Em(v,n,w,o),H.Ha(m,n)&&H.Ha(v,w)&&(v>u?o>n?(r.x=v-x,r.y=n-x,t.x=v+p,t.y=n+p):(r.x=v-x,r.y=n+x,t.x=v+p,t.y=n-p):o>n?(r.x=v+x,r.y=n-x,t.x=v-p,t.y=n+p):(r.x=v+x,r.y=n+x,t.x=v-p,t.y=n-p)),H.Ha(u,v)&&H.Ha(n,o)&&(n>m?(w>v?(r.x=v-x,r.y=n-x,t.x=v+p):(r.x=v+x,r.y=n-x,t.x=v-p),t.y=n+p):(w>v?(r.x=v-x,r.y=n+x,t.x=v+p):(r.x=v+x,r.y=n+x,t.x=v-p),t.y=n-p)),(H.Ha(u,v)&&H.Ha(v,w)||H.Ha(m,n)&&H.Ha(n,o))&&(u=.5*(u+w),m=.5*(m+o),r.x=u,r.y=m,t.x=u,t.y=m),1===g?(f.x=.5*(e.x+k.x),f.y=.5*(e.y+k.y)):2===g&&H.Ha(e.x,this.o(0).x)&&H.Ha(e.y,this.o(0).y)&&(f.x=.5*(e.x+k.x),f.y=.5*(e.y+k.y)),N(j,f.x-b,f.y-c,i.x-b,i.y-c,k.x-b,k.y-c),d.set(i),f.set(a),e=k);g=e.x,e=e.y,d=this.o(this.qa-1),g=.5*(g+d.x),e=.5*(e+d.y),N(j,a.x-b,a.y-c,g-b,e-c,d.x-b,d.y-c)}else for(g=3;a>g;g+=3)e=this.o(g-2),g+3>=a&&(g=a-1),d=this.o(g-1),i=this.o(g),g===a-1&&0!==sm(this)&&(i=i.copy(),Cm(this,i,s,H.Aj)),N(j,e.x-b,e.y-c,d.x-b,d.y-c,i.x-b,i.y-c);else{for(e=y.M(),e.assign(this.o(0)),g=1;a>g;){if(g=Dm(this,e,g,g>1),l=this.o(g),g>=a-1){e!==l&&(0!==sm(this)&&(l=l.copy(),Cm(this,l,s,H.Aj)),Fm(this,j,-b,-c,e,l));break}g=Dm(this,l,g+1,a-3>g),d=j,f=-b,i=-c,k=e,r=this.o(g),t=e,H.I(k.y,l.y)&&H.I(l.x,r.x)?(u=this.computeCorner(),u=Math.min(u,Math.abs(l.x-k.x)/2),u=m=Math.min(u,Math.abs(r.y-l.y)/2),H.I(u,0)?(Fm(this,d,f,i,k,l),t.assign(l)):(p=l.x,v=l.y,n=p,w=v,p=l.x>k.x?l.x-u:l.x+u,w=r.y>l.y?l.y+m:l.y-m,Fm(this,d,f,i,k,new A(p,v)),Pc(d,l.x+f,l.y+i,n+f,w+i),t.q(n,w))):H.I(k.x,l.x)&&H.I(l.y,r.y)?(u=this.computeCorner(),m=Math.min(u,Math.abs(l.y-k.y)/2),m=u=Math.min(m,Math.abs(r.x-l.x)/2),H.I(u,0)?(Fm(this,d,f,i,k,l),t.assign(l)):(p=l.x,w=v=l.y,v=l.y>k.y?l.y-m:l.y+m,n=r.x>l.x?l.x+u:l.x-u,Fm(this,d,f,i,k,new A(p,v)),Pc(d,l.x+f,l.y+i,n+f,w+i),t.q(n,w))):(Fm(this,d,f,i,k,l),t.assign(l))}y.B(e)}b=j.s,y.v(j)}return b},y.A(U,{zr:"firstPickIndex"},function(){return 2>=this.qa?0:this.Jb||lm(this)!==Hb?1:0}),y.A(U,{cv:"lastPickIndex"},function(){var a=this.qa;return 0===a?0:2>=a?a-1:this.Jb||mm(this)!==Hb?a-2:a-1}),U.prototype.usesSamePort=function(a){var b=this.qa,c=a.qa;if(b>0&&c>0){if(this.o(0).di(a.o(0))||this.o(b-1).di(a.o(c-1)))return h}else if(this.da===a.da||this.ja===a.ja)return h;return s},y.g(U,"adjusting",U.prototype.pu),y.defineProperty(U,{pu:"adjusting"},w("Po"),function(a){var b=this.Po;b!==a&&(x&&y.rb(a,U,U,"adjusting"),this.Po=a,this.i("adjusting",b,a))}),y.g(U,"corner",U.prototype.UB),y.defineProperty(U,{UB:"corner"},w("$o"),function(a){var b=this.$o;b!==a&&(x&&y.j(a,"number",U,"corner"),this.$o=a,this.Lf(),this.i("corner",b,a))}),y.g(U,"curve",U.prototype.Se),y.defineProperty(U,{Se:"curve"},w("cp"),function(a){var b=this.cp;b!==a&&(x&&y.rb(a,U,U,"curve"),this.cp=a,this.Ub(),km(this,b===jk||b===kk||a===jk||a===kk),this.i("curve",b,a))}),y.g(U,"curviness",U.prototype.Fu),y.defineProperty(U,{Fu:"curviness"},w("dp"),function(a){var b=this.dp;b!==a&&(x&&y.j(a,"number",U,"curviness"),this.dp=a,this.Ub(),this.i("curviness",b,a))}),y.g(U,"routing",U.prototype.jh),y.defineProperty(U,{jh:"routing"},w("fn"),function(a){var b=this.fn;b!==a&&(x&&y.rb(a,U,U,"routing"),this.fn=a,this.Ah=q,this.Ub(),km(this,b===ik||b===xf||a===ik||a===xf),this.i("routing",b,a))}),y.g(U,"smoothness",U.prototype.os),y.defineProperty(U,{os:"smoothness"},w("Nq"),function(a){var b=this.Nq;b!==a&&(x&&y.j(a,"number",U,"smoothness"),this.Nq=a,this.Lf(),this.i("smoothness",b,a))}),y.Md(Sl,{po:h,kv:h,Wr:h,lv:h,links:h,spacing:h}),y.Md(tm,{group:h,Gr:h,abort:h,EE:h,ZD:h,QC:h}),Am=1,Bm=1,ym=999999999,Jm=ym,tm.prototype.initialize=function(a){var b,c,d,e,f;if(!(0>=a.width||0>=a.height)){if(b=a.y,c=a.x+a.width,d=a.y+a.height,this.zf=Math.floor((a.x-this.Dd)/this.Dd)*this.Dd,this.Af=Math.floor((b-this.Ed)/this.Ed)*this.Ed,this.Wp=Math.ceil((c+2*this.Dd)/this.Dd)*this.Dd,this.Xp=Math.ceil((d+2*this.Ed)/this.Ed)*this.Ed,a=1+(0|Math.ceil((this.Wp-this.zf)/this.Dd)),b=1+(0|Math.ceil((this.Xp-this.Af)/this.Ed)),this.Xb===q||this.pn<a-1||this.qn<b-1){for(c=[],d=0;a>=d;d++){for(e=[],f=0;b>=f;f++)e[f]=0;c[d]=e}this.Xb=c,this.pn=a-1,this.qn=b-1}if(this.Xb!==q)for(a=0;a<=this.pn;a++)for(b=0;b<=this.qn;b++)this.Xb[a][b]=Jm}},y.A(tm,{Ib:q},function(){return new B(this.zf,this.Af,this.Wp-this.zf,this.Xp-this.Af)}),y.g(tm,"cellWidth",tm.prototype.yl),y.defineProperty(tm,{yl:q},w("Dd"),function(a){a>0&&a!==this.Dd&&(this.Dd=a,this.initialize(this.Ib))}),y.g(tm,"cellHeight",tm.prototype.xl),y.defineProperty(tm,{xl:q},w("Ed"),function(a){a>0&&a!==this.Ed&&(this.Ed=a,this.initialize(this.Ib))}),y.Md(pm,{vc:h,port:h,Of:h,Ur:h}),pm.prototype.toString=function(){var a,b,c,d;for(a=this.Of,b=this.vc.toString()+" "+a.length.toString()+":",c=0;c<a.length;c++)d=a[c],d!==q&&(b+="\n  "+d.toString());return b},pm.prototype.ZG=function(a,b){return a===b?0:a===q?-1:b===q?1:a.je<b.je?-1:a.je>b.je?1:a.angle<b.angle?-1:a.angle>b.angle?1:0},pm.prototype.computeEndSegmentLength=function(a){var e,f,b=a.link,c=b.computeEndSegmentLength(this.vc,this.port,Hb,b.Nc===this.port),d=a.Nl;return 0>d?c:(e=a.rr,1>=e||!b.Jb?c:(b=a.jv,f=a.io,(a.je===y.Sc||a.je===y.$c)&&(d=e-1-d),((a=a.je===y.Sc||a.je===y.ad)?b.y<f.y:b.x<f.x)?c+8*d:(a?b.y===f.y:b.x===f.x)?c:c+8*(e-1-d)))},y.Md(Om,{link:h,angle:h,je:h,jv:h,Nl:h,rr:h,io:h,Ku:h}),Om.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.je.toString()+":"+this.Nl.toString()+"/"+this.rr.toString()+" "+this.io.toString()+" "+this.Ku.toString()+" "+this.jv.toString()},y.ba("Group",He),y.Ka(He,T),He.prototype.cloneProtected=function(a){T.prototype.cloneProtected.call(this,a),a.Yp=this.Yp,a.$p=this.$p,a.fk=this.fk,a.$q=this.$q,a.Cp=this.Cp,a.ar=this.ar,a.Qq=this.Qq;var b=dl(a,a,function(a){return a instanceof Ag});a.mb=b instanceof Ag?b:q,a.Yo=this.Yo,this.qd!==q?(a.qd=this.qd.copy(),a instanceof He&&(a.qd.group=a)):(a.qd!==q&&(a.qd.group=q),a.qd=q)},He.prototype.ah=function(a){var b,c;for(T.prototype.ah.call(this,a),b=a.Qn(),a=a.Dc;a.next();)if(c=a.value,c.aa(),c.J(Sj),c.be(),c instanceof He&&(c.Gv=c.Ue,Pm(c,b)),c instanceof T)c.qg(b);else if(c instanceof U)for(c=c.tj;c.next();)c.value.qg(b)},He.prototype.Vl=function(a,b,c,d,e,f,g){if(a===td&&"elements"===b){if(e instanceof Ag)this.mb===q?this.mb=e:this.mb!==e&&y.m("Cannot insert a second Placeholder into the visual tree of a Group.");else if(e instanceof D){var h=dl(e,e,function(a){return a instanceof Ag});h instanceof Ag&&(this.mb===q?this.mb=h:this.mb!==h&&y.m("Cannot insert a second Placeholder into the visual tree of a Group."))}}else a===ud&&"elements"===b&&this.mb!==q&&(d===this.mb?this.mb=q:d instanceof D&&this.mb.hi(d)&&(this.mb=q));T.prototype.Vl.call(this,a,b,c,d,e,f,g)},He.prototype.gj=function(a,b,c,d){this.ek=this.mb,D.prototype.gj.call(this,a,b,c,d)},He.prototype.Bk=function(){var a,b;if(!T.prototype.Bk.call(this))return s;for(a=this.Dc;a.next();)if(b=a.value,b instanceof T){if(b.xb()&&bi(b))return s}else if(b instanceof U&&b.xb()&&bi(b)&&b.da!==this&&b.ja!==this)return s;return h},y.A(He,{placeholder:"placeholder"},w("mb")),y.g(He,"computesBoundsAfterDrag",He.prototype.oy),y.defineProperty(He,{oy:"computesBoundsAfterDrag"},w("Yo"),function(a){var b=this.Yo;b!==a&&(y.j(a,"boolean",He,"computesBoundsAfterDrag"),this.Yo=a,this.i("computesBoundsAfterDrag",b,a))}),y.A(He,{Dc:"memberParts"},function(){return this.Zp.k}),He.prototype.El=function(){var a,b;if(0<this.Zp.count){if(a=this.h,a===q)return;for(b=this.Zp.copy().k;b.next();)a.remove(b.value)}T.prototype.El.call(this)},He.prototype.zv=function(){var a=this.layer;a!==q&&a.zv(this)},y.g(He,"layout",He.prototype.Nb),y.defineProperty(He,{Nb:"layout"},w("qd"),function(a){var b=this.qd;b!==a&&(a!==q&&y.l(a,rh,He,"layout"),b!==q&&(b.h=q,b.group=q),this.qd=a,a!==q&&(a.h=this.h,a.group=this),this.i("layout",b,a))}),y.g(He,"memberAdded",He.prototype.aD),y.defineProperty(He,{aD:"memberAdded"},w("Yp"),function(a){var b=this.Yp;b!==a&&(a!==q&&y.j(a,"function",He,"memberAdded"),this.Yp=a,this.i("memberAdded",b,a))}),y.g(He,"memberRemoved",He.prototype.bD),y.defineProperty(He,{bD:"memberRemoved"},w("$p"),function(a){var b=this.$p;b!==a&&(a!==q&&y.j(a,"function",He,"memberRemoved"),this.$p=a,this.i("memberRemoved",b,a))}),y.g(He,"memberValidation",He.prototype.Pr),y.defineProperty(He,{Pr:"memberValidation"},w("fk"),function(a){var b=this.fk;b!==a&&(a!==q&&y.j(a,"function",He,"memberValidation"),this.fk=a,this.i("memberValidation",b,a))}),He.prototype.canAddMembers=He.prototype.TH=function(a){var b=this.h;if(b===q)return s;for(b=b.Pe,a=Me(a).k;a.next();)if(!b.isValidMember(this,a.value))return s;return h},He.prototype.addMembers=He.prototype.RH=function(a,b){var d,e,f,c=this.h;if(c===q)return s;for(c=c.Pe,d=h,e=Me(a).k;e.next();)f=e.value,!b||c.isValidMember(this,f)?f.bb=this:d=s;return d},y.g(He,"ungroupable",He.prototype.sE),y.defineProperty(He,{sE:"ungroupable"},w("$q"),function(a){var b=this.$q;b!==a&&(y.j(a,"boolean",He,"ungroupable"),this.$q=a,this.i("ungroupable",b,a))}),He.prototype.canUngroup=function(){if(!this.sE)return s;var a=this.layer;return a===q||a.An?(a=a.h,a===q||a.An?h:s):s},He.prototype.findExternalLinksConnected=He.prototype.vI=function(){var b,c,d,e,a=this.Qn();for(a.add(this),b=new na(U),c=a.k;c.next();)if(d=c.value,d instanceof fa.LE)for(d=d.Qd;d.next();)e=d.value,a.contains(e)||b.add(e);return b.k},He.prototype.findExternalNodesConnected=He.prototype.wI=function(){var b,c,d,e,f,a=this.Qn();for(a.add(this),b=new na(T),c=a.k;c.next();)if(d=c.value,d instanceof fa.LE)for(d=d.Qd;d.next();)e=d.value,f=e.da,(!a.contains(f)||f===this)&&b.add(f),e=e.ja,(!a.contains(e)||e===this)&&b.add(e);return b.k},He.prototype.findSubGraphParts=He.prototype.Qn=function(){var a=new na(R);return Fe(a,this,h,0),a.remove(this),a},He.prototype.collapseSubGraph=He.prototype.collapseSubGraph=function(){var b,a=this.h;a===q||a.xd||(a.xd=h,b=this.Qn(),Pm(this,b),a.xd=s)},He.prototype.expandSubGraph=He.prototype.expandSubGraph=function(){var b,a=this.h;a===q||a.xd||(a.xd=h,b=this.Qn(),Qm(this,b),a.xd=s)},y.g(He,"isSubGraphExpanded",He.prototype.Ue),y.defineProperty(He,{Ue:"isSubGraphExpanded"},w("Cp"),function(a){var c,d,b=this.Cp;b!==a&&(y.j(a,"boolean",He,"isSubGraphExpanded"),this.Cp=a,c=this.h,this.i("isSubGraphExpanded",b,a),b=this.dE,b!==q&&(d=h,c!==q&&(d=c.Ra,c.Ra=h),b(this),c!==q&&(c.Ra=d)),c!==q&&c.va.cb||(a?this.expandSubGraph():this.collapseSubGraph()))}),y.g(He,"wasSubGraphExpanded",He.prototype.Gv),y.defineProperty(He,{Gv:"wasSubGraphExpanded"},w("ar"),function(a){var b=this.ar;b!==a&&(y.j(a,"boolean",He,"wasSubGraphExpanded"),this.ar=a,this.i("wasSubGraphExpanded",b,a))}),y.g(He,"subGraphExpandedChanged",He.prototype.dE),y.defineProperty(He,{dE:"subGraphExpandedChanged"},w("Qq"),function(a){var b=this.Qq;b!==a&&(a!==q&&y.j(a,"function",He,"subGraphExpandedChanged"),this.Qq=a,this.i("subGraphExpandedChanged",b,a))}),He.prototype.move=He.prototype.move=function(a){var d,e,b=this.position,c=b.x;for(isNaN(c)&&(c=0),b=b.y,isNaN(b)&&(b=0),c=a.x-c,b=a.y-b,T.prototype.move.call(this,a),a=this.Qn().k;a.next();)d=a.value,e=d.position,T.prototype.move.call(d,new A(e.x+c,e.y+b))},y.ba("Placeholder",Ag),y.Ka(Ag,P),Ag.prototype.cloneProtected=function(a){P.prototype.cloneProtected.call(this,a),a.ne=this.ne.U(),a.Aq=this.Aq.copy()},Ag.prototype.hj=function(a){if(this.background===q&&this.ej===q)return s;var b=this.Ta;return kb(0,0,b.width,b.height,a.x,a.y)},Ag.prototype.Nr=function(){var b,c,d,e,f,g,i,j,k,a=this.W;if(!(a!==q&&(a instanceof He||a instanceof Ge)||!y.m("Placeholder is not inside a Group or Adornment.")),a instanceof He){if(b=this.Aq,c=this.W,c instanceof He&&c.oy&&this.Aq.V()&&(d=c.h,d!==q&&(d=d.Ma,d instanceof af&&!d.hp&&d.gc!==q&&!d.gc.contains(c))))b.assign(this.Aq);else{if(c=y.df(),d=this.W,d instanceof He){for(e=1/0,f=1/0,g=-1/0,i=-1/0,j=d.Dc;j.next();)if(k=j.value,k.xb()){if(k instanceof U){if(ai(k))continue;if(k.da===d||k.ja===d)continue}k=k.ua,k.left<e&&(e=k.left),k.top<f&&(f=k.top),k.right>g&&(g=k.right),k.bottom>i&&(i=k.bottom)}isFinite(e)&&isFinite(f)?c.q(e,f,g-e,i-f):(d=d.location,e=this.padding,c.q(d.x+e.left,d.y+e.top,0,0))}else c.q(0,0,0,0);d=this.padding,b.q(c.x-d.left,c.y-d.top,c.width+d.left+d.right,c.height+d.top+d.bottom),y.Bc(c)}for(c=this.Ic,Za(c,b.width||0,b.height||0),jj(this,0,0,c.width,c.height),c=a.Dc,d=s;c.next();)if(c.value.xb()){d=h;break}d&&!isNaN(b.x)&&!isNaN(b.y)&&(c=new A,c.ls(b,a.We),a.location=new A(c.x,c.y))}else b=this.Aa,c=this.Ic,a=this.padding,d=a.left+a.right,e=a.top+a.bottom,b.V()?(Za(c,b.width+d||0,b.height+e||0),jj(this,-a.left,-a.top,c.width,c.height)):(f=this.W,g=f.zc,i=g.hb(Mb,y.M()),b=y.xj(i.x,i.y,0,0),b.yj(g.hb(Zb,i)),b.yj(g.hb(Rb,i)),b.yj(g.hb(Vb,i)),f.Fh.q(b.x,b.y),Za(c,b.width+d||0,b.height+e||0),jj(this,-a.left,-a.top,c.width,c.height),y.B(i),y.Bc(b))},Ag.prototype.gj=function(a,b,c,d){var e=this.ua;e.x=a,e.y=b,e.width=c,e.height=d},y.g(Ag,"padding",Ag.prototype.padding),y.defineProperty(Ag,{padding:"padding"},w("ne"),function(a){"number"==typeof a?(0>a&&y.ka(a,">= 0",Ag,"padding"),a=new ab(a)):(y.l(a,ab,Ag,"padding"),0>a.left&&y.ka(a.left,">= 0",Ag,"padding:val.left"),0>a.right&&y.ka(a.right,">= 0",Ag,"padding:val.right"),0>a.top&&y.ka(a.top,">= 0",Ag,"padding:val.top"),0>a.bottom&&y.ka(a.bottom,">= 0",Ag,"padding:val.bottom"));var b=this.ne;b.L(a)||(this.ne=a=a.U(),this.i("padding",b,a))}),y.ba("Layout",rh),rh.prototype.cloneProtected=function(a){a.zp=this.zp,a.xp=this.xp,this.xp||(a.Nm=h),a.Gp=this.Gp,a.Ro.assign(this.Ro),a.Ap=this.Ap},rh.prototype.copy=function(){var a=new this.constructor;return this.cloneProtected(a),a},rh.prototype.toString=function(){var a=y.bh(Object.getPrototypeOf(this)),a=a+"(";return this.group!==q&&(a+=" in "+this.group),this.h!==q&&(a+=" for "+this.h),a+")"},y.g(rh,"diagram",rh.prototype.h),y.defineProperty(rh,{h:"diagram"},w("ca"),function(a){this.ca!==a&&(a!==q&&y.l(a,E,rh,"diagram"),this.ca=a)}),y.g(rh,"group",rh.prototype.group),y.defineProperty(rh,{group:"group"},w("Pw"),function(a){this.Pw!==a&&(a!==q&&y.l(a,He,rh,"group"),this.Pw=a)}),y.g(rh,"isOngoing",rh.prototype.NC),y.defineProperty(rh,{NC:"isOngoing"},w("zp"),function(a){this.zp!==a&&(y.j(a,"boolean",rh,"isOngoing"),this.zp=a)}),y.g(rh,"isInitial",rh.prototype.LC),y.defineProperty(rh,{LC:"isInitial"},w("xp"),function(a){y.j(a,"boolean",rh,"isInitial"),this.xp=a,a||(this.Nm=h)}),y.g(rh,"isValidLayout",rh.prototype.Ve),y.defineProperty(rh,{Ve:"isValidLayout"},w("Nm"),function(a){this.Nm!==a&&(y.j(a,"boolean",rh,"isValidLayout"),this.Nm=a,a||(a=this.h,a!==q&&(a.Fs=h)))}),rh.prototype.invalidateLayout=rh.prototype.J=function(){if(this.Nm){var a=this.h;a!==q&&!a.va.cb&&(this.NC&&a.fg||this.LC&&!a.fg)&&(this.Ve=s,a.jc(h))}},y.g(rh,"isRealtime",rh.prototype.Ny),y.defineProperty(rh,{Ny:"isRealtime"},w("Ap"),function(a){this.Ap!==a&&(y.j(a,"boolean",rh,"isRealtime"),this.Ap=a)}),y.g(rh,"isViewportSized",rh.prototype.Lr),y.defineProperty(rh,{Lr:"isViewportSized"},w("Gp"),function(a){this.Gp!==a&&(y.j(a,"boolean",rh,"isViewportSized"),(this.Gp=a)&&this.J())}),y.g(rh,"isRouting",rh.prototype.Kr),y.defineProperty(rh,{Kr:"isRouting"},w("Ww"),function(a){this.Ww!==a&&(y.j(a,"boolean",rh,"isRouting"),this.Ww=a)}),y.g(rh,"network",rh.prototype.network),y.defineProperty(rh,{network:"network"},w("kx"),function(a){var b=this.kx;b!==a&&(a!==q&&y.l(a,Rm,rh,"network"),b!==q&&Sm(b,q),this.kx=a,a!==q&&Sm(a,this))}),rh.prototype.createNetwork=function(){var a=new Rm;return Sm(a,this),a},rh.prototype.makeNetwork=function(a){var b=this.createNetwork();return a instanceof E?(b.gr(a.uj,h),b.gr(a.links,h)):a instanceof He?b.gr(a.Dc):b.gr(a.k),b},rh.prototype.updateParts=function(){var b,c,a=this.h;if(a===q&&this.network!==q)for(b=this.network.vertexes.k;b.next()&&(c=b.value.vc,c===q||(a=c.h,a===q)););this.Ve=h,a!==q&&a.kc("Layout"),this.commitLayout(),a!==q&&a.se("Layout")},rh.prototype.commitLayout=aa(),rh.prototype.doLayout=function(a){var b,c,d,e,f,g,i,j,k,l;if(a||y.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),b=new na(R),a===this.h?(Tm(this,b,a.uj,h,this.Yy,h,s,h),Tm(this,b,a.as,h,this.Yy,h,s,h)):a===this.group?Tm(this,b,a.Dc,s,this.Yy,h,s,h):b.Me(a.k),c=b.count,c>0){for(a=this.h,a!==q&&a.kc("Layout"),c=Math.ceil(Math.sqrt(c)),d=this.ed.x,e=d,f=this.ed.y,g=0,i=0,b=b.k;b.next();)j=b.value,j.ci(),k=j.Ba,l=k.width,k=k.height,j.moveTo(e,f),delete j.RA,e+=Math.max(l,50)+20,i=Math.max(i,Math.max(k,50)),g>=c-1?(g=0,e=d,f+=i+20,i=0):g++;a!==q&&a.se("Layout")}this.Ve=h},rh.prototype.Yy=function(a){return!a.location.V()||a instanceof He&&a.RA?h:s},y.g(rh,"arrangementOrigin",rh.prototype.ed),y.defineProperty(rh,{ed:"arrangementOrigin"},w("Ro"),function(a){this.Ro.L(a)||(y.l(a,A,rh,"arrangementOrigin"),this.Ro.assign(a),this.J())}),y.ba("LayoutNetwork",Rm),Rm.prototype.clear=function(){var a,b;if(this.vertexes)for(a=this.vertexes.k;a.next();)b=a.value,b.clear(),b.network=q;if(this.edges)for(a=this.edges.k;a.next();)b=a.value,b.clear(),b.network=q;this.vertexes=new na(Vm),this.edges=new na(Wm),this.az=new ma(T,Vm),this.Qy=new ma(U,Wm)},Rm.prototype.toString=function(){return"LayoutNetwork"+(this.Nb!==q?"("+this.Nb.toString()+")":"")},y.A(Rm,{Nb:"layout"},w("qd")),Rm.prototype.createVertex=function(){return new Vm},Rm.prototype.createEdge=function(){return new Wm},Rm.prototype.addParts=Rm.prototype.gr=function(a,b){var c,d,e,g;if(a!==q){for(b===f&&(b=s),y.j(b,"boolean",Rm,"addParts:toplevelonly"),c=a.k;c.next();)d=c.value,d instanceof T&&(!b||d.$n)&&d.canLayout()&&!d.ii&&(d instanceof He&&d.Nb===q?this.gr(d.Dc,s):this.Jl(d)===q&&(e=this.createVertex(),e.vc=d,this.qk(e)));for(c.reset();c.next();)d=c.value,d instanceof U&&(!b||d.$n)&&d.canLayout()&&this.Lu(d)===q&&(g=d.da,e=d.ja,g!==e&&(g=this.Mu(g),e=this.Mu(e),g!==q&&e!==q&&this.Sl(g,e,d)))}},Rm.prototype.findGroupVertex=Rm.prototype.Mu=function(a){if(a===q)return q;if(a=Hl(a),a===q)return q;var b=this.Jl(a);return b!==q?b:(a=a.bb,a!==q&&(b=this.Jl(a),b!==q)?b:q)},Rm.prototype.addVertex=Rm.prototype.qk=function(a){if(a!==q){x&&y.l(a,Vm,Rm,"addVertex:vertex"),this.vertexes.add(a);var b=a.vc;b!==q&&this.az.add(b,a),a.network=this}},Rm.prototype.addNode=Rm.prototype.un=function(a){if(a===q)return q;x&&y.l(a,T,Rm,"addNode:node");var b=this.Jl(a);return b===q&&(b=this.createVertex(),b.vc=a,this.qk(b)),b},Rm.prototype.deleteVertex=Rm.prototype.cC=function(a){var b,c,d;if(a!==q&&(x&&y.l(a,Vm,Rm,"deleteVertex:vertex"),Xm(this,a))){for(b=a.De,c=b.count-1;c>=0;c--)d=b.sa(c),this.Jn(d);for(b=a.ue,c=b.count-1;c>=0;c--)d=b.sa(c),this.Jn(d)}},Rm.prototype.deleteNode=Rm.prototype.bI=function(a){a!==q&&(x&&y.l(a,T,Rm,"deleteNode:node"),a=this.Jl(a),a!==q&&this.cC(a))},Rm.prototype.findVertex=Rm.prototype.Jl=function(a){return a===q?q:(x&&y.l(a,T,Rm,"findVertex:node"),this.az.wa(a))},Rm.prototype.addEdge=Rm.prototype.tn=function(a){if(a!==q){x&&y.l(a,Wm,Rm,"addEdge:edge"),this.edges.add(a);var b=a.link;b!==q&&this.Lu(b)===q&&this.Qy.add(b,a),b=a.toVertex,b!==q&&b.zB(a),b=a.fromVertex,b!==q&&b.vB(a),a.network=this}},Rm.prototype.addLink=Rm.prototype.QH=function(a){if(a===q)return q;x&&y.l(a,U,Rm,"addLink:link");var b=a.da,c=a.ja,d=this.Lu(a);return d===q?(d=this.createEdge(),d.link=a,b!==q&&(d.fromVertex=this.un(b)),c!==q&&(d.toVertex=this.un(c)),this.tn(d)):(d.fromVertex=b!==q?this.un(b):q,d.toVertex=c!==q?this.un(c):q),d},Rm.prototype.deleteEdge=Rm.prototype.Jn=function(a){if(a!==q){x&&y.l(a,Wm,Rm,"deleteEdge:edge");var b=a.toVertex;b!==q&&b.bC(a),b=a.fromVertex,b!==q&&b.aC(a),Ym(this,a)}},Rm.prototype.deleteLink=Rm.prototype.aI=function(a){a!==q&&(x&&y.l(a,U,Rm,"deleteLink:link"),a=this.Lu(a),a!==q&&this.Jn(a))},Rm.prototype.findEdge=Rm.prototype.Lu=function(a){return a===q?q:(x&&y.l(a,U,Rm,"findEdge:link"),this.Qy.wa(a))},Rm.prototype.linkVertexes=Rm.prototype.Sl=function(a,b,c){if(a===q||b===q)return q;if(x&&(y.l(a,Vm,Rm,"linkVertexes:fromVertex"),y.l(b,Vm,Rm,"linkVertexes:toVertex"),c!==q&&y.l(c,U,Rm,"linkVertexes:link")),a.network===this&&b.network===this){var d=this.createEdge();return d.link=c,d.fromVertex=a,d.toVertex=b,this.tn(d),d}return q},Rm.prototype.reverseEdge=Rm.prototype.pv=function(a){if(a!==q){x&&y.l(a,Wm,Rm,"reverseEdge:edge");var b=a.fromVertex,c=a.toVertex;b===q||c===q||(b.aC(a),c.bC(a),a.pv(),b.zB(a),c.vB(a))}},Rm.prototype.deleteSelfEdges=Rm.prototype.Iu=function(){var a,b,c;for(a=y.tb(),b=this.edges.k;b.next();)c=b.value,c.fromVertex===c.toVertex&&a.push(c);for(b=a.length,c=0;b>c;c++)this.Jn(a[c]);y.ya(a)},Rm.prototype.deleteArtificialVertexes=Rm.prototype.gG=function(){var a,b,c,d;for(a=y.tb(),b=this.vertexes.k;b.next();)c=b.value,c.vc===q&&a.push(c);for(c=a.length,b=0;c>b;b++)this.cC(a[b]);for(c=y.tb(),b=this.edges.k;b.next();)d=b.value,d.link===q&&c.push(d);for(d=c.length,b=0;d>b;b++)this.Jn(c[b]);y.ya(a),y.ya(c)},Rm.prototype.splitIntoSubNetworks=Rm.prototype.vH=function(){var a,b,c,d;for(this.gG(),Zm(this),this.Iu(),a=new F(Rm),b=h;b;)for(b=s,c=this.vertexes.k;c.next();)if(d=c.value,0<d.De.count||0<d.ue.count){b=this.Nb.createNetwork(),a.add(b),$m(this,b,d),b=h;break}return a.sort(function(a,b){return a===q||b===q||a===b?0:b.vertexes.count-a.vertexes.count}),a},Rm.prototype.getParts=Rm.prototype.findAllParts=Rm.prototype.sI=function(){for(var a=new na(R),b=this.vertexes.k;b.next();)a.add(b.value.vc);for(b=this.edges.k;b.next();)a.add(b.value.link);return a},y.ba("LayoutVertex",Vm),Vm.prototype.clear=function(){this.Wc=q,this.De=new F(Wm),this.ue=new F(Wm)},Vm.prototype.toString=function(){return"LayoutVertex#"+y.ac(this)+(this.vc!==q?"("+this.vc.toString()+")":"")},y.g(Vm,"node",Vm.prototype.vc),y.defineProperty(Vm,{vc:"node"},w("Wc"),function(a){if(this.Wc!==a){x&&a!==q&&y.l(a,T,Vm,"node"),this.Wc=a,a.ci();var b=a.ua,c=b.x,d=b.y,e=b.width,b=b.height;isNaN(c)&&(c=0),isNaN(d)&&(d=0),this.S.q(c,d,e,b),c=a.Vb,c===a||a instanceof He?this.N.q(e/2,b/2):(a=c.ua,this.N.q(a.x+a.width/2,a.y+a.height/2))}}),y.g(Vm,"bounds",Vm.prototype.Ib),y.defineProperty(Vm,{Ib:"bounds"},w("S"),function(a){this.S.L(a)||(x&&y.l(a,B,Vm,"bounds"),this.S.assign(a))}),y.g(Vm,"focus",Vm.prototype.focus),y.defineProperty(Vm,{focus:"focus"},w("N"),function(a){this.N.L(a)||(x&&y.l(a,A,Vm,"focus"),this.N.assign(a))}),y.g(Vm,"centerX",Vm.prototype.xa),y.defineProperty(Vm,{xa:"centerX"},function(){return this.S.x+this.N.x},function(a){var b=this.S;b.x+this.N.x!==a&&(x&&y.p(a,Vm,"centerX"),b.Pa(),b.x=a-this.N.x,b.freeze())}),y.g(Vm,"centerY",Vm.prototype.Ga),y.defineProperty(Vm,{Ga:"centerY"},function(){return this.S.y+this.N.y},function(a){var b=this.S;b.y+this.N.y!==a&&(x&&y.p(a,Vm,"centerY"),b.Pa(),b.y=a-this.N.y,b.freeze())}),y.g(Vm,"focusX",Vm.prototype.rG),y.defineProperty(Vm,{rG:"focusX"},function(){return this.N.x},function(a){var b=this.N;b.x!==a&&(b.Pa(),b.x=a,b.freeze())}),y.g(Vm,"focusY",Vm.prototype.sG),y.defineProperty(Vm,{sG:"focusY"},function(){return this.N.y},function(a){var b=this.N;b.y!==a&&(b.Pa(),b.y=a,b.freeze())}),y.g(Vm,"x",Vm.prototype.x),y.defineProperty(Vm,{x:"x"},function(){return this.S.x},function(a){var b=this.S;b.x!==a&&(b.Pa(),b.x=a,b.freeze())}),y.g(Vm,"y",Vm.prototype.y),y.defineProperty(Vm,{y:"y"},function(){return this.S.y},function(a){var b=this.S;b.y!==a&&(b.Pa(),b.y=a,b.freeze())}),y.g(Vm,"width",Vm.prototype.width),y.defineProperty(Vm,{width:"width"},function(){return this.S.width},function(a){var b=this.S;b.width!==a&&(b.Pa(),b.width=a,b.freeze())}),y.g(Vm,"height",Vm.prototype.height),y.defineProperty(Vm,{height:"height"},function(){return this.S.height},function(a){var b=this.S;b.height!==a&&(b.Pa(),b.height=a,b.freeze())}),Vm.prototype.commit=function(){var b,a=this.vc;a!==q&&(b=this.Ib,a.moveTo(b.x,b.y))},Vm.prototype.addSourceEdge=Vm.prototype.zB=function(a){a!==q&&(x&&y.l(a,Wm,Vm,"addSourceEdge:edge"),this.De.contains(a)||this.De.add(a))},Vm.prototype.deleteSourceEdge=Vm.prototype.bC=function(a){a!==q&&(x&&y.l(a,Wm,Vm,"deleteSourceEdge:edge"),this.De.remove(a))},Vm.prototype.addDestinationEdge=Vm.prototype.vB=function(a){a!==q&&(x&&y.l(a,Wm,Vm,"addDestinationEdge:edge"),this.ue.contains(a)||this.ue.add(a))},Vm.prototype.deleteDestinationEdge=Vm.prototype.aC=function(a){a!==q&&(x&&y.l(a,Wm,Vm,"deleteDestinationEdge:edge"),this.ue.remove(a))},y.A(Vm,{uH:"sourceVertexes"},function(){var a,b,c;for(a=new na(Vm),b=this.cc;b.next();)c=b.value.fromVertex,c!==q&&!a.contains(c)&&a.add(c);return a.k}),y.A(Vm,{hG:"destinationVertexes"},function(){var a,b,c;for(a=new na(Vm),b=this.Tb;b.next();)c=b.value.toVertex,c!==q&&!a.contains(c)&&a.add(c);return a.k}),y.A(Vm,{vertexes:"vertexes"},function(){var a,b,c;for(a=new na(Vm),b=this.cc;b.next();)c=b.value,c=c.fromVertex,c!==q&&!a.contains(c)&&a.add(c);for(b=this.Tb;b.next();)c=b.value,c=c.toVertex,c!==q&&!a.contains(c)&&a.add(c);return a.k}),y.A(Vm,{cc:"sourceEdges"},function(){return this.De.k}),y.A(Vm,{Tb:"destinationEdges"},function(){return this.ue.k}),y.A(Vm,{edges:"edges"},function(){var a,b,c;for(a=new F(Wm),b=this.cc;b.next();)c=b.value,a.add(c);for(b=this.Tb;b.next();)c=b.value,a.add(c);return a.k}),y.A(Vm,{nG:"edgesCount"},function(){return this.De.count+this.ue.count}),Vm.standardComparer=an=function(a,b){x&&y.l(a,Vm,Vm,"standardComparer:m"),x&&y.l(b,Vm,Vm,"standardComparer:n");var c=a.Wc,d=b.Wc;return c?d?(c=c.text,d=d.text,d>c?-1:c>d?1:0):1:d!==q?-1:0},Vm.smartComparer=function(a,b){var c,d,e,g,h;if(x&&y.l(a,Vm,Vm,"smartComparer:m"),x&&y.l(b,Vm,Vm,"smartComparer:n"),a!==q){if(b!==q){if(c=a.Wc,d=b.Wc,c!==q){if(d!==q){for(c=c.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=d.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=0;e<c.length;e++)if(""!==d[e]&&d[e]!==f)if(g=parseFloat(c[e]),h=parseFloat(d[e]),isNaN(g)){if(!isNaN(h))return 1;if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else{if(isNaN(h))return-1;if(0!==g-h)return g-h}else if(""!==c[e])return 1;return""!==d[e]&&d[e]!==f?-1:0}return 1}return d!==q?-1:0}return 1}return b!==q?-1:0},y.ba("LayoutEdge",Wm),Wm.prototype.clear=function(){this.toVertex=this.fromVertex=this.link=q},Wm.prototype.toString=function(){return"LayoutEdge#"+y.ac(this)+(this.link!==q?"("+this.link.toString()+")":"")},Wm.prototype.pv=function(){var a=this.fromVertex;this.fromVertex=this.toVertex,this.toVertex=a},Wm.prototype.commit=aa(),Wm.prototype.getOtherVertex=Wm.prototype.wG=function(a){return x&&y.l(a,Vm,Wm,"getOtherVertex:v"),this.toVertex===a?this.fromVertex:this.fromVertex===a?this.toVertex:q},y.ba("GridLayout",Zi),y.Ka(Zi,rh),Zi.prototype.cloneProtected=function(a){rh.prototype.cloneProtected.call(this,a),a.dr=this.dr,a.cr=this.cr,a.qi.assign(this.qi),a.Tg.assign(this.Tg),a.Ud=this.Ud,a.Tc=this.Tc,a.Sg=this.Sg,a.Cg=this.Cg},Zi.prototype.doLayout=function(a){var b,c,d,e,f,g,i,j,k,l,m,n,o,p,r,t,w,u,v,x,z,A,B,C;for(a||y.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),b=this.h,b===q&&y.m("The diagram for this layout is not set."),this.ed=Um(this,this.ed),c=new na(R),a===this.h?(Tm(this,c,a.uj,h,q,h,s,h),Tm(this,c,a.links,h,q,h,s,h),Tm(this,c,a.as,h,q,h,s,h)):a===this.group?Tm(this,c,a.Dc,s,q,h,s,h):c.Me(a.k),a=c.copy().k;a.next();)if(d=a.value,d instanceof U&&(d.da!==q||d.ja!==q))c.remove(d);else if(d.ci(),d instanceof He)for(d=d.Dc;d.next();)c.remove(d.value);if(c=c.Ee(),0!==c.length){switch(this.sorting){case tk:c.reverse();break;case qk:c.sort(this.comparer);break;case rk:c.sort(this.comparer),c.reverse()}switch(d=this.FE,isNaN(d)&&(d=0),a=this.Jz,a=isNaN(a)?Math.max(this.h.eb.width-b.padding.left-b.padding.right,0):Math.max(this.Jz,0),0>=d&&0>=a&&(d=1),e=this.spacing.width,isFinite(e)||(e=0),f=this.spacing.height,isFinite(f)||(f=0),b.kc("Layout"),this.alignment){case xk:if(g=Math.max(this.tk.width,1),!isFinite(g))for(i=g=0;i<c.length;i++)j=c[i],k=j.Ba,g=Math.max(g,k.width);if(g=Math.max(g+e,1),l=Math.max(this.tk.height,1),!isFinite(l))for(i=l=0;i<c.length;i++)j=c[i],k=j.Ba,l=Math.max(l,k.height);for(l=Math.max(l+f,1),m=this.qe,n=this.ed.x,o=n,p=this.ed.y,r=0,t=0,i=0;i<c.length;i++){switch(j=c[i],k=j.Ba,u=Math.ceil((k.width+e)/g)*g,v=Math.ceil((k.height+f)/l)*l,m){case vk:w=Math.abs(o-k.width)+n;break;default:w=o+k.width-n}switch((d>0&&r>d-1||a>0&&r>0&&w>a)&&(r=0,o=n,p+=t,t=0),t=Math.max(t,v),m){case vk:k=-k.width;
break;default:k=0}switch(j.moveTo(o+k,p),m){case vk:o-=u;break;default:o+=u}r++}break;case wk:for(g=Math.max(this.tk.width,1),i=t=r=0,j=y.M(),l=0;l<c.length;l++)m=c[l],n=m.Ba,o=Il(m,m.Vb,m.We,j),r=Math.max(r,o.x),t=Math.max(t,n.width-o.x),i=Math.max(i,o.y);switch(p=this.qe){case vk:r+=e;break;default:t+=e}for(g=isFinite(g)?Math.max(g+e,1):Math.max(r+t,1),x=r=this.ed.x,t=this.ed.y,k=u=0,v=Math.max(this.tk.height,1),w=i=0,z=h,A=y.M(),l=0;l<c.length;l++){if(m=c[l],n=m.Ba,o=Il(m,m.Vb,m.We,j),u>0)switch(p){case vk:x=Math.floor((x-r-(n.width-o.x))/g)*g+r;break;default:x=Math.ceil((x-r+o.x)/g)*g+r}else switch(p){case vk:k=x+o.x+n.width;break;default:k=x-o.x}switch(p){case vk:B=-(x+o.x)+r+k;break;default:B=x+n.width-o.x-r-k}if(d>0&&u>d-1||a>0&&u>0&&B>a){for(x=0;u>x&&l!==u;x++)B=c[l-u+x],C=Il(B,B.Vb,B.We,A),B.moveTo(B.position.x,B.position.y+i-C.y);w+=f,t=z?t+w:t+(w+i),u=w=i=0,x=r,z=s}switch(i=Math.max(i,o.y),w=Math.max(w,n.height-o.y),isFinite(v)&&(w=Math.max(w,Math.max(n.height,v)-o.y)),z?m.moveTo(x-o.x,t-o.y):m.moveTo(x-o.x,t),p){case vk:x-=o.x+e;break;default:x+=n.width-o.x+e}u++}for(x=0;u>x&&l!==u;x++)B=c[l-u+x],C=Il(B,B.Vb,B.We,j),B.moveTo(B.position.x,B.position.y+i-C.y);y.B(j),y.B(A)}b.se("Layout"),this.Ve=h}},y.g(Zi,"wrappingWidth",Zi.prototype.Jz),y.defineProperty(Zi,{Jz:"wrappingWidth"},w("dr"),function(a){this.dr!==a&&(a>0||isNaN(a))&&(this.dr=a,this.Lr=isNaN(a),this.J())}),y.g(Zi,"wrappingColumn",Zi.prototype.FE),y.defineProperty(Zi,{FE:"wrappingColumn"},w("cr"),function(a){this.cr!==a&&(a>0||isNaN(a))&&(this.cr=a,this.J())}),y.g(Zi,"cellSize",Zi.prototype.tk),y.defineProperty(Zi,{tk:"cellSize"},w("qi"),function(a){this.qi.L(a)||(this.qi.assign(a),this.J())}),y.g(Zi,"spacing",Zi.prototype.spacing),y.defineProperty(Zi,{spacing:"spacing"},w("Tg"),function(a){this.Tg.L(a)||(this.Tg.assign(a),this.J())}),y.g(Zi,"alignment",Zi.prototype.alignment),y.defineProperty(Zi,{alignment:"alignment"},w("Ud"),function(a){this.Ud!==a&&(x&&y.l(a,ga,Zi,"alignment"),a===wk||a===xk)&&(this.Ud=a,this.J())}),y.g(Zi,"arrangement",Zi.prototype.qe),y.defineProperty(Zi,{qe:"arrangement"},w("Tc"),function(a){this.Tc!==a&&(x&&y.l(a,ga,Zi,"arrangement"),a===uk||a===vk)&&(this.Tc=a,this.J())}),y.g(Zi,"sorting",Zi.prototype.sorting),y.defineProperty(Zi,{sorting:"sorting"},w("Sg"),function(a){this.Sg!==a&&(x&&y.l(a,ga,Zi,"sorting"),a===sk||a===tk||a===qk||a===rk)&&(this.Sg=a,this.J())}),y.g(Zi,"comparer",Zi.prototype.comparer),y.defineProperty(Zi,{comparer:"comparer"},w("Cg"),function(a){this.Cg!==a&&(x&&y.j(a,"function",Zi,"comparer"),this.Cg=a,this.J())}),Zi.standardComparer=bn=function(a,b){x&&y.l(a,R,Zi,"standardComparer:a"),x&&y.l(b,R,Zi,"standardComparer:b");var c=a.text,d=b.text;return d>c?-1:c>d?1:0},Zi.smartComparer=function(a,b){var e,c,d,g,h;if(x&&y.l(a,R,Zi,"standardComparer:a"),x&&y.l(b,R,Zi,"standardComparer:b"),a!==q){if(b!==q){for(c=a.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=b.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=0;e<c.length;e++)if(""!==d[e]&&d[e]!==f)if(g=parseFloat(c[e]),h=parseFloat(d[e]),isNaN(g)){if(!isNaN(h))return 1;if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else{if(isNaN(h))return-1;if(0!==g-h)return g-h}else if(""!==c[e])return 1;return""!==d[e]&&d[e]!==f?-1:0}return 1}return b!==q?-1:0},Zi.Position=xk=y.w(Zi,"Position",0),Zi.Location=wk=y.w(Zi,"Location",1),Zi.LeftToRight=uk=y.w(Zi,"LeftToRight",2),Zi.RightToLeft=vk=y.w(Zi,"RightToLeft",3),Zi.Forward=sk=y.w(Zi,"Forward",4),Zi.Reverse=tk=y.w(Zi,"Reverse",5),Zi.Ascending=qk=y.w(Zi,"Ascending",6),Zi.Descending=rk=y.w(Zi,"Descending",7),y.ba("CircularLayout",yk),y.Ka(yk,rh),yk.prototype.cloneProtected=function(a){rh.prototype.cloneProtected.call(this,a),a.pq=this.pq,a.To=this.To,a.Zd=this.Zd,a.$d=this.$d,a.Tc=this.Tc,a.ma=this.ma,a.Sg=this.Sg,a.Cg=this.Cg,a.Tg=this.Tg,a.jq=this.jq},yk.prototype.createNetwork=function(){var a=new dn;return Sm(a,this),a},yk.prototype.doLayout=function(a){var b,c,d,e,f,g,i,j,k,l,m,n,o,p,r,s,t;if(a||y.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),this.network===q&&(this.network=this.makeNetwork(a)),a=this.network.vertexes,1>=a.count)1===a.count&&(a=a.ob(),a.xa=0,a.Ga=0);else{if(b=new F(en),b.Me(a.k),a=new F(en),c=new F(en),b=this.sort(b),a=new F(en),c=new F(en),d=this.Ew,e=this.tA,f=this.bd,g=this.Bm,i=this.Fw,j=this.ip,k=this.Tj,l=this.oB,m=this.Gf,n=this.Ms,d=this.qe,e=this.Xr,f=this.qD,(!isFinite(f)||0>=f)&&(f=0/0),g=this.FB,(!isFinite(g)||0>=g)&&(g=1),i=this.Vf,isFinite(i)||(i=0),j=this.nh,(!isFinite(j)||j>360||1>j)&&(j=360),k=this.spacing,isFinite(k)||(k=0/0),d===Lk&&e===Mk?d=Kk:d===Lk&&e!==Mk&&(e=Mk,d=this.qe),(this.direction===Ek||this.direction===Fk)&&this.sorting!==Dk){for(o=0;!(o>=b.length)&&(a.add(b.sa(o)),!(o+1>=b.length));o+=2)c.add(b.sa(o+1));this.direction===Ek?(this.qe===Lk&&a.reverse(),b=new F(en),b.Me(a),b.Me(c)):(this.qe===Lk&&c.reverse(),b=new F(en),b.Me(c),b.Me(a))}for(p=b.length,r=l=0,o=0;o<b.length;o++)m=i+j*r*(this.direction===Gk?1:-1)/p,s=b.sa(o).diameter,isNaN(s)&&(s=fn(b.sa(o),m)),360>j&&(0===o||o===b.length-1)&&(s/=2),l+=s,r++;if(isNaN(f)||d===Lk){if(isNaN(k)&&(k=6),d!==Kk&&d!==Lk){for(s=-1/0,o=0;p>o;o++)n=b.sa(o),t=b.sa(o===p-1?0:o+1),isNaN(n.diameter)&&fn(n,0),isNaN(t.diameter)&&fn(t,0),s=Math.max(s,(n.diameter+t.diameter)/2);n=s+k,d===Ik?(m=2*Math.PI/p,f=(s+k)/m):f=gn(this,n*(j>=360?p:p-1),g,i*Math.PI/180,j*Math.PI/180)}else f=gn(this,l+(j>=360?p:p-1)*(d!==Lk?k:1.6*k),g,i*Math.PI/180,j*Math.PI/180);m=f*g}else if(m=f*g,r=hn(this,f,m,i*Math.PI/180,j*Math.PI/180),isNaN(k))(d===Kk||d===Lk)&&(k=(r-l)/(j>=360?p:p-1));else if(d===Kk||d===Lk)o=(r-l)/(j>=360?p:p-1),k>o?(f=gn(this,l+k*(j>=360?p:p-1),g,i*Math.PI/180,j*Math.PI/180),m=f*g):k=o;else{for(s=-1/0,o=0;p>o;o++)n=b.sa(o),t=b.sa(o===p-1?0:o+1),isNaN(n.diameter)&&fn(n,0),isNaN(t.diameter)&&fn(t,0),s=Math.max(s,(n.diameter+t.diameter)/2);n=s+k,o=gn(this,n*(j>=360?p:p-1),g,i*Math.PI/180,j*Math.PI/180),o>f?(f=o,m=f*g):n=r/(j>=360?p:p-1)}if(this.Ew=d,this.tA=e,this.bd=f,this.Bm=g,this.Fw=i,this.ip=j,this.Tj=k,this.oB=l,this.Gf=m,this.Ms=n,c=[b,a,c],b=c[0],a=c[1],c=c[2],d=this.Ew,e=this.bd,g=this.Fw,i=this.ip,j=this.Tj,k=this.Gf,l=this.Ms,this.direction!==Ek&&this.direction!==Fk||d!==Lk)if(this.direction===Ek||this.direction===Fk){switch(f=0,d){case Jk:f=180*kn(this,e,k,g,l)/Math.PI;break;case Kk:l=b=0,f=a.ob(),f!==q&&(b=fn(f,Math.PI/2)),f=c.ob(),f!==q&&(l=fn(f,Math.PI/2)),f=180*kn(this,e,k,g,j+(b+l)/2)/Math.PI;break;case Ik:f=i/b.length}if(this.direction===Ek){switch(d){case Jk:ln(this,a,g,Hk);break;case Kk:mn(this,a,g,Hk);break;case Ik:nn(this,a,i/2,g,Hk)}switch(d){case Jk:ln(this,c,g+f,Gk);break;case Kk:mn(this,c,g+f,Gk);break;case Ik:nn(this,c,i/2,g+f,Gk)}}else{switch(d){case Jk:ln(this,c,g,Hk);break;case Kk:mn(this,c,g,Hk);break;case Ik:nn(this,c,i/2,g,Hk)}switch(d){case Jk:ln(this,a,g+f,Gk);break;case Kk:mn(this,a,g+f,Gk);break;case Ik:nn(this,a,i/2,g+f,Gk)}}}else switch(d){case Jk:ln(this,b,g,this.direction);break;case Kk:mn(this,b,g,this.direction);break;case Ik:nn(this,b,i,g,this.direction);break;case Lk:jn(this,b,i,g,this.direction)}else jn(this,b,i,g-i/2,Gk)}this.updateParts(),this.network=q,this.Ve=h},cn.prototype.commit=function(a){var b,c;if(this.em!==q&&this.Fo!==q)for(b=0;b<this.em.length;b++)c=a.sa(b),c.x=this.em[b],c.y=this.Fo[b]},yk.prototype.commitLayout=function(){this.commitNodes(),this.Kr&&this.commitLinks()},yk.prototype.commitNodes=function(){for(var c,a=this.gF,b=this.network.vertexes.k;b.next();)c=b.value,c.x+=a.x,c.y+=a.y,c.commit()},yk.prototype.commitLinks=function(){for(var a=this.network.edges.k;a.next();)a.value.commit()},yk.prototype.sort=function(a){var b,c,d,e,f,g,i,j,k,l,m,n,o,p,q,r,u,t,v,w,x,z,A,B,C,D,E;switch(this.sorting){case Bk:break;case Ck:a.reverse();break;case zk:a.sort(this.comparer);break;case Ak:a.sort(this.comparer),a.reverse();break;case Dk:for(b=[],c=0;c<a.length;c++)b.push(0);for(d=new F(en),c=0;c<a.length;c++){if(e=-1,f=-1,0===c)for(g=0;g<a.length;g++)i=a.sa(g).nG,i>e&&(e=i,f=g);else for(g=0;g<a.length;g++)i=b[g],i>e&&(e=i,f=g);for(d.add(a.sa(f)),b[f]=-1,f=a.sa(f),e=f.cc,f=f.Tb;e.next();)g=e.value,g=g.fromVertex,g=a.indexOf(g),0>g||0<=b[g]&&b[g]++;for(;f.next();)g=f.value,g=g.toVertex,g=a.indexOf(g),0>g||0<=b[g]&&b[g]++}for(a=[],b=0;b<d.length;b++){for(i=d.sa(b),a[b]=[],c=i.Tb,e=i.cc;c.next();)j=c.value,k=d.indexOf(j.toVertex),k!==b&&0>a[b].indexOf(k)&&a[b].push(k);for(;e.next();)j=e.value,k=d.indexOf(j.fromVertex),k!==b&&0>a[b].indexOf(k)&&a[b].push(k)}for(i=[],b=0;b<a.length;b++)i[b]=0;for(c=[],l=[],m=[],e=[],f=new F(en),g=b=0;b<a.length;b++)if(n=a[b].length,1===n)e.push(b);else if(0===n)f.add(d.sa(b));else{if(0===g)c.push(b);else{for(o=1/0,p=1/0,q=-1,r=[],n=0;n<c.length;n++)0>a[c[n]].indexOf(c[n===c.length-1?0:n+1])&&r.push(n===c.length-1?0:n+1);if(0===r.length)for(n=0;n<c.length;n++)r.push(n);for(n=0;n<r.length;n++){for(t=r[n],k=a[b],j=l,u=m,v=i,w=t,x=c,z=0,A=0;A<j.length;A++)if(B=v[j[A]],C=v[u[A]],D=0,E=0,C>B?(D=B,E=C):(D=C,E=B),w>D&&E>=w)for(B=0;B<k.length;B++)C=k[B],0>x.indexOf(C)||D<v[C]&&v[C]<E||D===v[C]||E===v[C]||z++;else for(B=0;B<k.length;B++)C=k[B],0>x.indexOf(C)||D<v[C]&&v[C]<E&&!(D===v[C]||E===v[C])&&z++;for(u=z,j=v=0;j<a[b].length;j++)k=c.indexOf(a[b][j]),k>=0&&(k=Math.abs(t-(k>=t?k+1:k)),v+=k<c.length+1-k?k:c.length+1-k);for(j=0;j<l.length;j++)k=i[l[j]],w=i[m[j]],k>=t&&k++,w>=t&&w++,k>w&&(x=w,w=k,k=x),w-k<(c.length+2)/2==(t>k&&w>=t)&&v++;(o>u||u===o&&p>v)&&(o=u,p=v,q=t)}for(c.splice(q,0,b),n=0;n<c.length;n++)i[c[n]]=n;for(n=0;n<a[b].length;n++)o=a[b][n],0<=c.indexOf(o)&&(l.push(b),m.push(o))}g++}for(l=s,m=c.length;;){for(l=h,i=0;i<e.length;i++)if(b=e[i],n=a[b][0],k=c.indexOf(n),k>=0){for(g=p=0;g<a[n].length;g++)o=a[n][g],o=c.indexOf(o),0>o||o===k||(q=o>k?o-k:k-o,p+=k>o!=q>m-q?1:-1);c.splice(0>p?k:k+1,0,b),e.splice(i,1),i--}else l=s;if(l)break;c.push(e[0]),e.splice(0,1)}for(b=0;b<c.length;b++)k=c[b],f.add(d.sa(k));return f;default:y.m("Invalid sorting type.")}return a},y.g(yk,"radius",yk.prototype.qD),y.defineProperty(yk,{qD:"radius"},w("pq"),function(a){this.pq!==a&&(a>0||isNaN(a))&&(this.pq=a,this.J())}),y.g(yk,"aspectRatio",yk.prototype.FB),y.defineProperty(yk,{FB:"aspectRatio"},w("To"),function(a){this.To!==a&&a>0&&(this.To=a,this.J())}),y.g(yk,"startAngle",yk.prototype.Vf),y.defineProperty(yk,{Vf:"startAngle"},w("Zd"),function(a){this.Zd!==a&&(this.Zd=a,this.J())}),y.g(yk,"sweepAngle",yk.prototype.nh),y.defineProperty(yk,{nh:"sweepAngle"},w("$d"),function(a){this.$d!==a&&(this.$d=a>0&&360>=a?a:360,this.J())}),y.g(yk,"arrangement",yk.prototype.qe),y.defineProperty(yk,{qe:"arrangement"},w("Tc"),function(a){this.Tc!==a&&(x&&y.l(a,ga,yk,"arrangement"),a===Lk||a===Kk||a===Jk||a===Ik)&&(this.Tc=a,this.J())}),y.g(yk,"direction",yk.prototype.direction),y.defineProperty(yk,{direction:"direction"},w("ma"),function(a){this.ma!==a&&(x&&y.l(a,ga,yk,"direction"),a===Gk||a===Hk||a===Ek||a===Fk)&&(this.ma=a,this.J())}),y.g(yk,"sorting",yk.prototype.sorting),y.defineProperty(yk,{sorting:"sorting"},w("Sg"),function(a){this.Sg!==a&&(x&&y.l(a,ga,yk,"sorting"),a===Bk||a===Ck||a===zk||Ak||a===Dk)&&(this.Sg=a,this.J())}),y.g(yk,"comparer",yk.prototype.comparer),y.defineProperty(yk,{comparer:"comparer"},w("Cg"),function(a){this.Cg!==a&&(x&&y.j(a,"function",yk,"comparer"),this.Cg=a,this.J())}),y.g(yk,"spacing",yk.prototype.spacing),y.defineProperty(yk,{spacing:"spacing"},w("Tg"),function(a){this.Tg!==a&&(this.Tg=a,this.J())}),y.g(yk,"nodeDiameterFormula",yk.prototype.Xr),y.defineProperty(yk,{Xr:"nodeDiameterFormula"},w("jq"),function(a){this.jq!==a&&(x&&y.l(a,ga,yk,"nodeDiameterFormula"),a===Nk||a===Mk)&&(this.jq=a,this.J())}),y.A(yk,{hF:"actualXRadius"},w("bd")),y.A(yk,{iF:"actualYRadius"},w("Gf")),y.A(yk,{NH:"actualSpacing"},w("Tj")),y.A(yk,{gF:"actualCenter"},function(){return isNaN(this.ed.x)||isNaN(this.ed.y)?new A(0,0):new A(this.ed.x+this.hF,this.ed.y+this.iF)}),yk.ConstantSpacing=Kk=y.w(yk,"ConstantSpacing",0),yk.ConstantDistance=Jk=y.w(yk,"ConstantDistance",1),yk.ConstantAngle=Ik=y.w(yk,"ConstantAngle",2),yk.Packed=Lk=y.w(yk,"Packed",3),yk.Clockwise=Gk=y.w(yk,"Clockwise",4),yk.Counterclockwise=Hk=y.w(yk,"Counterclockwise",5),yk.BidirectionalLeft=Ek=y.w(yk,"BidirectionalLeft",6),yk.BidirectionalRight=Fk=y.w(yk,"BidirectionalRight",7),yk.Forwards=Bk=y.w(yk,"Forwards",8),yk.Reverse=Ck=y.w(yk,"Reverse",9),yk.Ascending=zk=y.w(yk,"Ascending",10),yk.Descending=Ak=y.w(yk,"Descending",11),yk.Optimized=Dk=y.w(yk,"Optimized",12),yk.Pythagorean=Nk=y.w(yk,"Pythagorean",13),yk.Circular=Mk=y.w(yk,"Circular",14),y.ba("CircularNetwork",dn),y.Ka(dn,Rm),dn.prototype.createVertex=function(){return new en},dn.prototype.createEdge=function(){return new sn},y.ba("CircularVertex",en),y.Ka(en,Vm),y.ba("CircularEdge",sn),y.Ka(sn,Wm),y.ba("ForceDirectedLayout",tn),y.Ka(tn,rh),tn.prototype.cloneProtected=function(a){rh.prototype.cloneProtected.call(this,a),a.vf.assign(this.vf),a.So=this.So,a.Rg=this.Rg,a.Xo=this.Xo,a.Xm=this.Xm,a.kp=this.kp,a.Jg=this.Jg,a.xm=this.xm,a.wm=this.wm,a.um=this.um,a.vm=this.vm,a.tm=this.tm,a.sm=this.sm},tn.prototype.createNetwork=function(){var a=new un;return Sm(a,this),a},tn.prototype.doLayout=function(a){var b,c,d,e,f,g,i,j,k,l,m,n,o,p,r;if(a||y.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),this.network===q&&(this.network=this.makeNetwork(a)),a=this.hv,0<this.network.vertexes.count){for(this.network.Iu(),b=this.network.vertexes.k;b.next();)c=b.value,c.charge=this.electricalCharge(c),c.mass=this.gravitationalMass(c);for(b=this.network.edges.k;b.next();)c=b.value,c.stiffness=this.springStiffness(c),c.length=this.springLength(c);this.Hp=0;a:{if(!(3>this.network.vertexes.count))for(d=b=0,c=this.network.vertexes.k,c.next(),e=c.value.S;c.next();){if(c.value.S.qf(e)&&(b++,b>1)){b=h;break a}if(d>10)break;d++}b=s}if(b){for(b=this.network,d=b.vH().k;d.next();){for(this.network=e=d.value,c=this.network.vertexes.k;c.next();){for(e=c.value,f=0,g=e.vertexes;g.next();)f++;e.sf=f,e.vj=1,e.Al=q,e.wg=q}vn(this,0,a)}for(this.network=b,d.reset(),x&&y.l(b,un,tn,"arrangeConnectedGraphs:singletons"),c=this.tu,i=d.count,j=h,f=e=0,g=y.tb(),k=0;k<i+b.vertexes.count+2;k++)g[k]=q;for(i=0,d.reset(),k=y.df();d.next();)if(l=d.value,this.Qe(l,k),j)j=s,e=k.x+k.width/2,f=k.y+k.height/2,g[0]=new A(k.x+k.width+c.width,k.y),g[1]=new A(k.x,k.y+k.height+c.height),i=2;else for(m=wn(g,i,e,f,k.width,k.height,c),n=g[m],o=new A(n.x+k.width+c.width,n.y),p=new A(n.x,n.y+k.height+c.height),i>m+1&&g.splice(m+1,0,q),g[m]=o,g[m+1]=p,i++,m=n.x-k.x,n=n.y-k.y,l=l.vertexes.k;l.next();)r=l.value,r.xa+=m,r.Ga+=n;for(y.Bc(k),l=b.vertexes.k;l.next();)r=l.value,j=r.S,2>i?(e=j.x+j.width/2,f=j.y+j.height/2,g[0]=new A(j.x+j.width+c.width,j.y),g[1]=new A(j.x,j.y+j.height+c.height),i=2):(m=wn(g,i,e,f,j.width,j.height,c),n=g[m],o=new A(n.x+j.width+c.width,n.y),p=new A(n.x,n.y+j.height+c.height),i>m+1&&g.splice(m+1,0,q),g[m]=o,g[m+1]=p,i++,r.xa=n.x+r.width/2,r.Ga=n.y+r.height/2);for(y.ya(g),d.reset();d.next();){for(e=d.value,f=e.vertexes.k;f.next();)c=f.value,b.qk(c);for(e=e.edges.k;e.next();)c=e.value,b.tn(c)}}xn(this,a),this.updateParts()}this.Xm=a,this.network=q,this.Ve=h},tn.prototype.Qe=function(a,b){var c,d,e;for(c=h,d=a.vertexes.k;d.next();)e=d.value,c?(c=s,b.set(e.S)):b.zj(e.S);return b},tn.prototype.addComments=function(a){var c,d,b=a.vc;if(b!==q)for(b=b.iC();b.next();)c=b.value,"Comment"===c.Ac&&(d=this.network.Jl(c),d===q&&(d=this.network.un(c),d.charge=this.sm,c=this.network.Sl(a,d,q),c!==q&&(c.length=this.tm)))},tn.prototype.commitLayout=function(){this.uz(),this.commitNodes(),this.Kr&&this.commitLinks()},tn.prototype.uz=function(){var a,b;if(this.Lk)for(a=this.network.edges.k;a.next();)b=a.value.link,b!==q&&(b.gb=Ib,b.kb=Ib)},tn.prototype.commitNodes=function(){var c,d,e,a=0,b=0;for(this.DB&&(c=y.df(),this.Qe(this.network,c),b=this.ed,a=b.x-c.x,b=b.y-c.y,y.Bc(c)),c=y.df(),d=this.network.vertexes.k;d.next();)e=d.value,(0!==a||0!==b)&&(c.assign(e.S),c.x+=a,c.y+=b,e.Ib=c),e.commit();y.Bc(c)},tn.prototype.commitLinks=function(){for(var a=this.network.edges.k;a.next();)a.value.commit()},tn.prototype.springStiffness=function(a){return a=a.stiffness,isNaN(a)?this.xm:a},tn.prototype.springLength=function(a){return a=a.length,isNaN(a)?this.wm:a},tn.prototype.electricalCharge=function(a){return a=a.charge,isNaN(a)?this.um:a},tn.prototype.electricalFieldX=ca(0),tn.prototype.electricalFieldY=ca(0),tn.prototype.gravitationalMass=function(a){return a=a.mass,isNaN(a)?this.vm:a},tn.prototype.gravitationalFieldX=ca(0),tn.prototype.gravitationalFieldY=ca(0),tn.prototype.isFixed=function(a){return a.isFixed},y.A(tn,{YH:"currentIteration"},w("Hp")),y.g(tn,"arrangementSpacing",tn.prototype.tu),y.defineProperty(tn,{tu:"arrangementSpacing"},w("vf"),function(a){this.vf.L(a)||(this.vf.assign(a),this.J())}),y.g(tn,"arrangesToOrigin",tn.prototype.DB),y.defineProperty(tn,{DB:"arrangesToOrigin"},w("So"),function(a){this.So!==a&&(this.So=a,this.J())}),y.g(tn,"setsPortSpots",tn.prototype.Lk),y.defineProperty(tn,{Lk:"setsPortSpots"},w("Rg"),function(a){this.Rg!==a&&(this.Rg=a,this.J())}),y.g(tn,"comments",tn.prototype.comments),y.defineProperty(tn,{comments:"comments"},w("Xo"),function(a){this.Xo!==a&&(this.Xo=a,this.J())}),y.g(tn,"maxIterations",tn.prototype.hv),y.defineProperty(tn,{hv:"maxIterations"},w("Xm"),function(a){this.Xm!==a&&a>=0&&(this.Xm=a,this.J())}),y.g(tn,"epsilonDistance",tn.prototype.uy),y.defineProperty(tn,{uy:"epsilonDistance"},w("kp"),function(a){this.kp!==a&&a>0&&(this.kp=a,this.J())}),y.g(tn,"infinityDistance",tn.prototype.FG),y.defineProperty(tn,{FG:"infinityDistance"},w("Jg"),function(a){this.Jg!==a&&a>1&&(this.Jg=a,this.J())}),y.g(tn,"defaultSpringStiffness",tn.prototype.eG),y.defineProperty(tn,{eG:"defaultSpringStiffness"},w("xm"),function(a){this.xm!==a&&(this.xm=a,this.J())}),y.g(tn,"defaultSpringLength",tn.prototype.dG),y.defineProperty(tn,{dG:"defaultSpringLength"},w("wm"),function(a){this.wm!==a&&(this.wm=a,this.J())}),y.g(tn,"defaultElectricalCharge",tn.prototype.XF),y.defineProperty(tn,{XF:"defaultElectricalCharge"},w("um"),function(a){this.um!==a&&(this.um=a,this.J())}),y.g(tn,"defaultGravitationalMass",tn.prototype.ZF),y.defineProperty(tn,{ZF:"defaultGravitationalMass"},w("vm"),function(a){this.vm!==a&&(this.vm=a,this.J())}),y.g(tn,"defaultCommentSpringLength",tn.prototype.WF),y.defineProperty(tn,{WF:"defaultCommentSpringLength"},w("tm"),function(a){this.tm!==a&&(this.tm=a,this.J())}),y.g(tn,"defaultCommentElectricalCharge",tn.prototype.VF),y.defineProperty(tn,{VF:"defaultCommentElectricalCharge"},w("sm"),function(a){this.sm!==a&&(this.sm=a,this.J())}),y.ba("ForceDirectedNetwork",un),y.Ka(un,Rm),un.prototype.createVertex=function(){return new Cn},un.prototype.createEdge=function(){return new Hn},y.ba("ForceDirectedVertex",Cn),y.Ka(Cn,Vm),y.ba("ForceDirectedEdge",Hn),y.Ka(Hn,Wm),y.ba("LayeredDigraphLayout",pk),y.Ka(pk,rh),pk.prototype.cloneProtected=function(a){rh.prototype.cloneProtected.call(this,a),a.Tm=this.Tm,a.md=this.md,a.ma=this.ma,a.qm=this.qm,a.Um=this.Um,a.Jm=this.Jm,a.hl=this.hl,a.jm=this.jm,a.Mh=this.Mh,a.Rg=this.Rg,a.Qp=this.Qp},pk.prototype.createNetwork=function(){var a=new Nn;return Sm(a,this),a},pk.prototype.doLayout=function(a){var b,c,d,e,f,g,i,j,k,l,m,n,o,p,r,t,u,v,w,x,z;for(a||y.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),this.network===q&&(this.network=this.makeNetwork(a)),this.ed=Um(this,this.ed),this.st=-1,this.kf=this.aq=0,this.hq=this.Bt=this.kl=q,a=0;a<this.jg.length;a++)this.jg[a]=q;if(0<this.network.vertexes.count){for(this.network.Iu(),a=this.network.edges.k;a.next();)a.value.rev=s;switch(this.qm){default:case On:for(b=0,c=this.network.vertexes.count-1,a=[],a.length=c+1,d=this.network.vertexes.k;d.next();)d.value.valid=h;for(;Pn(this.network)!==q;){for(d=Qn(this.network);d!==q;)a[c]=d,c--,d.valid=s,d=Qn(this.network);for(d=Rn(this.network);d!==q;)a[b]=d,b++,d.valid=s,d=Rn(this.network);for(d=q,e=0,f=this.network.vertexes.k;f.next();)if(g=f.value,g.valid){for(i=0,j=g.Tb;j.next();)j.value.toVertex.valid&&i++;for(j=0,k=g.cc;k.next();)k.value.fromVertex.valid&&j++;(d===q||i-j>e)&&(d=g,e=i-j)}d!==q&&(a[b]=d,b++,d.valid=s)}for(b=0;b<this.network.vertexes.count;b++)a[b].index=b;for(a=this.network.edges.k;a.next();)b=a.value,b.fromVertex.index>b.toVertex.index&&(this.network.pv(b),b.rev=h);break;case In:for(b=this.network.vertexes.k;b.next();)b.value.Kn=-1,b.value.finish=-1;for(a=this.network.edges.k;a.next();)a.value.forest=s;for(this.gq=0,b.reset();b.next();)0===b.value.cc.count&&Sn(this,b.value);for(b.reset();b.next();)-1===b.value.Kn&&Sn(this,b.value);for(a.reset();a.next();)b=a.value,b.forest||(c=b.fromVertex,d=c.finish,e=b.toVertex,f=e.finish,e.Kn<c.Kn&&f>d&&(this.network.pv(b),b.rev=h))}for(a=this.network.vertexes.k;a.next();)b=a.value,b.layer=-1;for(this.ab=-1,this.assignLayers(),a.reset();a.next();)this.ab=Math.max(this.ab,a.value.layer);for(c=this.network.edges.k,b=[];c.next();)a=c.value,a.valid=s,b.push(a);for(c=0;c<b.length;c++)if(a=b[c],!(a.valid||(a.fromVertex.Wc===q||a.toVertex.Wc===q)&&a.fromVertex.layer===a.toVertex.layer)){if(f=i=g=j=0,e=a.fromVertex,d=a.toVertex,a.link!==q){if(i=a.link,i===q)continue;if(l=e.Wc,f=d.Wc,l===q||f===q)continue;m=i.da,g=i.ja,n=i.Nc,j=i.Ad,a.rev&&(i=m,k=n,m=g,n=j,g=i,j=k),o=e.N,i=a.toVertex.N,p=a.rev?d.S:e.S,k=y.M(),isNaN(p.x)?k.assign(o):Il(m,n,Sb,k),l!==m&&!isNaN(p.x)&&m.xb()&&(l=e.S,isNaN(l.x)||(k.x+=p.x-l.x,k.y+=p.y-l.y)),m=a.rev?e.S:d.S,l=y.M(),isNaN(m.x)?l.assign(i):Il(g,j,Sb,l),f!==g&&!isNaN(m.x)&&g.xb()&&(f=d.S,isNaN(f.x)||(l.x+=m.x-f.x,l.y+=m.y-f.y)),90===this.ma||270===this.ma?(f=Math.round((k.x-o.x)/this.md),g=k.x,i=Math.round((l.x-i.x)/this.md),j=l.x):(f=Math.round((k.y-o.y)/this.md),g=k.y,i=Math.round((l.y-i.y)/this.md),j=l.y),y.B(k),y.B(l),a.portFromColOffset=f,a.portFromPos=g,a.portToColOffset=i,a.portToPos=j}else a.portFromColOffset=0,a.portFromPos=0,a.portToColOffset=0,a.portToPos=0;if(k=e.layer,o=d.layer,l=a,m=0,p=l.link,p!==q&&(r=p.Nc,t=p.Ad,r!==q&&t!==q&&(u=p.da,n=p.ja,u!==q&&n!==q&&(v=r.gb,w=t.kb,this.Lk||(Db(p.gb)||(v=p.gb),Db(p.kb)||(w=p.kb)),(Db(v)||v===Hb)&&(v=Tn(this,h)),(Db(w)||w===Hb)&&(w=Tn(this,s)),x=p.Jb,z=p.getLinkPoint(u,r,v,h,x,n,t,y.M()),v=p.getLinkDirection(u,r,z,v,h,x,n,t),y.B(z),v===Un(this,l,h)?m+=1:this.Lk&&u!==q&&1===u.ports.count&&l.rev&&(m+=1),z=p.getLinkPoint(n,t,w,s,x,u,r,y.M()),p=p.getLinkDirection(n,t,z,w,s,x,u,r),y.B(z),p===Un(this,l,s)?m+=2:this.Lk&&n!==q&&1===n.ports.count&&l.rev&&(m+=2)))),l=1===m||3===m?h:s,(m=2===m||3===m?h:s)&&(n=this.network.createVertex(),n.Wc=q,n.vl=1,n.layer=k,n.near=e,this.network.qk(n),e=this.network.Sl(e,n,a.link),e.valid=s,e.rev=a.rev,e.portFromColOffset=f,e.portToColOffset=0,e.portFromPos=g,e.portToPos=0,e=n),p=1,l&&p--,k-o>p&&k>0){for(a.valid=s,n=this.network.createVertex(),n.Wc=q,n.vl=2,n.layer=k-1,this.network.qk(n),e=this.network.Sl(e,n,a.link),e.valid=h,e.rev=a.rev,e.portFromColOffset=m?0:f,e.portToColOffset=0,e.portFromPos=m?0:g,e.portToPos=0,e=n,k--;k-o>p&&k>0;)n=this.network.createVertex(),n.Wc=q,n.vl=3,n.layer=k-1,this.network.qk(n),e=this.network.Sl(e,n,a.link),e.valid=h,e.rev=a.rev,e.portFromColOffset=0,e.portToColOffset=0,e.portFromPos=0,e.portToPos=0,e=n,k--;e=this.network.Sl(n,d,a.link),e.valid=!l,l&&(n.near=d),e.rev=a.rev,e.portFromColOffset=0,e.portToColOffset=i,e.portFromPos=0,e.portToPos=j}else a.valid=h}for(b=this.nd=[],c=0;c<=this.ab;c++)b[c]=0;for(a=this.network.vertexes.k;a.next();)a.value.index=-1;for(this.initializeIndices(),this.st=-1,c=this.kf=this.aq=0;c<=this.ab;c++)b[c]>b[this.kf]&&(this.st=b[c]-1,this.kf=c),b[c]<b[this.aq]&&(this.aq=c);for(this.hq=[],c=0;c<b.length;c++)this.hq[c]=[];for(a.reset();a.next();)c=a.value,b=c.layer,this.hq[b][c.index]=c;for(this.vb=-1,a=0;a<=this.ab;a++){for(b=Vn(this,a),c=0,d=this.nd[a],e=0;d>e;e++)f=b[e],c+=Wn(this,f,h),f.column=c,c+=1,c+=Wn(this,f,s);this.vb=Math.max(this.vb,c-1),Xn(this,a,b)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=q,this.Ve=h},pk.prototype.countCrossings=function(){var a,c,d,e,f,b=0;for(a=0;a<=this.ab;a++)for(c=oo(this,a,1),d=this.nd[a],e=0;d>e;e++)for(f=e;d>f;f++)b+=c[e*d+f];return b},pk.prototype.normalize=function(){var c,b,a=1/0;for(this.vb=-1,b=this.network.vertexes.k;b.next();)c=b.value,a=Math.min(a,c.column-Wn(this,c,h)),this.vb=Math.max(this.vb,c.column+Wn(this,c,s));for(b.reset();b.next();)b.value.column-=a;this.vb-=a},pk.prototype.assignLayers=function(){switch(this.Um){case uo:vo(this);break;case wo:for(var a,b=this.network.vertexes.k;b.next();)a=xo(this,b.value),this.ab=Math.max(a,this.ab);for(b.reset();b.next();)a=b.value,a.layer=this.ab-a.layer;break;default:case Jn:for(vo(this),b=this.network.vertexes.k;b.next();)b.value.valid=s;for(b.reset();b.next();)0===b.value.cc.count&&yo(this,b.value);for(a=1/0,b.reset();b.next();)a=Math.min(a,b.value.layer);for(this.ab=-1,b.reset();b.next();)b.value.layer-=a,this.ab=Math.max(this.ab,b.value.layer)}},pk.prototype.initializeIndices=function(){var a,b,c;switch(this.Jm){default:case Ao:for(b=this.network.vertexes.k;b.next();)c=b.value,a=c.layer,c.index=this.nd[a],this.nd[a]++;break;case Kn:for(b=this.network.vertexes.k,a=this.ab;a>=0;a--){for(;b.next();)b.value.layer===a&&-1===b.value.index&&Bo(this,b.value);b.reset()}break;case Co:for(b=this.network.vertexes.k,a=0;a<=this.ab;a++){for(;b.next();)b.value.layer===a&&-1===b.value.index&&Do(this,b.value);b.reset()}}},pk.prototype.reduceCrossings=function(){var c,d,e,f,g,i,a=this.countCrossings(),b=mo(this);for(c=0;c<this.hl;c++){for(d=0;d<=this.ab;d++)Eo(this,d,1),Fo(this,d,1);for(e=this.countCrossings(),a>e&&(a=e,b=mo(this)),d=this.ab;d>=0;d--)Eo(this,d,-1),Fo(this,d,-1);e=this.countCrossings(),a>e&&(a=e,b=mo(this))}for(no(this,b),c=0;c<this.hl;c++){for(d=0;d<=this.ab;d++)Eo(this,d,0),Fo(this,d,0);for(e=this.countCrossings(),a>e&&(a=e,b=mo(this)),d=this.ab;d>=0;d--)Eo(this,d,0),Fo(this,d,0);e=this.countCrossings(),a>e&&(a=e,b=mo(this))}switch(no(this,b),this.jm){case Go:break;case Ho:for(i=a+1;(d=this.countCrossings())<i;)for(i=d,c=this.ab;c>=0;c--)for(g=0;c>=g;g++){for(f=h;f;)for(f=s,d=c;d>=g;d--)f=Fo(this,d,-1)||f;for(e=this.countCrossings(),e>=a?no(this,b):(a=e,b=mo(this)),f=h;f;)for(f=s,d=c;d>=g;d--)f=Fo(this,d,1)||f;for(e=this.countCrossings(),e>=a?no(this,b):(a=e,b=mo(this)),f=h;f;)for(f=s,d=g;c>=d;d++)f=Fo(this,d,1)||f;for(e>=a?no(this,b):(a=e,b=mo(this)),f=h;f;)for(f=s,d=g;c>=d;d++)f=Fo(this,d,-1)||f;for(e>=a?no(this,b):(a=e,b=mo(this)),f=h;f;)for(f=s,d=c;d>=g;d--)f=Fo(this,d,0)||f;for(e>=a?no(this,b):(a=e,b=mo(this)),f=h;f;)for(f=s,d=g;c>=d;d++)f=Fo(this,d,0)||f;e>=a?no(this,b):(a=e,b=mo(this))}break;default:case Ln:for(c=this.ab,g=0,i=a+1;(d=this.countCrossings())<i;){for(i=d,f=h;f;)for(f=s,d=c;d>=g;d--)f=Fo(this,d,-1)||f;for(e=this.countCrossings(),e>=a?no(this,b):(a=e,b=mo(this)),f=h;f;)for(f=s,d=c;d>=g;d--)f=Fo(this,d,1)||f;for(e=this.countCrossings(),e>=a?no(this,b):(a=e,b=mo(this)),f=h;f;)for(f=s,d=g;c>=d;d++)f=Fo(this,d,1)||f;for(e>=a?no(this,b):(a=e,b=mo(this)),f=h;f;)for(f=s,d=g;c>=d;d++)f=Fo(this,d,-1)||f;for(e>=a?no(this,b):(a=e,b=mo(this)),f=h;f;)for(f=s,d=c;d>=g;d--)f=Fo(this,d,0)||f;for(e>=a?no(this,b):(a=e,b=mo(this)),f=h;f;)for(f=s,d=g;c>=d;d++)f=Fo(this,d,0)||f;e>=a?no(this,b):(a=e,b=mo(this))}}no(this,b)},pk.prototype.straightenAndPack=function(){var b,e,f,d,c=0!==(this.Mh&Io),a=this.Mh===Mn;if(1e3<this.network.edges.count&&!a&&(c=s),c){for(b=[],a=0;a<=this.ab;a++)b[a]=0;for(d=this.network.vertexes.k;d.next();)e=d.value,a=e.layer,f=e.column,e=Wn(this,e,s),b[a]=Math.max(b[a],f+e);for(d.reset();d.next();)e=d.value,a=e.layer,f=e.column,e.column=(8*(this.vb-b[a])>>1)+8*f;this.vb*=8}if(0!==(this.Mh&Jo))for(b=h;b;){for(b=s,a=this.kf+1;a<=this.ab;a++)b=Ko(this,a,1)||b;for(a=this.kf-1;a>=0;a--)b=Ko(this,a,-1)||b;b=Ko(this,this.kf,0)||b}if(0!==(this.Mh&Lo)){for(a=this.kf+1;a<=this.ab;a++)Mo(this,a,1);for(a=this.kf-1;a>=0;a--)Mo(this,a,-1);Mo(this,this.kf,0)}if(c&&(No(this,-1),No(this,1)),0!==(this.Mh&Jo))for(b=h;b;){for(b=s,b=Ko(this,this.kf,0)||b,a=this.kf+1;a<=this.ab;a++)b=Ko(this,a,0)||b;for(a=this.kf-1;a>=0;a--)b=Ko(this,a,0)||b}},pk.prototype.commitLayout=function(){if(this.Lk)for(var d,a=Tn(this,h),b=Tn(this,s),c=this.network.edges.k;c.next();)d=c.value.link,d!==q&&(d.gb=a,d.kb=b);this.commitNodes(),this.Kr&&this.commitLinks()},pk.prototype.commitNodes=function(){var a,b,c,d,e,f;for(this.Og=[],this.ig=[],this.hf=[],this.pd=[],a=0;a<=this.ab;a++)this.Og[a]=0,this.ig[a]=0,this.hf[a]=0,this.pd[a]=0;for(a=this.network.vertexes.k;a.next();)b=a.value,c=b.layer,this.Og[c]=Math.max(this.Og[c],lo(this,b,h)),this.ig[c]=Math.max(this.ig[c],lo(this,b,s));for(b=0,d=this.Tm,e=0;e<=this.ab;e++)c=d,0>=this.Og[e]+this.ig[e]&&(c=0),e>0&&(b+=c/2),90===this.ma||0===this.ma?(b+=this.ig[e],this.hf[e]=b,b+=this.Og[e]):(b+=this.Og[e],this.hf[e]=b,b+=this.ig[e]),e<this.ab&&(b+=c/2),this.pd[e]=b;for(d=this.ed,e=0;e<=this.ab;e++)270===this.ma?(this.hf[e]=d.y+this.hf[e],this.pd[e]=d.y+this.pd[e]):90===this.ma?(this.hf[e]=d.y+b-this.hf[e],this.pd[e]=d.y+b-this.pd[e]):180===this.ma?(this.hf[e]=d.x+this.hf[e],this.pd[e]=d.x+this.pd[e]):(this.hf[e]=d.x+b-this.hf[e],this.pd[e]=d.x+b-this.pd[e]);for(a.reset();a.next();)b=a.value,c=b.layer,f=0|b.column,270===this.ma||90===this.ma?(e=d.x+this.md*f,c=this.hf[c]):(e=this.hf[c],c=d.y+this.md*f),b.xa=e,b.Ga=c,b.commit()},pk.prototype.commitLinks=function(){var b,c,a,d,e,f,g,i,j,k,l,m,n,o,p,r,t,u,v,w,x,y,z,C,A,B,D,E,G,J,K,H,I,L,M,O,N,Q,P,R,S,T,V,W,X,Y,Z,$,_,ab,db,bb,cb,hb,ib,jb,eb,fb,gb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,Ab,yb,zb,Bb,Db,Eb,Fb,Gb,Lb,Mb,Nb,Ib,Jb,Kb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Wb,Xb,Yb,Zb,$b,_b,cc,ac,bc,dc,ec,fc,gc,hc;for(a=this.network.edges.k;a.next();)c=a.value.link,"undefined"!=typeof c&&c!==q&&(c.Mk(),c.En(),c.Zh());for(a.reset();a.next();)c=a.value.link,"undefined"!=typeof c&&c!==q&&c.updateRoute();for(a.reset();a.next();)if(b=a.value,c=b.link)if(c.Mk(),d=c,e=d.da,f=d.ja,g=d.Nc,i=d.Ad,b.valid)c.Se===vg&&4===c.qa&&(b.rev&&(j=e,e=f,f=j,k=g,g=i,i=k),b.fromVertex.column===b.toVertex.column?(l=c.getLinkPoint(e,g,c.computeSpot(h),h,s,f,i),m=c.getLinkPoint(f,i,c.computeSpot(s),s,s,e,g),c.En(),c.pk(l.x,l.y),c.pk((2*l.x+m.x)/3,(2*l.y+m.y)/3),c.pk((l.x+2*m.x)/3,(l.y+2*m.y)/3),c.pk(m.x,m.y)):(n=s,o=s,g!==q&&c.computeSpot(h)===Hb&&(n=h),i!==q&&c.computeSpot(s)===Hb&&(o=h),(n||o)&&(p=c.o(0).x,r=c.o(0).y,t=c.o(1).x,u=c.o(1).y,v=c.o(2).x,w=c.o(2).y,x=c.o(3).x,y=c.o(3).y,n&&(90===this.ma||270===this.ma?(t=p,u=(r+y)/2):(t=(p+x)/2,u=r),c.R(1,t,u),z=c.getLinkPoint(e,g,c.computeSpot(h),h,s,f,i),c.R(0,z.x,z.y)),o&&(90===this.ma||270===this.ma?(v=x,w=(r+y)/2):(v=(p+x)/2,w=y),c.R(2,v,w),z=c.getLinkPoint(f,i,c.computeSpot(s),s,s,e,g),c.R(3,z.x,z.y))))),c.Zh();else if(b.fromVertex.layer===b.toVertex.layer)c.Zh();else{if(A=s,B=s,D=c.zr+1,c.Jb?(B=h,C=c.qa,C>4&&c.points.removeRange(2,C-3)):c.Se===vg?(A=h,C=c.qa,C>4&&c.points.removeRange(2,C-3),D=2):(C=c.qa,E=c.computeSpot(h)===Hb,G=c.computeSpot(s)===Hb,C>2&&E&&G?c.points.removeRange(1,C-2):C>3&&E&&!G?c.points.removeRange(1,C-3):C>3&&!E&&G?c.points.removeRange(2,C-2):C>4&&!E&&!G&&c.points.removeRange(2,C-3)),H=b.fromVertex,I=b.toVertex,b.rev){for(;I!==q&&H!==I;){for(K=J=q,M=I.cc.k;M.next()&&(Q=M.value,!(Q.link===b.link&&(J=Q.fromVertex,K=Q.toVertex,J.Wc===q))););J!==H&&(R=c.o(D-1).x,S=c.o(D-1).y,T=J.xa,V=J.Ga,B?180===this.ma||0===this.ma?2===D?(c.C(D++,R,S),c.C(D++,R,V)):(Z=K!==q?K.Ga:S,Z!==V&&(W=this.pd[J.layer-1],c.C(D++,W,S),c.C(D++,W,V))):2===D?(c.C(D++,R,S),c.C(D++,T,S)):($=K!==q?K.xa:R,$!==T&&(W=this.pd[J.layer-1],c.C(D++,R,W),c.C(D++,T,W))):2===D?A?(X=Math.max(10,this.Og[I.layer]),Y=Math.max(10,this.ig[I.layer]),180===this.ma?(L=I.S.x,c.C(D++,L-X,V),c.C(D++,L,V),c.C(D++,L+Y,V)):90===this.ma?(L=I.S.y+I.S.height,c.C(D++,T,L+Y),c.C(D++,T,L),c.C(D++,T,L-X)):270===this.ma?(L=I.S.y,c.C(D++,T,L-X),c.C(D++,T,L),c.C(D++,T,L+Y)):(L=I.S.x+I.S.width,c.C(D++,L+Y,V),c.C(D++,L,V),c.C(D++,L-X,V))):(c.C(D++,R,S),180===this.ma||0===this.ma?c.C(D++,R,V):c.C(D++,T,S),c.C(D++,T,V)):(X=Math.max(10,this.Og[J.layer]),Y=Math.max(10,this.ig[J.layer]),180===this.ma?(A&&c.C(D++,T-X,V),c.C(D++,T,V),A&&c.C(D++,T+Y,V)):90===this.ma?(A&&c.C(D++,T,V+Y),c.C(D++,T,V),A&&c.C(D++,T,V-X)):270===this.ma?(A&&c.C(D++,T,V-X),c.C(D++,T,V),A&&c.C(D++,T,V+Y)):(A&&c.C(D++,T+Y,V),c.C(D++,T,V),A&&c.C(D++,T-X,V)))),I=J
}(i===q||c.computeSpot(s)!==Hb)&&(R=c.o(D-1).x,S=c.o(D-1).y,T=c.o(D).x,V=c.o(D).y,B?(N=this.ig[H.layer],180===this.ma||0===this.ma?(O=S,O>=H.S.y&&O<=H.S.bottom&&(L=H.xa+N,O=O<H.S.y+H.S.height/2?H.S.y-this.md/2:H.S.bottom+this.md/2,c.C(D++,L,S),c.C(D++,L,O)),c.C(D++,T,O)):(O=R,O>=H.S.x&&O<=H.S.right&&(L=H.Ga+N,O=O<H.S.x+H.S.width/2?H.S.x-this.md/2:H.S.right+this.md/2,c.C(D++,R,L),c.C(D++,O,L)),c.C(D++,O,V)),c.C(D++,T,V)):A?(X=Math.max(10,this.Og[H.layer]),Y=Math.max(10,this.ig[H.layer]),180===this.ma?(L=H.S.x+H.S.width,c.R(D-2,L,S),c.R(D-1,L+Y,S)):90===this.ma?(L=H.S.y,c.R(D-2,R,L),c.R(D-1,R,L-X)):270===this.ma?(L=H.S.y+H.S.height,c.R(D-2,R,L),c.R(D-1,R,L+Y)):(L=H.S.x,c.R(D-2,L,S),c.R(D-1,L-X,S))):(180===this.ma||0===this.ma?c.C(D++,T,S):c.C(D++,R,V),c.C(D++,T,V)))}else{for(;H!==q&&H!==I;){for(K=J=q,P=H.Tb.k;P.next()&&(Q=P.value,!(Q.link===b.link&&(J=Q.toVertex,K=Q.fromVertex,K.Wc!==q&&(K=q),J.Wc===q))););J!==I&&(R=c.o(D-1).x,S=c.o(D-1).y,T=J.xa,V=J.Ga,B?180===this.ma||0===this.ma?(Z=K!==q?K.Ga:S,Z!==V&&(W=this.pd[J.layer],2===D&&(W=0===this.ma?Math.max(W,R):Math.min(W,R)),c.C(D++,W,S),c.C(D++,W,V))):($=K!==q?K.xa:R,$!==T&&(W=this.pd[J.layer],2===D&&(W=90===this.ma?Math.max(W,S):Math.min(W,S)),c.C(D++,R,W),c.C(D++,T,W))):(X=Math.max(10,this.Og[J.layer]),Y=Math.max(10,this.ig[J.layer]),180===this.ma?(c.C(D++,T+Y,V),A&&c.C(D++,T,V),c.C(D++,T-X,V)):90===this.ma?(c.C(D++,T,V-X),A&&c.C(D++,T,V),c.C(D++,T,V+Y)):270===this.ma?(c.C(D++,T,V+Y),A&&c.C(D++,T,V),c.C(D++,T,V-X)):(c.C(D++,T-X,V),A&&c.C(D++,T,V),c.C(D++,T+Y,V)))),H=J}B&&(R=c.o(D-1).x,S=c.o(D-1).y,T=c.o(D).x,V=c.o(D).y,180===this.ma||0===this.ma?S!==V&&(W=0===this.ma?Math.min(Math.max((T+R)/2,this.pd[I.layer]),T):Math.max(Math.min((T+R)/2,this.pd[I.layer]),T),c.C(D++,W,S),c.C(D++,W,V)):R!==T&&(W=90===this.ma?Math.min(Math.max((V+S)/2,this.pd[I.layer]),V):Math.max(Math.min((V+S)/2,this.pd[I.layer]),V),c.C(D++,R,W),c.C(D++,T,W)))}d!==q&&A&&(g!==q&&(Cb(c.computeSpot(h))&&(_=c.o(0),ab=c.o(2),_.L(ab)||c.R(1,(_.x+ab.x)/2,(_.y+ab.y)/2)),z=c.getLinkPoint(e,g,Hb,h,s,f,i),c.R(0,z.x,z.y)),i!==q&&(Cb(c.computeSpot(s))&&(_=c.o(c.qa-1),ab=c.o(c.qa-3),_.L(ab)||c.R(c.qa-2,(_.x+ab.x)/2,(_.y+ab.y)/2)),z=c.getLinkPoint(f,i,Hb,s,s,e,g),c.R(c.qa-1,z.x,z.y))),c.Zh(),b.commit()}for(bb=new F(U),cb=this.network.edges.k;cb.next();)db=cb.value.link,db!==q&&db.Jb&&!bb.contains(db)&&bb.add(db);if(0<bb.count)if(90===this.ma||270===this.ma){for(eb=0,fb=new F(So),gb=bb.k;gb.next();)if(hb=gb.value,hb!==q&&hb.Jb)for(kb=2;kb<hb.qa-3;kb++)ib=hb.o(kb),jb=hb.o(kb+1),this.I(ib.y,jb.y)&&!this.I(ib.x,jb.x)&&(lb=new So,lb.layer=Math.floor(ib.y/2),mb=hb.o(0),nb=hb.o(hb.qa-1),lb.ob=mb.x*mb.x+mb.y,lb.yd=nb.x*nb.x+nb.y,lb.de=Math.min(ib.x,jb.x),lb.ud=Math.max(ib.x,jb.x),lb.index=kb,lb.link=hb,kb+2<hb.qa&&(ob=hb.o(kb-1),pb=hb.o(kb+2),qb=0,ob.y<ib.y?qb=pb.y<ib.y?3:ib.x<jb.x?2:1:ob.y>ib.y&&(qb=pb.y>ib.y?0:jb.x<ib.x?2:1),lb.oh=qb),fb.add(lb));if(1<fb.count)for(fb.sort(this.OD),rb=0;rb<fb.count;){for(sb=fb.n[rb].layer,tb=rb+1;tb<fb.count&&fb.n[tb].layer===sb;)tb++;if(tb-rb>1)for(ub=rb;tb>ub;){for(vb=fb.n[ub].ud,wb=rb+1;tb>wb&&fb.n[wb].de<vb;)vb=Math.max(vb,fb.n[wb].ud),wb++;if(xb=wb-ub,xb>1){for(fb.Bo(this.rv,ub,ub+xb),yb=1,zb=fb.n[ub].yd,kb=ub;wb>kb;kb++)Ab=fb.n[kb],Ab.yd!==zb&&(yb++,zb=Ab.yd);for(fb.Bo(this.ND,ub,ub+xb),Bb=1,zb=fb.n[ub].ob,kb=ub;wb>kb;kb++)Ab=fb.n[kb],Ab.ob!==zb&&(Bb++,zb=Ab.ob);for(Bb>yb?(Db=s,Eb=yb,zb=fb.n[ub].yd,fb.Bo(this.rv,ub,ub+xb)):(Db=h,Eb=Bb,zb=fb.n[ub].ob),Fb=0,kb=ub;wb>kb;kb++)Ab=fb.n[kb],(Db?Ab.ob:Ab.yd)!==zb&&(Fb++,zb=Db?Ab.ob:Ab.yd),hb=Ab.link,ib=hb.o(Ab.index),jb=hb.o(Ab.index+1),Gb=this.Py*(Fb-(Eb-1)/2),(hb.jh!==xf||To(ib.x,ib.y+Gb,jb.x,jb.y+Gb))&&(eb++,hb.Mk(),hb.R(Ab.index,ib.x,ib.y+Gb),hb.R(Ab.index+1,jb.x,jb.y+Gb),hb.Zh())}ub=wb}rb=tb}}else{for(Ib=0,Jb=new F(So),Kb=bb.k;Kb.next();)if(Lb=Kb.value,Lb!==q&&Lb.Jb)for(Ob=2;Ob<Lb.qa-3;Ob++)Mb=Lb.o(Ob),Nb=Lb.o(Ob+1),this.I(Mb.x,Nb.x)&&!this.I(Mb.y,Nb.y)&&(Pb=new So,Pb.layer=Math.floor(Mb.x/2),Qb=Lb.o(0),Rb=Lb.o(Lb.qa-1),Pb.ob=Qb.x+Qb.y*Qb.y,Pb.yd=Rb.x+Rb.y*Rb.y,Pb.de=Math.min(Mb.y,Nb.y),Pb.ud=Math.max(Mb.y,Nb.y),Pb.index=Ob,Pb.link=Lb,Ob+2<Lb.qa&&(Sb=Lb.o(Ob-1),Tb=Lb.o(Ob+2),Ub=0,Sb.x<Mb.x?Ub=Tb.x<Mb.x?3:Mb.y<Nb.y?2:1:Sb.x>Mb.x&&(Ub=Tb.x>Mb.x?0:Nb.y<Mb.y?2:1),Pb.oh=Ub),Jb.add(Pb));if(1<Jb.count)for(Jb.sort(this.OD),Vb=0;Vb<Jb.count;){for(Wb=Jb.n[Vb].layer,Xb=Vb+1;Xb<Jb.count&&Jb.n[Xb].layer===Wb;)Xb++;if(Xb-Vb>1)for(Yb=Vb;Xb>Yb;){for(Zb=Jb.n[Yb].ud,$b=Vb+1;Xb>$b&&Jb.n[$b].de<Zb;)Zb=Math.max(Zb,Jb.n[$b].ud),$b++;if(_b=$b-Yb,_b>1){for(Jb.Bo(this.rv,Yb,Yb+_b),ac=1,bc=Jb.n[Yb].yd,Ob=Yb;$b>Ob;Ob++)cc=Jb.n[Ob],cc.yd!==bc&&(ac++,bc=cc.yd);for(Jb.Bo(this.ND,Yb,Yb+_b),dc=1,bc=Jb.n[Yb].ob,Ob=Yb;$b>Ob;Ob++)cc=Jb.n[Ob],cc.ob!==bc&&(dc++,bc=cc.ob);for(dc>ac?(ec=s,fc=ac,bc=Jb.n[Yb].yd,Jb.Bo(this.rv,Yb,Yb+_b)):(ec=h,fc=dc,bc=Jb.n[Yb].ob),gc=0,Ob=Yb;$b>Ob;Ob++)cc=Jb.n[Ob],(ec?cc.ob:cc.yd)!==bc&&(gc++,bc=ec?cc.ob:cc.yd),Lb=cc.link,Mb=Lb.o(cc.index),Nb=Lb.o(cc.index+1),hc=this.Py*(gc-(fc-1)/2),(Lb.jh!==xf||To(Mb.x+hc,Mb.y,Nb.x+hc,Nb.y))&&(Ib++,Lb.Mk(),Lb.R(cc.index,Mb.x+hc,Mb.y),Lb.R(cc.index+1,Nb.x+hc,Nb.y),Lb.Zh())}Yb=$b}Vb=Xb}}},y.Md(So,{layer:h,ob:h,yd:h,de:h,ud:h,index:h,link:h,oh:h}),pk.prototype.OD=function(a,b){return a instanceof So&&b instanceof So&&a!==b?a.layer<b.layer?-1:a.layer>b.layer?1:a.de<b.de?-1:a.de>b.de?1:a.ud<b.ud?-1:a.ud>b.ud?1:0:0},pk.prototype.ND=function(a,b){return a instanceof So&&b instanceof So&&a!==b?a.ob<b.ob?-1:a.ob>b.ob||a.oh<b.oh?1:a.oh>b.oh||a.de<b.de?-1:a.de>b.de?1:a.ud<b.ud?-1:a.ud>b.ud?1:0:0},pk.prototype.rv=function(a,b){return a instanceof So&&b instanceof So&&a!==b?a.yd<b.yd?-1:a.yd>b.yd||a.oh<b.oh?1:a.oh>b.oh||a.de<b.de?-1:a.de>b.de?1:a.ud<b.ud?-1:a.ud>b.ud?1:0:0},pk.prototype.I=function(a,b){x&&(y.p(a,pk,"isApprox:a"),y.p(b,pk,"isApprox:b"));var c=a-b;return c>-1&&1>c},y.g(pk,"layerSpacing",pk.prototype.layerSpacing),y.defineProperty(pk,{layerSpacing:"layerSpacing"},w("Tm"),function(a){this.Tm!==a&&"number"==typeof a&&a>=0&&(this.Tm=a,this.J())}),y.g(pk,"columnSpacing",pk.prototype.MF),y.defineProperty(pk,{MF:"columnSpacing"},w("md"),function(a){this.md!==a&&"number"==typeof a&&a>=0&&(this.md=a,this.J())}),y.g(pk,"direction",pk.prototype.direction),y.defineProperty(pk,{direction:"direction"},w("ma"),function(a){this.ma!==a&&"number"==typeof a&&(this.ma=a,this.J())}),y.g(pk,"cycleRemoveOption",pk.prototype.WB),y.defineProperty(pk,{WB:"cycleRemoveOption"},w("qm"),function(a){this.qm!==a&&(x&&y.l(a,ga,Nn,"cycleRemoveOption"),a===On||a===In)&&(this.qm=a,this.J())}),y.g(pk,"layeringOption",pk.prototype.RC),y.defineProperty(pk,{RC:"layeringOption"},w("Um"),function(a){this.Um!==a&&(x&&y.l(a,ga,Nn,"layeringOption"),a===Jn||a===uo||a===wo)&&(this.Um=a,this.J())}),y.g(pk,"initializeOption",pk.prototype.HC),y.defineProperty(pk,{HC:"initializeOption"},w("Jm"),function(a){this.Jm!==a&&(x&&y.l(a,ga,Nn,"initializeOption"),a===Kn||a===Co||a===Ao)&&(this.Jm=a,this.J())}),y.g(pk,"iterations",pk.prototype.QG),y.defineProperty(pk,{QG:"iterations"},w("hl"),function(a){x&&y.p(a,Nn,"iterations"),this.hl!==a&&"number"==typeof a&&a>=0&&(this.hl=a,this.J())}),y.g(pk,"aggressiveOption",pk.prototype.AB),y.defineProperty(pk,{AB:"aggressiveOption"},w("jm"),function(a){this.jm!==a&&(x&&y.l(a,ga,Nn,"cycleRemoveOption"),a===Go||a===Ln||a===Ho)&&(this.jm=a,this.J())}),y.g(pk,"packOption",pk.prototype.hH),y.defineProperty(pk,{hH:"packOption"},w("Mh"),function(a){this.Mh!==a&&"number"==typeof a&&a>=0&&8>a&&(this.Mh=a,this.J())}),y.g(pk,"setsPortSpots",pk.prototype.Lk),y.defineProperty(pk,{Lk:"setsPortSpots"},w("Rg"),function(a){this.Rg!==a&&"boolean"==typeof a&&(this.Rg=a,this.J())}),y.g(pk,"linkSpacing",pk.prototype.Py),y.defineProperty(pk,{Py:"linkSpacing"},w("Qp"),function(a){this.Qp!==a&&(this.Qp=a,this.J())}),y.A(pk,{cJ:"maxLayer"},w("ab")),y.A(pk,{aJ:"maxIndex"},w("st")),y.A(pk,{$I:"maxColumn"},w("vb")),y.A(pk,{fJ:"minIndexLayer"},w("aq")),y.A(pk,{bJ:"maxIndexLayer"},w("kf")),pk.CycleDepthFirst=In=y.w(pk,"CycleDepthFirst",0),pk.CycleGreedy=On=y.w(pk,"CycleGreedy",1),pk.LayerOptimalLinkLength=Jn=y.w(pk,"LayerOptimalLinkLength",0),pk.LayerLongestPathSink=uo=y.w(pk,"LayerLongestPathSink",1),pk.LayerLongestPathSource=wo=y.w(pk,"LayerLongestPathSource",2),pk.InitDepthFirstOut=Kn=y.w(pk,"InitDepthFirstOut",0),pk.InitDepthFirstIn=Co=y.w(pk,"InitDepthFirstIn",1),pk.InitNaive=Ao=y.w(pk,"InitNaive",2),pk.AggressiveNone=Go=y.w(pk,"AggressiveNone",0),pk.AggressiveLess=Ln=y.w(pk,"AggressiveLess",1),pk.AggressiveMore=Ho=y.w(pk,"AggressiveMore",2),pk.PackNone=0,pk.PackExpand=Io=1,pk.PackStraighten=Jo=2,pk.PackMedian=Lo=4,pk.PackAll=Mn=7,y.ba("LayeredDigraphNetwork",Nn),y.Ka(Nn,Rm),Nn.prototype.createVertex=function(){return new Uo},Nn.prototype.createEdge=function(){return new Vo},y.ba("LayeredDigraphVertex",Uo),y.Ka(Uo,Vm),y.ba("LayeredDigraphEdge",Vo),y.Ka(Vo,Wm),y.ba("TreeLayout",Y),y.Ka(Y,rh),Y.prototype.cloneProtected=function(a){rh.prototype.cloneProtected.call(this,a),a.Oh=this.Oh,a.Yq=this.Yq,a.Tc=this.Tc,a.vf.assign(this.vf),a.pa.copyInheritedPropertiesFrom(this.pa),a.oa.copyInheritedPropertiesFrom(this.oa)},Y.prototype.createNetwork=function(){var a=new ap;return Sm(a,this),a},Y.prototype.makeNetwork=function(a){var b=this.createNetwork();return a instanceof E?(bp(this,b,a.uj,h),bp(this,b,a.links,h)):a instanceof He?bp(this,b,a.Dc,s):bp(this,b,a.k,s),b},Y.prototype.doLayout=function(a){var b,c,d;if(a||y.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),this.network===q&&(this.network=this.makeNetwork(a)),this.qe!==cp&&(this.ed=Um(this,this.ed)),b=this.h,b===q&&a instanceof E&&(b=a),this.gf=this.path===Wo&&b!==q?b.Pc?Xo:dp:this.path===Wo?Xo:this.path,0<this.network.vertexes.count){for(this.network.Iu(),b=this.network.vertexes.k;b.next();)a=b.value,a.initialized=s,a.level=0,a.parent=q,a.children=[];if(0<this.yc.count)for(b=this.yc.k,this.yc=new na($o);b.next();)a=b.value,a instanceof T?(a=this.network.Jl(a),a!==q&&this.yc.add(a)):a instanceof $o&&this.yc.add(a);if(0===this.yc.count){for(a=this.network.vertexes.k;a.next();)switch(b=a.value,this.gf){case Xo:0===b.cc.count&&this.yc.add(b);break;case dp:0===b.Tb.count&&this.yc.add(b);break;default:y.m("Unhandled path value "+this.gf.toString())}if(0===this.yc.count){for(a=999999,b=q,c=this.network.vertexes.k;c.next();)switch(d=c.value,this.gf){case Xo:d.cc.count<a&&(a=d.cc.count,b=d);break;case dp:d.Tb.count<a&&(a=d.Tb.count,b=d);break;default:y.m("Unhandled path value "+this.gf.toString())}b!==q&&this.yc.add(b)}}for(b=this.yc.k;b.next();)a=b.value,a.initialized||(a.initialized=h,ep(this,a));for(a=this.yc.k;a.next();)fp(this,a.value);for(a=this.yc.k;a.next();)gp(this,a.value);for(a=this.yc.k;a.next();)hp(this,a.value);for(a=this.network.vertexes.k;a.next();)this.addComments(a.value);for(a=this.yc.k;a.next();)ip(this,a.value);this.arrangeTrees(),this.updateParts()}this.network=q,this.yc=new na(Object),this.Ve=h},Y.prototype.removeChild=function(a,b){var c,d,e,f;if(x&&y.l(a,$o,Y,"removeChild:p"),x&&y.l(b,$o,Y,"removeChild:c"),a!==q&&b!==q){for(c=a.children,d=0,e=0;e<c.length;e++)c[e]===b&&d++;if(d>0){for(d=Array(c.length-d),f=0,e=0;e<c.length;e++)c[e]!==b&&(d[f++]=c[e]);a.children=d}}},Y.prototype.initializeTreeVertexValues=function(a){var b,c,d;if(x&&y.l(a,$o,Y,"initializeTreeVertexValues:v"),b=lp(this,a),a.copyInheritedPropertiesFrom(b),a.parent!==q&&a.parent.alignment===kp){for(b=a.angle,c=a.parent.children,d=0;d<c.length&&a!==c[d];)d++;0===d%2?d!==c.length-1&&(b=90===b?180:180===b?270:270===b?180:270):b=90===b?0:180===b?90:270===b?0:90,a.angle=b}a.initialized=h},Y.prototype.assignTreeVertexValues=aa(),Y.prototype.sortTreeVertexChildren=function(a){switch(x&&y.l(a,$o,Y,"sortTreeVertexChildren:v"),a.sorting){case pp:break;case qp:a.children.reverse();break;case rp:a.children.sort(a.comparer);break;case sp:a.children.sort(a.comparer),a.children.reverse();break;default:y.m("Unhandled sorting value "+a.sorting.toString())}},Y.prototype.addComments=function(a){var b,c,d,e,f,g,h,i,j,k;if(x&&y.l(a,$o,Y,"addComments:v"),b=a.angle,c=a.parent,d=0,e=tp,e=s,c!==q&&(d=c.angle,e=c.alignment,e=up(e)),b=90===b||270===b,d=90===d||270===d,c=0===a.zl,f=0,g=0,h=0,i=a.commentSpacing,a.vc!==q)for(j=a.vc.iC();j.next();)k=j.value,"Comment"===k.Ac&&k.xb()&&(a.comments===q&&(a.comments=[]),a.comments.push(k),k.ci(),k=k.Ba,b&&!c||!e&&!d&&c||e&&d&&c?(f=Math.max(f,k.width),g+=k.height+Math.abs(h)):(f+=k.width+Math.abs(h),g=Math.max(g,k.height)),h=i);a.comments!==q&&(b&&!c||!e&&!d&&c||e&&d&&c?(f+=Math.abs(a.commentMargin),g=Math.max(0,g-a.height)):(g+=Math.abs(a.commentMargin),f=Math.max(0,f-a.width)),e=y.xj(0,0,a.S.width+f,a.S.height+g),a.Ib=e,y.Bc(e))},Y.prototype.layoutComments=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(x&&y.l(a,$o,Y,"layoutComments:v"),a.comments!==q){for(b=a.vc.Ba,c=a.parent,d=a.angle,e=0,f=tp,f=s,c!==q&&(e=c.angle,f=c.alignment,f=up(f)),d=90===d||270===d,g=90===e||270===e,h=0===a.zl,i=zp(a),j=0,k=a.comments,l=k.length,m=y.M(),n=0;l>n;n++)if(c=k[n],o=c.Ba,d&&!h||!f&&!g&&h||f&&g&&h){if(e>135&&!f||g&&i)if(0<=a.commentMargin)for(m.q(a.S.x-a.commentMargin-o.width,a.S.y+j),c.location=m,p=c.If();p.next();)c=p.value,c.gb=ac,c.kb=bc;else for(m.q(a.S.x+2*a.N.x-a.commentMargin,a.S.y+j),c.location=m,p=c.If();p.next();)c=p.value,c.gb=bc,c.kb=ac;else if(0<=a.commentMargin)for(m.q(a.S.x+2*a.N.x+a.commentMargin,a.S.y+j),c.location=m,p=c.If();p.next();)c=p.value,c.gb=bc,c.kb=ac;else for(m.q(a.S.x+a.commentMargin-o.width,a.S.y+j),c.location=m,p=c.If();p.next();)c=p.value,c.gb=ac,c.kb=bc;j=0<=a.commentSpacing?j+(o.height+a.commentSpacing):j+(a.commentSpacing-o.height)}else{if(e>135&&!f||!g&&i)if(0<=a.commentMargin)for(m.q(a.S.x+j,a.S.y-a.commentMargin-o.height),c.location=m,p=c.If();p.next();)c=p.value,c.gb=$b,c.kb=cc;else for(m.q(a.S.x+j,a.S.y+2*a.N.y-a.commentMargin),c.location=m,p=c.If();p.next();)c=p.value,c.gb=cc,c.kb=$b;else if(0<=a.commentMargin)for(m.q(a.S.x+j,a.S.y+2*a.N.y+a.commentMargin),c.location=m,p=c.If();p.next();)c=p.value,c.gb=cc,c.kb=$b;else for(m.q(a.S.x+j,a.S.y+a.commentMargin-o.height),c.location=m,p=c.If();p.next();)c=p.value,c.gb=$b,c.kb=cc;j=0<=a.commentSpacing?j+(o.width+a.commentSpacing):j+(a.commentSpacing-o.width)}if(y.B(m),b=j-a.commentSpacing-(d?b.height:b.width),this.gf===Xo)for(a=a.Tb;a.next();)e=a.value,(c=e.link)&&c.jh!==xf&&(c.Kl=b>0?b:0/0);else for(a=a.cc;a.next();)e=a.value,(c=e.link)&&c.jh!==xf&&(c.cm=b>0?b:0/0)}},Y.prototype.arrangeTrees=function(){var a,b,c,d;if(this.Tc===cp)for(a=this.yc.k;a.next();)b=a.value,c=b.vc,c!==q&&(d=c.position,c=d.x,d=d.y,isFinite(c)||(c=0),isFinite(d)||(d=0),cq(this,b,c,d));else for(a=this.ed,c=a.x,d=a.y,a=this.yc.k;a.next();)switch(b=a.value,cq(this,b,c+b.Ia.x,d+b.Ia.y),this.Tc){case Zo:d+=b.Va.height+this.vf.height;break;case dq:c+=b.Va.width+this.vf.width;break;default:y.m("Unhandled arrangement value "+this.Tc.toString())}},Y.prototype.commitLayout=function(){this.uz(),this.commitNodes(),this.Kr&&this.commitLinks()},Y.prototype.commitNodes=function(){for(var b,a=this.network.vertexes.k;a.next();)b=a.value,b.commit();for(a.reset();a.next();)b=a.value,this.layoutComments(b)},Y.prototype.commitLinks=function(){for(var a=this.network.edges.k;a.next();)a.value.commit()},Y.prototype.uz=function(){for(var a=this.yc.k;a.next();)eq(this,a.value)},Y.prototype.setPortSpots=function(a){var b,e,c,d,f,g,h,i,j;if(x&&y.l(a,$o,Y,"setPortSpots:v"),b=a.alignment,up(b)){switch(x&&y.l(a,$o,Y,"setPortSpotsBus:v"),x&&y.l(b,ga,Y,"setPortSpots:align"),c=this.gf===Xo,d=Dp(a),d){case 0:e=bc;break;case 90:e=cc;break;case 180:e=ac;break;default:e=$b}switch(f=a.children,g=f.length,b){case vp:case kp:for(b=0;g>b;b++)if(h=f[b],h=c?h.cc:h.Tb,h.next()&&(i=h.value,i=i.link,i!==q)){if(j=90===d||270===d?ac:$b,1===g||b===g-1&&1===g%2)switch(d){case 0:j=ac;break;case 90:j=$b;break;case 180:j=bc;break;default:j=cc}else 0===b%2&&(j=90===d||270===d?bc:cc);c?(a.setsPortSpot&&(i.gb=e),a.setsChildPortSpot&&(i.kb=j)):(a.setsPortSpot&&(i.gb=j),a.setsChildPortSpot&&(i.kb=e))}break;case wp:for(j=90===d||270===d?bc:cc,h=c?a.Tb:a.cc;h.next();)i=h.value,i=i.link,i!==q&&(c?(a.setsPortSpot&&(i.gb=e),a.setsChildPortSpot&&(i.kb=j)):(a.setsPortSpot&&(i.gb=j),a.setsChildPortSpot&&(i.kb=e)));break;case xp:for(j=90===d||270===d?ac:$b,h=c?a.Tb:a.cc;h.next();)i=h.value,i=i.link,i!==q&&(c?(a.setsPortSpot&&(i.gb=e),a.setsChildPortSpot&&(i.kb=j)):(a.setsPortSpot&&(i.gb=j),a.setsChildPortSpot&&(i.kb=e)))}}else if(c=Dp(a),this.gf===Xo){for(d=a.Tb;d.next();)if(e=d.value,e=e.link,e!==q){if(a.setsPortSpot)if(Db(a.portSpot))switch(c){case 0:e.gb=bc;break;case 90:e.gb=cc;break;case 180:e.gb=ac;break;default:e.gb=$b}else e.gb=a.portSpot;if(a.setsChildPortSpot)if(Db(a.childPortSpot))switch(c){case 0:e.kb=ac;break;case 90:e.kb=$b;break;case 180:e.kb=bc;break;default:e.kb=cc}else e.kb=a.childPortSpot}}else for(d=a.cc;d.next();)if(e=d.value,e=e.link,e!==q){if(a.setsPortSpot)if(Db(a.portSpot))switch(c){case 0:e.kb=bc;break;case 90:e.kb=cc;break;case 180:e.kb=ac;break;default:e.kb=$b}else e.kb=a.portSpot;if(a.setsChildPortSpot)if(Db(a.childPortSpot))switch(c){case 0:e.gb=ac;break;case 90:e.gb=$b;break;case 180:e.gb=bc;break;default:e.gb=cc}else e.gb=a.childPortSpot}},y.g(Y,"roots",Y.prototype.rH),y.defineProperty(Y,{rH:"roots"},w("yc"),function(a){this.yc!==a&&(y.l(a,na,Y,"roots"),this.yc=a,this.J())}),y.g(Y,"path",Y.prototype.path),y.defineProperty(Y,{path:"path"},w("Oh"),function(a){this.Oh!==a&&(y.l(a,ga,Y,"path"),this.Oh=a,this.J())}),y.g(Y,"treeStyle",Y.prototype.rE),y.defineProperty(Y,{rE:"treeStyle"},w("Yq"),function(a){this.Tc!==a&&(x&&y.l(a,ga,Y,"treeStyle"),a===Yo||a===np||a===op||a===mp)&&(this.Yq=a,this.J())}),y.g(Y,"arrangement",Y.prototype.qe),y.defineProperty(Y,{qe:"arrangement"},w("Tc"),function(a){this.Tc!==a&&(x&&y.l(a,ga,Y,"arrangement"),a===Zo||a===dq||a===cp)&&(this.Tc=a,this.J())}),y.g(Y,"arrangementSpacing",Y.prototype.tu),y.defineProperty(Y,{tu:"arrangementSpacing"},w("vf"),function(a){this.vf.L(a)||(this.vf.assign(a),this.J())}),y.g(Y,"rootDefaults",Y.prototype.qH),y.defineProperty(Y,{qH:"rootDefaults"},w("pa"),function(a){this.pa!==a&&(x&&y.l(a,$o,Y,"rootDefaults"),this.pa=a,this.J())}),y.g(Y,"alternateDefaults",Y.prototype.uF),y.defineProperty(Y,{uF:"alternateDefaults"},w("oa"),function(a){this.oa!==a&&(x&&y.l(a,$o,Y,"alternateDefaults"),this.oa=a,this.J())}),y.g(Y,"sorting",Y.prototype.sorting),y.defineProperty(Y,{sorting:"sorting"},function(){return this.pa.sorting},function(a){this.pa.sorting!==a&&(x&&y.l(a,ga,Y,"sorting"),a===pp||a===qp||a===rp||sp)&&(this.pa.sorting=a,this.J())}),y.g(Y,"comparer",Y.prototype.comparer),y.defineProperty(Y,{comparer:"comparer"},function(){return this.pa.comparer},function(a){this.pa.comparer!==a&&(x&&y.j(a,"function",Y,"comparer"),this.pa.comparer=a,this.J())}),y.g(Y,"angle",Y.prototype.angle),y.defineProperty(Y,{angle:"angle"},function(){return this.pa.angle},function(a){this.pa.angle===a||0!==a&&90!==a&&180!==a&&270!==a||(this.pa.angle=a,this.J())}),y.g(Y,"alignment",Y.prototype.alignment),y.defineProperty(Y,{alignment:"alignment"},function(){return this.pa.alignment},function(a){this.pa.alignment!==a&&(x&&y.rb(a,Y,Y,"alignment"),this.pa.alignment=a,this.J())}),y.g(Y,"nodeIndent",Y.prototype.nodeIndent),y.defineProperty(Y,{nodeIndent:"nodeIndent"},function(){return this.pa.nodeIndent},function(a){this.pa.nodeIndent!==a&&a>=0&&(this.pa.nodeIndent=a,this.J())}),y.g(Y,"nodeIndentPastParent",Y.prototype.nodeIndentPastParent),y.defineProperty(Y,{nodeIndentPastParent:"nodeIndentPastParent"},function(){return this.pa.nodeIndentPastParent},function(a){this.pa.nodeIndentPastParent!==a&&a>=0&&1>=a&&(this.pa.nodeIndentPastParent=a,this.J())}),y.g(Y,"nodeSpacing",Y.prototype.nodeSpacing),y.defineProperty(Y,{nodeSpacing:"nodeSpacing"},function(){return this.pa.nodeSpacing},function(a){this.pa.nodeSpacing!==a&&(this.pa.nodeSpacing=a,this.J())}),y.g(Y,"layerSpacing",Y.prototype.layerSpacing),y.defineProperty(Y,{layerSpacing:"layerSpacing"},function(){return this.pa.layerSpacing},function(a){this.pa.layerSpacing!==a&&(this.pa.layerSpacing=a,this.J())}),y.g(Y,"layerSpacingParentOverlap",Y.prototype.layerSpacingParentOverlap),y.defineProperty(Y,{layerSpacingParentOverlap:"layerSpacingParentOverlap"},function(){return this.pa.layerSpacingParentOverlap},function(a){this.pa.layerSpacingParentOverlap!==a&&a>=0&&1>=a&&(this.pa.layerSpacingParentOverlap=a,this.J())}),y.g(Y,"compaction",Y.prototype.compaction),y.defineProperty(Y,{compaction:"compaction"},function(){return this.pa.compaction},function(a){this.pa.compaction!==a&&(x&&y.l(a,ga,Y,"compaction"),a===Ap||a===Cp)&&(this.pa.compaction=a,this.J())}),y.g(Y,"breadthLimit",Y.prototype.breadthLimit),y.defineProperty(Y,{breadthLimit:"breadthLimit"},function(){return this.pa.breadthLimit},function(a){this.pa.breadthLimit!==a&&a>=0&&(this.pa.breadthLimit=a,this.J())}),y.g(Y,"rowSpacing",Y.prototype.rowSpacing),y.defineProperty(Y,{rowSpacing:"rowSpacing"},function(){return this.pa.rowSpacing},function(a){this.pa.rowSpacing!==a&&(this.pa.rowSpacing=a,this.J())}),y.g(Y,"rowIndent",Y.prototype.rowIndent),y.defineProperty(Y,{rowIndent:"rowIndent"},function(){return this.pa.rowIndent},function(a){this.pa.rowIndent!==a&&a>=0&&(this.pa.rowIndent=a,this.J())}),y.g(Y,"commentSpacing",Y.prototype.commentSpacing),y.defineProperty(Y,{commentSpacing:"commentSpacing"},function(){return this.pa.commentSpacing},function(a){this.pa.commentSpacing!==a&&(this.pa.commentSpacing=a,this.J())}),y.g(Y,"commentMargin",Y.prototype.commentMargin),y.defineProperty(Y,{commentMargin:"commentMargin"},function(){return this.pa.commentMargin},function(a){this.pa.commentMargin!==a&&(this.pa.commentMargin=a,this.J())}),y.g(Y,"setsPortSpot",Y.prototype.setsPortSpot),y.defineProperty(Y,{setsPortSpot:"setsPortSpot"},function(){return this.pa.setsPortSpot},function(a){this.pa.setsPortSpot!==a&&(this.pa.setsPortSpot=a,this.J())}),y.g(Y,"portSpot",Y.prototype.portSpot),y.defineProperty(Y,{portSpot:"portSpot"},function(){return this.pa.portSpot},function(a){this.pa.portSpot.L(a)||(this.pa.portSpot=a,this.J())}),y.g(Y,"setsChildPortSpot",Y.prototype.setsChildPortSpot),y.defineProperty(Y,{setsChildPortSpot:"setsChildPortSpot"},function(){return this.pa.setsChildPortSpot},function(a){this.pa.setsChildPortSpot!==a&&(this.pa.setsChildPortSpot=a,this.J())}),y.g(Y,"childPortSpot",Y.prototype.childPortSpot),y.defineProperty(Y,{childPortSpot:"childPortSpot"},function(){return this.pa.childPortSpot},function(a){this.pa.childPortSpot.L(a)||(this.pa.childPortSpot=a,this.J())}),y.g(Y,"alternateSorting",Y.prototype.FF),y.defineProperty(Y,{FF:"alternateSorting"},function(){return this.oa.sorting},function(a){this.oa.sorting!==a&&(x&&y.l(a,ga,Y,"alternateSorting"),a===pp||a===qp||a===rp||sp)&&(this.oa.sorting=a,this.J())}),y.g(Y,"alternateComparer",Y.prototype.sF),y.defineProperty(Y,{sF:"alternateComparer"},function(){return this.oa.comparer},function(a){this.oa.comparer!==a&&(x&&y.j(a,"function",Y,"alternateComparer"),this.oa.comparer=a,this.J())}),y.g(Y,"alternateAngle",Y.prototype.mF),y.defineProperty(Y,{mF:"alternateAngle"},function(){return this.oa.angle},function(a){this.oa.angle===a||0!==a&&90!==a&&180!==a&&270!==a||(this.oa.angle=a,this.J())}),y.g(Y,"alternateAlignment",Y.prototype.lF),y.defineProperty(Y,{lF:"alternateAlignment"},function(){return this.oa.alignment},function(a){this.oa.alignment!==a&&(x&&y.rb(a,Y,Y,"alternateAlignment"),this.oa.alignment=a,this.J())}),y.g(Y,"alternateNodeIndent",Y.prototype.xF),y.defineProperty(Y,{xF:"alternateNodeIndent"},function(){return this.oa.nodeIndent},function(a){this.oa.nodeIndent!==a&&a>=0&&(this.oa.nodeIndent=a,this.J())}),y.g(Y,"alternateNodeIndentPastParent",Y.prototype.yF),y.defineProperty(Y,{yF:"alternateNodeIndentPastParent"},function(){return this.oa.nodeIndentPastParent},function(a){this.oa.nodeIndentPastParent!==a&&a>=0&&1>=a&&(this.oa.nodeIndentPastParent=a,this.J())}),y.g(Y,"alternateNodeSpacing",Y.prototype.zF),y.defineProperty(Y,{zF:"alternateNodeSpacing"},function(){return this.oa.nodeSpacing},function(a){this.oa.nodeSpacing!==a&&(this.oa.nodeSpacing=a,this.J())}),y.g(Y,"alternateLayerSpacing",Y.prototype.vF),y.defineProperty(Y,{vF:"alternateLayerSpacing"},function(){return this.oa.layerSpacing},function(a){this.oa.layerSpacing!==a&&(this.oa.layerSpacing=a,this.J())}),y.g(Y,"alternateLayerSpacingParentOverlap",Y.prototype.wF),y.defineProperty(Y,{wF:"alternateLayerSpacingParentOverlap"},function(){return this.oa.layerSpacingParentOverlap},function(a){this.oa.layerSpacingParentOverlap!==a&&a>=0&&1>=a&&(this.oa.layerSpacingParentOverlap=a,this.J())}),y.g(Y,"alternateCompaction",Y.prototype.rF),y.defineProperty(Y,{rF:"alternateCompaction"},function(){return this.oa.compaction},function(a){this.oa.compaction!==a&&(x&&y.l(a,ga,Y,"alternateCompaction"),a===Ap||a===Cp)&&(this.oa.compaction=a,this.J())}),y.g(Y,"alternateBreadthLimit",Y.prototype.nF),y.defineProperty(Y,{nF:"alternateBreadthLimit"},function(){return this.oa.breadthLimit},function(a){this.oa.breadthLimit!==a&&a>=0&&(this.oa.breadthLimit=a,this.J())}),y.g(Y,"alternateRowSpacing",Y.prototype.CF),y.defineProperty(Y,{CF:"alternateRowSpacing"},function(){return this.oa.rowSpacing},function(a){this.oa.rowSpacing!==a&&(this.oa.rowSpacing=a,this.J())}),y.g(Y,"alternateRowIndent",Y.prototype.BF),y.defineProperty(Y,{BF:"alternateRowIndent"},function(){return this.oa.rowIndent},function(a){this.oa.rowIndent!==a&&a>=0&&(this.oa.rowIndent=a,this.J())}),y.g(Y,"alternateCommentSpacing",Y.prototype.qF),y.defineProperty(Y,{qF:"alternateCommentSpacing"},function(){return this.oa.commentSpacing},function(a){this.oa.commentSpacing!==a&&(this.oa.commentSpacing=a,this.J())}),y.g(Y,"alternateCommentMargin",Y.prototype.pF),y.defineProperty(Y,{pF:"alternateCommentMargin"},function(){return this.oa.commentMargin},function(a){this.oa.commentMargin!==a&&(this.oa.commentMargin=a,this.J())}),y.g(Y,"alternateSetsPortSpot",Y.prototype.EF),y.defineProperty(Y,{EF:"alternateSetsPortSpot"},function(){return this.oa.setsPortSpot},function(a){this.oa.setsPortSpot!==a&&(this.oa.setsPortSpot=a,this.J())}),y.g(Y,"alternatePortSpot",Y.prototype.AF),y.defineProperty(Y,{AF:"alternatePortSpot"},function(){return this.oa.portSpot},function(a){this.oa.portSpot.L(a)||(this.oa.portSpot=a,this.J())}),y.g(Y,"alternateSetsChildPortSpot",Y.prototype.DF),y.defineProperty(Y,{DF:"alternateSetsChildPortSpot"},function(){return this.oa.setsChildPortSpot},function(a){this.oa.setsChildPortSpot!==a&&(this.oa.setsChildPortSpot=a,this.J())}),y.g(Y,"alternateChildPortSpot",Y.prototype.oF),y.defineProperty(Y,{oF:"alternateChildPortSpot"},function(){return this.oa.childPortSpot},function(a){this.oa.childPortSpot.L(a)||(this.oa.childPortSpot=a,this.J())}),Y.PathDefault=Wo=y.w(Y,"PathDefault",-1),Y.PathDestination=Xo=y.w(Y,"PathDestination",0),Y.PathSource=dp=y.w(Y,"PathSource",1),Y.SortingForwards=pp=y.w(Y,"SortingForwards",10),Y.SortingReverse=qp=y.w(Y,"SortingReverse",11),Y.SortingAscending=rp=y.w(Y,"SortingAscending",12),Y.SortingDescending=sp=y.w(Y,"SortingDescending",13),Y.AlignmentCenterSubtrees=Qp=y.w(Y,"AlignmentCenterSubtrees",20),Y.AlignmentCenterChildren=tp=y.w(Y,"AlignmentCenterChildren",21),Y.AlignmentStart=Ep=y.w(Y,"AlignmentStart",22),Y.AlignmentEnd=Fp=y.w(Y,"AlignmentEnd",23),Y.AlignmentBus=vp=y.w(Y,"AlignmentBus",24),Y.AlignmentBusBranching=kp=y.w(Y,"AlignmentBusBranching",25),Y.AlignmentTopLeftBus=wp=y.w(Y,"AlignmentTopLeftBus",26),Y.AlignmentBottomRightBus=xp=y.w(Y,"AlignmentBottomRightBus",27),Y.CompactionNone=Ap=y.w(Y,"CompactionNone",30),Y.CompactionBlock=Cp=y.w(Y,"CompactionBlock",31),Y.StyleLayered=Yo=y.w(Y,"StyleLayered",40),Y.StyleLastParents=op=y.w(Y,"StyleLastParents",41),Y.StyleAlternating=np=y.w(Y,"StyleAlternating",42),Y.StyleRootOnly=mp=y.w(Y,"StyleRootOnly",43),Y.ArrangementVertical=Zo=y.w(Y,"ArrangementVertical",50),Y.ArrangementHorizontal=dq=y.w(Y,"ArrangementHorizontal",51),Y.ArrangementFixedRoots=cp=y.w(Y,"ArrangementFixedRoots",52),y.ba("TreeNetwork",ap),y.Ka(ap,Rm),ap.prototype.createVertex=function(){return new $o},ap.prototype.createEdge=function(){return new fq},y.ba("TreeVertex",$o),y.Ka($o,Vm),$o.prototype.copyInheritedPropertiesFrom=function(a){a!==q&&(this.sorting=a.sorting,this.comparer=a.comparer,this.angle=a.angle,this.alignment=a.alignment,this.nodeIndent=a.nodeIndent,this.nodeIndentPastParent=a.nodeIndentPastParent,this.nodeSpacing=a.nodeSpacing,this.layerSpacing=a.layerSpacing,this.layerSpacingParentOverlap=a.layerSpacingParentOverlap,this.compaction=a.compaction,this.breadthLimit=a.breadthLimit,this.rowSpacing=a.rowSpacing,this.rowIndent=a.rowIndent,this.commentSpacing=a.commentSpacing,this.commentMargin=a.commentMargin,this.setsPortSpot=a.setsPortSpot,this.portSpot=a.portSpot,this.setsChildPortSpot=a.setsChildPortSpot,this.childPortSpot=a.childPortSpot)},y.A($o,{zl:"childrenCount"},function(){return this.children.length}),y.g($o,"relativePosition",$o.prototype.lH),y.defineProperty($o,{lH:"relativePosition"},w("ea"),function(a){y.l(a,A,$o,"relativePosition"),this.ea.set(a)}),y.g($o,"subtreeSize",$o.prototype.BH),y.defineProperty($o,{BH:"subtreeSize"},w("Va"),function(a){y.l(a,ha,$o,"subtreeSize"),this.Va.set(a)}),y.g($o,"subtreeOffset",$o.prototype.AH),y.defineProperty($o,{AH:"subtreeOffset"},w("Ia"),function(a){y.l(a,A,$o,"subtreeOffset"),this.Ia.set(a)}),y.ba("TreeEdge",fq),y.Ka(fq,Wm),fq.prototype.commit=function(){var b,c,d,e,f,g,h,j,k,l,m,i,a=this.link;if(a!==q&&a.jh!==xf){switch(b=this.network.Nb,c=q,d=q,b.gf){case Xo:c=this.fromVertex,d=this.toVertex;break;case dp:c=this.toVertex,d=this.fromVertex;break;default:y.m("Unhandled path value "+b.gf.toString())}if(c!==q&&d!==q)if(b=this.qq,0!==b.x||0!==b.y||c.sH){if(d=c.Ib,h=Dp(c),e=Gp(c),f=c.rowSpacing,a.updateRoute(),g=a.Se===vg,i=a.Jb,a.Mk(),i||g){for(j=2;4<a.qa;)a.xD(2);k=a.o(1),l=a.o(2)}else{for(j=1;3<a.qa;)a.xD(1);k=a.o(0),l=a.o(a.qa-1)}m=a.o(a.qa-1),0===h?(c.alignment===Fp?(h=d.bottom+b.y,0===b.y&&k.y>m.y+c.rowIndent&&(h=Math.min(h,Math.max(k.y,h-Hp(c))))):c.alignment===Ep?(h=d.top+b.y,0===b.y&&k.y<m.y-c.rowIndent&&(h=Math.max(h,Math.min(k.y,h+Hp(c))))):h=c.yo||c.zo&&1===c.maxGenerationCount?d.top-c.Ia.y+b.y:d.y+d.height/2+b.y,g?(a.C(j,k.x,h),j++,a.C(j,d.right+e,h),j++,a.C(j,d.right+e+(b.x-f)/3,h),j++,a.C(j,d.right+e+2*(b.x-f)/3,h),j++,a.C(j,d.right+e+(b.x-f),h),j++,a.C(j,l.x,h)):(i&&(a.C(j,d.right+e/2,k.y),j++),a.C(j,d.right+e/2,h),j++,a.C(j,d.right+e+b.x-(i?f/2:f),h),j++,i&&a.C(j,a.o(j-1).x,l.y))):90===h?(c.alignment===Fp?(h=d.right+b.x,0===b.x&&k.x>m.x+c.rowIndent&&(h=Math.min(h,Math.max(k.x,h-Hp(c))))):c.alignment===Ep?(h=d.left+b.x,0===b.x&&k.x<m.x-c.rowIndent&&(h=Math.max(h,Math.min(k.x,h+Hp(c))))):h=c.yo||c.zo&&1===c.maxGenerationCount?d.left-c.Ia.x+b.x:d.x+d.width/2+b.x,g?(a.C(j,h,k.y),j++,a.C(j,h,d.bottom+e),j++,a.C(j,h,d.bottom+e+(b.y-f)/3),j++,a.C(j,h,d.bottom+e+2*(b.y-f)/3),j++,a.C(j,h,d.bottom+e+(b.y-f)),j++,a.C(j,h,l.y)):(i&&(a.C(j,k.x,d.bottom+e/2),j++),a.C(j,h,d.bottom+e/2),j++,a.C(j,h,d.bottom+e+b.y-(i?f/2:f)),j++,i&&a.C(j,l.x,a.o(j-1).y))):180===h?(c.alignment===Fp?(h=d.bottom+b.y,0===b.y&&k.y>m.y+c.rowIndent&&(h=Math.min(h,Math.max(k.y,h-Hp(c))))):c.alignment===Ep?(h=d.top+b.y,0===b.y&&k.y<m.y-c.rowIndent&&(h=Math.max(h,Math.min(k.y,h+Hp(c))))):h=c.yo||c.zo&&1===c.maxGenerationCount?d.top-c.Ia.y+b.y:d.y+d.height/2+b.y,g?(a.C(j,k.x,h),j++,a.C(j,d.left-e,h),j++,a.C(j,d.left-e+(b.x+f)/3,h),j++,a.C(j,d.left-e+2*(b.x+f)/3,h),j++,a.C(j,d.left-e+(b.x+f),h),j++,a.C(j,l.x,h)):(i&&(a.C(j,d.left-e/2,k.y),j++),a.C(j,d.left-e/2,h),j++,a.C(j,d.left-e+b.x+(i?f/2:f),h),j++,i&&a.C(j,a.o(j-1).x,l.y))):270===h?(c.alignment===Fp?(h=d.right+b.x,0===b.x&&k.x>m.x+c.rowIndent&&(h=Math.min(h,Math.max(k.x,h-Hp(c))))):c.alignment===Ep?(h=d.left+b.x,0===b.x&&k.x<m.x-c.rowIndent&&(h=Math.max(h,Math.min(k.x,h+Hp(c))))):h=c.yo||c.zo&&1===c.maxGenerationCount?d.left-c.Ia.x+b.x:d.x+d.width/2+b.x,g?(a.C(j,h,k.y),j++,a.C(j,h,d.top-e),j++,a.C(j,h,d.top-e+(b.y+f)/3),j++,a.C(j,h,d.top-e+2*(b.y+f)/3),j++,a.C(j,h,d.top-e+(b.y+f)),j++,a.C(j,h,l.y)):(i&&(a.C(j,k.x,d.top-e/2),j++),a.C(j,h,d.top-e/2),j++,a.C(j,h,d.top-e+b.y+(i?f/2:f)),j++,i&&a.C(j,l.x,a.o(j-1).y))):y.m("Invalid angle "+h),a.Zh()
}else e=c,f=d,x&&y.l(e,$o,fq,"adjustRouteForAngleChange:parent"),x&&y.l(f,$o,fq,"adjustRouteForAngleChange:child"),a=this.link,c=Dp(e),c===Dp(f)||(b=Gp(e),d=e.Ib,e=f.Ib,0===c&&e.left-d.right<b+1||90===c&&e.top-d.bottom<b+1||180===c&&d.left-e.right<b+1||270===c&&d.top-e.bottom<b+1)||(a.updateRoute(),e=a.Se===vg,f=a.Jb,g=up(this.fromVertex.alignment),a.Mk(),0===c?(c=d.right+b/2,e?4===a.qa&&(b=a.o(3).y,a.R(1,c-20,a.o(1).y),a.C(2,c-20,b),a.C(3,c,b),a.C(4,c+20,b),a.R(5,a.o(5).x,b)):f?g?a.R(3,a.o(2).x,a.o(4).y):6===a.qa&&(a.R(2,c,a.o(2).y),a.R(3,c,a.o(3).y)):4===a.qa?a.C(2,c,a.o(2).y):3===a.qa?a.R(1,c,a.o(2).y):2===a.qa&&a.C(1,c,a.o(1).y)):90===c?(b=d.bottom+b/2,e?4===a.qa&&(c=a.o(3).x,a.R(1,a.o(1).x,b-20),a.C(2,c,b-20),a.C(3,c,b),a.C(4,c,b+20),a.R(5,c,a.o(5).y)):f?g?a.R(3,a.o(2).x,a.o(4).y):6===a.qa&&(a.R(2,a.o(2).x,b),a.R(3,a.o(3).x,b)):4===a.qa?a.C(2,a.o(2).x,b):3===a.qa?a.R(1,a.o(2).x,b):2===a.qa&&a.C(1,a.o(1).x,b)):180===c?(c=d.left-b/2,e?4===a.qa&&(b=a.o(3).y,a.R(1,c+20,a.o(1).y),a.C(2,c+20,b),a.C(3,c,b),a.C(4,c-20,b),a.R(5,a.o(5).x,b)):f?g?a.R(3,a.o(2).x,a.o(4).y):6===a.qa&&(a.R(2,c,a.o(2).y),a.R(3,c,a.o(3).y)):4===a.qa?a.C(2,c,a.o(2).y):3===a.qa?a.R(1,c,a.o(2).y):2===a.qa&&a.C(1,c,a.o(1).y)):270===c&&(b=d.top-b/2,e?4===a.qa&&(c=a.o(3).x,a.R(1,a.o(1).x,b+20),a.C(2,c,b+20),a.C(3,c,b),a.C(4,c,b-20),a.R(5,c,a.o(5).y)):f?g?a.R(3,a.o(2).x,a.o(4).y):6===a.qa&&(a.R(2,a.o(2).x,b),a.R(3,a.o(3).x,b)):4===a.qa?a.C(2,a.o(2).x,b):3===a.qa?a.R(1,a.o(2).x,b):2===a.qa&&a.C(1,a.o(1).x,b)),a.Zh())}},y.g(fq,"relativePoint",fq.prototype.kH),y.defineProperty(fq,{kH:"relativePoint"},w("qq"),function(a){this.qq.set(a)}),gq.prototype.Zq=function(a){var b=a.ha,c=a.ia,d=a.D,e=a.F,f=Math.min(b,d),g=Math.min(c,e),b=Math.abs(d-b),c=Math.abs(e-c),e=new pc(f,g);return e.Ca.add(new hd(Ec,f+b,g)),e.Ca.add(new hd(Ec,f+b,g+c)),e.Ca.add(new hd(Ec,f,g+c).close()),a.type=oc,a.fb.add(e),a},window.go=fa,fa.version="1.2.8"}(window);